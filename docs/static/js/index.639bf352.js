!function(){var e,t,n,s,r={7555:function(e){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='-4 -4 8 8'%3e%3ccircle r='2' fill='%23fff'/%3e%3c/svg%3e"},4497:function(e){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 12 12' width='12' height='12' fill='none' stroke='%23dc3545'%3e%3ccircle cx='6' cy='6' r='4.5'/%3e%3cpath stroke-linejoin='round' d='M5.8 3.6h.4L6 6.5z'/%3e%3ccircle cx='6' cy='8.2' r='.6' fill='%23dc3545' stroke='none'/%3e%3c/svg%3e"},5117:function(e){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='%23343a40' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='m2 5 6 6 6-6'/%3e%3c/svg%3e"},1943:function(e){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='%23dee2e6' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='m2 5 6 6 6-6'/%3e%3c/svg%3e"},1920:function(e){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20'%3e%3cpath fill='none' stroke='%23fff' stroke-linecap='round' stroke-linejoin='round' stroke-width='3' d='M6 10h8'/%3e%3c/svg%3e"},859:function(e){"use strict";e.exports="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20'%3e%3cpath fill='none' stroke='%23fff' stroke-linecap='round' stroke-linejoin='round' stroke-width='3' d='m6 10 3 3 6-6'/%3e%3c/svg%3e"},2123:function(e,t,n){"use strict";e.exports=n.p+"static/font/twemoji.0418fc94.woff2"},9126:function(e,t,n){"use strict";e.exports=n.p+"static/font/fa-solid-900.6ca5a22c.ttf"},8300:function(e,t,n){"use strict";e.exports=n.p+"static/font/fa-solid-900.2584ff1a.woff2"},2648:function(e,t,n){"use strict";var s=n("2676"),r=n("5271"),i=n("4705"),a=n("3128"),l=n("4625"),c=n("2447"),o=n("2252"),u=n("3220"),d=n("3602");t.Z=function(){let{t:e}=(0,i.$G)(),t=(0,a.oR)(),n=(0,a.rV)(),[m,h]=(0,r.useState)(0),[x,p]=(0,r.useState)(!0),f=matchMedia("(prefers-color-scheme: dark)");function g(){p(f.matches)}return f.addEventListener("change",g),(0,r.useEffect)(g),(0,r.useEffect)(()=>{let e="light";(n.theme==a.Q2.dark||n.theme==a.Q2.system&&x)&&(e="dark"),n.theme==a.Q2.rabbitEar&&(e="rabbit"),document.documentElement.dataset.bsTheme=e}),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"container px-4",children:[(0,s.jsxs)("div",{className:"row gx-0 py-2",children:[(0,s.jsx)("div",{className:"col small text-muted",children:t.progress&&n.showInit&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("span",{className:"d-none d-sm-block",children:[t.ready?"":"Initializing"," ",t.progress.lines," lines and ",t.progress.marks," marks of rank \u2264 ",t.progress.rank,t.ready?" ready.":"..."]}),(0,s.jsxs)("div",{className:"d-sm-none",style:{lineHeight:1},children:[t.progress.lines," lines",(0,s.jsx)("br",{}),t.progress.marks," marks",t.ready?"":"..."]})]})}),(0,s.jsx)("div",{className:"col-auto",children:(0,s.jsx)(d.g,{})})]}),(0,s.jsx)("h1",{children:e("phrase.referenceFinder")}),(0,s.jsx)(o.s,{onSubmit:()=>h(0)}),t.coreError&&(0,s.jsxs)("div",{className:"text-danger mb-3",children:["Error: ",t.coreError]})||0==t.solutions.length&&(!t.ready||!t.running)&&(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("div",{children:e("tip.title")}),(0,s.jsxs)("ol",{children:[(0,s.jsx)("li",{children:e("tip.origin")}),(0,s.jsx)("li",{children:e("tip.exp",{exp:"1/sqrt(2)+sin(10)",interpolation:{escapeValue:!1}})})]})]})]}),(0,s.jsx)("section",{className:"solutions d-none d-sm-flex",children:t.solutions.length>0&&(0,s.jsx)("div",{className:"container px-4",children:(0,s.jsx)("div",{className:"row gx-2",children:t.solutions.map((t,n)=>(0,s.jsx)("div",{className:"col mb-2",style:{flex:"0 1 12rem"},children:(0,s.jsxs)("button",{type:"button",onClick:()=>h(n),className:"w-100 p-1 btn btn-ld col solution-preview "+(m==n?"active":""),children:[(0,s.jsx)(c.S,{data:t.diagrams[t.diagrams.length-1]}),(0,s.jsx)("div",{children:(0,l.l)(t)}),(0,s.jsxs)("div",{children:[e("phrase.error")," ",t.err]}),(0,s.jsxs)("div",{children:["rank ",t.rank]})]})},n))})})}),(0,s.jsx)("div",{className:"container px-4 flex-grow-1",children:t.solutions.map((e,t)=>(0,s.jsx)(l.W,{data:e,show:m==t,onSelect:()=>h(t)},t))}),(0,s.jsx)(u.$,{})]})}},3220:function(e,t,n){"use strict";n.d(t,{$:function(){return i}});var s=n("2676"),r=n("4705");function i(){let{t:e}=(0,r.$G)();return(0,s.jsx)("div",{className:"container mt-4 px-4",children:(0,s.jsxs)("footer",{className:"row justify-content-end flex-wrap pb-3",children:[(0,s.jsxs)("div",{className:"col-12 col-md-auto flex-grow-1",children:[e("phrase.coreVer"),": v4.0.2"]}),(0,s.jsxs)("div",{className:"col-12 col-md-auto",children:["\xa9 1999-2007 ",(0,s.jsx)("a",{href:"https://langorigami.com/article/referencefinder/",target:"_blank",children:"Robert J. Lang"})]}),(0,s.jsxs)("div",{className:"col-12 col-md-auto",children:["\xa9 2018-2022 ",(0,s.jsx)("a",{href:"https://github.com/robbykraft/ReferenceFinder",target:"_blank",children:"Robby Kraft"})]}),(0,s.jsxs)("div",{className:"col-12 col-md-auto",children:["\xa9 2024 ",(0,s.jsx)("a",{href:"https://github.com/mutsuntsai/reference-finder",target:"_blank",children:"Mu-Tsun Tsai"})]})]})})}},4723:function(e,t,n){"use strict";n.d(t,{X:function(){return i}});var s=n("2676"),r=n("5271");function i(e){let{value:t,className:n,children:i,onInput:a}=e,l=(0,r.useId)();return(0,s.jsxs)("div",{className:"form-check "+n,children:[(0,s.jsx)("input",{className:"form-check-input",type:"checkbox",id:l,checked:t,onChange:e=>a(e.currentTarget.checked)}),(0,s.jsx)("label",{className:"form-check-label",htmlFor:l,children:i})]})}n("4244")},8059:function(e,t,n){"use strict";n.d(t,{g:function(){return c}});var s=n("2676"),r=n("5271"),i=n("4705"),a=n("9136");n("5075");let l=document.createElement("canvas");function c(e){let{max:t,value:n,exp:c,onInput:o}=e,{t:u}=(0,i.$G)(),d=(0,r.useRef)(null),m=(0,r.useRef)(null),[h,x]=(0,r.useState)(null!=c?c:n.toString()),[p,f]=(0,r.useState)(n),[g,v]=(0,r.useState)(null!=c?c:n.toString());function j(e){return e.toFixed(4).replace(/0+$/,"").replace(/\.$/,"").replace(/^$/,"0")}function b(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p;return!isNaN(e)&&e>=0&&(void 0===t||e<=t)}function N(){return isNaN(Number(h))&&h!=p.toString()&&!isNaN(p)}return(0,r.useEffect)(()=>{(n!=p||void 0!==c&&c!=h)&&(x(null!=c?c:n.toString()),f(n))},[n,c]),(0,r.useEffect)(()=>{!b(n)&&(x("0"),f(0),o(0,"0"))}),(0,r.useEffect)(()=>{m.current.style.left=function(e,t){let n=l.getContext("2d");return n.font=getComputedStyle(e).font,n.measureText(t).width}(d.current,h)+"px"}),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"position-relative",children:[(0,s.jsxs)("div",{className:"exp-container",children:[(0,s.jsx)("input",{ref:d,type:"text","aria-label":"Math expression",className:"form-control exp-input "+(b()?"":"is-invalid"),value:h,onInput:e=>(function(e){x(e);let t=(0,a.Q)(e);f(t),b(t)&&(v(e),o(t,e))})(e.currentTarget.value),onBlur:function(){!b()&&(x(g),f(n))}}),(0,s.jsx)("div",{className:"suffix-container d-none d-sm-block",children:(0,s.jsx)("span",{className:"exp-suffix",ref:m,children:N()?"= ".concat(j(p)):""})})]}),(0,s.jsx)("div",{className:"exp-suffix-sm d-block d-sm-none",children:(0,s.jsx)("span",{children:N()?"= ".concat(j(p)):""})})]}),!b()&&(0,s.jsx)("div",{className:"text-danger small mt-1",children:void 0!==t?u("invalid.expMax",{max:t}):u("invalid.exp")})]})}},2800:function(e,t,n){"use strict";n.d(t,{G:function(){return a}});var s=n("2676"),r=n("5271"),i=n("4705");function a(e){let{max:t,min:n,value:a,onInput:l}=e,{t:c}=(0,i.$G)();void 0===n&&(n=0);let[o,u]=(0,r.useState)(a.toString());function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number(o);return Number.isSafeInteger(e)&&e>=n&&(void 0===t||e<=t)}return(0,r.useEffect)(()=>{Number(o)!=a&&u(a.toString())},[a]),(0,s.jsxs)("div",{className:"position-relative",children:[(0,s.jsx)("div",{className:"exp-container",children:(0,s.jsx)("input",{type:"number","aria-label":"Integer",className:"form-control exp-input "+(d()?"":"is-invalid"),value:o,onInput:e=>(function(e){u(e);let t=Number(e);d(t)&&l(t)})(e.currentTarget.value),onBlur:function(){d()?u(Number(a).toString()):u(a.toString())}})}),!d()&&(0,s.jsx)("div",{className:"text-danger small",children:void 0!==t?c("invalid.intMax",{min:n,max:t}):c("invalid.int",{min:n})})]})}},6048:function(e,t,n){"use strict";n.d(t,{i:function(){return l}});var s=n("2676"),r=n("4705"),i=n("3128"),a=n("8059");function l(e){let{label:t,value:n,onInput:l}=e,{t:c}=(0,r.$G)(),o=(0,i.XZ)();return(0,s.jsxs)("div",{className:"row gx-2 mt-2",children:[(0,s.jsxs)("label",{className:"col-auto col-form-label capitalize",children:[c("phrase.point"),t,": (",(0,s.jsx)("span",{className:"d-none d-sm-inline",children:" x ="})]}),(0,s.jsx)("div",{className:"col",children:(0,s.jsx)(a.g,{max:o.width,value:n.x,onInput:e=>l({...n,x:e})})}),(0,s.jsxs)("label",{className:"col-auto col-form-label",children:[",",(0,s.jsx)("span",{className:"d-none d-sm-inline",children:" y ="})]}),(0,s.jsx)("div",{className:"col",children:(0,s.jsx)(a.g,{max:o.height,value:n.y,onInput:e=>l({...n,y:e})})}),(0,s.jsx)("label",{className:"col-auto col-form-label",children:")"})]})}},3913:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var s=n("2676"),r=n("470");function i(e){let{label:t,children:n,help:i}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("label",{className:"col-form-label",children:[t,i&&(0,s.jsx)(r.b,{title:i})]}),(0,s.jsx)("div",{children:n})]})}},2252:function(e,t,n){"use strict";n.d(t,{s:function(){return x}});var s,r,i=n("2676"),a=n("2351"),l=n("32"),c=n("5271"),o=n("6048"),u=n("3128"),d=n("8217"),m=n("8962"),h=n("4705");function x(e){let{onSubmit:t}=e,{t:n}=(0,h.$G)(),s=(0,u.oR)(),r=(0,u.rV)(),x=(0,u.XZ)(),[p,f]=(0,c.useState)(1),[g,v]=(0,c.useState)({x:0,y:0}),[j,b]=(0,c.useState)({x:1,y:1}),N=(0,c.useMemo)(()=>a.Z.cp.rectangle(x.width,x.height),[x.width,x.height]),y=(0,c.useMemo)(()=>{let e=[[g.x,g.y]];return 2==p&&e.push([j.x,j.y]),e},[p,g.x,g.y,j.x,j.y]);return(0,i.jsxs)("div",{className:"row mt-3 justify-content-center",children:[(0,i.jsx)("div",{className:"col mb-3",style:{flex:"0 1 12rem"},children:(0,i.jsx)(l.M,{cp:N,points:y})}),(0,i.jsxs)("form",{className:"col mb-3",onSubmit:function(e){e.preventDefault();let n=[p,r.error,r.count,r.worstCaseError,g.x,g.y];2==p&&n.push(j.x,j.y),u.oR.setState({running:!0,solutions:[],coreError:null}),t(),(0,d.c)().postMessage(n.map(Number))},style:{flex:"1 0 36rem"},children:[(0,i.jsxs)("div",{className:"row mb-2 pb-1",children:[(0,i.jsx)("div",{className:"col-auto",children:(0,i.jsxs)("div",{className:"form-check",children:[(0,i.jsx)("input",{className:"form-check-input",type:"radio",name:"mode",id:"m1",checked:1==p,onChange:()=>f(1)}),(0,i.jsx)("label",{className:"form-check-label capitalize",htmlFor:"m1",children:n("phrase.findPoint")})]})}),(0,i.jsx)("div",{className:"col-auto",children:(0,i.jsxs)("div",{className:"form-check",children:[(0,i.jsx)("input",{className:"form-check-input",type:"radio",name:"mode",id:"m2",checked:2==p,onChange:()=>f(2)}),(0,i.jsx)("label",{className:"form-check-label capitalize",htmlFor:"m2",children:n("phrase.findLine")})]})})]}),(0,i.jsx)(o.i,{label:2==p?" 1":"",value:g,onInput:e=>v(e)}),2==p&&(0,i.jsx)(o.i,{label:" 2",value:j,onInput:e=>b(e)}),(0,i.jsxs)("div",{className:"row mt-2",children:[(0,i.jsx)("div",{className:"col",children:(0,i.jsx)(m.Z,{})}),(0,i.jsx)("div",{className:"col-auto text-end",children:(0,i.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:s.running,children:s.running&&!s.ready?(0,i.jsxs)("span",{className:"capitalize",children:[n("phrase.initializing"),"\xa0",(0,i.jsx)("i",{className:"fa-solid fa-spinner fa-spin"})]}):(0,i.jsxs)("span",{children:[(0,i.jsx)("i",{className:"fa-solid fa-play"}),"\xa0",(0,i.jsx)("span",{className:"capitalize",children:n("phrase.go")})]})})})]})]})]})}(s=r||(r={}))[s.point=1]="point",s[s.line=2]="line"},8962:function(e,t,n){"use strict";n.d(t,{Z:function(){return x}});var s=n("2676"),r=n("5271"),i=n("3739"),a=n("4705"),l=n("8059"),c=n("2800"),o=n("3128"),u=n("8217"),d=n("3913"),m=n("4723");n("253");var h=n("470");function x(){let{t:e}=(0,a.$G)(),t=(0,o.XZ)(),n=(0,o.rV)(),[x,f]=(0,r.useState)(structuredClone(n)),[g,v]=(0,r.useState)(structuredClone(t)),[j,b]=(0,r.useState)(0),N=(0,r.useRef)(null),y=(e,t)=>{let n=g.axioms.concat();n[e]=t,v({...g,axioms:n})};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("button",{type:"button",className:"btn btn-secondary",onClick:()=>{f(structuredClone(n)),v(structuredClone(t)),i.u_.getOrCreateInstance(N.current,{backdrop:"static"}).show()},children:[(0,s.jsx)("i",{className:"fa-solid fa-gear"}),"\xa0",(0,s.jsx)("span",{className:"capitalize",children:e("phrase.settings")})]}),(0,s.jsx)("div",{className:"modal fade",ref:N,children:(0,s.jsx)("div",{className:"modal-dialog modal-dialog-centered",children:(0,s.jsxs)("div",{className:"modal-content",children:[(0,s.jsxs)("div",{className:"modal-body",children:[(0,s.jsxs)("ul",{className:"nav nav-tabs mb-3",children:[(0,s.jsx)("li",{className:"nav-item",children:(0,s.jsx)("span",{className:"nav-link "+(0==j?"active":""),onClick:()=>b(0),children:e("settings.basic._")})}),(0,s.jsx)("li",{className:"nav-item",children:(0,s.jsx)("span",{className:"nav-link "+(1==j?"active":""),onClick:()=>b(1),children:e("settings.advanced._")})}),(0,s.jsx)("li",{className:"nav-item",children:(0,s.jsx)("span",{className:"nav-link "+(2==j?"active":""),onClick:()=>b(2),children:e("settings.display._")})})]}),(0,s.jsxs)("div",{className:0==j?"":"d-none",children:[(0,s.jsxs)("div",{className:"grid",children:[(0,s.jsx)(d.Z,{label:e("settings.basic.width"),children:(0,s.jsx)(l.g,{value:g.width,exp:g.widthExp,onInput:(e,t)=>v({...g,width:e,widthExp:t})})}),(0,s.jsx)(d.Z,{label:e("settings.basic.height"),children:(0,s.jsx)(l.g,{value:g.height,exp:g.heightExp,onInput:(e,t)=>v({...g,height:e,heightExp:t})})}),(0,s.jsx)(d.Z,{label:"Max rank",help:e("help.maxRank"),children:(0,s.jsx)(c.G,{value:g.maxRank,min:2,onInput:e=>v({...g,maxRank:e})})}),(0,s.jsx)(d.Z,{label:"Max lines",help:e("help.maxLines"),children:(0,s.jsx)(c.G,{value:g.maxLinesV1,onInput:e=>v({...g,maxLinesV1:e})})}),(0,s.jsx)(d.Z,{label:"Max marks",help:e("help.maxMarks"),children:(0,s.jsx)(c.G,{value:g.maxMarksV1,onInput:e=>v({...g,maxMarksV1:e})})})]}),(0,s.jsx)("hr",{}),(0,s.jsxs)("div",{className:"mb-1",children:[(0,s.jsxs)("h6",{children:[e("settings.basic.axioms._"),(0,s.jsx)(h.b,{title:e("help.axioms")})]}),(0,s.jsxs)(m.X,{value:g.axioms[0],onInput:e=>y(0,e),children:["O1 - ",e("settings.basic.axioms.O1")]}),(0,s.jsxs)(m.X,{value:g.axioms[1],onInput:e=>y(1,e),children:["O2 - ",e("settings.basic.axioms.O2")]}),(0,s.jsxs)(m.X,{value:g.axioms[2],onInput:e=>y(2,e),children:["O3 - ",e("settings.basic.axioms.O3")]}),(0,s.jsxs)(m.X,{value:g.axioms[3],onInput:e=>y(3,e),children:["O4 - ",e("settings.basic.axioms.O4")]}),(0,s.jsxs)(m.X,{value:g.axioms[4],onInput:e=>y(4,e),children:["O5 - ",e("settings.basic.axioms.O5")]}),(0,s.jsxs)(m.X,{value:g.axioms[5],onInput:e=>y(5,e),children:["O6 - ",e("settings.basic.axioms.O6")]}),(0,s.jsxs)(m.X,{value:g.axioms[6],onInput:e=>y(6,e),children:["O7 - ",e("settings.basic.axioms.O7")]})]})]}),(0,s.jsxs)("div",{className:"grid "+(1==j?"":"d-none"),children:[(0,s.jsx)(d.Z,{label:"X divisions",help:e("help.divisions"),children:(0,s.jsx)(c.G,{value:g.numX,min:100,max:46e3,onInput:e=>v({...g,numX:e})})}),(0,s.jsx)(d.Z,{label:"Y divisions",help:e("help.divisions"),children:(0,s.jsx)(c.G,{value:g.numY,min:100,max:46e3,onInput:e=>v({...g,numY:e})})}),(0,s.jsx)(d.Z,{label:"Angle divisions",help:e("help.lineDivisions"),children:(0,s.jsx)(c.G,{value:g.numA,min:100,max:46e3,onInput:e=>v({...g,numA:e})})}),(0,s.jsx)(d.Z,{label:"Radial divisions",help:e("help.lineDivisions"),children:(0,s.jsx)(c.G,{value:g.numD,min:100,max:46e3,onInput:e=>v({...g,numD:e})})}),(0,s.jsx)(d.Z,{label:"Min aspect ratio",help:e("help.minAspectRatio"),children:(0,s.jsx)(l.g,{value:g.minAspectRatio,exp:g.minAspectRatioExp,onInput:(e,t)=>v({...g,minAspectRatio:e,minAspectRatioExp:t})})}),(0,s.jsx)(d.Z,{label:"Min angle sine",help:e("help.minAngle"),children:(0,s.jsx)(l.g,{value:g.minAngleSine,exp:g.minAngleSineExp,onInput:(e,t)=>v({...g,minAngleSine:e,minAngleSineExp:t})})}),(0,s.jsx)(d.Z,{label:"Visibility matters",help:e("help.visibility"),children:(0,s.jsx)(m.X,{className:"col-form-label",value:g.visibility,onInput:e=>v({...g,visibility:e})})}),(0,s.jsx)("div",{className:"mt-n2",style:{gridColumn:"1/3"},children:(0,s.jsx)("hr",{})}),(0,s.jsx)(d.Z,{label:"Line error mode",help:e("help.lineError"),children:(0,s.jsxs)("select",{className:"form-select",value:n.worstCaseError?"1":"",onChange:e=>o.rV.setState({worstCaseError:!!e.currentTarget.value}),children:[(0,s.jsx)("option",{value:"1",children:"Worst-case error"}),(0,s.jsx)("option",{value:"",children:"Pythagorean error"})]})}),(0,s.jsx)(d.Z,{label:"Good enough error",help:e("help.goodEnoughError"),children:(0,s.jsx)(l.g,{value:n.error,exp:n.errorExp,onInput:(e,t)=>o.rV.setState({error:e,errorExp:t})})}),(0,s.jsx)(d.Z,{label:"Solution count",children:(0,s.jsx)(c.G,{min:1,max:20,value:n.count,onInput:e=>o.rV.setState({count:e})})})]}),(0,s.jsxs)("div",{className:2==j?"":"d-none",children:[(0,s.jsx)("div",{className:"grid",children:(0,s.jsx)(d.Z,{label:e("settings.display.theme._"),children:(0,s.jsxs)("select",{value:n.theme,className:"form-select",onChange:e=>o.rV.setState({theme:Number(e.currentTarget.value)}),children:[(0,s.jsx)("option",{value:o.Q2.system,children:e("settings.display.theme.system")}),(0,s.jsx)("option",{value:o.Q2.light,children:e("settings.display.theme.light")}),(0,s.jsx)("option",{value:o.Q2.dark,children:e("settings.display.theme.dark")}),(0,s.jsx)("option",{value:o.Q2.rabbitEar,children:"RabbitEar"})]})})}),(0,s.jsxs)("div",{className:"mt-3 mb-1",children:[(0,s.jsx)(m.X,{value:n.showInit,onInput:e=>o.rV.setState({showInit:e}),children:e("settings.display.showInit")}),(0,s.jsx)(m.X,{value:n.showAxiom,onInput:e=>o.rV.setState({showAxiom:e}),children:e("settings.display.showAxiom")})]})]}),p(t,g)&&(0,s.jsxs)("div",{className:"text-warning mt-2",children:["* ",e("settings.reInit")]})]}),(0,s.jsxs)("div",{className:"modal-footer",children:[(0,s.jsx)("div",{className:"flex-grow-1",children:(0,s.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>{o.rV.setState(structuredClone(o.he)),v(structuredClone(o.We))},children:e("settings.reset")})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("button",{type:"button",className:"btn btn-secondary me-2 capitalize","data-bs-dismiss":"modal",onClick:()=>{o.rV.setState(x)},children:e("settings.cancel")}),(0,s.jsx)("button",{type:"button",className:"btn btn-primary","data-bs-dismiss":"modal",onClick:()=>{p(t,g)&&(o.XZ.setState(g),(0,u.$)(g))},children:e("settings.ok")})]})]})]})})})]})}function p(e,t){for(let n in e)if(Array.isArray(e[n])){if(p(e[n],t[n]))return!0}else if(e[n]!==t[n])return!0;return!1}},4625:function(e,t,n){"use strict";n.d(t,{W:function(){return o},l:function(){return c}});var s=n("2676"),r=n("4705"),i=n("6479"),a=n("2447"),l=n("5271");function c(e){return"string"==typeof e.solution?e.solution:"(".concat(e.solution[0].toFixed(4),", ").concat(e.solution[1].toFixed(4),")")}function o(e){let{data:t,show:n,onSelect:o}=e,{t:u}=(0,r.$G)(),d=(0,l.useRef)(null),m=c(t);return(0,s.jsxs)("div",{className:"card mt-3 "+(n?"":"d-sm-none"),style:{overflow:"hidden"},children:[(0,s.jsxs)("div",{className:"card-header d-none d-sm-block",children:[(0,s.jsxs)("span",{className:"d-inline-block capitalize",children:[u("phrase.solution")," ",m,","]})," ",(0,s.jsxs)("span",{className:"d-inline-block",children:[u("phrase.error")," ",t.err,","]})," ",(0,s.jsxs)("span",{className:"d-inline-block",children:["rank ",t.rank]})]}),n?(0,s.jsxs)("div",{ref:d,className:"card-header d-sm-none text-bg-primary",children:[(0,s.jsxs)("span",{className:"d-inline-block capitalize",children:[u("phrase.solution")," ",m,","]})," ",(0,s.jsxs)("span",{className:"d-inline-block",children:[u("phrase.error")," ",t.err,","]})," ",(0,s.jsxs)("span",{className:"d-inline-block",children:["rank ",t.rank]})]}):(0,s.jsx)("div",{ref:d,className:"card-header d-sm-none",onClick:()=>{o(),setTimeout(()=>{var e;return null===(e=d.current)||void 0===e?void 0:e.scrollIntoView()},0)},style:{cursor:"pointer"},children:(0,s.jsxs)("div",{className:"row gx-0 justify-content-center align-items-top",children:[(0,s.jsx)("div",{className:"col solution-preview",style:{flex:"0 1 9rem"},children:(0,s.jsx)(a.S,{data:t.diagrams[t.diagrams.length-1]})}),(0,s.jsxs)("div",{className:"col mb-2 ps-3 mt-2",style:{flex:"1 0 8rem"},children:[(0,s.jsx)("div",{children:t.solution}),(0,s.jsxs)("div",{children:[u("phrase.error")," ",t.err]}),(0,s.jsxs)("div",{children:["rank ",t.rank]})]})]})}),(0,s.jsxs)("div",{className:"card-body "+(n?"":"d-none"),children:[0==t.steps.length&&(0,s.jsxs)("div",{className:"row justify-content-center",children:[(0,s.jsx)("div",{className:"col",style:{flex:"0 1 12rem"},children:(0,s.jsx)(a.S,{data:t.diagrams[0],last:!0})}),(0,s.jsx)("div",{className:"col p-2",style:{flex:"1 1 12rem"}})]}),t.steps.map((e,n)=>(0,s.jsxs)("div",{className:"row justify-content-center",children:[(0,s.jsx)("div",{className:"col",style:{flex:"0 1 12rem"},children:(0,s.jsx)(a.S,{data:t.diagrams[n],last:n==t.steps.length-1})}),(0,s.jsx)("div",{className:"col p-2",style:{flex:"1 1 12rem"},children:(0,s.jsx)("ol",{start:n+1,children:(0,s.jsx)(i.B,{data:e,last:n==t.steps.length-1})})})]},n))]})]})}},6479:function(e,t,n){"use strict";n.d(t,{B:function(){return l}});var s=n("2676"),r=n("4705"),i=n("3128");let a=/([\u3040-\u30FF\u4E00-\u9FFF\u3400-\u4DBF\uF900-\uFAFF]) ([\u3040-\u30FF\u4E00-\u9FFF\u3400-\u4DBF\uF900-\uFAFF])/g;function l(e){let{data:t,last:n}=e,{t:l}=(0,r.$G)(),c=(0,i.rV)(),o=structuredClone(t);function u(e){e.p0=d(e.p0,!0),e.p1=d(e.p1,!0),e.l0=d(e.l0),e.l1=d(e.l1)}function d(e,t){return"string"!=typeof e?e:e=e==e.toLowerCase()?l("paper."+e):t?l("phrase.point")+" "+e:l("phrase.line")+" "+e}function m(e){for(;e.match(a);)e=e.replace(a,"$1$2");return e}return u(o),o.intersection&&u(o.intersection),(0,s.jsx)("li",{children:0==o.axiom?m(l("intersection_solution",{...o})):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{children:[c.showAxiom&&(0,s.jsxs)("span",{children:["[O",o.axiom,"] "]}),m(n&&!o.intersection?l("axiom_solution.".concat(o.axiom-1),{...o}):l("axiom.".concat(o.axiom-1),{...o}))]}),o.intersection&&(0,s.jsx)("div",{children:m(n?l("intersection_solution",{...o.intersection}):l("intersection",{...o.intersection}))})]})})}},2447:function(e,t,n){"use strict";n.d(t,{S:function(){return l}});var s=n("2351"),r=n("6758");n("6520");var i=n("3128");function a(e,t,n){let s=e.edges.text(t.text,t.pt);return s.setAttribute("transform","translate(".concat(n[0]," ").concat(2*t.pt[1]-.05+n[1],") scale(1 -1)")),s}function l(e){let{data:t,last:n}=e,{width:l,height:c}=t[0];return(0,r.n)({render:function(e){let r=e.origami(s.Z.cp.rectangle(l,c));for(let e of(r.setAttribute("transform","translate(0 ".concat(c,") scale(1 -1)")),t))if(e){if(e.type==i.Hd.point&&r.edges.circle(e.pt,e.style==i.SC.normal?.02:.03).classList.add("point-"+i.SC[e.style]),e.type==i.Hd.line&&r.edges.line(e.from,e.to).classList.add(e.style==i.TD.valley&&n?"target-line":"line-"+i.TD[e.style]),e.type==i.Hd.arc){let{radius:t,center:n}=e,{from:s,to:a}=e;!e.ccw&&([s,a]=[a,s]);let l=Math.abs(a-s)/8;s+=Math.min(.075/t,l),a-=Math.min(.075/t,l);let c=r.edges.arc(n[0],n[1],t,s,a);c.classList.add("arc-"+i.TD[e.style]),e.ccw&&c.classList.add("reverse"),t<.5&&(c.style.strokeWidth=Math.max(.005,.015*t/.5).toString())}if(e.type==i.Hd.label){let n=function(e,t){let n=t.filter(t=>t&&t.type==i.Hd.label&&t!=e).map(t=>{let n=e.pt[0]-t.pt[0],s=e.pt[1]-t.pt[1],r=Math.sqrt(n*n+s*s);return[n/r/r,s/r/r]});if(0==n.length)return[0,0];let s=n.map(e=>e[0]).reduce((e,t)=>e+t,0)/n.length,r=n.map(e=>e[1]).reduce((e,t)=>e+t,0)/n.length,a=Math.sqrt(s*s+r*r);return[.09*s/a,.09*r/a]}(e,t);a(r,e,n).classList.add("label-border"),a(r,e,n).classList.add("label-"+i.gF[e.style])}}},width:l,height:c})}},32:function(e,t,n){"use strict";n.d(t,{M:function(){return a}});var s=n("2351"),r=n("3128"),i=n("6758");function a(e){let{cp:t,points:n}=e,{width:a,height:l}=(0,r.XZ)(),c=s.Z.rect(0,0,a,l);return(0,i.n)({render:function(e){e.innerHTML='<defs><marker id="arrow" viewBox="0 0 10 10" refX="5" refY="3" markerWidth="10" markerHeight="10" orient="auto-start-reverse"><path d="M 0 0 L 6 3 L 0 6 L 2 3 z" /></marker></defs>';let r=e.origami(t);if(r.setAttribute("transform","translate(0 ".concat(l,") scale(1 -1)")),n){for(let e of n)r.vertices.circle(e,.03).classList.add("target-point");if(2==n.length){let e=c.clip(s.Z.line.fromPoints(n[0],n[1]));try{r.edges.line(e[0],e[1]).classList.add("target-line")}catch{}}}},width:a,height:l})}},6758:function(e,t,n){"use strict";n.d(t,{n:function(){return l}});var s=n("2676"),r=n("2351"),i=n("5271");n("2923");function a(e){for(;e.lastChild;)e.removeChild(e.lastChild)}function l(e){let{render:t,width:n,height:l}=e,c=(0,i.useRef)(null),[o,u]=(0,i.useState)(null);return(0,i.useEffect)(()=>{if(!c.current)return;a(c.current);let e=function(e,t){let n=r.Z.svg();return n.size(e,t).padding(.15).strokeWidth(.01),n}(n,l);c.current.appendChild(e),u(e)},[c.current,n,l]),(0,i.useEffect)(()=>{o&&(a(o),t(o))}),(0,s.jsx)("div",{ref:c})}},470:function(e,t,n){"use strict";n.d(t,{b:function(){return a}});var s=n("2676"),r=n("5271"),i=n("3739");function a(e){let{title:t}=e,n=(0,r.useRef)(null);return(0,r.useEffect)(()=>{n.current&&i.u.getOrCreateInstance(n.current)}),(0,s.jsx)("i",{className:"fa-solid fa-circle-info text-info ms-2","data-bs-toggle":"tooltip","data-bs-title":t,ref:n})}n("4036")},9985:function(e,t,n){"use strict";var s=n("2676"),r=n("5271"),i=n("8751"),a=n("2648"),l=n("1999");n("4807"),n("5949"),!("structuredClone"in globalThis)&&(globalThis.structuredClone=l.ZP),i.createRoot(document.getElementById("root")).render((0,s.jsx)(r.StrictMode,{children:(0,s.jsx)(a.Z,{})}))},9136:function(e,t,n){"use strict";n.d(t,{Q:function(){return i}});var s=n("7691");let r=new(n.n(s)());function i(e){try{return e=e.replace(/sqrt/g,"root"),r.eval(e)}catch{return NaN}}},3128:function(e,t,n){"use strict";n.d(t,{Hd:function(){return o},Q2:function(){return c},SC:function(){return u},TD:function(){return d},We:function(){return g},XZ:function(){return b},gF:function(){return m},he:function(){return p},oR:function(){return v},rV:function(){return j}});var s,r,i,a,l,c,o,u,d,m,h=n("3966"),x=n("679");(s=c||(c={}))[s.system=0]="system",s[s.light=1]="light",s[s.dark=2]="dark",s[s.rabbitEar=3]="rabbitEar";let p={showInit:!0,showAxiom:!1,theme:0,error:.005,errorExp:"1/200",worstCaseError:!0,count:5},f={progress:null,ready:!1,running:!1,coreError:null,solutions:[]},g={width:1,widthExp:"1",height:1,heightExp:"1",maxRank:6,maxLinesV1:6e5,maxMarksV1:6e5,numX:5e3,numY:5e3,numA:5e3,numD:5e3,minAspectRatio:.1,minAspectRatioExp:"1/10",minAngleSine:.342,minAngleSineExp:"sin(20)",visibility:!0,axioms:[!0,!0,!0,!0,!0,!0,!0]},v=(0,h.Ue)(()=>f),j=(0,h.Ue)((0,x.tJ)(()=>p,{name:"settings"})),b=(0,h.Ue)((0,x.tJ)(()=>g,{name:"db"}));(r=o||(o={}))[r.point=0]="point",r[r.line=1]="line",r[r.arc=2]="arc",r[r.poly=3]="poly",r[r.label=4]="label",(i=u||(u={}))[i.normal=0]="normal",i[i.highlight=1]="highlight",i[i.action=2]="action",(a=d||(d={}))[a.crease=0]="crease",a[a.edge=1]="edge",a[a.highlight=2]="highlight",a[a.valley=3]="valley",a[a.mountain=4]="mountain",a[a.arrow=5]="arrow",(l=m||(m={}))[l.normal=0]="normal",l[l.highlight=1]="highlight",l[l.action=2]="action"},8217:function(e,t,n){"use strict";let s;n.d(t,{$:function(){return a},c:function(){return i}});var r=n("3128");function i(){return s}function a(e){s&&(s.terminate(),r.oR.setState({running:!1,ready:!1,progress:null}),console.log("Reset worker")),(s=new Worker(new URL(n.p+n.u("813"),n.b))).postMessage([e.width,e.height,e.maxRank,e.maxLinesV1,e.maxMarksV1,...e.axioms.map(Number),e.numX,e.numY,e.numA,e.numD,e.minAspectRatio,e.minAngleSine,e.visibility]),s.onmessage=e=>{let t=e.data;if(t.text){let e=t.text,{running:n,ready:s,solutions:i}=r.oR.getState();if(!s&&(e.startsWith("{")?r.oR.setState({progress:JSON.parse(e)}):console.log(e)),"Ready"==e){r.oR.setState({running:n&&!s,ready:!0});return}if(!n||!s)return;let a=JSON.parse(e),l=a.steps;for(let e of(a.steps=[],l))e.axiom>0||e==l[l.length-1]?a.steps.push(e):a.steps[a.steps.length-1].intersection=e;i.push(a),r.oR.setState({solutions:i.concat()})}t.err&&(r.oR.setState({coreError:t.err}),console.error(Error(t.err)))}}a(r.XZ.getState())},4244:function(e,t,n){"use strict";n.r(e.exports={})},5075:function(e,t,n){"use strict";n.r(e.exports={})},253:function(e,t,n){"use strict";n.r(e.exports={})},6520:function(e,t,n){"use strict";n.r(e.exports={})},2923:function(e,t,n){"use strict";n.r(e.exports={})},4036:function(e,t,n){"use strict";n.r(e.exports={})},5949:function(e,t,n){"use strict";n.r(e.exports={})},4786:function(e,t,n){"use strict";n.r(e.exports={})},4363:function(e){e.exports="#arrow"}},i={};function a(e){var t=i[e];if(void 0!==t)return t.exports;var n=i[e]={exports:{}};return r[e](n,n.exports,a),n.exports}a.m=r,a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,{a:t}),t},a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.k=function(e){return""+e+".css"},a.u=function(e){return"static/js/async/ref.187728d7.js"},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},e=[],a.O=function(t,n,s,r){if(n){r=r||0;for(var i=e.length;i>0&&e[i-1][2]>r;i--)e[i]=e[i-1];e[i]=[n,s,r];return}for(var l=1/0,i=0;i<e.length;i++){for(var n=e[i][0],s=e[i][1],r=e[i][2],c=!0,o=0;o<n.length;o++)l>=r&&Object.keys(a.O).every(function(e){return a.O[e](n[o])})?n.splice(o--,1):(c=!1,r<l&&(l=r));if(c){e.splice(i--,1);var u=s();void 0!==u&&(t=u)}}return t},a.p="/reference-finder/",a.b=document.baseURI||self.location.href,t={980:0},a.O.j=function(e){return 0===t[e]},n=function(e,n){var s=n[0],r=n[1],i=n[2],l,c,o=0;if(s.some(function(e){return 0!==t[e]})){for(l in r)a.o(r,l)&&(a.m[l]=r[l]);if(i)var u=i(a)}for(e&&e(n);o<s.length;o++)c=s[o],a.o(t,c)&&t[c]&&t[c][0](),t[c]=0;return a.O(u)},(s=self.webpackChunkreference_finder=self.webpackChunkreference_finder||[]).forEach(n.bind(null,0)),s.push=n.bind(null,s.push.bind(s));var l=a.O(void 0,["495","606","966","971"],function(){return a("9985")});a.O(l)}();