"use strict";(self.webpackChunkreference_finder=self.webpackChunkreference_finder||[]).push([[664],{381:(e,t,r)=>{r.d(t,{A:()=>Ed});const n="undefined",o="number",c="object",s="index",i="vertices",a="edges",l="faces",u="boundaries",d="vertices_coords",f="edges_vertices",g="faces_edges",h="edges_assignment",p="edges_foldAngle",m="faces_layer",v="boundary",_="front",y="back",b="foldedForm",E="black",x="white",A="none",O=typeof window!==n&&typeof window.document!==n;typeof process!==n&&null!=process.versions&&process.versions.node;const k=typeof self===c&&self.constructor&&"DedicatedWorkerGlobalScope"===self.constructor.name,M=[];M[10]='"error 010: window" not set. if using node/deno, include package @xmldom/xmldom, set to the main export ( ear.window = xmldom; )';const w={window:void 0};O&&(w.window=window);const j=()=>{if(void 0===w.window)throw M[10];return w.window};var P=Object.create(null);const S=function(e){switch(e.constructor.name){case"vector":case"matrix":case"segment":case"ray":case"line":case"circle":case"ellipse":case"rect":case"polygon":return e.constructor.name}if("object"===typeof e){if(null!=e.radius)return"circle";if(null!=e.width)return"rect";if(null!=e.x||"number"===typeof e[0])return"vector";if(null!=e[0]&&e[0].length&&("number"===typeof e[0].x||"number"===typeof e[0][0]))return"segment";if(null!=e.vector&&null!=e.origin)return"line"}},C=(e,t)=>t.length===e?t:Array(e).fill(0).map(((e,r)=>t[r]?t[r]:e)),L=(e,t)=>{const r=e.length>t.length?e.length:t.length;return[e,t].map((e=>C(r,e)))},N=function(e){const t="".concat(e).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return t?Math.max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0},z=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15;if("number"!==typeof e)return e;const r=parseFloat(e.toFixed(t));return N(r)===Math.min(t,N(e))?e:r},F=e=>null!=e&&"function"===typeof e[Symbol.iterator],I=function(){switch(arguments.length){case void 0:case 0:return Array.from(arguments);case 1:return F(arguments[0])&&"string"!==typeof arguments[0]?I(...arguments[0]):[arguments[0]];default:return Array.from(arguments).map((e=>F(e)?[...I(e)]:e))}},V=function(){switch(arguments.length){case void 0:case 0:return Array.from(arguments);case 1:return F(arguments[0])&&"string"!==typeof arguments[0]?V(...arguments[0]):[arguments[0]];default:return Array.from(arguments).map((e=>F(e)?[...V(e)]:e)).reduce(((e,t)=>e.concat(t)),[])}};var B=Object.freeze({__proto__:null,resize:C,resizeUp:L,resizeDown:(e,t)=>{const r=e.length>t.length?t.length:e.length;return[e,t].map((e=>C(r,e)))},cleanNumber:z,semiFlattenArrays:I,flattenArrays:V}),T=Object.create(null);const q=1e-6,R=180/Math.PI,U=Math.PI/180,D=2*Math.PI;var G=Object.freeze({__proto__:null,EPSILON:q,R2D:R,D2R:U,TWO_PI:D});const W=()=>!0,Z=e=>e*e,H=(e,t)=>e+(t||0),J=e=>void 0!==e,Y=e=>Math.atan2(e[1],e[0]),X=e=>[Math.cos(e),Math.sin(e)],K=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:q;return Math.abs(e-t)<r},$=function(e,t){return K(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:q)?0:Math.sign(t-e)},Q=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:q;for(let n=0;n<Math.max(e.length,t.length);n+=1)if(!K(e[n]||0,t[n]||0,r))return!1;return!0},ee=function(e){return e>-(arguments.length>1&&void 0!==arguments[1]?arguments[1]:q)},te=function(e){return e>(arguments.length>1&&void 0!==arguments[1]?arguments[1]:q)},re=W,ne=W,oe=ee,ce=te,se=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:q;return e>-t&&e<1+t},ie=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:q;return e>t&&e<1-t},ae=e=>e<-q?0:e,le=e=>e<-q?0:e>1.000001?1:e;var ue=Object.freeze({__proto__:null,fnTrue:W,fnSquare:Z,fnAdd:H,fnNotUndefined:J,fnAnd:(e,t)=>e&&t,fnCat:(e,t)=>e.concat(t),fnVec2Angle:Y,fnToVec2:X,fnEqual:(e,t)=>e===t,fnEpsilonEqual:K,fnEpsilonSort:$,fnEpsilonEqualVectors:Q,include:ee,exclude:te,includeL:re,excludeL:ne,includeR:oe,excludeR:ce,includeS:se,excludeS:ie,lineLimiter:e=>e,rayLimiter:ae,segmentLimiter:le});const de=e=>Math.sqrt(e.map(Z).reduce(H,0)),fe=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),ge=e=>e.map(Z).reduce(H,0),he=e=>{const t=de(e);return 0===t?e:e.map((e=>e/t))},pe=e=>{const t=fe(e);return 0===t?e:[e[0]/t,e[1]/t]},me=(e,t)=>e.map((e=>e*t)),ve=(e,t)=>[e[0]*t,e[1]*t],_e=(e,t)=>e.map(((e,r)=>e+(t[r]||0))),ye=(e,t)=>[e[0]+t[0],e[1]+t[1]],be=(e,t)=>e.map(((e,r)=>e-(t[r]||0))),Ee=(e,t)=>[e[0]-t[0],e[1]-t[1]],xe=(e,t)=>e.map(((r,n)=>e[n]*t[n])).reduce(H,0),Ae=(e,t)=>e[0]*t[0]+e[1]*t[1],Oe=(e,t)=>e.map(((e,r)=>(e+t[r])/2)),ke=function(){if(0===arguments.length)return[];const e=arguments[0].length>0?arguments[0].length:0,t=Array(e).fill(0);return Array.from(arguments).forEach((e=>t.forEach(((r,n)=>{t[n]+=e[n]||0})))),t.map((e=>e/arguments.length))},Me=(e,t,r)=>{const n=1-r;return e.map(((e,o)=>e*n+(t[o]||0)*r))},we=(e,t)=>e[0]*t[1]-e[1]*t[0],je=(e,t)=>[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]],Pe=(e,t)=>Math.sqrt(e.map(((r,n)=>(e[n]-t[n])**2)).reduce(H,0)),Se=(e,t)=>{const r=e[0]-t[0],n=e[1]-t[1];return Math.sqrt(r*r+n*n)},Ce=e=>e.map((e=>-e)),Le=e=>[-e[1],e[0]],Ne=e=>[e[1],-e[0]],ze=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:q;return e.map((e=>Math.abs(e))).reduce(H,0)<t},Fe=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:q;return 1-Math.abs(xe(he(e),he(t)))<r};var Ie=Object.freeze({__proto__:null,magnitude:de,magnitude2:fe,magSquared:ge,normalize:he,normalize2:pe,scale:me,scale2:ve,add:_e,add2:ye,subtract:be,subtract2:Ee,dot:xe,dot2:Ae,midpoint:Oe,midpoint2:(e,t)=>ve(ye(e,t),.5),average:ke,lerp:Me,cross2:we,cross3:je,distance:Pe,distance2:Se,distance3:(e,t)=>{const r=e[0]-t[0],n=e[1]-t[1],o=e[2]-t[2];return Math.sqrt(r*r+n*n+o*o)},flip:Ce,rotate90:Le,rotate270:Ne,degenerate:ze,parallel:Fe,parallel2:function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:q;return Math.abs(we(e,t))<r}});const Ve=Object.freeze([1,0,0,0,1,0,0,0,1]),Be=Object.freeze(Ve.concat(0,0,0)),Te=e=>Be.map(((t,r)=>Math.abs(t-e[r])<q)).reduce(((e,t)=>e&&t),!0),qe=(e,t)=>[e[0]*t[0]+e[3]*t[1]+e[6]*t[2]+e[9],e[1]*t[0]+e[4]*t[1]+e[7]*t[2]+e[10],e[2]*t[0]+e[5]*t[1]+e[8]*t[2]+e[11]],Re=(e,t,r)=>({vector:[e[0]*t[0]+e[3]*t[1]+e[6]*t[2],e[1]*t[0]+e[4]*t[1]+e[7]*t[2],e[2]*t[0]+e[5]*t[1]+e[8]*t[2]],origin:[e[0]*r[0]+e[3]*r[1]+e[6]*r[2]+e[9],e[1]*r[0]+e[4]*r[1]+e[7]*r[2]+e[10],e[2]*r[0]+e[5]*r[1]+e[8]*r[2]+e[11]]}),Ue=(e,t)=>[e[0]*t[0]+e[3]*t[1]+e[6]*t[2],e[1]*t[0]+e[4]*t[1]+e[7]*t[2],e[2]*t[0]+e[5]*t[1]+e[8]*t[2],e[0]*t[3]+e[3]*t[4]+e[6]*t[5],e[1]*t[3]+e[4]*t[4]+e[7]*t[5],e[2]*t[3]+e[5]*t[4]+e[8]*t[5],e[0]*t[6]+e[3]*t[7]+e[6]*t[8],e[1]*t[6]+e[4]*t[7]+e[7]*t[8],e[2]*t[6]+e[5]*t[7]+e[8]*t[8],e[0]*t[9]+e[3]*t[10]+e[6]*t[11]+e[9],e[1]*t[9]+e[4]*t[10]+e[7]*t[11]+e[10],e[2]*t[9]+e[5]*t[10]+e[8]*t[11]+e[11]],De=e=>e[0]*e[4]*e[8]-e[0]*e[7]*e[5]-e[3]*e[1]*e[8]+e[3]*e[7]*e[2]+e[6]*e[1]*e[5]-e[6]*e[4]*e[2],Ge=e=>{const t=De(e);if(Math.abs(t)<1e-6||Number.isNaN(t)||!Number.isFinite(e[9])||!Number.isFinite(e[10])||!Number.isFinite(e[11]))return;const r=[e[4]*e[8]-e[7]*e[5],-e[1]*e[8]+e[7]*e[2],e[1]*e[5]-e[4]*e[2],-e[3]*e[8]+e[6]*e[5],e[0]*e[8]-e[6]*e[2],-e[0]*e[5]+e[3]*e[2],e[3]*e[7]-e[6]*e[4],-e[0]*e[7]+e[6]*e[1],e[0]*e[4]-e[3]*e[1],-e[3]*e[7]*e[11]+e[3]*e[8]*e[10]+e[6]*e[4]*e[11]-e[6]*e[5]*e[10]-e[9]*e[4]*e[8]+e[9]*e[5]*e[7],e[0]*e[7]*e[11]-e[0]*e[8]*e[10]-e[6]*e[1]*e[11]+e[6]*e[2]*e[10]+e[9]*e[1]*e[8]-e[9]*e[2]*e[7],-e[0]*e[4]*e[11]+e[0]*e[5]*e[10]+e[3]*e[1]*e[11]-e[3]*e[2]*e[10]-e[9]*e[1]*e[5]+e[9]*e[2]*e[4]],n=1/t;return r.map((e=>e*n))},We=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Ve.concat(e,t,r)},Ze=(e,t,r,n,o)=>{const c=Ve.concat([0,1,2].map((e=>t[e]||0))),s=Math.cos(e),i=Math.sin(e);return c[3*r+r]=s,c[3*r+n]=(o?1:-1)*i,c[3*n+r]=(o?-1:1)*i,c[3*n+n]=s,c},He=function(e){return Ze(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0],1,2,!0)},Je=function(e){return Ze(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0],0,2,!1)},Ye=function(e){return Ze(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0],0,1,!0)},Xe=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0,0];const n=[0,1,2].map((e=>r[e]||0)),[o,c,s]=C(3,he(t)),i=Math.cos(e),a=Math.sin(e),l=1-i,u=Ve.concat(-n[0],-n[1],-n[2]),d=Ve.concat(n[0],n[1],n[2]);return Ue(d,Ue([l*o*o+i,l*c*o+s*a,l*s*o-c*a,l*o*c-s*a,l*c*c+i,l*s*c+o*a,l*o*s+c*a,l*c*s-o*a,l*s*s+i,0,0,0],u))},Ke=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];return[e,0,0,0,e,0,0,0,e,e*-t[0]+t[0],e*-t[1]+t[1],e*-t[2]+t[2]]},$e=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0];const r=Math.atan2(e[1],e[0]),n=Math.cos(r),o=Math.sin(r),c=Math.cos(-r),s=Math.sin(-r),i=n*c+o*s,a=n*-s+o*c,l=o*c+-n*s,u=o*-s+-n*c;return[i,a,0,l,u,0,0,0,1,t[0]+i*-t[0]+-t[1]*l,t[1]+a*-t[0]+-t[1]*u,0]};var Qe=Object.freeze({__proto__:null,identity3x3:Ve,identity3x4:Be,isIdentity3x4:Te,multiplyMatrix3Vector3:qe,multiplyMatrix3Line3:Re,multiplyMatrices3:Ue,determinant3:De,invertMatrix3:Ge,makeMatrix3Translate:We,makeMatrix3RotateX:He,makeMatrix3RotateY:Je,makeMatrix3RotateZ:Ye,makeMatrix3Rotate:Xe,makeMatrix3Scale:Ke,makeMatrix3ReflectZ:$e});const et=(e,t)=>({vector:e||[],origin:t||[]}),tt=function(){if(arguments[0]instanceof T.vector)return arguments[0];let e=V(arguments);return e.length>0&&"object"===typeof e[0]&&null!==e[0]&&!Number.isNaN(e[0].x)&&(e=["x","y","z"].map((t=>e[0][t])).filter(J)),e.filter((e=>"number"===typeof e))},rt=function(){return I(arguments).map((e=>tt(e)))},nt=function(){if(arguments[0]instanceof T.segment)return arguments[0];const e=I(arguments);return 4===e.length?[[e[0],e[1]],[e[2],e[3]]]:e.map((e=>tt(e)))},ot=function(){const e=I(arguments);return 0===e.length?et([],[]):e[0]instanceof T.line||e[0]instanceof T.ray||e[0]instanceof T.segment?e[0]:e[0].constructor===Object&&void 0!==e[0].vector?et(e[0].vector||[],e[0].origin||[]):"number"===typeof e[0]?et(tt(e)):et(...e.map((e=>tt(e))))},ct=ot,st=function(){return{x:arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,y:arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,width:arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,height:arguments.length>3&&void 0!==arguments[3]?arguments[3]:0}},it=function(){if(arguments[0]instanceof T.rect)return arguments[0];const e=V(arguments);if(e.length>0&&"object"===typeof e[0]&&null!==e[0]&&!Number.isNaN(e[0].width))return st(...["x","y","width","height"].map((t=>e[0][t])).filter(J));const t=e.filter((e=>"number"===typeof e)),r=t.length<4?[,,...t]:t;return st(...r)},at=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return{radius:e,origin:[...r]}},lt=function(){if(arguments[0]instanceof T.circle)return arguments[0];const e=rt(arguments),t=V(arguments).filter((e=>"number"===typeof e));if(2===arguments.length){if(1===e[1].length)return at(e[1][0],...e[0]);if(1===e[0].length)return at(e[0][0],...e[1]);if(e[0].length>1&&e[1].length>1)return at(Se(...e),...e[0])}else switch(t.length){case 0:return at(1,0,0,0);case 1:return at(t[0],0,0,0);default:return at(t.pop(),...t)}return at(1,0,0,0)},ut=[[0,1,3,4,9,10],[0,1,2,3,4,5,6,7,8,9,10,11],[0,1,2,void 0,3,4,5,void 0,6,7,8,void 0,9,10,11]];[11,7,3].forEach((e=>delete ut[2][e]));const dt=function(){const e=V(arguments),t=[...Be];return(e=>{let t;return t=e<8?0:e<13?1:2,ut[t]})(e.length).forEach(((r,n)=>{null!=e[n]&&(t[r]=e[n])})),t};var ft=Object.freeze({__proto__:null,getVector:tt,getVectorOfVectors:rt,getSegment:nt,getLine:ot,getRay:ct,getRectParams:st,getRect:it,getCircle:lt,getMatrix3x4:dt});const gt=e=>{let{vector:t,origin:r}=e;const n=de(t),o=Le(t),c=xe(r,o)/n;return{normal:me(o,1/n),distance:c}},ht=e=>{let{normal:t,distance:r}=e;return{vector:Ne(t),origin:me(t,r)}};var pt=Object.freeze({__proto__:null,rayLineToUniqueLine:gt,uniqueLineToRayLine:ht});const mt=(e,t,r)=>{const n=t.map(((t,n)=>({o:t,i:n,d:r(e,t)})));let o,c=1/0;for(let s=0;s<n.length;s+=1)n[s].d<c&&(o=s,c=n[s].d);return o},vt=function(e){const t=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:q,n=[0];for(let o=1;o<e.length;o+=1)switch(t(e[o][0],e[n[0]][0],r)){case 0:n.push(o);break;case 1:n=[o]}return n}(e,$,arguments.length>1&&void 0!==arguments[1]?arguments[1]:q);let r=0;for(let n=1;n<t.length;n+=1)e[t[n]][1]<e[t[r]][1]&&(r=n);return t[r]},_t=function(e,t,r,n){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:q;t=C(e.length,t),r=C(e.length,r);const c=ge(e),s=be(r,t),i=n(xe(e,s)/c,o);return _e(t,me(e,i))},yt=(e,t)=>{const r=e.map(((e,t,r)=>be(r[(t+1)%r.length],e)));return e.map(((e,n)=>_t(r[n],e,t,le))).map(((e,r)=>({point:e,i:r,distance:Pe(e,t)}))).sort(((e,t)=>e.distance-t.distance)).shift()},bt=(e,t,r)=>_e(t,me(he(be(r,t)),e));var Et=Object.freeze({__proto__:null,smallestComparisonSearch:mt,minimum2DPointIndex:vt,nearestPoint2:(e,t)=>{const r=mt(e,t,Se);return void 0===r?void 0:t[r]},nearestPoint:(e,t)=>{const r=mt(e,t,Pe);return void 0===r?void 0:t[r]},nearestPointOnLine:_t,nearestPointOnPolygon:yt,nearestPointOnCircle:bt});const xt=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:q;const r=[[0]];let n=0;for(let o=1;o<e.length;o+=1)K(e[o],e[o-1],t)?r[n].push(o):(n=r.length,r.push([o]));return r},At=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:q;const r=vt(e,t),n=e.map((t=>Ee(t,e[r]))).map((e=>pe(e))).map((e=>Ae([0,1],e))),o=n.map(((e,t)=>({a:e,i:t}))).sort(((e,t)=>e.a-t.a)).map((e=>e.i)).filter((e=>e!==r));return[[r]].concat(xt(o.map((e=>n[e])),t).map((e=>e.map((e=>o[e])))).map((t=>1===t.length?t:t.map((t=>({i:t,len:Se(e[t],e[r])}))).sort(((e,t)=>e.len-t.len)).map((e=>e.i)))))};var Ot=Object.freeze({__proto__:null,sortPointsAlongVector2:(e,t)=>e.map((e=>({point:e,d:e[0]*t[0]+e[1]*t[1]}))).sort(((e,t)=>e.d-t.d)).map((e=>e.point)),clusterIndicesOfSortedNumbers:xt,radialSortPointIndices:At});const kt=[1,0,0,1],Mt=kt.concat(0,0),wt=e=>e[0]*e[3]-e[1]*e[2],jt=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0];const r=Math.cos(e),n=Math.sin(e);return[r,n,-n,r,t[0],t[1]]};var Pt=Object.freeze({__proto__:null,identity2x2:kt,identity2x3:Mt,multiplyMatrix2Vector2:(e,t)=>[e[0]*t[0]+e[2]*t[1]+e[4],e[1]*t[0]+e[3]*t[1]+e[5]],multiplyMatrix2Line2:(e,t,r)=>({vector:[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1]],origin:[e[0]*r[0]+e[2]*r[1]+e[4],e[1]*r[0]+e[3]*r[1]+e[5]]}),multiplyMatrices2:(e,t)=>[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]],determinant2:wt,invertMatrix2:e=>{const t=wt(e);if(!(Math.abs(t)<1e-6||Number.isNaN(t))&&Number.isFinite(e[4])&&Number.isFinite(e[5]))return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[3]*e[4])/t,(e[1]*e[4]-e[0]*e[5])/t]},makeMatrix2Translate:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return kt.concat(e,t)},makeMatrix2Scale:function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0];return[e,0,0,t,e*-r[0]+r[0],t*-r[1]+r[1]]},makeMatrix2Rotate:jt,makeMatrix2Reflect:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0];const r=Math.atan2(e[1],e[0]),n=Math.cos(r),o=Math.sin(r),c=Math.cos(-r),s=Math.sin(-r),i=n*c+o*s,a=n*-s+o*c,l=o*c+-n*s,u=o*-s+-n*c;return[i,a,l,u,t[0]+i*-t[0]+-t[1]*l,t[1]+a*-t[0]+-t[1]*u]}});const St=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:te,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:q;return e.map(((e,t,r)=>[e,r[(t+1)%r.length]])).map((e=>we(he(be(e[1],e[0])),be(t,e[0])))).map((e=>r(e,n))).map(((e,t,r)=>e===r[0])).reduce(((e,t)=>e&&t),!0)},Ct=(e,t,r)=>_e(t,me(e,r)),Lt=(e,t,r,n,o)=>e.map(((e,t,r)=>[be(r[(t+1)%r.length],e),e])).map((e=>function(e,t,r,n){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:se,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:q;const s=we(he(e),he(r));if(Math.abs(s)<c)return;const i=we(e,r),a=-i,l=be(n,t),u=Ce(l),d=we(l,r)/i;return o(we(u,e)/a,c/de(r))?d:void 0}(t,r,e[0],e[1],n,o))).filter(J).sort(((e,t)=>e-t)),Nt=function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ee,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:re,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:q;const s=Lt(e,t,r,se,c);if(s.length<2)return;const i=((e,t,r)=>{let n=0,o=e.length-1;for(;n<o&&!t(e[n+1]-e[n],r);)n+=1;for(;o>n&&!t(e[o]-e[o-1],r);)o-=1;if(!(n>=o))return[e[n],e[o]]})(s,n,2*c/de(t));if(void 0===i)return;const a=i.map((e=>o(e)?e:e<.5?0:1));if(Math.abs(a[0]-a[1])<2*c/de(t))return;const l=Ct(t,r,(a[0]+a[1])/2);return St(e,l,n,c)?a.map((e=>Ct(t,r,e))):void 0},zt=(e,t)=>{for(;e<0;)e+=D;for(;t<0;)t+=D;for(;e>D;)e-=D;for(;t>D;)t-=D;const r=e-t;return r>=0?r:D-(t-e)},Ft=(e,t)=>{for(;e<0;)e+=D;for(;t<0;)t+=D;for(;e>D;)e-=D;for(;t>D;)t-=D;const r=t-e;return r>=0?r:D-(e-t)},It=(e,t)=>{const r=t[0]*e[0]+t[1]*e[1],n=t[0]*e[1]-t[1]*e[0];let o=Math.atan2(n,r);return o<0&&(o+=D),o},Vt=(e,t)=>{const r=e[0]*t[0]+e[1]*t[1],n=e[0]*t[1]-e[1]*t[0];let o=Math.atan2(n,r);return o<0&&(o+=D),o},Bt=(e,t)=>X(Y(e)-It(e,t)/2),Tt=(e,t)=>X(Y(e)+Vt(e,t)/2),qt=(e,t,r)=>{const n=zt(t,r)/e;return Array.from(Array(e-1)).map(((e,r)=>t+n*(r+1)))},Rt=(e,t,r)=>{const n=Ft(t,r)/e;return Array.from(Array(e-1)).map(((e,r)=>t+n*(r+1)))},Ut=(e,t,r)=>{const n=Math.atan2(t[1],t[0]),o=Math.atan2(r[1],r[0]);return qt(e,n,o).map(X)},Dt=(e,t,r)=>{const n=Math.atan2(t[1],t[0]),o=Math.atan2(r[1],r[0]);return Rt(e,n,o).map(X)},Gt=function(e,t,r,n){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:q;const c=we(e,r),s=xe(e,r),i=c>-o?[Tt(e,r)]:[Bt(e,r)];i[1]=c>-o?Le(i[0]):Ne(i[0]);const a=((n[0]-t[0])*r[1]-r[0]*(n[1]-t[1]))/c,l=[e,r].map((e=>he(e))),u=Math.abs(we(...l))<o,d=u?Oe(t,n):[t[0]+e[0]*a,t[1]+e[1]*a],f=i.map((e=>({vector:e,origin:d})));return u&&delete f[s>-o?1:0],f},Wt=function(){const e=Array.from(arguments).flat(),t=e.map(((e,t)=>t)).sort(((t,r)=>e[t]-e[r]));return t.slice(t.indexOf(0),t.length).concat(t.slice(0,t.indexOf(0)))},Zt=function(){const e=Array.from(arguments).flat();return Wt(e).map((t=>e[t])).map(((e,t,r)=>[e,r[(t+1)%r.length]])).map((e=>Ft(e[0],e[1])))},Ht=function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:q;const o=pe(Ee(t,e)),c=pe(Ee(r,e)),s=we(o,c);return K(s,0,n)?K(Se(e,t)+Se(t,r),Se(e,r))?0:void 0:Math.sign(s)};var Jt=Object.freeze({__proto__:null,isCounterClockwiseBetween:(e,t,r)=>{for(;r<t;)r+=D;for(;e>t;)e-=D;for(;e<t;)e+=D;return e<r},clockwiseAngleRadians:zt,counterClockwiseAngleRadians:Ft,clockwiseAngle2:It,counterClockwiseAngle2:Vt,clockwiseBisect2:Bt,counterClockwiseBisect2:Tt,clockwiseSubsectRadians:qt,counterClockwiseSubsectRadians:Rt,clockwiseSubsect2:Ut,counterClockwiseSubsect2:Dt,bisectLines2:Gt,counterClockwiseOrderRadians:Wt,counterClockwiseOrder2:function(){return Wt(I(arguments).map(Y))},counterClockwiseSectorsRadians:Zt,counterClockwiseSectors2:function(){return Zt(rt(arguments).map(Y))},threePointTurnDirection:Ht});const Yt=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:q;if(e.length<2)return[];const n=At(e,r).map((e=>1===e.length?e:(e=>e.concat(e.slice(0,-1).reverse()))(e))).flat();n.push(n[0]);const o=[n[0]];let c=1;const s={"-1":()=>o.pop(),1:e=>{o.push(e),c+=1},undefined:()=>{c+=1}};for(s[0]=t?s[1]:s[-1];c<n.length;){if(o.length<2){o.push(n[c]),c+=1;continue}const t=o[o.length-2],i=o[o.length-1],a=n[c];s[Ht(...[t,i,a].map((t=>e[t])),r)](a)}return o.pop(),o},Xt=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Yt(e,arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]?arguments[2]:q).map((t=>e[t]))};var Kt=Object.freeze({__proto__:null,convexHullIndices:Yt,convexHull:Xt});const $t=function(e,t,r,n){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:re,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:re,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:q;const i=we(he(e),he(r));if(Math.abs(i)<s)return;const a=we(e,r),l=-a,u=[n[0]-t[0],n[1]-t[1]],d=[-u[0],-u[1]],f=we(u,r)/a,g=we(d,e)/l;return o(f,s/de(e))&&c(g,s/de(r))?_e(t,me(e,f)):void 0};var Qt=Object.freeze({__proto__:null,pleat:(e,t,r)=>{const n=ot(t),o=ot(r);return Fe(n.vector,o.vector)?((e,t,r)=>{const n=Array.from(Array(e-1)).map(((t,r)=>(r+1)/e)).map((e=>Me(t.origin,r.origin,e))),o=[...t.vector];return n.map((e=>({origin:e,vector:o})))})(e,n,o):((e,t,r)=>{const n=$t(t.vector,t.origin,r.vector,r.origin);return(It(t.vector,r.vector)<Vt(t.vector,r.vector)?Ut(e,t.vector,r.vector):Dt(e,t.vector,r.vector)).map((e=>({origin:n,vector:e})))})(e,n,o)}});const er=e=>Array.from(Array(Math.floor(e))).map(((t,r)=>D*(r/e))),tr=(e,t)=>e.map((e=>[t*Math.cos(e),t*Math.sin(e)])).map((e=>e.map((e=>z(e,14))))),rr=function(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return tr(er(arguments.length>0&&void 0!==arguments[0]?arguments[0]:3),e)},nr=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const r=Math.PI/e,n=er(e).map((e=>e+r));return tr(n,t)},or=function(e,t,r){const n=t[0]-e[0],o=t[1]-e[1],c=r[0]-e[0],s=r[1]-e[1],i=n*(e[0]+t[0])+o*(e[1]+t[1]),a=c*(e[0]+r[0])+s*(e[1]+r[1]),l=2*(n*(r[1]-t[1])-o*(r[0]-t[0]));if(Math.abs(l)<q){const n=Math.min(e[0],t[0],r[0]),o=Math.min(e[1],t[1],r[1]),c=.5*(Math.max(e[0],t[0],r[0])-n),s=.5*(Math.max(e[1],t[1],r[1])-o);return{origin:[n+c,o+s],radius:Math.sqrt(c*c+s*s)}}const u=[(s*i-o*a)/l,(n*a-c*i)/l],d=u[0]-e[0],f=u[1]-e[1];return{origin:u,radius:Math.sqrt(d*d+f*f)}},cr=e=>.5*e.map(((e,t,r)=>{const n=r[(t+1)%r.length];return e[0]*n[1]-n[0]*e[1]})).reduce(H,0),sr=e=>{const t=1/(6*cr(e));return e.map(((e,t,r)=>{const n=r[(t+1)%r.length],o=e[0]*n[1]-n[0]*e[1];return[(e[0]+n[0])*o,(e[1]+n[1])*o]})).reduce(((e,t)=>[e[0]+t[0],e[1]+t[1]]),[0,0]).map((e=>e*t))},ir=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const r=Array(e[0].length).fill(1/0),n=Array(e[0].length).fill(-1/0);e.forEach((e=>e.forEach(((e,o)=>{e<r[o]&&(r[o]=e-t),e>n[o]&&(n[o]=e+t)}))));const o=n.map(((e,t)=>e-r[t]));return{min:r,max:n,span:o}};var ar=Object.freeze({__proto__:null,makePolygonCircumradius:rr,makePolygonCircumradiusSide:nr,makePolygonInradius:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3;return rr(e,(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)/Math.cos(Math.PI/e))},makePolygonInradiusSide:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3;return nr(e,(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)/Math.cos(Math.PI/e))},makePolygonSideLength:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3;return rr(e,(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)/2/Math.sin(Math.PI/e))},makePolygonSideLengthSide:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3;return nr(e,(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)/2/Math.sin(Math.PI/e))},makePolygonNonCollinear:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:q;const r=e.map(((e,t,r)=>[e,r[(t+1)%r.length]])).map((e=>be(e[1],e[0]))).map(((e,t,r)=>[e,r[(t+r.length-1)%r.length]])).map((e=>!Fe(e[1],e[0],t)));return e.filter(((e,t)=>r[t]))},circumcircle:or,signedArea:cr,centroid:sr,boundingBox:ir});const lr=function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ne,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:q;const c=be(r,t),s=ge(e),i=Math.sqrt(s);if(i<o)return!1;const a=we(c,e.map((e=>e/i))),l=xe(c,e)/s;return Math.abs(a)<o&&n(l,o/i)},ur=(e,t,r)=>{const n=e.map(((e,n)=>({point:lr(t,r,e,re)?e:null,at_index:n}))).filter((e=>null!=e.point)),o=e.map(((e,n,o)=>({point:$t(t,r,be(e,o[(n+1)%o.length]),o[(n+1)%o.length],ne,ie),at_index:n}))).filter((e=>null!=e.point));if(2===o.length){const t=o.slice().sort(((e,t)=>e.at_index-t.at_index)),r=e.slice(t[1].at_index+1).concat(e.slice(0,t[0].at_index+1));r.push(t[0].point),r.push(t[1].point);const n=e.slice(t[0].at_index+1,t[1].at_index+1);return n.push(t[1].point),n.push(t[0].point),[r,n]}if(1===o.length&&1===n.length){n[0].type="v",o[0].type="e";const t=n.concat(o).sort(((e,t)=>e.at_index-t.at_index)),r=e.slice(t[1].at_index+1).concat(e.slice(0,t[0].at_index+1));"e"===t[0].type&&r.push(t[0].point),r.push(t[1].point);const c=e.slice(t[0].at_index+1,t[1].at_index+1);return"e"===t[1].type&&c.push(t[1].point),c.push(t[0].point),[r,c]}if(2===n.length){const t=n.slice().sort(((e,t)=>e.at_index-t.at_index));return[e.slice(t[1].at_index).concat(e.slice(0,t[0].at_index+1)),e.slice(t[0].at_index,t[1].at_index+1)]}return[e.slice()]},dr=(e,t,r)=>{const n=e.map(((e,t)=>({vector:r[t],origin:e}))).map(((e,t,r)=>$t(e.vector,e.origin,r[(t+1)%r.length].vector,r[(t+1)%r.length].origin,ce,ce))),o=t.map(((e,t)=>_t(e.vector,e.origin,n[t],(e=>e))));if(3===e.length)return e.map((e=>({type:"skeleton",points:[e,n[0]]}))).concat([{type:"perpendicular",points:[o[0],n[0]]}]);const c=n.map(((e,t)=>Pe(e,o[t])));let s=0;c.forEach(((e,t)=>{e<c[s]&&(s=t)}));const i=[{type:"skeleton",points:[e[s],n[s]]},{type:"skeleton",points:[e[(s+1)%e.length],n[s]]},{type:"perpendicular",points:[o[s],n[s]]}],a=Bt(Ce(t[(s+t.length-1)%t.length].vector),t[(s+1)%t.length].vector),l=s===e.length-1;return e.splice(s,2,n[s]),t.splice(s,1),r.splice(s,2,a),l&&(e.splice(0,1),r.splice(0,1),t.push(t.shift())),i.concat(dr(e,t,r))},fr=e=>{const t=e.map(((e,t,r)=>[e,r[(t+1)%r.length]])).map((e=>({vector:be(e[1],e[0]),origin:e[0]}))),r=e.map(((e,t,r)=>[(t-1+r.length)%r.length,t,(t+1)%r.length].map((e=>r[e])))).map((e=>[be(e[0],e[1]),be(e[2],e[1])])).map((e=>Bt(...e)));return dr([...e],t,r)};var gr=Object.freeze({__proto__:null,collinearBetween:function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:q;if([e,r].map((e=>Q(t,e))).reduce(((e,t)=>e||t),!1))return n;const c=[[e,t],[t,r]].map((e=>be(e[1],e[0]))).map((e=>he(e)));return K(1,xe(...c),o)}});var hr=Object.freeze({__proto__:null,enclosingBoundingBoxes:(e,t)=>{const r=Math.min(e.min.length,t.min.length);for(let n=0;n<r;n+=1)if(t.min[n]<e.min[n]||t.max[n]>e.max[n])return!1;return!0},enclosingPolygonPolygon:function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ee;const n=e.map((e=>St(t,e,r))).reduce(((e,t)=>e||t),!1),o=t.map((e=>St(t,e,r))).reduce(((e,t)=>e&&t),!0);return!n&&o}});const pr=(e,t,r)=>{const n=t[0]-e[0],o=t[1]-e[1],c=n*Math.cos(r)+o*Math.sin(r),s=o*Math.cos(r)-n*Math.sin(r);return[e[0]+c,e[1]+s]},mr=function(e,t,r,n){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:q;const c=e<r?e:r,s=e<r?r:e,i=e<r?t:n,a=e<r?n:t,l=[i[0]-a[0],i[1]-a[1]],u=Math.sqrt(l[0]**2+l[1]**2);if(u<o)return;const d=l.map(((e,t)=>e/u*s+a[t]));if(Math.abs(s+c-u)<o||Math.abs(s-(c+u))<o)return[d];if(u+c<s||s+c<u)return;const f=(g=(c*c-u*u-s*s)/(-2*u*s))>=1?0:g<=-1?Math.PI:Math.acos(g);var g;return[pr(a,d,+f),pr(a,d,-f)]},vr=function(e,t,r,n){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:re,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:q;const s=r[0]**2+r[1]**2,i=Math.sqrt(s),a=0===i?r:r.map((e=>e/i)),l=Le(a),u=be(n,t),d=we(u,a);if(Math.abs(d)>e+c)return;const f=Math.sqrt(e**2-d**2),g=(e,r)=>t[r]-l[r]*d+a[r]*e,h=Math.abs(e-Math.abs(d))<c?[f].map((e=>[e,e].map(g))):[-f,f].map((e=>[e,e].map(g))),p=h.map((e=>e.map(((e,t)=>e-n[t])))).map((e=>e[0]*r[0]+r[1]*e[1])).map((e=>e/s));return h.filter(((e,t)=>o(p[t],c)))},_r=e=>{for(let t=1;t<e.length;t+=1)if(!Q(e[0],e[t]))return[e[0],e[t]]},yr=function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:se,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:re,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:q;const s=e.map(((e,t,r)=>[e,r[(t+1)%r.length]])).map((e=>$t(be(e[1],e[0]),e[0],t,r,n,o,c))).filter((e=>void 0!==e));switch(s.length){case 0:return;case 1:return[s];default:return _r(s)||[s[0]]}},br=function(e,t,r){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ne,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:q;const c=yr(e,t,r,arguments.length>3&&void 0!==arguments[3]?arguments[3]:se,n,o);let s;switch(n){case ce:s=oe;break;case ie:s=se;break;default:return c}const i=yr(e,t,r,se,s,o);if(void 0===i)return;const a=_r(i);if(void 0===a)switch(n){case ce:return St(e,r,te,o)?i:void 0;case ie:return St(e,_e(r,t),te,o)||St(e,r,te,o)?i:void 0;default:return}return St(e,Oe(...a),te,o)?a:c},Er={polygon:e=>[e],rect:e=>[e],circle:e=>[e.radius,e.origin],line:e=>[e.vector,e.origin],ray:e=>[e.vector,e.origin],segment:e=>[e.vector,e.origin]},xr={polygon:{line:(e,t,r,n,o)=>br(...e,...t,se,n,o),ray:(e,t,r,n,o)=>br(...e,...t,se,n,o),segment:(e,t,r,n,o)=>br(...e,...t,se,n,o)},circle:{circle:(e,t,r,n,o)=>mr(...e,...t,o),line:(e,t,r,n,o)=>vr(...e,...t,n,o),ray:(e,t,r,n,o)=>vr(...e,...t,n,o),segment:(e,t,r,n,o)=>vr(...e,...t,n,o)},line:{polygon:(e,t,r,n,o)=>br(...t,...e,se,r,o),circle:(e,t,r,n,o)=>vr(...t,...e,r,o),line:(e,t,r,n,o)=>$t(...e,...t,r,n,o),ray:(e,t,r,n,o)=>$t(...e,...t,r,n,o),segment:(e,t,r,n,o)=>$t(...e,...t,r,n,o)},ray:{polygon:(e,t,r,n,o)=>br(...t,...e,se,r,o),circle:(e,t,r,n,o)=>vr(...t,...e,r,o),line:(e,t,r,n,o)=>$t(...t,...e,n,r,o),ray:(e,t,r,n,o)=>$t(...e,...t,r,n,o),segment:(e,t,r,n,o)=>$t(...e,...t,r,n,o)},segment:{polygon:(e,t,r,n,o)=>br(...t,...e,se,r,o),circle:(e,t,r,n,o)=>vr(...t,...e,r,o),line:(e,t,r,n,o)=>$t(...t,...e,n,r,o),ray:(e,t,r,n,o)=>$t(...t,...e,n,r,o),segment:(e,t,r,n,o)=>$t(...e,...t,r,n,o)}},Ar={polygon:"polygon",rect:"polygon",circle:"circle",line:"line",ray:"ray",segment:"segment"},Or={polygon:te,rect:te,circle:te,line:ne,ray:ce,segment:ie},kr=function(e,t,r){const n=S(e),o=S(t),c=Ar[n],s=Ar[o],i=Er[n](e),a=Er[o](t),l=e.domain_function||Or[n],u=t.domain_function||Or[o];return xr[c][s](i,a,l,u,r)},Mr=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:q;for(let n=0;n<2;n+=1){const o=0===n?e:t,c=0===n?t:e;for(let e=0;e<o.length;e+=1){const t=o[e],n=Le(be(o[(e+1)%o.length],o[e])),s=c.map((e=>be(e,t))).map((e=>xe(n,e))),i=o[(e+2)%o.length],a=xe(n,be(i,t))>0;if(s.map((e=>a?e<r:e>-r)).reduce(((e,t)=>e&&t),!0))return!1}}return!0},wr=function(e,t,r){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:q;return(arguments.length>3&&void 0!==arguments[3]?arguments[3]:te)(e-Se(t,r),n)},jr=function(e,t,r,n){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ne,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:ne,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:q;const i=we(e,r),a=-i,l=[n[0]-t[0],n[1]-t[1]];if(Math.abs(i)<s){if(Math.abs(we(l,e))>s)return!1;const t=l,n=_e(t,r),o=xe(e,e),c=xe(t,e)/o,i=xe(n,e)/o;return!((c<i?c:i)>1-s)&&!((c<i?i:c)<s)}const u=[-l[0],-l[1]],d=we(l,r)/i,f=we(u,e)/a;return o(d,s/de(e))&&c(f,s/de(r))},Pr={polygon:e=>[e],rect:e=>[e],circle:e=>[e.radius,e.origin],line:e=>[e.vector,e.origin],ray:e=>[e.vector,e.origin],segment:e=>[e.vector,e.origin],vector:e=>[e]},Sr={polygon:{polygon:(e,t,r,n,o)=>Mr(...e,...t,o),vector:(e,t,r,n,o)=>St(...e,...t,r,o)},circle:{vector:(e,t,r,n,o)=>wr(...e,...t,te,o)},line:{line:(e,t,r,n,o)=>jr(...e,...t,r,n,o),ray:(e,t,r,n,o)=>jr(...e,...t,r,n,o),segment:(e,t,r,n,o)=>jr(...e,...t,r,n,o),vector:(e,t,r,n,o)=>lr(...e,...t,r,o)},ray:{line:(e,t,r,n,o)=>jr(...t,...e,n,r,o),ray:(e,t,r,n,o)=>jr(...e,...t,r,n,o),segment:(e,t,r,n,o)=>jr(...e,...t,r,n,o),vector:(e,t,r,n,o)=>lr(...e,...t,r,o)},segment:{line:(e,t,r,n,o)=>jr(...t,...e,n,r,o),ray:(e,t,r,n,o)=>jr(...t,...e,n,r,o),segment:(e,t,r,n,o)=>jr(...e,...t,r,n,o),vector:(e,t,r,n,o)=>lr(...e,...t,r,o)},vector:{polygon:(e,t,r,n,o)=>St(...t,...e,n,o),circle:(e,t,r,n,o)=>wr(...t,...e,te,o),line:(e,t,r,n,o)=>lr(...t,...e,n,o),ray:(e,t,r,n,o)=>lr(...t,...e,n,o),segment:(e,t,r,n,o)=>lr(...t,...e,n,o),vector:(e,t,r,n,o)=>Q(...e,...t,o)}},Cr={polygon:"polygon",rect:"polygon",circle:"circle",line:"line",ray:"ray",segment:"segment",vector:"vector"},Lr={polygon:te,rect:te,circle:te,line:ne,ray:ce,segment:ie,vector:ne},Nr=function(e,t,r){const n=S(e),o=S(t),c=Cr[n],s=Cr[o],i=Pr[n](e),a=Pr[o](t),l=e.domain_function||Lr[n],u=t.domain_function||Lr[o];return Sr[c][s](i,a,l,u,r)},zr={preserve:{magnitude:function(){return de(this)},isEquivalent:function(){return Q(this,tt(arguments))},isParallel:function(){return Fe(...L(this,tt(arguments)))},isCollinear:function(e){return Nr(this,e)},dot:function(){return xe(...L(this,tt(arguments)))},distanceTo:function(){return Pe(...L(this,tt(arguments)))},overlap:function(e){return Nr(this,e)}},vector:{copy:function(){return[...this]},normalize:function(){return he(this)},scale:function(){return me(this,arguments[0])},flip:function(){return Ce(this)},rotate90:function(){return Le(this)},rotate270:function(){return Ne(this)},cross:function(){return je(C(3,this),C(3,tt(arguments)))},transform:function(){return qe(dt(arguments),C(3,this))},add:function(){return _e(this,C(this.length,tt(arguments)))},subtract:function(){return be(this,C(this.length,tt(arguments)))},rotateZ:function(e,t){return qe(dt(jt(e,t)),C(3,this))},lerp:function(e,t){return Me(this,C(this.length,tt(e)),t)},midpoint:function(){return Oe(...L(this,tt(arguments)))},bisect:function(){return Tt(this,tt(arguments))}}},Fr={};Object.keys(zr.preserve).forEach((e=>{Fr[e]=zr.preserve[e]})),Object.keys(zr.vector).forEach((e=>{Fr[e]=function(){return T.vector(...zr.vector[e].apply(this,arguments))}}));const Ir={fromAngle:function(e){return T.vector(Math.cos(e),Math.sin(e))},fromAngleDegrees:function(e){return T.vector.fromAngle(e*U)}};var Vr={vector:{P:Array.prototype,A:function(){this.push(...tt(arguments))},G:{x:function(){return this[0]},y:function(){return this[1]},z:function(){return this[2]}},M:Fr,S:Ir}},Br={fromPoints:function(){const e=rt(arguments);return this.constructor({vector:be(e[1],e[0]),origin:e[0]})},fromAngle:function(){const e=arguments[0]||0;return this.constructor({vector:[Math.cos(e),Math.sin(e)],origin:[0,0]})},perpendicularBisector:function(){const e=rt(arguments);return this.constructor({vector:Le(be(e[1],e[0])),origin:ke(e[0],e[1])})}};const Tr={isParallel:function(){const e=L(this.vector,ot(arguments).vector);return Fe(...e)},isCollinear:function(){const e=ot(arguments);return lr(this.vector,this.origin,e.origin)&&Fe(...L(this.vector,e.vector))},isDegenerate:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q;return ze(this.vector,e)},reflectionMatrix:function(){return T.matrix($e(this.vector,this.origin))},nearestPoint:function(){const e=tt(arguments);return T.vector(_t(this.vector,this.origin,e,this.clip_function))},transform:function(){const e=this.dimension,t=Re(dt(arguments),C(3,this.vector),C(3,this.origin));return this.constructor(C(e,t.vector),C(e,t.origin))},translate:function(){const e=_e(...L(this.origin,tt(arguments)));return this.constructor(this.vector,e)},intersect:function(){return kr(this,...arguments)},overlap:function(){return Nr(this,...arguments)},bisect:function(e,t){const r=ot(e);return Gt(this.vector,this.origin,r.vector,r.origin,t).map((e=>this.constructor(e)))}};var qr={line:{P:Object.prototype,A:function(){const e=ot(...arguments);this.vector=T.vector(e.vector),this.origin=T.vector(C(this.vector.length,e.origin));const t=gt({vector:this.vector,origin:this.origin});this.normal=t.normal,this.distance=t.distance,Object.defineProperty(this,"domain_function",{writable:!0,value:re})},G:{dimension:function(){return[this.vector,this.origin].map((e=>e.length)).reduce(((e,t)=>Math.max(e,t)),0)}},M:Object.assign({},Tr,{inclusive:function(){return this.domain_function=re,this},exclusive:function(){return this.domain_function=ne,this},clip_function:e=>e,svgPath:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2e4;const t=_e(this.origin,me(this.vector,-e/2)),r=me(this.vector,e);return"M".concat(t[0]," ").concat(t[1],"l").concat(r[0]," ").concat(r[1])}}),S:Object.assign({fromNormalDistance:function(){return this.constructor(ht(arguments[0]))}},Br)}},Rr={ray:{P:Object.prototype,A:function(){const e=ot(...arguments);this.vector=T.vector(e.vector),this.origin=T.vector(C(this.vector.length,e.origin)),Object.defineProperty(this,"domain_function",{writable:!0,value:oe})},G:{dimension:function(){return[this.vector,this.origin].map((e=>e.length)).reduce(((e,t)=>Math.max(e,t)),0)}},M:Object.assign({},Tr,{inclusive:function(){return this.domain_function=oe,this},exclusive:function(){return this.domain_function=ce,this},flip:function(){return T.ray(Ce(this.vector),this.origin)},scale:function(e){return T.ray(this.vector.scale(e),this.origin)},normalize:function(){return T.ray(this.vector.normalize(),this.origin)},clip_function:ae,svgPath:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e4;const t=this.vector.scale(e);return"M".concat(this.origin[0]," ").concat(this.origin[1],"l").concat(t[0]," ").concat(t[1])}}),S:Br}},Ur={segment:{P:Array.prototype,A:function(){const e=nt(...arguments);this.push(...[e[0],e[1]].map((e=>T.vector(e)))),this.vector=T.vector(be(this[1],this[0])),this.origin=this[0],Object.defineProperty(this,"domain_function",{writable:!0,value:se})},G:{points:function(){return this},magnitude:function(){return de(this.vector)},dimension:function(){return[this.vector,this.origin].map((e=>e.length)).reduce(((e,t)=>Math.max(e,t)),0)}},M:Object.assign({},Tr,{inclusive:function(){return this.domain_function=se,this},exclusive:function(){return this.domain_function=ie,this},clip_function:le,transform:function(){const e=this.points[0].length;for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];const o=dt(r),c=this.points.map((e=>C(3,e))).map((e=>qe(o,e))).map((t=>C(e,t)));return T.segment(c)},translate:function(){const e=tt(arguments),t=this.points.map((t=>_e(...L(t,e))));return T.segment(t)},midpoint:function(){return T.vector(ke(this.points[0],this.points[1]))},svgPath:function(){const e=this.points.map((e=>"".concat(e[0]," ").concat(e[1])));return["M","L"].map(((t,r)=>"".concat(t).concat(e[r]))).join("")}}),S:{fromPoints:function(){return this.constructor(...arguments)}}}};const Dr=function(e,t,r,n,o,c){const s=Math.cos(o),i=Math.sin(o),a=Math.cos(c),l=Math.sin(c);return[e+s*r*a+-i*n*l,t+i*r*a+s*n*l]},Gr=function(e,t,r,n,o,c,s){let i=c;if(i<0&&!Number.isNaN(i))for(;i<0;)i+=2*Math.PI;const a=s>2*Math.PI?2*Math.PI:s,l=Dr(e,t,r,n,o,i),u=Dr(e,t,r,n,o,i+a/2),d=Dr(e,t,r,n,o,i+a),f=a/2>Math.PI?1:0,g=a/2>0?1:0;return{x1:l[0],y1:l[1],x2:u[0],y2:u[1],x3:d[0],y3:d[1],fa:f,fs:g}},Wr=e=>z(e,4),Zr=(e,t,r,n,o,c,s)=>"A".concat(Wr(e)," ").concat(Wr(t)," ").concat(Wr(r)," ").concat(Wr(n)," ").concat(Wr(o)," ").concat(Wr(c)," ").concat(Wr(s)),Hr={nearestPoint:function(){return T.vector(bt(this.radius,this.origin,tt(arguments)))},intersect:function(e){return kr(this,e)},overlap:function(e){return Nr(this,e)},svgPath:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2*Math.PI;const r=Gr(this.origin[0],this.origin[1],this.radius,this.radius,0,e,t),n=Zr(this.radius,this.radius,0,r.fa,r.fs,r.x2,r.y2),o=Zr(this.radius,this.radius,0,r.fa,r.fs,r.x3,r.y3);return"M".concat(r.x1," ").concat(r.y1).concat(n).concat(o)},points:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:128;return Array.from(Array(e)).map(((t,r)=>2*Math.PI/e*r)).map((e=>[this.origin[0]+this.radius*Math.cos(e),this.origin[1]+this.radius*Math.sin(e)]))},polygon:function(){return T.polygon(this.points(arguments[0]))},segments:function(){const e=this.points(arguments[0]);return e.map(((t,r)=>{const n=(r+1)%e.length;return[t,e[n]]}))}};var Jr={circle:{A:function(){const e=lt(...arguments);this.radius=e.radius,this.origin=T.vector(...e.origin)},G:{x:function(){return this.origin[0]},y:function(){return this.origin[1]},z:function(){return this.origin[2]}},M:Hr,S:{fromPoints:function(){if(3===arguments.length){const e=or(...arguments);return this.constructor(e.radius,e.origin)}return this.constructor(...arguments)},fromThreePoints:function(){const e=or(...arguments);return this.constructor(e.radius,e.origin)}}}};var Yr={ellipse:{A:function(){const e=V(arguments).filter((e=>!Number.isNaN(e))),t=C(5,e);this.rx=t[0],this.ry=t[1],this.origin=T.vector(t[2],t[3]),this.spin=t[4],this.foci=function(e,t,r,n){const o=t>r,c=o?t**2-r**2:r**2-t**2,s=Math.sqrt(c),i=o?Math.cos(n):Math.sin(n),a=o?Math.sin(n):Math.cos(n);return[T.vector(e[0]+s*i,e[1]+s*a),T.vector(e[0]-s*i,e[1]-s*a)]}(this.origin,this.rx,this.ry,this.spin)},G:{x:function(){return this.origin[0]},y:function(){return this.origin[1]}},M:{svgPath:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2*Math.PI;const r=Gr(this.origin[0],this.origin[1],this.rx,this.ry,this.spin,e,t),n=Zr(this.rx,this.ry,this.spin/Math.PI*180,r.fa,r.fs,r.x2,r.y2),o=Zr(this.rx,this.ry,this.spin/Math.PI*180,r.fa,r.fs,r.x3,r.y3);return"M".concat(r.x1," ").concat(r.y1).concat(n).concat(o)},points:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:128;return Array.from(Array(e)).map(((t,r)=>2*Math.PI/e*r)).map((e=>Dr(this.origin.x,this.origin.y,this.rx,this.ry,this.spin,e)))},polygon:function(){return T.polygon(this.points(arguments[0]))},segments:function(){const e=this.points(arguments[0]);return e.map(((t,r)=>{const n=(r+1)%e.length;return[t,e[n]]}))}},S:{}}};const Xr={area:function(){return cr(this)},centroid:function(){return T.vector(sr(this))},boundingBox:function(){return ir(this)},straightSkeleton:function(){return fr(this)},scale:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:sr(this);const r=this.map((e=>[0,1].map(((r,n)=>e[n]-t[n])))).map((r=>r.map(((n,o)=>t[o]+r[o]*e))));return this.constructor.fromPoints(r)},rotate:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:sr(this);const r=this.map((r=>{const n=[r[0]-t[0],r[1]-t[1]],o=Math.sqrt(n[0]**2+n[1]**2),c=Math.atan2(n[1],n[0]);return[t[0]+Math.cos(c+e)*o,t[1]+Math.sin(c+e)*o]}));return T.polygon(r)},translate:function(){const e=tt(...arguments),t=this.map((t=>t.map(((t,r)=>t+e[r]))));return this.constructor.fromPoints(t)},transform:function(){const e=dt(...arguments),t=this.map((t=>qe(e,C(3,t))));return T.polygon(t)},nearest:function(){const e=tt(...arguments),t=yt(this,e);return void 0===t?void 0:Object.assign(t,{edge:this.sides[t.i]})},split:function(){const e=ot(...arguments);return ur(this,e.vector,e.origin).map((e=>T.polygon(e)))},overlap:function(){return Nr(this,...arguments)},intersect:function(){return kr(this,...arguments)},clip:function(e,t){const r=e.domain_function?e.domain_function:re,n=Nt(this,e.vector,e.origin,this.domain_function,r,t);return n?T.segment(n):void 0},svgPath:function(){const e=Array(this.length).fill("L");return e[0]="M","".concat(this.map(((t,r)=>"".concat(e[r]).concat(t[0]," ").concat(t[1]))).join(""),"z")}};var Kr={rect:{P:Array.prototype,A:function(){const e=it(...arguments);this.width=e.width,this.height=e.height,this.origin=T.vector(e.x,e.y),this.push(...(e=>[[e.x,e.y],[e.x+e.width,e.y],[e.x+e.width,e.y+e.height],[e.x,e.y+e.height]])(this)),Object.defineProperty(this,"domain_function",{writable:!0,value:ee})},G:{x:function(){return this.origin[0]},y:function(){return this.origin[1]},center:function(){return T.vector(this.origin[0]+this.width/2,this.origin[1]+this.height/2)}},M:Object.assign({},Xr,{inclusive:function(){return this.domain_function=ee,this},exclusive:function(){return this.domain_function=te,this},area:function(){return this.width*this.height},segments:function(){return[[[(e=this).x,e.y],[e.x+e.width,e.y]],[[e.x+e.width,e.y],[e.x+e.width,e.y+e.height]],[[e.x+e.width,e.y+e.height],[e.x,e.y+e.height]],[[e.x,e.y+e.height],[e.x,e.y]]];var e},svgPath:function(){return"M".concat(this.origin.join(" "),"h").concat(this.width,"v").concat(this.height,"h").concat(-this.width,"Z")}}),S:{fromPoints:function(){const e=ir(rt(arguments));return T.rect(e.min[0],e.min[1],e.span[0],e.span[1])}}}},$r={polygon:{P:Array.prototype,A:function(){this.push(...I(arguments)),this.sides=this.map(((e,t,r)=>[e,r[(t+1)%r.length]])),this.vectors=this.sides.map((e=>be(e[1],e[0]))),Object.defineProperty(this,"domain_function",{writable:!0,value:ee})},G:{isConvex:function(){},points:function(){return this}},M:Object.assign({},Xr,{inclusive:function(){return this.domain_function=ee,this},exclusive:function(){return this.domain_function=te,this},segments:function(){return this.sides}}),S:{fromPoints:function(){return this.constructor(...arguments)},regularPolygon:function(){return this.constructor(rr(...arguments))},convexHull:function(){return this.constructor(Xt(...arguments))}}}},Qr={polyline:{P:Array.prototype,A:function(){this.push(...I(arguments))},G:{points:function(){return this}},M:{svgPath:function(){const e=Array(this.length).fill("L");return e[0]="M","".concat(this.map(((t,r)=>"".concat(e[r]).concat(t[0]," ").concat(t[1]))).join(""))}},S:{fromPoints:function(){return this.constructor(...arguments)}}}};const en=(e,t)=>{for(let r=0;r<12;r+=1)e[r]=t[r];return e};var tn={matrix:{P:Array.prototype,A:function(){dt(arguments).forEach((e=>this.push(e)))},G:{},M:{copy:function(){return T.matrix(...Array.from(this))},set:function(){return en(this,dt(arguments))},isIdentity:function(){return Te(this)},multiply:function(e){return en(this,Ue(this,e))},determinant:function(){return De(this)},inverse:function(){return en(this,Ge(this))},translate:function(e,t,r){return en(this,Ue(this,We(e,t,r)))},rotateX:function(e){return en(this,Ue(this,He(e)))},rotateY:function(e){return en(this,Ue(this,Je(e)))},rotateZ:function(e){return en(this,Ue(this,Ye(e)))},rotate:function(e,t,r){const n=Xe(e,t,r);return en(this,Ue(this,n))},scale:function(e){return en(this,Ue(this,Ke(e)))},reflectZ:function(e,t){const r=$e(e,t);return en(this,Ue(this,r))},transform:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return T.vector(qe(this,C(3,tt(t))))},transformVector:function(e){return T.vector(qe(this,C(3,tt(e))))},transformLine:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const n=ot(t);return T.line(Re(this,n.vector,n.origin))}},S:{}}};const rn=Object.assign({},Vr,qr,Rr,Ur,Jr,Yr,Kr,$r,Qr,tn),nn=function(e,t){const r=Object.create(rn[e].proto);return rn[e].A.apply(r,t),r};Object.assign(T,{vector:function(){return nn("vector",arguments)},line:function(){return nn("line",arguments)},ray:function(){return nn("ray",arguments)},segment:function(){return nn("segment",arguments)},circle:function(){return nn("circle",arguments)},ellipse:function(){return nn("ellipse",arguments)},rect:function(){return nn("rect",arguments)},polygon:function(){return nn("polygon",arguments)},polyline:function(){return nn("polyline",arguments)},matrix:function(){return nn("matrix",arguments)}}),Object.keys(rn).forEach((e=>{const t={};t.prototype=null!=rn[e].P?Object.create(rn[e].P):Object.create(Object.prototype),t.prototype.constructor=t,T[e].prototype=t.prototype,T[e].prototype.constructor=T[e],Object.keys(rn[e].G).forEach((r=>Object.defineProperty(t.prototype,r,{get:rn[e].G[r]}))),Object.keys(rn[e].M).forEach((r=>Object.defineProperty(t.prototype,r,{value:rn[e].M[r]}))),Object.keys(rn[e].S).forEach((t=>Object.defineProperty(T[e],t,{value:rn[e].S[t].bind(T[e].prototype)}))),rn[e].proto=t.prototype}));const on=T;on.core=Object.assign(Object.create(null),G,B,ft,ue,Ie,Ot,Jt,Kt,Qt,ar,Jt,Pt,Qe,Et,pt,gr,hr,{intersectConvexPolygonLine:br,intersectCircleCircle:mr,intersectCircleLine:vr,intersectLineLine:$t,overlapConvexPolygons:Mr,overlapConvexPolygonPoint:St,overlapBoundingBoxes:(e,t)=>{const r=Math.min(e.min.length,t.min.length);for(let n=0;n<r;n+=1)if(e.min[n]>t.max[n]||e.max[n]<t.min[n])return!1;return!0},overlapLineLine:jr,overlapLinePoint:lr,clipLineConvexPolygon:Nt,clipPolygonPolygon:function(e,t){let r,n,o,c,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:q;const i=e=>(n[0]-r[0])*(e[1]-r[1])>(n[1]-r[1])*(e[0]-r[0])+s,a=()=>{const e=[r[0]-n[0],r[1]-n[1]],t=[o[0]-c[0],o[1]-c[1]],s=r[0]*n[1]-r[1]*n[0],i=o[0]*c[1]-o[1]*c[0],a=1/(e[0]*t[1]-e[1]*t[0]);return[(s*t[0]-i*e[0])*a,(s*t[1]-i*e[1])*a]};let l=e;r=t[t.length-1];for(let u in t){n=t[u];const e=l;l=[],o=e[e.length-1];for(let t in e)c=e[t],i(c)?(i(o)||l.push(a()),l.push(c)):i(o)&&l.push(a()),o=c;r=n}return 0===l.length?void 0:l},splitConvexPolygon:ur,straightSkeleton:fr}),on.typeof=S,on.intersect=kr,on.overlap=Nr;const cn=function(e,t){const r=this;Object.defineProperty(e,"degree",{get:()=>r.vertices_vertices&&r.vertices_vertices[t]?r.vertices_vertices[t].length:null})},sn=function(e,t){const r=this;Object.defineProperty(e,"coords",{get:()=>{if(r.edges_vertices&&r.edges_vertices[t]&&r.vertices_coords)return r.edges_vertices[t].map((e=>r.vertices_coords[e]))}})},an=function(e,t){const r=this;Object.defineProperty(e,"simple",{get:()=>{if(!r.faces_vertices||!r.faces_vertices[t])return null;for(let n=0;n<e.length-1;n+=1)for(let o=n+1;o<e.length;o+=1)if(r.faces_vertices[t][n]===r.faces_vertices[t][o])return!1;return!0}})},ln=function(e,t){const r=this;Object.defineProperty(e,"coords",{get:()=>{if(r.faces_vertices&&r.faces_vertices[t]&&r.vertices_coords)return r.faces_vertices[t].map((e=>r.vertices_coords[e]))}})};var un={vertices:function(e,t){return cn.call(this,e,t),e},edges:function(e,t){return sn.call(this,e,t),e},faces:function(e,t){return an.call(this,e,t),ln.call(this,e,t),e}};const dn="Rabbit Ear",fn={file:["file_spec","file_creator","file_author","file_title","file_description","file_classes","file_frames"],frame:["frame_author","frame_title","frame_description","frame_attributes","frame_classes","frame_unit","frame_parent","frame_inherit"],graph:["vertices_coords","vertices_vertices","vertices_faces","edges_vertices","edges_faces","edges_assignment","edges_foldAngle","edges_length","faces_vertices","faces_edges","vertices_edges","edges_edges","faces_faces"],orders:["edgeOrders","faceOrders"]},gn=Object.freeze([].concat(fn.file).concat(fn.frame).concat(fn.graph).concat(fn.orders)),hn=Object.freeze(["edges_vector","vertices_sectors","faces_sectors","faces_matrix"]),pn=Array.from("MmVvBbFfUu"),mn={vertices:"vertex",edges:"edge",faces:"face"},vn={b:"boundary",m:"mountain",v:"valley",f:"flat",u:"unassigned"};pn.forEach((e=>{vn[e.toUpperCase()]=vn[e]}));const _n={M:-180,m:-180,V:180,v:180,B:0,b:0,F:0,f:0,U:0,u:0},yn=e=>_n[e]||0,bn=e=>e>on.core.EPSILON?"V":e<-on.core.EPSILON?"M":"U",En=e=>on.core.fnEpsilonEqual(0,e)||on.core.fnEpsilonEqual(-180,e)||on.core.fnEpsilonEqual(180,e),xn=e=>{let{edges_foldAngle:t}=e;if(!t)return!0;for(let r=0;r<t.length;r+=1)if(!En(t[r]))return!1;return!0},An=(e,t)=>Object.keys(e).map((e=>e.substring(e.length-t.length,e.length)===t?e:void 0)).filter((e=>void 0!==e)),On=(e,t)=>Object.keys(e).map((e=>e.substring(0,t.length)===t?e:void 0)).filter((e=>void 0!==e)),kn=(e,t)=>On(e,"".concat(t,"_")),Mn=(e,t)=>An(e,"_".concat(t)),wn=(e,t)=>{const r=kn(e,t);if(0===r.length)return[];const n=Math.max(...r.map((t=>e[t].length))),o=Array.from(Array(n)).map((()=>({})));return r.forEach((t=>o.forEach(((r,n)=>{o[n][t]=e[t][n]})))),o},jn=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 0===Object.keys(e).length?0:[].concat(gn,hn).filter((t=>e[t])).length/Object.keys(e).length};var Pn=Object.freeze({__proto__:null,singularize:mn,pluralize:{vertex:"vertices",edge:"edges",face:"faces"},edgesAssignmentNames:vn,edgesAssignmentDegrees:_n,edgeAssignmentToFoldAngle:yn,edgeFoldAngleToAssignment:bn,edgeFoldAngleIsFlat:En,edgesFoldAngleAreAllFlat:xn,filterKeysWithSuffix:An,filterKeysWithPrefix:On,getGraphKeysWithPrefix:kn,getGraphKeysWithSuffix:Mn,transposeGraphArrays:wn,transposeGraphArrayAtIndex:function(e,t,r){const n=kn(e,t);if(0===n.length)return;const o={};return n.forEach((t=>{o[t]=e[t][r]})),o},isFoldObject:jn});const Sn=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:on.core.EPSILON;const n=e.length;for(let o=0;o<n;o+=1)if(Math.abs(e[o]-t[o])>r)return!1;return!0},Cn=function(e){let{vertices_coords:t}=e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:on.core.EPSILON;if(!t)return[];const n=t.map((()=>[]));for(let l=0;l<t.length-1;l+=1)for(let e=l+1;e<t.length;e+=1)n[l][e]=Sn(t[l],t[e],r);const o=n.map((e=>e.map(((e,t)=>e?t:void 0)).filter((e=>void 0!==e)))),c=[],s=Array(t.length).fill(!1);let i=0;const a=(e,r)=>{if(!s[r]&&i!==t.length)for(s[r]=!0,i+=1,c[e]||(c[e]=[]),c[e].push(r);o[r].length>0;)a(e,o[r][0]),o[r].splice(0,1)};for(let l=0;l<t.length&&(a(l,l),i!==t.length);l+=1);return c.filter((e=>e.length))},Ln=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Math.max(0,...t.filter((e=>void 0!==e)).map((e=>e.length)))},Nn=(e,t)=>Ln(...kn(e,t).map((t=>e[t])));Nn.vertices=e=>{let{vertices_coords:t,vertices_faces:r,vertices_vertices:n}=e;return Ln(t,r,n)},Nn.edges=e=>{let{edges_vertices:t,edges_edges:r,edges_faces:n}=e;return Ln(t,r,n)},Nn.faces=e=>{let{faces_vertices:t,faces_edges:r,faces_faces:n}=e;return Ln(t,r,n)};const zn=e=>{const t={};return e.forEach((e=>{t[e]=!0})),Object.keys(t).map((e=>parseInt(e,10)))},Fn=e=>zn(e).sort(((e,t)=>e-t)),In=(e,t)=>(t.sort(((e,t)=>e-t)),[e.slice(t[1]).concat(e.slice(0,t[0]+1)),e.slice(t[0],t[1]+1)]),Vn=e=>{const t={};return e.forEach((e=>{void 0===t[e]&&(t[e]=0),t[e]+=1})),e.filter((e=>t[e]>1))},Bn=e=>e.map((e=>e.map(((e,t)=>!0===e?t:void 0)).filter((e=>void 0!==e)))),Tn=e=>{const t=[];for(let r=0;r<e.length-1;r+=1)for(let n=r+1;n<e.length;n+=1)e[r][n]&&t.push([r,n]);return t};var qn=Object.freeze({__proto__:null,uniqueIntegers:zn,uniqueSortedIntegers:Fn,splitCircularArray:In,getLongestArray:e=>{if(1===e.length)return e[0];const t=e.map((e=>e.length));let r=0;for(let n=0;n<e.length;n+=1)t[n]>t[r]&&(r=n);return e[r]},removeSingleInstances:Vn,booleanMatrixToIndexedArray:Bn,booleanMatrixToUniqueIndexPairs:Tn,makeSelfRelationalArrayClusters:e=>{const t=[],r=(n,o)=>void 0!==t[n]?0:(t[n]=o,e[n].forEach((e=>r(e,o))),1);for(let n=0,o=0;n<e.length;n+=1)n in e&&(o+=r(n,o));return t},circularArrayValidRanges:e=>{const t=e.map((e=>void 0!==e));if(t.reduce(((e,t)=>e&&t),!0))return[[0,e.length-1]];const r=t.map(((e,t,r)=>e&&!r[(t-1+r.length)%r.length])),n=r.reduce(((e,t)=>e+(t?1:0)),0),o=Array(n),c=Array(n).fill(0);let s=t[0]&&t[e.length-1]?0:n-1;return t.forEach(((e,n)=>{s=(s+(r[n]?1:0))%c.length,c[s]+=t[n]?1:0,r[n]&&(o[s]=n)})),o.map(((t,r)=>[t,(t+c[r]-1)%e.length]))}});const Rn=(e,t,r)=>{const n=Nn(e,t),o=Fn(r),c=[];let s,i,a;for(s=0,i=0,a=0;s<n;s+=1,i+=1){for(;s===o[a];)c[s]=void 0,s+=1,a+=1;s<n&&(c[s]=i)}return Mn(e,t).forEach((t=>e[t].forEach(((r,n)=>e[t][n].forEach(((r,o)=>{e[t][n][o]=c[r]})))))),o.reverse(),kn(e,t).forEach((t=>o.forEach((r=>e[t].splice(r,1))))),c},Un=(e,t,r)=>{const n=Nn(e,t),o=Object.keys(r).map((e=>parseInt(e,10))),c=Fn(o),s=[];let i,a,l;for(i=0,a=0,l=0;i<n;i+=1,a+=1){for(;i===c[l];)s[i]=s[r[c[l]]],void 0===s[i]&&console.log("replace() found an undefined",s),i+=1,l+=1;i<n&&(s[i]=a)}return Mn(e,t).forEach((t=>e[t].forEach(((r,n)=>e[t][n].forEach(((r,o)=>{e[t][n][o]=s[r]})))))),c.reverse(),kn(e,t).forEach((t=>c.forEach((r=>e[t].splice(r,1))))),s},Dn=(e,t)=>Cn(e,t).filter((e=>e.length>1)),Gn=e=>{let{vertices_coords:t,edges_vertices:r,faces_vertices:n}=e;if(!t)return[];let o=t.length;const c=Array(o).fill(!1);return r&&r.forEach((e=>{e.filter((e=>!c[e])).forEach((e=>{c[e]=!0,o-=1}))})),n&&n.forEach((e=>{e.filter((e=>!c[e])).forEach((e=>{c[e]=!0,o-=1}))})),c.map(((e,t)=>e?void 0:t)).filter((e=>void 0!==e))},Wn=(e,t)=>(t||(t=Gn(e)),{map:Rn(e,i,t),remove:t}),Zn=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:on.core.EPSILON;const r=[],n=[],o=Cn(e,t).filter((e=>e.length>1));return o.forEach((e=>{for(let t=1;t<e.length;t+=1)r[e[t]]=e[0],n.push(e[t])})),o.map((t=>t.map((t=>e.vertices_coords[t])))).map((e=>on.core.average(...e))).forEach(((t,r)=>{e.vertices_coords[o[r][0]]=t})),{map:Un(e,i,r),remove:n}};var Hn=Object.freeze({__proto__:null,getDuplicateVertices:Dn,getEdgeIsolatedVertices:e=>{let{vertices_coords:t,edges_vertices:r}=e;if(!t||!r)return[];let n=t.length;const o=Array(n).fill(!1);return r.forEach((e=>{e.filter((e=>!o[e])).forEach((e=>{o[e]=!0,n-=1}))})),o.map(((e,t)=>e?void 0:t)).filter((e=>void 0!==e))},getFaceIsolatedVertices:e=>{let{vertices_coords:t,faces_vertices:r}=e;if(!t||!r)return[];let n=t.length;const o=Array(n).fill(!1);return r.forEach((e=>{e.filter((e=>!o[e])).forEach((e=>{o[e]=!0,n-=1}))})),o.map(((e,t)=>e?void 0:t)).filter((e=>void 0!==e))},getIsolatedVertices:Gn,removeIsolatedVertices:Wn,removeDuplicateVertices:Zn});const Jn={edges:"edgeOrders",faces:"faceOrders"},Yn=(e,t)=>Math.max((e=>{let t=-1;return e.filter((e=>void 0!==e)).forEach((e=>e.forEach((e=>e.forEach((e=>{e>t&&(t=e)})))))),t})(Mn(e,t).map((t=>e[t]))),e[Jn[t]]?(e=>{let t=-1;return e.forEach((e=>{e[0]>t&&(t=e[0]),e[1]>t&&(t=e[1])})),t})(e[Jn[t]]):-1)+1;Yn.vertices=e=>Yn(e,i),Yn.edges=e=>Yn(e,a),Yn.faces=e=>Yn(e,l);const Xn=function(e,t,r){let{vertices_vertices:n,vertices_sectors:o}=e,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const s={},i={vertices:[t],edges:[],angles:[]};let a=t,l=r;for(;;){const e=n[l],t=(e.indexOf(a)+e.length-1)%e.length,r=e[t],u="".concat(l," ").concat(r);if(s[u])return Object.assign(c,s),i.vertices.pop(),i;if(s[u]=!0,c[u])return;i.vertices.push(l),i.edges.push(u),o&&i.angles.push(o[l][t]),a=l,l=r}},Kn=e=>{let{vertices_vertices:t,vertices_sectors:r}=e;const n={vertices_vertices:t,vertices_sectors:r},o={};return t.map(((e,t)=>e.map((e=>Xn(n,t,e,o))).filter((e=>void 0!==e)))).flat()},$n=e=>e.filter((e=>e.angles.map((e=>Math.PI-e)).reduce(((e,t)=>e+t),0)>0));var Qn=Object.freeze({__proto__:null,counterClockwiseWalk:Xn,planarVertexWalk:Kn,filterWalkedBoundaryFace:$n});const eo=(e,t,r)=>{let{vertices_coords:n}=e;return t.map((e=>n[e])).map((e=>on.core.subtract(e,n[r]))).map((e=>Math.atan2(e[1],e[0]))).map((e=>e>-on.core.EPSILON?e:e+2*Math.PI)).map(((e,t)=>({a:e,i:t}))).sort(((e,t)=>e.a-t.a)).map((e=>e.i)).map((e=>t[e]))},to=(e,t,r)=>{let{vertices_coords:n}=e;return t.map((e=>({i:e,d:on.core.dot(n[e],r)}))).sort(((e,t)=>e.d-t.d)).map((e=>e.i))};var ro=Object.freeze({__proto__:null,sortVerticesCounterClockwise:eo,sortVerticesAlongVector:to});const no=e=>{let{edges_vertices:t}=e;const r=[];return t.forEach(((e,t)=>e.forEach((e=>{void 0===r[e]&&(r[e]=[]),r[e].push(t)})))),r},oo=e=>{let{edges_vertices:t,vertices_vertices:r}=e;const n=ao({edges_vertices:t});return r.map(((e,t)=>e.map((e=>n["".concat(t," ").concat(e)]))))},co=e=>{let{vertices_coords:t,vertices_edges:r,edges_vertices:n}=e;r||(r=no({edges_vertices:n}));const o=r.map(((e,t)=>e.map((e=>n[e].filter((e=>e!==t)))).reduce(((e,t)=>e.concat(t)),[])));return void 0===t?o:o.map(((e,r)=>eo({vertices_coords:t},e,r)))},so=e=>{let{vertices_coords:t,faces_vertices:r}=e;if(!r)return t.map((()=>[]));const n=void 0!==t?t.map((()=>[])):Array.from(Array(Yn.vertices({faces_vertices:r}))).map((()=>[]));return r.forEach(((e,t)=>{const r=[];e.forEach((e=>{r[e]=t})),r.forEach(((e,t)=>n[t].push(e)))})),n},io=e=>{let{vertices_coords:t,vertices_vertices:r,faces_vertices:n}=e;if(!n)return t.map((()=>[]));if(!r)return so({vertices_coords:t,faces_vertices:n});const o=uo({faces_vertices:n});return r.map(((e,t)=>e.map(((e,r,n)=>[n[(r+1)%n.length],t,e].join(" "))))).map((e=>e.map((e=>o[e]))))},ao=e=>{let{edges_vertices:t}=e;const r={};return t.map((e=>e.join(" "))).forEach(((e,t)=>{r[e]=t})),t.map((e=>"".concat(e[1]," ").concat(e[0]))).forEach(((e,t)=>{r[e]=t})),r},lo=e=>{let{edges_vertices:t}=e;const r={};return t.map((e=>e.join(" "))).forEach(((e,t)=>{r[e]=t})),r},uo=e=>{let{faces_vertices:t}=e;const r={};return t.forEach(((e,t)=>e.map(((t,r)=>[0,1,2].map((t=>(r+t)%e.length)).map((t=>e[t])).join(" "))).forEach((e=>{r[e]=t})))),r},fo=e=>{let{vertices_coords:t,vertices_vertices:r,edges_vertices:n,edges_vector:o}=e;o||(o=bo({vertices_coords:t,edges_vertices:n}));const c=lo({edges_vertices:n});return r.map(((e,t)=>r[t].map((e=>{const r=c["".concat(t," ").concat(e)],n=c["".concat(e," ").concat(t)];return void 0!==r?o[r]:void 0!==n?on.core.flip(o[n]):void 0}))))},go=e=>{let{vertices_coords:t,vertices_vertices:r,edges_vertices:n,edges_vector:o}=e;return fo({vertices_coords:t,vertices_vertices:r,edges_vertices:n,edges_vector:o}).map((e=>1===e.length?[on.core.TWO_PI]:on.core.counterClockwiseSectors2(e)))},ho=e=>{let{edges_vertices:t,faces_edges:r}=e;const n=void 0!==t?t.map((()=>[])):Array.from(Array(Yn.edges({faces_edges:r}))).map((()=>[]));return r.forEach(((e,t)=>{const r=[];e.forEach((e=>{r[e]=t})),r.forEach(((e,t)=>n[t].push(e)))})),n},po=e=>{let{vertices_coords:t,edges_vertices:r,edges_vector:n,faces_vertices:o,faces_edges:c,faces_center:s}=e;if(!r)return ho({faces_edges:c});n||(n=bo({vertices_coords:t,edges_vertices:r}));const i=r.map((e=>t[e[0]]));s||(s=wo({vertices_coords:t,faces_vertices:o}));const a=r.map((()=>[]));return c.forEach(((e,t)=>{const r=[];e.forEach((e=>{r[e]=t})),r.forEach(((e,t)=>a[t].push(e)))})),a.forEach(((e,t)=>{const r=e.map((e=>s[e])).map((e=>on.core.subtract2(e,i[t]))).map((e=>on.core.cross2(e,n[t])));e.sort(((e,t)=>r[e]-r[t]))})),a},mo={M:-180,m:-180,V:180,v:180},vo=e=>{let{edges_assignment:t}=e;return t.map((e=>mo[e]||0))},_o=e=>{let{edges_foldAngle:t}=e;return t.map((e=>0===e?"F":e<0?"M":"V"))},yo=e=>{let{vertices_coords:t,edges_vertices:r}=e;return r.map((e=>e.map((e=>t[e]))))},bo=e=>{let{vertices_coords:t,edges_vertices:r}=e;return yo({vertices_coords:t,edges_vertices:r}).map((e=>on.core.subtract(e[1],e[0])))},Eo=function(e){let{vertices_coords:t,edges_vertices:r,edges_coords:n}=e,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return n||(n=yo({vertices_coords:t,edges_vertices:r})),n.map((e=>on.core.boundingBox(e,o)))},xo=e=>{let{vertices_coords:t,vertices_vertices:r,vertices_edges:n,vertices_sectors:o,edges_vertices:c,edges_vector:s}=e;r||(r=co({vertices_coords:t,edges_vertices:c,vertices_edges:n})),o||(o=go({vertices_coords:t,vertices_vertices:r,edges_vertices:c,edges_vector:s}));const i=ao({edges_vertices:c});return $n(Kn({vertices_vertices:r,vertices_sectors:o})).map((e=>({...e,edges:e.edges.map((e=>i[e]))})))},Ao=e=>e.faces_edges.map((t=>t.map((t=>e.edges_vertices[t])).map(((e,t,r)=>{const n=r[(t+1)%r.length];return e[0]===n[0]||e[0]===n[1]?e[1]:e[0]})))),Oo=e=>{const t=ao(e);return e.faces_vertices.map((e=>e.map(((e,t,r)=>[e,r[(t+1)%r.length]].join(" "))))).map((e=>e.map((e=>t[e]))))},ko=e=>{let{faces_vertices:t}=e;const r=t.map((()=>[])),n={};return t.map(((e,t)=>e.map(((r,o,c)=>{let s=c[(o+1)%e.length];s<r&&([r,s]=[s,r]);const i="".concat(r," ").concat(s);void 0===n[i]&&(n[i]={}),n[i][t]=!0})))),Object.values(n).map((e=>Object.keys(e))).filter((e=>e.length>1)).forEach((e=>{r[e[0]].push(parseInt(e[1],10)),r[e[1]].push(parseInt(e[0],10))})),r},Mo=(e,t)=>{let{vertices_coords:r,faces_vertices:n}=e;return n.map((e=>e.map((e=>r[e])))).map((e=>on.core.makePolygonNonCollinear(e,t)))},wo=e=>{let{vertices_coords:t,faces_vertices:r}=e;return r.map((e=>e.map((e=>t[e])))).map((e=>on.core.centroid(e)))},jo=e=>{let{vertices_coords:t,faces_vertices:r}=e;return r.map((e=>e.map((e=>t[e])).reduce(((e,t)=>[e[0]+t[0],e[1]+t[1]]),[0,0]).map((t=>t/e.length))))};var Po=Object.freeze({__proto__:null,makeVerticesEdgesUnsorted:no,makeVerticesEdges:oo,makeVerticesVertices:co,makeVerticesFacesUnsorted:so,makeVerticesFaces:io,makeVerticesToEdgeBidirectional:ao,makeVerticesToEdge:lo,makeVerticesToFace:uo,makeVerticesVerticesVector:fo,makeVerticesSectors:go,makeEdgesEdges:e=>{let{edges_vertices:t,vertices_edges:r}=e;return t.map(((e,t)=>{const n=r[e[0]].filter((e=>e!==t)),o=r[e[1]].filter((e=>e!==t));return n.concat(o)}))},makeEdgesFacesUnsorted:ho,makeEdgesFaces:po,makeEdgesFoldAngle:vo,makeEdgesAssignment:_o,makeEdgesCoords:yo,makeEdgesVector:bo,makeEdgesLength:e=>{let{vertices_coords:t,edges_vertices:r}=e;return bo({vertices_coords:t,edges_vertices:r}).map((e=>on.core.magnitude(e)))},makeEdgesBoundingBox:Eo,makePlanarFaces:xo,makeFacesVerticesFromEdges:Ao,makeFacesEdgesFromVertices:Oo,makeFacesFaces:ko,makeFacesPolygon:Mo,makeFacesPolygonQuick:e=>{let{vertices_coords:t,faces_vertices:r}=e;return r.map((e=>e.map((e=>t[e]))))},makeFacesCenter:wo,makeFacesCenterQuick:jo});const So=e=>{let{edges_vertices:t}=e;const r=[];for(let n=0;n<t.length;n+=1)t[n][0]===t[n][1]&&r.push(n);return r},Co=e=>{let{edges_vertices:t}=e;if(!t)return[];const r=[],n={};for(let o=0;o<t.length;o+=1){const e="".concat(t[o][0]," ").concat(t[o][1]),c="".concat(t[o][1]," ").concat(t[o][0]);void 0!==n[e]?r[o]=n[e]:(n[e]=o,n[c]=o)}return r},Lo=(e,t)=>(t||(t=So(e)),t.length&&((e,t,r)=>{const n={};r.forEach((e=>{n[e]=!0})),Mn(e,t).forEach((t=>e[t].forEach(((r,o)=>{for(let c=r.length-1;c>=0;c-=1)!0===n[r[c]]&&e[t][o].splice(c,1)}))))})(e,a,t),{map:Rn(e,a,t),remove:t}),No=(e,t)=>{t||(t=Co(e));const r=Object.keys(t).map((e=>parseInt(e,10))),n=Un(e,a,t);return r.length&&(e.vertices_edges||e.vertices_vertices||e.vertices_faces)&&(e.vertices_edges=no(e),e.vertices_vertices=co(e),e.vertices_edges=oo(e),e.vertices_faces=io(e)),{map:n,remove:r}};var zo=Object.freeze({__proto__:null,getCircularEdges:So,getDuplicateEdges:Co,removeCircularEdges:Lo,removeDuplicateEdges:No});const Fo=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(0===t.length)return[];const n=t[0].map(((e,t)=>t));return t.forEach((e=>n.forEach(((t,r)=>{n[r]=e[t]})))),n},Io=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(0===t.length)return[];const n=t[0].map(((e,t)=>[t]));return t.forEach((e=>{n.forEach(((t,r)=>t.forEach(((t,o)=>{n[r][o]=e[t]})))),n.forEach(((e,t)=>{n[t]=e.reduce(((e,t)=>e.concat(t)),[]).filter((e=>void 0!==e))}))})),n},Vo=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(0===t.length)return[];let n=t[0].reduce(((e,t)=>e.concat(t)),[]).map(((e,t)=>[t]));return t.forEach((e=>{const t=[];e.forEach(((e,r)=>{t[r]=typeof e===o?n[e]:e.map((e=>n[e])).reduce(((e,t)=>e.concat(t)),[])})),n=t})),n},Bo=e=>{const t=[];return e.forEach(((e,r)=>{null!=e&&(typeof e===o&&(void 0!==t[e]?typeof t[e]===o?t[e]=[t[e],r]:t[e].push(r):t[e]=r),e.constructor===Array&&e.forEach((e=>{t[e]=r})))})),t},To=e=>{const t=[];return e.forEach(((e,r)=>{t[e]=r})),t};var qo=Object.freeze({__proto__:null,mergeSimpleNextmaps:Fo,mergeNextmaps:Io,mergeSimpleBackmaps:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(0===t.length)return[];let n=t[0].map(((e,t)=>t));return t.forEach((e=>{const t=e.map((e=>n[e]));n=t})),n},mergeBackmaps:Vo,invertMap:Bo,invertSimpleMap:To});const Ro=(e,t)=>{const r=Zn(e,t),n=Lo(e),o=No(e),c=Wn(e),s=To(r.map),i=c.remove.map((e=>s[e])),a=To(n.map),l=o.remove.map((e=>a[e]));return{vertices:{map:Fo(r.map,c.map),remove:r.remove.concat(i)},edges:{map:Fo(n.map,o.map),remove:n.remove.concat(l)}}},Uo=(e,t)=>{const r=Co(e),n=So(e),o=Gn(e),c=Dn(e,t),s=(e=>{const t=Nn.vertices(e),r=Nn.edges(e),n=Nn.faces(e);return{vertices:t>=Yn.vertices(e),edges:r>=Yn.edges(e),faces:n>=Yn.faces(e)}})(e);return{summary:0===r.length&&0===n.length&&0===o.length&&s.vertices&&s.edges&&s.faces?"valid":"problematic",vertices:{isolated:o,duplicate:c,references:s.vertices},edges:{circular:n,duplicate:r,references:s.edges},faces:{references:s.faces}}},Do=(e,t)=>"object"!==typeof e?e:e.edges_vertices?(e.vertices_edges=no(e),e.vertices_vertices=co(e),e.vertices_edges=oo(e),(e=>{const t=e.edges_vertices.length;if(e.edges_assignment||(e.edges_assignment=[]),e.edges_foldAngle||(e.edges_foldAngle=[]),e.edges_assignment.length>e.edges_foldAngle.length)for(let r=e.edges_foldAngle.length;r<e.edges_assignment.length;r+=1)e.edges_foldAngle[r]=yn(e.edges_assignment[r]);if(e.edges_foldAngle.length>e.edges_assignment.length)for(let r=e.edges_assignment.length;r<e.edges_foldAngle.length;r+=1)e.edges_assignment[r]=bn(e.edges_foldAngle[r]);for(let r=e.edges_assignment.length;r<t;r+=1)e.edges_assignment[r]="U",e.edges_foldAngle[r]=0})(e),((e,t)=>{if(void 0!==t||e.faces_vertices||e.faces_edges||(t=!0),t&&e.vertices_coords){const t=xo(e);return e.faces_vertices=t.map((e=>e.vertices)),void(e.faces_edges=t.map((e=>e.edges)))}e.faces_vertices&&e.faces_edges||(e.faces_vertices&&!e.faces_edges?e.faces_edges=Oo(e):e.faces_edges&&!e.faces_vertices?e.faces_vertices=Ao(e):(e.faces_vertices=[],e.faces_edges=[]))})(e,t),e.vertices_faces=io(e),e.edges_faces=ho(e),e.faces_faces=ko(e),e):e,Go=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:on.core.EPSILON;return Eo(e,t).map((t=>e.vertices_coords.map((e=>e[0]>t.min[0]&&e[1]>t.min[1]&&e[0]<t.max[0]&&e[1]<t.max[1]))))},Wo=function(e){let{vertices_coords:t,edges_vertices:r,edges_coords:n}=e,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:on.core.EPSILON;const c=Eo({vertices_coords:t,edges_vertices:r,edges_coords:n},o),s=r.map((()=>[]));for(let i=0;i<r.length-1;i+=1)for(let e=i+1;e<r.length;e+=1){const t=(c[i].max[0]<c[e].min[0]||c[e].max[0]<c[i].min[0])&&(c[i].max[1]<c[e].min[1]||c[e].max[1]<c[i].min[1]);s[i][e]=!t,s[e][i]=!t}for(let i=0;i<r.length;i+=1)s[i][i]=!0;return s};var Zo=Object.freeze({__proto__:null,getEdgesVerticesOverlappingSpan:Go,getEdgesEdgesOverlapingSpans:Wo});const Ho=function(e,t){let{vertices_coords:r,vertices_edges:n,edges_vertices:o}=e,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:on.core.EPSILON;if(!r||!o)return!1;n||(n=no({edges_vertices:o}));const s=n[t];if(void 0===s||2!==s.length)return!1;const i=((e,t,r)=>{let{edges_vertices:n}=e;return r.forEach((e=>{n[e][0]===t&&n[e][1]===t&&console.warn("removePlanarVertex circular edge")})),r.map((e=>n[e][0]===t?n[e][1]:n[e][0]))})({edges_vertices:o},t,s),a=[i[0],t,i[1]].map((e=>r[e]));return on.core.collinearBetween(...a,!1,c)},Jo=function(e){let{vertices_coords:t,edges_vertices:r,edges_coords:n}=e,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:on.core.EPSILON;n||(n=r.map((e=>e.map((e=>t[e])))));const c=Go({vertices_coords:t,edges_vertices:r,edges_coords:n},o);for(let s=0;s<n.length;s+=1)for(let e=0;e<t.length;e+=1)c[s][e]&&(c[s][e]=on.core.overlapLinePoint(on.core.subtract(n[s][1],n[s][0]),n[s][0],t[e],on.core.excludeS,o));return c.map((e=>e.map(((e,t)=>e?t:void 0)).filter((e=>void 0!==e))))};var Yo=Object.freeze({__proto__:null,isVertexCollinear:Ho,getVerticesEdgesOverlap:Jo});const Xo=function(e,t,r){let{vertices_coords:n,edges_vertices:o}=e,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:on.core.EPSILON;const s=on.core.normalize2(t),i=o.map((e=>n[e[0]])),a=o.map((e=>e.map((e=>n[e])))).map((e=>on.core.subtract2(e[1],e[0]))).map((e=>on.core.parallel2(e,t,c)));for(let l=0;l<o.length;l+=1){if(!a[l])continue;if(on.core.fnEpsilonEqualVectors(i[l],r)){a[l]=!0;continue}const e=on.core.normalize2(on.core.subtract2(i[l],r)),t=Math.abs(on.core.dot2(e,s));a[l]=Math.abs(1-t)<c}return a},Ko=function(e,t,r){let{vertices_coords:n,edges_vertices:o,edges_coords:c}=e,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:on.core.EPSILON;c||(c=yo({vertices_coords:n,edges_vertices:o}));const i=on.core.boundingBox([t,r],s),a=on.core.subtract2(r,t);return Eo({vertices_coords:n,edges_vertices:o,edges_coords:c},s).map((e=>on.core.overlapBoundingBoxes(i,e))).map(((e,r)=>e?on.core.intersectLineLine(a,t,on.core.subtract2(c[r][1],c[r][0]),c[r][0],on.core.includeS,on.core.includeS,s):void 0))},$o=function(e){let{vertices_coords:t,edges_vertices:r,edges_vector:n,edges_origin:o}=e,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:on.core.EPSILON;n||(n=bo({vertices_coords:t,edges_vertices:r})),o||(o=r.map((e=>t[e[0]])));const s=n.map((()=>[])),i=Wo({vertices_coords:t,edges_vertices:r},c);for(let a=0;a<n.length-1;a+=1)for(let e=a+1;e<n.length;e+=1)!0===i[a][e]?(s[a][e]=on.core.intersectLineLine(n[a],o[a],n[e],o[e],on.core.excludeS,on.core.excludeS,c),s[e][a]=s[a][e]):s[a][e]=void 0;return s},Qo=function(e,t,r,n){let{vertices_coords:o,edges_vertices:c,faces_vertices:s,faces_edges:i}=e,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:on.core.EPSILON;const l=s[t].map((e=>o[e])).map((e=>on.core.overlapLinePoint(r,n,e,(()=>!0),a))).map(((e,t)=>e?t:void 0)).filter((e=>void 0!==e)),u=l.map((e=>s[t][e]));if(l.concat(l.map((e=>e+s[t].length))).map(((e,t,r)=>r[t+1]-e===1)).reduce(((e,t)=>e||t),!1))return;if(u.length>1)return{vertices:u,edges:[]};const d=i[t].map((e=>c[e].map((e=>o[e])))).map((e=>on.core.intersectLineLine(r,n,on.core.subtract(e[1],e[0]),e[0],on.core.includeL,on.core.excludeS,a))).map(((e,r)=>({coords:e,edge:i[t][r]}))).filter((e=>void 0!==e.coords)).filter((e=>!u.map((t=>c[e.edge].includes(t))).reduce(((e,t)=>e||t),!1)));return d.length+u.length===2?{vertices:u,edges:d}:void 0};var ec=Object.freeze({__proto__:null,makeEdgesLineParallelOverlap:Xo,makeEdgesSegmentIntersection:Ko,makeEdgesEdgesIntersection:$o,intersectConvexFaceLine:Qo});const tc=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:on.core.EPSILON;const r=e.edges_vertices.map((t=>t.map((t=>e.vertices_coords[t])))),n=r.map((e=>on.core.subtract(e[1],e[0]))),o=r.map((e=>e[0])),c=$o({vertices_coords:e.vertices_coords,edges_vertices:e.edges_vertices,edges_vector:n,edges_origin:o},1e-6),s=Jo({vertices_coords:e.vertices_coords,edges_vertices:e.edges_vertices,edges_coords:r},t);if(0===c.flat().filter((e=>void 0!==e)).length&&0===s.flat().filter((e=>void 0!==e)).length)return;const i=e.vertices_coords.length;c.forEach((t=>t.filter((e=>void 0!==e)).filter((e=>2===e.length)).forEach((t=>{const r=e.vertices_coords.length;e.vertices_coords.push([...t]),t.splice(0,2),t.push(r)})))),c.forEach(((e,t)=>{e.forEach(((e,r)=>{e&&(c[t][r]=e[0])}))}));const a=c.map((e=>e.filter((e=>void 0!==e))));e.edges_vertices.forEach(((e,t)=>e.push(...a[t],...s[t]))),e.edges_vertices.forEach(((t,r)=>{e.edges_vertices[r]=to({vertices_coords:e.vertices_coords},t,n[r])}));const l=e.edges_vertices.map(((e,t)=>Array(e.length-1).fill(t))).flat();if(e.edges_vertices=e.edges_vertices.map((e=>Array.from(Array(e.length-1)).map(((t,r,n)=>[e[r],e[r+1]])))).flat(),e.edges_assignment&&e.edges_foldAngle&&e.edges_foldAngle.length>e.edges_assignment.length)for(let u=e.edges_assignment.length;u<e.edges_foldAngle.length;u+=1)e.edges_assignment[u]=bn(e.edges_foldAngle[u]);return e.edges_assignment&&(e.edges_assignment=l.map((t=>e.edges_assignment[t]||"U"))),e.edges_foldAngle&&(e.edges_foldAngle=l.map((t=>e.edges_foldAngle[t])).map(((t,r)=>void 0===t?yn(e.edges_assignment[r]):t))),{vertices:{new:Array.from(Array(e.vertices_coords.length-i)).map(((e,t)=>i+t))},edges:{backmap:l}}},rc=[d,f,h,p],nc=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:on.core.EPSILON;e.vertices_coords=e.vertices_coords.map((e=>e.slice(0,2))),[i,a,l].map((t=>kn(e,t))).flat().filter((e=>!rc.includes(e))).forEach((t=>delete e[t]));const r={vertices:{},edges:{}};let n;for(n=0;n<20;n+=1){const n=Zn(e,t/2),o=No(e),c=Lo(e),s=tc(e,t);if(void 0===s){r.vertices.map=void 0===r.vertices.map?n.map:Io(r.vertices.map,n.map),r.edges.map=void 0===r.edges.map?Io(o.map,c.map):Io(r.edges.map,o.map,c.map);break}const i=Bo(s.edges.backmap),a=Io(o.map,c.map,i);r.vertices.map=void 0===r.vertices.map?n.map:Io(r.vertices.map,n.map),r.edges.map=void 0===r.edges.map?a:Io(r.edges.map,a)}return 20===n&&console.warn("fragment reached max iterations"),r},oc=e=>{let{edges_vertices:t,edges_assignment:r}=e;return zn(t.filter(((e,t)=>"B"===r[t]||"b"===r[t])).flat())},cc=e=>{let{vertices_edges:t,edges_vertices:r,edges_assignment:n}=e;if(void 0===n)return{vertices:[],edges:[]};t||(t=no({edges_vertices:r}));const o=n.map((e=>"B"===e||"b"===e)),c=[],s=[];let i=-1;for(let l=0;l<o.length;l+=1)if(o[l]){i=l;break}if(-1===i)return{vertices:[],edges:[]};o[i]=!1,c.push(i),s.push(r[i][0]);let a=r[i][1];for(;s[0]!==a;){if(s.push(a),i=t[a].filter((e=>o[e])).shift(),void 0===i)return{vertices:[],edges:[]};r[i][0]===a?[,a]=r[i]:[a]=r[i],o[i]=!1,c.push(i)}return{vertices:s,edges:c}};var sc=Object.freeze({__proto__:null,getBoundingBox:(e,t)=>{let{vertices_coords:r}=e;return on.core.boundingBox(r,t)},getBoundaryVertices:oc,getBoundary:cc,getPlanarBoundary:e=>{let{vertices_coords:t,vertices_edges:r,vertices_vertices:n,edges_vertices:o}=e;n||(n=co({vertices_coords:t,vertices_edges:r,edges_vertices:o}));const c=ao({edges_vertices:o}),s=[],i=[],a={vertices:i,edges:s};let l=-1/0,u=-1;if(t.forEach(((e,t)=>{e[0]>l&&(l=e[0],u=t)})),-1===u)return a;i.push(u);const d=t[u],f=n[u],g=f.map((e=>t[e])).map((e=>[e[0]-d[0],e[1]-d[1]])).map((e=>Math.atan2(e[1],e[0]))).map((e=>e<0?e+2*Math.PI:e)).map(((e,t)=>({a:e,i:t}))).sort(((e,t)=>e.a-t.a)).shift().i,h=f[g],p=c[u<h?"".concat(u," ").concat(h):"".concat(h," ").concat(u)];s.push(p);let m=u,v=h,_=0;for(;_<1e4;){const e=n[v],t=e.indexOf(m),r=e[(t+1)%e.length],o=c[v<r?"".concat(v," ").concat(r):"".concat(r," ").concat(v)];if(o===s[0])return a;i.push(v),s.push(o),m=v,v=r,_+=1}return console.warn("calculate boundary potentially entered infinite loop"),a}});const ic=function(e,t){return An(e,"coords").forEach((r=>{e[r]=e[r].map((e=>on.core.resize(3,e))).map((e=>on.core.multiplyMatrix3Vector3(t,e)))})),An(e,"matrix").forEach((r=>{e[r]=e[r].map((e=>on.core.multiplyMatrices3(e,t)))})),e};var ac={scale:function(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),o=2;o<r;o++)n[o-2]=arguments[o];const c=on.core.getVector(...n),s=on.core.resize(3,c),i=on.core.makeMatrix3Scale(t,s);return ic(e,i)},translate:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];const o=on.core.getVector(...r),c=on.core.resize(3,o),s=on.core.makeMatrix3Translate(...c);return ic(e,s)},rotateZ:function(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),o=2;o<r;o++)n[o-2]=arguments[o];const c=on.core.getVector(...n),s=on.core.resize(3,c),i=on.core.makeMatrix3RotateZ(t,...s);return ic(e,i)},transform:ic};const lc=(e,t)=>{const r={};t.forEach((e=>{r[e]=!0}));const n=e.map((e=>!!r[e])),o=[],c=n.indexOf(!1),s={};for(let i=c+1;i<n.length;i+=1)n[i]&&!s[e[i]]&&(o.push(e[i]),s[e[i]]=!0);for(let i=0;i<c;i+=1)n[i]&&!s[e[i]]&&(o.push(e[i]),s[e[i]]=!0);return o},uc=function(e){let{faces_vertices:t,faces_faces:r}=e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(r||(r=ko({faces_vertices:t})),0===r.length)return[];const o=[[{face:n}]],c={};c[n]=!0;do{const e=o[o.length-1].map((e=>r[e.face].map((t=>({face:t,parent:e.face}))))).reduce(((e,t)=>e.concat(t)),[]),n={};e.forEach(((e,t)=>{c[e.face]&&(n[t]=!0),c[e.face]=!0}));const s=e.filter(((e,t)=>!n[t]));s.map((e=>lc(t[e.face],t[e.parent]))).forEach(((e,t)=>{const r=e.slice(0,2);s[t].edge_vertices=r})),o[o.length]=s}while(o[o.length-1].length>0);return o.length>0&&0===o[o.length-1].length&&o.pop(),o};var dc=Object.freeze({__proto__:null,getFaceFaceSharedVertices:lc,makeFaceSpanningTree:uc});const fc=(e,t)=>{let{vertices_coords:r,vertices_faces:n,faces_vertices:o}=e;n||(n=io({faces_vertices:o}));const c=n.map((e=>e.filter((e=>null!=e)).shift())).map((e=>void 0===e?on.core.identity2x3:t[e]));return r.map(((e,t)=>on.core.multiplyMatrix2Vector2(c[t],e)))},gc={U:!0,u:!0},hc=function(e){let{vertices_coords:t,edges_vertices:r,edges_foldAngle:n,edges_assignment:o,faces_vertices:c,faces_faces:s}=e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;!o&&n&&(o=_o({edges_foldAngle:n})),n||(n=o?vo({edges_assignment:o}):Array(r.length).fill(0));const a=ao({edges_vertices:r}),l=c.map((()=>on.core.identity3x4));return uc({faces_vertices:c,faces_faces:s},i).slice(1).forEach((e=>e.forEach((e=>{const r=e.edge_vertices.map((e=>t[e])),c=e.edge_vertices.join(" "),s=a[c],i=gc[o[s]]?Math.PI:n[s]*Math.PI/180,u=on.core.makeMatrix3Rotate(i,on.core.subtract(...on.core.resizeUp(r[1],r[0])),r[0]);l[e.face]=on.core.multiplyMatrices3(l[e.parent],u)})))),l},pc={M:!0,m:!0,V:!0,v:!0,U:!0,u:!0,F:!1,f:!1,B:!1,b:!1},mc=e=>{let{edges_vertices:t,edges_foldAngle:r,edges_assignment:n}=e;return void 0===n?void 0===r?t.map((()=>!0)):r.map((e=>e<-on.core.EPSILON||e>on.core.EPSILON)):n.map((e=>pc[e]))},vc=function(e){let{vertices_coords:t,edges_vertices:r,edges_foldAngle:n,edges_assignment:o,faces_vertices:c,faces_faces:s}=e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;n||(n=o?vo({edges_assignment:o}):Array(r.length).fill(0));const a=mc({edges_vertices:r,edges_foldAngle:n,edges_assignment:o}),l=ao({edges_vertices:r}),u=c.map((()=>on.core.identity2x3));return uc({faces_vertices:c,faces_faces:s},i).slice(1).forEach((e=>e.forEach((e=>{const r=e.edge_vertices.map((e=>t[e])),n=e.edge_vertices.join(" "),o=l[n],c=on.core.subtract2(r[1],r[0]),s=r[0],i=a[o]?on.core.makeMatrix2Reflect(c,s):on.core.identity2x3;u[e.face]=on.core.multiplyMatrices2(u[e.parent],i)})))),u};var _c=Object.freeze({__proto__:null,multiplyVerticesFacesMatrix2:fc,makeFacesMatrix:hc,makeEdgesIsFolded:mc,makeFacesMatrix2:vc});const yc=(e,t)=>{let{vertices_coords:r,vertices_faces:n,edges_vertices:o,edges_foldAngle:c,edges_assignment:s,faces_vertices:i,faces_faces:a,faces_matrix:l}=e;l=hc({vertices_coords:r,edges_vertices:o,edges_foldAngle:c,edges_assignment:s,faces_vertices:i,faces_faces:a},t),n||(n=io({faces_vertices:i}));const u=n.map((e=>e.filter((e=>null!=e)).shift())).map((e=>void 0===e?on.core.identity3x4:l[e]));return r.map((e=>on.core.resize(3,e))).map(((e,t)=>on.core.multiplyMatrix3Vector3(u[t],e)))},bc=function(e){let{vertices_coords:t,edges_vertices:r,edges_foldAngle:n,edges_assignment:o,faces_vertices:c,faces_faces:s}=e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const a=mc({edges_vertices:r,edges_foldAngle:n,edges_assignment:o}),l=[];c[i].forEach((e=>{l[e]=[...t[e]]}));const u=[];u[i]=!1;const d=ao({edges_vertices:r});return uc({faces_vertices:c,faces_faces:s},i).slice(1).forEach((e=>e.forEach((e=>{const n=e.edge_vertices.join(" "),o=d[n],s=r[o].map((e=>l[e]));if(void 0===s[0]||void 0===s[1])return;const i=r[o].map((e=>t[e])),f=i[0],g=on.core.normalize2(on.core.subtract2(i[1],i[0])),h=on.core.rotate90(g);u[e.face]=a[o]?!u[e.parent]:u[e.parent];const p=on.core.normalize2(on.core.subtract2(s[1],s[0])),m=s[0],v=u[e.face]?on.core.rotate270(p):on.core.rotate90(p);c[e.face].filter((e=>void 0===l[e])).forEach((e=>{const r=on.core.subtract2(t[e],f),n=on.core.dot(r,h),o=on.core.dot(r,g),c=on.core.scale2(p,o),s=on.core.scale2(v,n),i=on.core.add2(on.core.add2(m,c),s);l[e]=i}))})))),l};var Ec=Object.freeze({__proto__:null,makeVerticesCoordsFolded:yc,makeVerticesCoordsFlatFolded:bc});const xc=e=>e.map((e=>e[0]*e[3]-e[1]*e[2])).map((e=>e>=0)),Ac=e=>{let{vertices_coords:t,faces_vertices:r}=e;return r.map((e=>e.map((e=>t[e])).map(((e,t,r)=>[e,r[(t+1)%r.length]])).map((e=>(e[1][0]-e[0][0])*(e[1][1]+e[0][1]))).reduce(((e,t)=>e+t),0))).map((e=>e<0))};var Oc=Object.freeze({__proto__:null,makeFacesWindingFromMatrix:e=>e.map((e=>e[0]*e[4]-e[1]*e[3])).map((e=>e>=0)),makeFacesWindingFromMatrix2:xc,makeFacesWinding:Ac});const kc=e=>{const t=e.faces_vertices.map((t=>t.map((t=>e.vertices_coords[t])))).reduce(((e,t)=>e.concat(t)),[]);let r=0;const n=e.faces_vertices.map((e=>e.map((e=>r++))));return{vertices_coords:JSON.parse(JSON.stringify(t)),faces_vertices:n}},Mc=function(e){let{vertices_coords:t,faces_vertices:r}=e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.333;const o=kc({vertices_coords:t,faces_vertices:r}),c=Ac(o),s=o.faces_vertices.map((e=>e.map((e=>o.vertices_coords[e])))).map((e=>e.map(((e,t,r)=>on.core.subtract2(e,r[(t+1)%r.length]))))),i=jo({vertices_coords:t,faces_vertices:r}),a=r.map((e=>e.map((e=>t[e])))).map(((e,t)=>e.map((e=>on.core.distance2(e,i[t])))));console.log("faces_point_distances",a);const l=s.map(((e,t)=>e.map(((e,t,r)=>[e,on.core.flip(r[(t-1+r.length)%r.length])])).map((e=>c[t]?on.core.counterClockwiseBisect2(...e):on.core.clockwiseBisect2(...e))))).map(((e,t)=>e.map(((e,r)=>on.core.scale(e,a[t][r])))));return o.faces_vertices.forEach(((e,t)=>e.forEach(((e,r)=>{o.vertices_coords[e]=on.core.add2(o.vertices_coords[e],on.core.scale2(l[t][r],-n))})))),o};var wc=Object.freeze({__proto__:null,explodeFaces:kc,explodeShrinkFaces:Mc});const jc=(e,t)=>{let{vertices_coords:r}=e;if(!r)return;const n=on.core.resize(r[0].length,t),o=r.map(((e,t)=>({d:on.core.distance(n,e),i:t}))).sort(((e,t)=>e.d-t.d)).shift();return o?o.i:void 0},Pc=(e,t)=>{let{vertices_coords:r,edges_vertices:n}=e;if(!r||!n)return;const o=n.map((e=>e.map((e=>r[e])))).map((e=>on.core.nearestPointOnLine(on.core.subtract(e[1],e[0]),e[0],t,on.core.segmentLimiter)));return on.core.smallestComparisonSearch(t,o,on.core.distance)},Sc=(e,t)=>{let{vertices_coords:r,faces_vertices:n}=e;if(!r||!n)return;const o=n.map(((e,t)=>({face:e.map((e=>r[e])),i:t}))).filter((e=>on.core.overlapConvexPolygonPoint(e.face,t))).shift();return void 0===o?void 0:o.i},Cc=(e,t)=>{const r=Sc(e,t);if(void 0!==r)return r;if(e.edges_faces){const r=Pc(e,t),n=e.edges_faces[r];if(1===n.length)return n[0];if(n.length>1){const r=jo({vertices_coords:e.vertices_coords,faces_vertices:n.map((t=>e.faces_vertices[t]))}).map((e=>on.core.distance(e,t)));let o=0;for(let e=0;e<r.length;e+=1)r[e]<r[o]&&(o=e);return n[o]}}};var Lc=Object.freeze({__proto__:null,nearestVertex:jc,nearestEdge:Pc,faceContainingPoint:Sc,nearestFace:Cc});const Nc=function(e){let t,r;if(typeof e!==c)return e;if(!e)return e;if("[object Array]"===Object.prototype.toString.apply(e)){for(t=[],r=0;r<e.length;r+=1)t[r]=Nc(e[r]);return t}for(r in t={},e)e.hasOwnProperty(r)&&(t[r]=Nc(e[r]));return t},zc=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:on.core.EPSILON;e.vertices_coords||(e.vertices_coords=[]),"number"===typeof t[0]&&(t=[t]);const n=t.map((t=>e.vertices_coords.map((e=>on.core.distance(e,t)<r)).map(((e,t)=>e?t:void 0)).filter((e=>void 0!==e)).shift()));let o=e.vertices_coords.length;const c=t.filter(((e,t)=>void 0===n[t]));return e.vertices_coords.push(...c),n.map((e=>void 0===e?o++:e))},Fc=function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:on.core.EPSILON;if(e.edges_vertices.length<t)return{};const o=e.edges_vertices[t];r||(r=on.core.midpoint(...o));const c=o.map((t=>e.vertices_coords[t])).map((e=>on.core.distance(e,r)<n));if(c[0])return{vertex:o[0],edges:{}};if(c[1])return{vertex:o[1],edges:{}};const s=e.vertices_coords.length;e.vertices_coords[s]=r;const i=[0,1].map((t=>t+e.edges_vertices.length));((e,t,r)=>{const n=e.edges_vertices[t],o=[{edges_vertices:[n[0],r]},{edges_vertices:[r,n[1]]}];if(o.forEach((r=>[h,p].filter((r=>e[r]&&void 0!==e[r][t])).forEach((n=>{r[n]=e[n][t]})))),e.vertices_coords&&(e.edges_length||e.edges_vector)){const t=o.map((t=>t.edges_vertices.map((t=>e.vertices_coords[t]))));e.edges_vector&&o.forEach(((e,r)=>{e.edges_vector=on.core.subtract(t[r][1],t[r][0])})),e.edges_length&&o.forEach(((e,r)=>{e.edges_length=on.core.distance2(...t[r])}))}return o})(e,t,s).forEach(((t,r)=>Object.keys(t).forEach((n=>{e[n][i[r]]=t[n]})))),((e,t,r)=>{let{vertices_vertices:n}=e;n&&(n[t]=[...r],r.forEach(((e,r,o)=>{const c=o[(r+1)%o.length],s=n[e].indexOf(c);n[e][s]=t})))})(e,s,o),((e,t)=>{let{vertices_coords:r,vertices_vertices:n,vertices_sectors:o}=e;o&&(o[t]=1===n[t].length?[on.core.TWO_PI]:on.core.counterClockwiseSectors2(n[t].map((e=>on.core.subtract2(r[e],r[t])))))})(e,s),((e,t,r,n,o)=>{let{vertices_edges:c}=e;c&&(c[r]=[...o],n.map((e=>c[e].indexOf(t))).forEach(((e,t)=>{c[n[t]][e]=o[t]})))})(e,t,s,o,i);const l=((e,t)=>{let{vertices_faces:r,edges_vertices:n,edges_faces:o,faces_edges:c,faces_vertices:s}=e;if(o&&o[t])return o[t];const i=n[t];if(void 0!==r){const e=[];for(let t=0;t<r[i[0]].length;t+=1)for(let n=0;n<r[i[1]].length;n+=1)if(r[i[0]][t]===r[i[1]][n]){if(void 0===r[i[0]][t])continue;e.push(r[i[0]][t])}return e}if(c){const e=[];for(let r=0;r<c.length;r+=1)for(let n=0;n<c[r].length;n+=1)c[r][n]===t&&e.push(r);return e}s&&console.warn("todo: findAdjacentFacesToEdge")})(e,t);l&&(((e,t,r)=>{let{vertices_faces:n}=e;n&&(n[t]=[...r])})(e,s,l),((e,t,r)=>{let{edges_faces:n}=e;n&&t.forEach((e=>{n[e]=[...r]}))})(e,i,l),((e,t,r,n)=>{let{faces_vertices:o}=e;o&&n.map((e=>o[e])).forEach((e=>e.map(((e,t,n)=>{const o=(t+1)%n.length;return e===r[0]&&n[o]===r[1]||e===r[1]&&n[o]===r[0]?o:void 0})).filter((e=>void 0!==e)).sort(((e,t)=>t-e)).forEach((r=>e.splice(r,0,t)))))})(e,s,o,l),((e,t)=>{let{edges_vertices:r,faces_vertices:n,faces_edges:o}=e;const c=ao({edges_vertices:r});t.map((e=>n[e].map(((e,t,r)=>[e,r[(t+1)%r.length]])).map((e=>c[e.join(" ")])))).forEach(((e,r)=>{o[t[r]]=e}))})(e,l));const u=Rn(e,a,[t]);return i.forEach(((e,t)=>{i[t]=u[i[t]]})),u.splice(-2),u[t]=i,{vertex:s,edges:{map:u,new:i,remove:t}}},Ic=(e,t,r)=>{const n=e.edges_vertices.length,o=((e,t,r)=>{let{vertices_coords:n}=e;const o=t.map((e=>n[e])).reverse();return{edges_vertices:[...t],edges_foldAngle:0,edges_assignment:"U",edges_length:on.core.distance2(...o),edges_vector:on.core.subtract(...o),edges_faces:[r,r]}})(e,r,t);return Object.keys(o).filter((t=>void 0!==e[t])).forEach((t=>{e[t][n]=o[t]})),n},Vc=(e,t,r)=>{const n=[0,1].map((t=>e.faces_vertices.length+t));return((e,t,r)=>{let{edges_vertices:n,faces_vertices:o,faces_edges:c}=e;const s=r.map((e=>o[t].indexOf(e))),i=In(o[t],s).map((e=>({faces_vertices:e})));if(c){const e=ao({edges_vertices:n});i.map((t=>t.faces_vertices.map(((e,t,r)=>"".concat(e," ").concat(r[(t+1)%r.length]))).map((t=>e[t])))).forEach(((e,t)=>{i[t].faces_edges=e}))}return i})(e,t,r).forEach(((t,r)=>Object.keys(t).forEach((o=>{e[o][n[r]]=t[o]})))),n},Bc="splitFace potentially given a non-convex face",Tc=(e,t,r,n,o)=>{const c=Qo(e,t,r,n,o);if(void 0===c)return;const s=((e,t)=>{let r,{vertices:n,edges:o}=t;const c=o.map((t=>{const n=Fc(e,r?r[t.edge]:t.edge,t.coords);return r=r?Io(r,n.edges.map):n.edges.map,n}));let s;return n.push(...c.map((e=>e.vertex))),c.forEach((e=>{e.edges.remove=s?s[e.edges.remove]:e.edges.remove;const t=To(e.edges.map);s=s?Vo(s,t):t})),{vertices:n,edges:{map:r,remove:c.map((e=>e.edges.remove))}}})(e,c);s.edges.new=Ic(e,t,s.vertices),((e,t)=>{let{vertices_coords:r,vertices_vertices:n,edges_vertices:o}=e;const c=o[t][0],s=o[t][1];n[c]=eo({vertices_coords:r},n[c].concat(s),c),n[s]=eo({vertices_coords:r},n[s].concat(c),s)})(e,s.edges.new),((e,t)=>{let{edges_vertices:r,vertices_edges:n,vertices_vertices:o}=e;if(!n||!o)return;const c=r[t];c.map((e=>o[e])).map(((e,t)=>e.indexOf(c[(t+1)%c.length]))).forEach(((e,r)=>n[c[r]].splice(e,0,t)))})(e,s.edges.new);const i=Vc(e,t,s.vertices);((e,t,r)=>{const n={};r.forEach((t=>e.faces_vertices[t].forEach((e=>{n[e]||(n[e]=[]),n[e].push(t)})))),e.faces_vertices[t].forEach((r=>{const o=e.vertices_faces[r].indexOf(t),c=n[r];-1!==o&&c?e.vertices_faces[r].splice(o,1,...c):console.warn(Bc)}))})(e,t,i),((e,t,r,n)=>{const o={};n.forEach((t=>e.faces_edges[t].forEach((e=>{o[e]||(o[e]=[]),o[e].push(t)})))),[...e.faces_edges[t],r].forEach((r=>{const n=o[r],c=[];for(let o=0;o<e.edges_faces[r].length;o+=1)e.edges_faces[r][o]===t&&c.push(o);if(0===c.length||!n)return void console.warn(Bc);c.reverse().forEach((t=>e.edges_faces[r].splice(t,1)));const s=c[c.length-1];e.edges_faces[r].splice(s,0,...n)}))})(e,t,s.edges.new,i),((e,t,r)=>{let{faces_vertices:n,faces_faces:o}=e;const c=o[t],s=r.map((e=>n[e])),i=c.map((e=>{const t=n[e],o=[0,0];for(let r=0;r<s.length;r+=1){let e=0;for(let n=0;n<t.length;n+=1)-1!==s[r].indexOf(t[n])&&(e+=1);o[r]=e}return o[0]>=2?r[0]:o[1]>=2?r[1]:void 0}));r.forEach(((e,t,n)=>{o[e]=[n[(t+1)%r.length]]})),c.forEach(((e,r)=>{for(let n=0;n<o[e].length;n+=1)o[e][n]===t&&(o[e][n]=i[r],o[i[r]].push(e))}))})(e,t,i);const a=Rn(e,l,[t]);return i.forEach(((e,t)=>{i[t]=a[i[t]]})),a.splice(-2),a[t]=i,s.faces={map:a,new:i,remove:t},s},qc={};qc.prototype=Object.create(Object.prototype),qc.prototype.constructor=qc;const Rc=Object.assign({clean:Ro,validate:Uo,populate:Do,fragment:nc,addVertices:zc,splitEdge:Fc,faceSpanningTree:uc,explodeFaces:kc,explodeShrinkFaces:Mc},ac);Object.keys(Rc).forEach((e=>{qc.prototype[e]=function(){return Rc[e](this,...arguments)}})),qc.prototype.splitFace=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];const o=on.core.getLine(...r);return Tc(this,e,o.vector,o.origin)},qc.prototype.copy=function(){return Object.assign(Object.create(Object.getPrototypeOf(this)),Nc(this))},qc.prototype.clear=function(){return fn.graph.forEach((e=>delete this[e])),fn.orders.forEach((e=>delete this[e])),delete this.file_frames,this},qc.prototype.boundingBox=function(){return on.rect.fromPoints(this.vertices_coords)},qc.prototype.unitize=function(){if(!this.vertices_coords)return this;const e=on.core.bounding_box(this.vertices_coords),t=Math.max(...e.span),r=0===t?1:1/t,n=e.min;return this.vertices_coords=this.vertices_coords.map((e=>on.core.subtract(e,n))).map((e=>e.map((e=>e*r)))),this},qc.prototype.folded=function(){const e=this.faces_matrix2?fc(this,this.faces_matrix2):yc(this,...arguments);return Object.assign(Object.create(Object.getPrototypeOf(this)),Object.assign(Nc(this),{vertices_coords:e,frame_classes:[b]}))},qc.prototype.flatFolded=function(){const e=this.faces_matrix2?fc(this,this.faces_matrix2):bc(this,...arguments);return Object.assign(Object.create(Object.getPrototypeOf(this)),Object.assign(Nc(this),{vertices_coords:e,frame_classes:[b]}))};const Uc=function(e){const t=Object.create(null);return Object.keys(e).forEach((r=>{t[r.substring(this.length+1)]=e[r]})),t},Dc=function(e){return wn(this,e).map(Uc.bind(e)).map(un[e].bind(this))};[i,a,l].forEach((e=>Object.defineProperty(qc.prototype,e,{enumerable:!0,get:function(){return Dc.call(this,e)}}))),Object.defineProperty(qc.prototype,v,{enumerable:!0,get:function(){const e=cc(this),t=e.vertices.map((e=>this.vertices_coords[e]));return Object.keys(e).forEach((r=>{t[r]=e[r]})),Object.assign(t,e)}});const Gc={vertices:jc,edges:Pc,faces:Cc};qc.prototype.nearest=function(){const e=on.core.getVector(arguments),t=Object.create(null),r={};return[i,a,l].forEach((n=>{Object.defineProperty(t,mn[n],{enumerable:!0,get:()=>(void 0!==r[n]||(r[n]=Gc[n](this,e)),r[n])}),On(this,n).forEach((e=>Object.defineProperty(t,e,{enumerable:!0,get:()=>this[e][t[mn[n]]]})))})),t};var Wc=qc.prototype;const Zc=function(e,t){const r=cc(e).vertices.map((t=>e.vertices_coords[t])),n=t.vector?t.vector:on.core.subtract2(t[1],t[0]),o=t.origin?t.origin:t[0],c=t.domain_function?t.domain_function:on.core.includeL;return on.core.clipLineConvexPolygon(r,n,o,on.core.include,c)},Hc=(e,t)=>{e.edges_vertices||(e.edges_vertices=[]),"number"===typeof t[0]&&(t=[t]);const r=t.map(((t,r)=>e.edges_vertices.length+r));e.edges_vertices.push(...t);const n=No(e).map;return r.map((e=>n[e]))},Jc=function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:on.core.EPSILON;e.vertices_sectors||(e.vertices_sectors=go(e));const o=[t,r].map((e=>[e[0],e[1]])),c=on.core.subtract2(o[1],o[0]),s=Ko(e,o[0],o[1],n),i=s.map(((e,t)=>void 0===e?void 0:t)).filter((e=>void 0!==e)).sort(((e,t)=>e-t)),a={};i.forEach((t=>e.edges_faces[t].forEach((e=>{a[e]=!0}))));const l=Object.keys(a).map((e=>parseInt(e,10))).sort(((e,t)=>e-t)),u=i.reverse().map((t=>Fc(e,t,s[t],n))).map((e=>e.vertex)),d=zc(e,o,n),f={};u.forEach((e=>{f[e]=!0})),d.forEach((e=>{f[e]=!0}));const g=Object.keys(f).map((e=>parseInt(e,10))),h=to(e,g,c),p=ao(e),m=((e,t,r)=>{const n=Array.from(Array(t.length-1)).map(((e,r)=>[t[r],t[r+1]])),o=n.map((e=>e.join(" "))).map((e=>void 0===r[e])),c=n.filter(((e,t)=>o[t])),s=Array.from(Array(c.length)).map(((t,r)=>e.edges_vertices.length+r));s.forEach(((t,r)=>{e.edges_vertices[t]=c[r]})),e.edges_assignment&&s.forEach((t=>{e.edges_assignment[t]="U"})),e.edges_foldAngle&&s.forEach((t=>{e.edges_foldAngle[t]=0}));for(let a=0;a<t.length;a+=1){const r=t[a],n=[o[a-1]?t[a-1]:void 0,o[a]?t[a+1]:void 0].filter((e=>void 0!==e)),c=(e.vertices_vertices[r]?e.vertices_vertices[r]:[]).concat(n);e.vertices_vertices[r]=eo(e,c,t[a])}const i=ao(e);for(let a=0;a<t.length;a+=1){const r=t[a];e.vertices_edges[r]=e.vertices_vertices[r].map((e=>i["".concat(r," ").concat(e)]))}return t.map((t=>1===e.vertices_vertices[t].length?[on.core.TWO_PI]:on.core.counterClockwiseSectors2(e.vertices_vertices[t].map((r=>on.core.subtract2(e.vertices_coords[r],e.vertices_coords[t])))))).forEach(((r,n)=>{e.vertices_sectors[t[n]]=r})),s})(e,h,p);m.forEach((t=>{const r=e.edges_vertices[t];p["".concat(r[0]," ").concat(r[1])]=t,p["".concat(r[1]," ").concat(r[0])]=t}));const v=h.map((t=>e.vertices_vertices[t].map((e=>[[e,t],[t,e]])))).reduce(((e,t)=>e.concat(t)),[]).reduce(((e,t)=>e.concat(t)),[]),_={},y=v.map((t=>Xn(e,t[0],t[1],_))).filter((e=>void 0!==e)),b=$n(y);Rn(e,"faces",l);const E=b.map(((t,r)=>e.faces_vertices.length+r));return e.faces_vertices&&E.forEach(((t,r)=>{e.faces_vertices[t]=b[r].vertices})),e.faces_edges&&E.forEach(((t,r)=>{e.faces_edges[t]=b[r].edges.map((e=>p[e]))})),e.faces_angles&&E.forEach(((t,r)=>{e.faces_angles[t]=b[r].faces_angles})),e.vertices_faces&&(e.vertices_faces=io(e)),e.edges_faces&&(e.edges_faces=ho(e)),e.faces_faces&&(e.faces_faces=ko(e)),e.vertices_coords.length===e.vertices_vertices.length&&e.vertices_coords.length===e.vertices_edges.length&&e.vertices_coords.length===e.vertices_faces.length||console.warn("vertices mismatch",JSON.parse(JSON.stringify(e))),e.edges_vertices.length===e.edges_faces.length&&e.edges_vertices.length===e.edges_assignment.length||console.warn("edges mismatch",JSON.parse(JSON.stringify(e))),e.faces_vertices.length===e.faces_edges.length&&e.faces_vertices.length===e.faces_faces.length||console.warn("faces mismatch",JSON.parse(JSON.stringify(e))),m},Yc=(e,t)=>{const r=[...e.edges_vertices[t]].sort(((e,t)=>t-e)),n=[...e.edges_faces[t]];((e,t)=>{let{vertices_vertices:r}=e;const n=[t[1],t[0]];t.map(((e,t)=>r[e].indexOf(n[t]))).forEach(((e,n)=>r[t[n]].splice(e,1)))})(e,r),((e,t,r)=>{let{vertices_edges:n}=e;r.map(((e,r)=>n[e].indexOf(t))).forEach(((e,t)=>n[r[t]].splice(e,1)))})(e,t,r);const o=r.map((t=>0===e.vertices_vertices[t].length)),c=r.filter(((e,t)=>o[t]));if(2===n.length&&n[0]!==n[1]){const o=e.faces_vertices.length,c=((e,t,r,n)=>{const o=t.map((t=>e.faces_edges[t].indexOf(r))),c=[];t.forEach(((t,r)=>e.faces_vertices[t].forEach(((e,t,o)=>{const s=o[(t+1)%o.length];(e===n[0]&&s===n[1]||e===n[1]&&s===n[0])&&(c[r]=t)})))),void 0!==c[0]&&void 0!==c[1]||console.warn("removePlanarEdge error joining faces");const s=t.map((t=>e.faces_edges[t].length)),i=t.map((t=>e.faces_vertices[t].length)),a=s.map((e=>e-1)),l=i.map((e=>e-1)),u=o.map(((e,t)=>(e+1)%s[t])),d=c.map(((e,t)=>(e+1)%i[t])),f=t.map(((t,r)=>Array.from(Array(a[r])).map(((e,t)=>(u[r]+t)%s[r])).map((r=>e.faces_edges[t][r])))),g=t.map(((t,r)=>Array.from(Array(l[r])).map(((e,t)=>(d[r]+t)%i[r])).map((r=>e.faces_vertices[t][r])))),h=t.map((t=>e.faces_faces[t])).reduce(((e,t)=>e.concat(t)),[]).filter((e=>e!==t[0]&&e!==t[1]));return{vertices:g[0].concat(g[1]),edges:f[0].concat(f[1]),faces:h}})(e,n,t,r);e.faces_vertices.push(c.vertices),e.faces_edges.push(c.edges),e.faces_faces.push(c.faces),e.vertices_faces.forEach(((t,r)=>{let c=!1;t.forEach(((s,i)=>{if(s===n[0]||s===n[1]){e.vertices_faces[r][i]=o;const n=c?[r,1]:[r,1,o];t.splice(...n),c=!0}}))})),e.edges_faces.forEach(((t,r)=>t.forEach(((t,c)=>{t!==n[0]&&t!==n[1]||(e.edges_faces[r][c]=o)})))),e.faces_faces.forEach(((t,r)=>t.forEach(((t,c)=>{t!==n[0]&&t!==n[1]||(e.faces_faces[r][c]=o)})))),e.faces_vertices.forEach((t=>t.forEach((t=>{void 0===t&&console.log("FOUND ONE before remove",e.faces_vertices)})))),Rn(e,"faces",n)}if(2===n.length&&n[0]===n[1]&&c.length){const r=n[0];e.faces_vertices[r]=e.faces_vertices[r].filter((e=>!c.includes(e))).filter(((e,t,r)=>e!==r[(t+1)%r.length])),e.faces_edges[r]=e.faces_edges[r].filter((e=>e!==t))}Rn(e,"edges",[t]),Rn(e,"vertices",c)},Xc=(e,t)=>{const r=e.vertices_edges[t],n=Fn(e.vertices_faces[t].filter((e=>null!=e)));if(2!==r.length||n.length>2)return void console.warn("cannot remove non 2-degree vertex yet (e,f)",r,n);const o=((e,t,r)=>(r.forEach((r=>{e.edges_vertices[r][0]===t&&e.edges_vertices[r][1]===t&&console.warn("removePlanarVertex circular edge")})),r.map((r=>e.edges_vertices[r][0]===t?e.edges_vertices[r][1]:e.edges_vertices[r][0]))))(e,t,r),c=o.slice().reverse();r.sort(((e,t)=>e-t)),o.forEach((t=>{const n=e.vertices_edges[t].indexOf(r[1]);-1!==n&&(e.vertices_edges[t][n]=r[0])})),o.forEach(((r,n)=>{const o=e.vertices_vertices[r].indexOf(t);-1!==o?e.vertices_vertices[r][o]=c[n]:console.warn("removePlanarVertex unknown vertex issue")})),e.edges_vertices[r[0]]=[...o],n.forEach((r=>{const n=e.faces_vertices[r].indexOf(t);-1!==n?e.faces_vertices[r].splice(n,1):console.warn("removePlanarVertex unknown face_vertex issue")})),n.forEach((t=>{const n=e.faces_edges[t].indexOf(r[1]);-1!==n?e.faces_edges[t].splice(n,1):console.warn("removePlanarVertex unknown face_edge issue")})),Rn(e,"vertices",[t]),Rn(e,"edges",[r[1]])},Kc=e=>[0,1].map((t=>e.filter(((e,r)=>r%2===t)).reduce(((e,t)=>e+t),0))),$c=e=>e.map(((e,t,r)=>[e,r[(t+1)%r.length]])).map((e=>on.core.counterClockwiseAngleRadians(...e))).map(((e,t,r)=>r.slice(t+1,r.length).concat(r.slice(0,t)))).map((e=>Kc(e).map((e=>Math.PI-e)))).map(((t,r)=>e[r]+t[0])).map(((t,r)=>on.core.isCounterClockwiseBetween(t,e[r],e[(r+1)%e.length])?t:void 0)),Qc=e=>{const t=e.map((e=>Math.atan2(e[1],e[0])));return $c(t).map((e=>void 0===e?void 0:[Math.cos(e),Math.sin(e)]))};var es=Object.freeze({__proto__:null,alternatingSum:Kc,alternatingSumDifference:e=>{const t=e.reduce(((e,t)=>e+t),0)/2;return Kc(e).map((e=>e-t))},kawasakiSolutionsRadians:$c,kawasakiSolutionsVectors:Qc});const ts={B:!0,b:!0,F:!0,f:!0,U:!0,u:!0},rs=e=>{let{vertices_edges:t,edges_assignment:r}=e;return t.map((e=>e.map((e=>ts[r[e]])).reduce(((e,t)=>e&&t),!0))).map(((e,t)=>e?t:void 0)).filter((e=>void 0!==e))},ns={M:!0,m:!0,V:!0,v:!0},os={M:-1,m:-1,V:1,v:1},cs=e=>{let{edges_vertices:t,vertices_edges:r,edges_assignment:n}=e;r||(r=no({edges_vertices:t}));const o=r.map((e=>e.map((e=>os[n[e]])).filter((e=>void 0!==e)).reduce(((e,t)=>e+t),0))).map((e=>2===e||-2===e));return oc({edges_vertices:t,edges_assignment:n}).forEach((e=>{o[e]=!0})),rs({vertices_edges:r,edges_assignment:n}).forEach((e=>{o[e]=!0})),o.map(((e,t)=>e?void 0:t)).filter((e=>void 0!==e))},ss=function(e){let{vertices_coords:t,vertices_vertices:r,vertices_edges:n,edges_vertices:o,edges_assignment:c,edges_vector:s}=e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:on.core.EPSILON;r||(r=co({vertices_coords:t,vertices_edges:n,edges_vertices:o}));const a=fo({vertices_coords:t,vertices_vertices:r,edges_vertices:o,edges_vector:s}).map(((e,t)=>e.filter(((e,r)=>ns[c[n[t][r]]])))).map((e=>e.length>1?on.core.counterClockwiseSectors2(e):[0,0])).map((e=>Kc(e))).map((e=>Math.abs(e[0]-e[1])<i));return oc({edges_vertices:o,edges_assignment:c}).forEach((e=>{a[e]=!0})),rs({vertices_edges:n,edges_assignment:c}).forEach((e=>{a[e]=!0})),a.map(((e,t)=>e?void 0:t)).filter((e=>void 0!==e))};var is=Object.freeze({__proto__:null,validateMaekawa:cs,validateKawasaki:ss});const as={};as.prototype=Object.create(Wc),as.prototype.constructor=as;const ls=function(e){var t=this;return e.mountain=function(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-180;return e.forEach((e=>{t.edges_assignment[e]="M",t.edges_foldAngle[e]=r})),e},e.valley=function(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:180;return e.forEach((e=>{t.edges_assignment[e]="V",t.edges_foldAngle[e]=r})),e},e.flat=()=>(e.forEach((e=>{this.edges_assignment[e]="F",this.edges_foldAngle[e]=0})),e),e};["line","ray","segment"].forEach((e=>{as.prototype[e]=function(){const t=on[e](...arguments);if(!t)return;const r=Zc(this,t);if(!r)return;const n=Jc(this,r[0],r[1]);return ls.call(this,n)}})),["circle","ellipse","rect","polygon"].forEach((e=>{as.prototype[e]=function(){const t=on[e](...arguments);if(!t)return;const r=t.segments(96).map((e=>on.segment(e))).map((e=>Zc(this,e))).filter((e=>void 0!==e));if(!r)return;const n=[],o=[];r.forEach((e=>{const t=zc(this,e);n.push(...t),o.push(...Hc(this,t))}));const{map:c}=nc(this).edges;return Do(this),ls.call(this,o.map((e=>c[e])).reduce(((e,t)=>e.concat(t)),[]))}})),as.prototype.removeEdge=function(e){const t=this.edges_vertices[e];return Yc(this,e),t.map((e=>Ho(this,e))).map(((e,r)=>e?t[r]:void 0)).filter((e=>void 0!==e)).sort(((e,t)=>t-e)).forEach((e=>Xc(this,e))),!0},as.prototype.validate=function(e){const t=Uo(this,e);return t.vertices.kawasaki=ss(this,e),t.vertices.maekawa=cs(this),this.edges_foldAngle&&(t.edges.not_flat=this.edges_foldAngle.map(((e,t)=>En(e)?void 0:t)).filter((e=>void 0!==e))),"valid"===t.summary&&(t.vertices.kawasaki.length||t.vertices.maekawa.length?t.summary="invalid":t.edges.not_flat.length&&(t.summary="not flat")),t};var us=as.prototype;const ds=(e,t,r,n)=>{const o=on.core.subtract2(r,t),c=on.core.cross2(e,o);return n?c>0:c<0},fs=(e,t)=>e.faces_vertices[t]?e.faces_vertices[t].map((t=>e.vertices_coords[t])).reduce(((e,t)=>[e[0]+t[0],e[1]+t[1]]),[0,0]).map((r=>r/e.faces_vertices[t].length)):[0,0],gs={F:!0,f:!0,U:!0,u:!0},hs={M:"V",m:"V",V:"M",v:"M"},ps=(e,t)=>({center:e.faces_center[t],matrix:e.faces_matrix2[t],winding:e.faces_winding[t],crease:e.faces_crease[t],side:e.faces_side[t],layer:e.faces_layer[t]}),ms=function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"V",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:on.core.EPSILON;const c=hs[s=n]||s;var s;Do(e),e.faces_layer||(e.faces_layer=Array(e.faces_vertices.length).fill(0)),e.faces_center=e.faces_vertices.map(((t,r)=>fs(e,r))),e.faces_matrix2||(e.faces_matrix2=vc(e,0)),e.faces_winding=xc(e.faces_matrix2),e.faces_crease=e.faces_matrix2.map(on.core.invertMatrix2).map((e=>on.core.multiplyMatrix2Line2(e,t,r))),e.faces_side=e.faces_vertices.map(((t,r)=>ds(e.faces_crease[r].vector,e.faces_crease[r].origin,e.faces_center[r],e.faces_winding[r])));const i=fc(e,e.faces_matrix2),a=Xo({vertices_coords:i,edges_vertices:e.edges_vertices},t,r,o).map(((e,t)=>e?t:void 0)).filter((e=>void 0!==e)).filter((t=>gs[e.edges_assignment[t]]));a.map((t=>e.edges_faces[t].find((e=>null!=e)))).map((t=>e.faces_winding[t])).map((e=>e?n:c)).forEach(((t,r)=>{e.edges_assignment[a[r]]=t,e.edges_foldAngle[a[r]]=yn(t)}));const l=ps(e,0),u=e.faces_vertices.map(((e,t)=>t)).reverse().map((t=>{const r=ps(e,t),s=Tc(e,t,r.crease.vector,r.crease.origin,o);if(void 0===s)return;e.edges_assignment[s.edges.new]=r.winding?n:c,e.edges_foldAngle[s.edges.new]=yn(e.edges_assignment[s.edges.new]);return s.faces.map[s.faces.remove].forEach((t=>{e.faces_center[t]=fs(e,t),e.faces_side[t]=ds(r.crease.vector,r.crease.origin,e.faces_center[t],r.winding),e.faces_layer[t]=r.layer})),s})).filter((e=>void 0!==e)),d=Io(...u.map((e=>e.faces.map))),f=Io(...u.map((e=>e.edges.map)).filter((e=>void 0!==e))),g=u.map((e=>e.faces.remove)).reverse();e.faces_layer=((e,t)=>{const r=[],n=e.map(((e,t)=>t)),o=n.filter((e=>t[e])),c=n.filter((e=>!t[e]));return c.sort(((t,r)=>e[t]-e[r])).forEach(((e,t)=>{r[e]=t})),o.sort(((t,r)=>e[r]-e[t])).forEach(((e,t)=>{r[e]=c.length+t})),r})(e.faces_layer,e.faces_side);const h=d&&d[0]&&2===d[0].length,p=h?d[0].filter((t=>e.faces_side[t])).shift():0;let m=l.matrix;return n!==c&&(m=h||e.faces_side[0]?on.core.multiplyMatrices2(l.matrix,on.core.makeMatrix2Reflect(l.crease.vector,l.crease.origin)):l.matrix),e.faces_matrix2=vc(e,p).map((e=>on.core.multiplyMatrices2(m,e))),delete e.faces_center,delete e.faces_winding,delete e.faces_crease,delete e.faces_side,{faces:{map:d,remove:g},edges:{map:f}}},vs={};vs.prototype=Object.create(Wc),vs.prototype.constructor=vs,vs.prototype.flatFold=function(){const e=on.core.getLine(arguments);return ms(this,e.vector,e.origin),this};var _s=vs.prototype;const ys=e=>e.frame_classes&&e.frame_classes.includes("foldedForm")||e.file_classes&&e.file_classes.includes("foldedForm");var bs=Object.freeze({__proto__:null,isFoldedForm:ys});const Es=function(e){let{vertices_coords:t,edges_vertices:r,edges_coords:n}=e,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:on.core.EPSILON;n||(n=yo({vertices_coords:t,edges_vertices:r}));const c=Eo({vertices_coords:t,edges_vertices:r,edges_coords:n}),s=Array.from(Array(n.length)).map((()=>[])),i=c.length?c[0].min.length:0;for(let a=0;a<n.length-1;a+=1)for(let e=a+1;e<n.length;e+=1){let t=!0;for(let r=0;r<i;r+=1)on.core.fnEpsilonEqual(c[a].min[r],c[e].min[r],o)&&on.core.fnEpsilonEqual(c[a].max[r],c[e].max[r],o)||(t=!1);s[a][e]=t,s[e][a]=t}for(let a=0;a<n.length-1;a+=1)for(let e=a+1;e<n.length;e+=1){if(!s[a][e])continue;const t=on.core.fnEpsilonEqualVectors(n[a][0],n[e][0],o)&&on.core.fnEpsilonEqualVectors(n[a][1],n[e][1],o),r=on.core.fnEpsilonEqualVectors(n[a][0],n[e][1],o)&&on.core.fnEpsilonEqualVectors(n[a][1],n[e][0],o),c=t||r;s[a][e]=c,s[e][a]=c}return Bn(s)},xs=(e,t)=>{let{vertices_coords:r,edges_vertices:n,edges_vector:o}=e;o||(o=bo({vertices_coords:r,edges_vertices:n}));const c=o.length,s=o.map((e=>on.core.normalize(e))),i=Array.from(Array(c)).map((()=>Array.from(Array(c))));for(let a=0;a<c-1;a+=1)for(let e=a+1;e<c;e+=1){const r=1-Math.abs(on.core.dot(s[a],s[e]))<t;i[a][e]=r,i[e][a]=r}return i},As=(e,t,r,n,o)=>{for(let c=0;c<e.length-1;c+=1)for(let s=c+1;s<e.length;s+=1)e[c][s]&&(e[c][s]=on.core.overlapLineLine(t[c],r[c],t[s],r[s],n,n,o),e[s][c]=e[c][s])},Os=(e,t)=>{let{vertices_coords:r,edges_vertices:n,edges_vector:o}=e;o||(o=bo({vertices_coords:r,edges_vertices:n}));const c=n.map((e=>r[e[0]])),s=xs({vertices_coords:r,edges_vertices:n,edges_vector:o},t);return As(s,o,c,on.core.excludeS,t),s};var ks=Object.freeze({__proto__:null,makeEdgesEdgesSimilar:Es,makeEdgesEdgesParallel:xs,makeEdgesEdgesCrossing:(e,t)=>{let{vertices_coords:r,edges_vertices:n,edges_vector:o}=e;o||(o=bo({vertices_coords:r,edges_vertices:n}));const c=n.map((e=>r[e[0]])),s=xs({vertices_coords:r,edges_vertices:n,edges_vector:o},t).map((e=>e.map((e=>!e))));for(let i=0;i<s.length;i+=1)s[i][i]=void 0;return As(s,o,c,on.core.excludeS,t),s},makeEdgesEdgesParallelOverlap:Os});const Ms=(e,t)=>{let{vertices_coords:r,edges_vertices:n,edges_vector:o,edges_faces:c,faces_vertices:s}=e;o||(o=bo({vertices_coords:r,edges_vertices:n}));const i=Ac({vertices_coords:r,faces_vertices:s}),a=n.map((e=>r[e[0]])),l=n.map((()=>Array.from(Array(s.length))));c.forEach(((e,t)=>e.forEach((e=>{l[t][e]=!1}))));const u=Es({vertices_coords:r,edges_vertices:n}),d=n.map((e=>e.map((e=>r[e])))),f=s.map((e=>e.map((e=>r[e]))));for(let m=0;m<i.length;m+=1)i[m]||f[m].reverse();const g=Eo({edges_coords:d}),h=f.map((e=>on.core.boundingBox(e)));for(let m=0;m<l.length;m+=1)for(let e=0;e<l[m].length;e+=1)!1!==l[m][e]&&(on.core.overlapBoundingBoxes(h[e],g[m])||(l[m][e]=!1));const p={};for(let m=0;m<l.length;m+=1)if(!p[m]){for(let e=0;e<l[m].length;e+=1){if(void 0!==l[m][e])continue;if(d[m].map((r=>on.core.overlapConvexPolygonPoint(f[e],r,on.core.exclude,t))).reduce(((e,t)=>e||t),!1)){l[m][e]=!0;continue}on.core.intersectConvexPolygonLine(f[e],o[m],a[m],on.core.excludeS,on.core.excludeS,t)?l[m][e]=!0:l[m][e]=!1}u[m].forEach((e=>{l[e]=l[m].slice(),p[e]=!0}))}return l},ws=function(e){let{vertices_coords:t,faces_vertices:r}=e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:on.core.EPSILON;const o=Array.from(Array(r.length)).map((()=>Array.from(Array(r.length)))),c=r.map((e=>e.map((e=>t[e])))),s=c.map((e=>on.core.boundingBox(e)));for(let a=0;a<s.length-1;a+=1)for(let e=a+1;e<s.length;e+=1)on.core.overlapBoundingBoxes(s[a],s[e])||(o[a][e]=!1,o[e][a]=!1);const i=c.map((e=>on.core.makePolygonNonCollinear(e,n)));for(let a=0;a<r.length-1;a+=1)for(let e=a+1;e<r.length;e+=1){if(!1===o[a][e])continue;const t=on.core.overlapConvexPolygons(i[a],i[e],n);o[a][e]=t,o[e][a]=t}return o};var js=Object.freeze({__proto__:null,makeEdgesFacesOverlap:Ms,makeFacesFacesOverlap:ws});var Ps=Object.assign(Object.create(null),{count:Nn,countImplied:Yn,validate:Uo,clean:Ro,populate:Do,remove:Rn,replace:Un,removePlanarVertex:Xc,removePlanarEdge:Yc,addVertices:zc,addEdges:Hc,splitEdge:Fc,splitFace:Tc,flatFold:ms,addPlanarSegment:Jc,subgraph:(e,t)=>{const r={},n={};[l,a,i].forEach((o=>{r[o]=Array.from(Array(Nn[o](e))).map(((e,t)=>t)),n[o]=Fn(t[o]||[]).reverse()})),Object.keys(n).forEach((e=>n[e].forEach((t=>r[e].splice(t,1)))));const o=JSON.parse(JSON.stringify(e));return Object.keys(r).forEach((e=>Rn(o,e,r[e]))),o},clip:Zc,fragment:nc,getVerticesClusters:Cn,clone:Nc},Po,sc,Qn,Lc,Pn,ro,Zo,qo,bs,ec,js,ac,Hn,zo,Yo,ks,Ec,dc,_c,Oc,wc,qn);const Ss={},Cs=(e,t)=>[[0,0],[e,0],[e,t],[0,t]],Ls=e=>Do({vertices_coords:e,edges_vertices:e.map(((e,t,r)=>[t,(t+1)%r.length])),edges_assignment:Array(e.length).fill("B")});Ss.square=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return Ls(Cs(e,e))},Ss.rectangle=function(){return Ls(Cs(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1))},Ss.polygon=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Ls(on.core.makePolygonCircumradius(e,t))},Ss.kite=()=>Do({vertices_coords:[[0,0],[Math.sqrt(2)-1,0],[1,0],[1,1-(Math.sqrt(2)-1)],[1,1],[0,1]],edges_vertices:[[0,1],[1,2],[2,3],[3,4],[4,5],[5,0],[5,1],[3,5],[5,2]],edges_assignment:Array.from("BBBBBBVVF")});const Ns=Object.create(null),zs={graph:Wc,cp:us,origami:_s},Fs={graph:()=>{},cp:Ss.square,origami:Ss.square},Is={graph:()=>({file_spec:1.1,file_creator:dn}),cp:()=>({file_spec:1.1,file_creator:dn,frame_classes:["creasePattern"]}),origami:()=>({file_spec:1.1,file_creator:dn,frame_classes:["foldedForm"]})};Object.keys(zs).forEach((e=>{Ns[e]=function(){const t=Array.from(arguments).filter((e=>jn(e))).map((e=>JSON.parse(JSON.stringify(e))));return Do(Object.assign(Object.create(zs[e]),t.length?{}:Fs[e](),...t,Is[e]()))},Ns[e].prototype=zs[e],Ns[e].prototype.constructor=Ns[e],Object.keys(Ss).forEach((t=>{Ns[e][t]=function(){return Ns[e](Ss[t](...arguments))}}))})),Object.assign(Ns.graph,Ps);const Vs=e=>e<0?-Math.pow(-e,1/3):Math.pow(e,1/3),Bs=(e,t,r,n)=>{if(Math.abs(1-on.core.dot2(e.normal,r)/e.distance)<.02)return[];const o=on.core.rotate90(e.normal),c=on.core.subtract2(on.core.add2(r,on.core.scale2(e.normal,e.distance)),on.core.scale2(n,2)),s=on.core.subtract2(on.core.scale2(e.normal,e.distance),r),i=on.core.dot2(n,t.normal)-t.distance,a=2*on.core.dot2(s,o),l=on.core.dot2(s,s),u=on.core.dot2(on.core.add2(c,s),o),d=on.core.dot2(c,s),f=on.core.dot2(o,t.normal),g=on.core.dot2(s,t.normal),h=f,p=i+u*f+g,m=i*a+d*f+u*g,v=i*l+d*g;let _=0;return Math.abs(m)>on.core.EPSILON&&(_=1),Math.abs(p)>on.core.EPSILON&&(_=2),Math.abs(h)>on.core.EPSILON&&(_=3),((e,t,r,n,o)=>{switch(e){case 1:return[-o/n];case 2:{const e=Math.pow(n,2)-4*r*o;if(e<-on.core.EPSILON)return[];const t=-n/(2*r);if(e<on.core.EPSILON)return[t];const c=Math.sqrt(e)/(2*r);return[t+c,t-c]}case 3:{const e=r/t,c=n/t,s=o/t,i=(3*c-Math.pow(e,2))/9,a=(9*e*c-27*s-2*Math.pow(e,3))/54,l=Math.pow(i,3)+Math.pow(a,2),u=-e/3;if(l>0){const e=Math.sqrt(l);return[u+Vs(a+e)+Vs(a-e)]}if(Math.abs(l)<on.core.EPSILON){const e=Math.pow(a,1/3);return a<0?[]:[u+2*e,u-e]}const d=Math.sqrt(-l),f=Math.atan2(d,a)/3,g=Math.pow(Math.pow(a,2)-l,1/6),h=g*Math.cos(f),p=g*Math.sin(f);return[u+2*h,u-h-Math.sqrt(3)*p,u-h+Math.sqrt(3)*p]}default:return[]}})(_,h,p,m,v).map((t=>on.core.add2(on.core.scale2(e.normal,e.distance),on.core.scale2(o,t)))).map((e=>({p:e,normal:on.core.normalize2(on.core.subtract2(e,r))}))).map((e=>({normal:e.normal,distance:on.core.dot2(e.normal,on.core.midpoint2(e.p,r))})))};var Ts=Object.freeze({__proto__:null,normalAxiom1:(e,t)=>{const r=on.core.normalize2(on.core.rotate90(on.core.subtract2(t,e)));return{normal:r,distance:on.core.dot2(on.core.add2(e,t),r)/2}},normalAxiom2:(e,t)=>{const r=on.core.normalize2(on.core.subtract2(t,e));return{normal:r,distance:on.core.dot2(on.core.add2(e,t),r)/2}},normalAxiom3:(e,t)=>{const r=((e,t)=>{const r=on.core.cross2(e.normal,t.normal);if(Math.abs(r)<on.core.EPSILON)return;return[(e.distance*t.normal[1]-t.distance*e.normal[1])/r,(t.distance*e.normal[0]-e.distance*t.normal[0])/r]})(e,t);return void 0===r?[{normal:e.normal,distance:(e.distance+t.distance*on.core.dot2(e.normal,t.normal))/2}]:[on.core.add2,on.core.subtract2].map((r=>on.core.normalize2(r(e.normal,t.normal)))).map((e=>({normal:e,distance:on.core.dot2(r,e)})))},normalAxiom4:(e,t)=>{const r=on.core.rotate90(e.normal);return{normal:r,distance:on.core.dot2(t,r)}},normalAxiom5:(e,t,r)=>{const n=on.core.dot2(t,e.normal),o=e.distance-n,c=on.core.distance2(t,r);if(o>c)return[];const s=Math.sqrt(c*c-o*o),i=on.core.scale2(e.normal,o),a=on.core.add2(t,i),l=on.core.scale2(on.core.rotate90(e.normal),s);return(s<on.core.EPSILON?[a]:[on.core.add2(a,l),on.core.subtract2(a,l)]).map((e=>on.core.normalize2(on.core.subtract2(r,e)))).map((e=>({normal:e,distance:on.core.dot2(t,e)})))},normalAxiom6:Bs,normalAxiom7:(e,t,r)=>{const n=on.core.rotate90(e.normal),o=on.core.dot2(n,t.normal);if(Math.abs(o)<on.core.EPSILON)return;const c=on.core.dot2(r,n),s=on.core.dot2(r,t.normal);return{normal:n,distance:(t.distance+2*c*o-s)/(2*o)}}});var qs=Object.freeze({__proto__:null,axiom1:(e,t)=>({vector:on.core.normalize2(on.core.subtract2(...on.core.resizeUp(t,e))),origin:e}),axiom2:(e,t)=>({vector:on.core.normalize2(on.core.rotate90(on.core.subtract2(...on.core.resizeUp(t,e)))),origin:on.core.midpoint2(e,t)}),axiom3:(e,t)=>on.core.bisectLines2(e.vector,e.origin,t.vector,t.origin),axiom4:(e,t)=>({vector:on.core.rotate90(on.core.normalize2(e.vector)),origin:t}),axiom5:(e,t,r)=>(on.core.intersectCircleLine(on.core.distance2(t,r),t,e.vector,e.origin,on.core.include_l)||[]).map((e=>({vector:on.core.normalize2(on.core.rotate90(on.core.subtract2(...on.core.resizeUp(e,r)))),origin:on.core.midpoint2(r,e)}))),axiom6:(e,t,r,n)=>Bs(on.core.rayLineToUniqueLine(e),on.core.rayLineToUniqueLine(t),r,n).map(on.core.uniqueLineToRayLine),axiom7:(e,t,r)=>{const n=on.core.intersectLineLine(e.vector,e.origin,t.vector,r,on.core.include_l,on.core.include_l);return void 0===n?void 0:{vector:on.core.normalize2(on.core.rotate90(on.core.subtract2(...on.core.resizeUp(n,r)))),origin:on.core.midpoint2(r,n)}}});const Rs=(e,t)=>{switch(e){case 3:case"3":case 5:case"5":case 6:case"6":return t;case 7:case"7":return void 0===t?[]:[t];default:return[t]}},Us=(e,t)=>{const r=on.core.makeMatrix2Reflect(e.vector,e.origin);return on.core.multiplyMatrix2Vector2(r,t)},Ds=(e,t)=>e.points.map((e=>on.core.overlapConvexPolygonPoint(t,e,on.core.include))).reduce(((e,t)=>e&&t),!0),Gs=Ds,Ws=(e,t,r)=>{const n=e.lines.map((e=>on.core.clipLineConvexPolygon(t,e.vector,e.origin,on.core.include,on.core.includeL)));if(void 0===n[0]||void 0===n[1])return[!1,!1];const o=r.map((e=>void 0===e?void 0:on.core.clipLineConvexPolygon(t,e.vector,e.origin,on.core.include,on.core.includeL))),c=[0,1].map((e=>void 0!==o[e])),s=r.map((e=>void 0===e?void 0:[Us(e,n[0][0]),Us(e,n[0][1])])).map((e=>void 0!==e&&(on.core.overlapLinePoint(on.core.subtract(n[1][1],n[1][0]),n[1][0],e[0],on.core.includeS)||on.core.overlapLinePoint(on.core.subtract(n[1][1],n[1][0]),n[1][0],e[1],on.core.includeS)||on.core.overlapLinePoint(on.core.subtract(e[1],e[0]),e[0],n[1][0],on.core.includeS)||on.core.overlapLinePoint(on.core.subtract(e[1],e[0]),e[0],n[1][1],on.core.includeS))));return[0,1].map((e=>!0===s[e]&&!0===c[e]))},Zs=(e,t)=>{const r=on.core.intersectLineLine(e.lines[0].vector,e.lines[0].origin,on.core.rotate90(e.lines[0].vector),e.points[0],on.core.includeL,on.core.includeL);return[e.points[0],r].filter((e=>void 0!==e)).map((e=>on.core.overlapConvexPolygonPoint(t,e,on.core.include))).reduce(((e,t)=>e&&t),!0)},Hs=(e,t,r)=>{if(0===r.length)return[];const n=e.points.map((e=>on.core.overlapConvexPolygonPoint(t,e,on.core.include))).reduce(((e,t)=>e&&t),!0);return r.map((t=>Us(t,e.points[1]))).map((e=>on.core.overlapConvexPolygonPoint(t,e,on.core.include))).map((e=>e&&n))},Js=function(e,t,r){if(0===r.length)return[];if(!e.points.map((e=>on.core.overlapConvexPolygonPoint(t,e,on.core.include))).reduce(((e,t)=>e&&t),!0))return r.map((()=>!1));const n=r.map((t=>Us(t,e.points[0]))).map((e=>on.core.overlapConvexPolygonPoint(t,e,on.core.include))),o=r.map((t=>Us(t,e.points[1]))).map((e=>on.core.overlapConvexPolygonPoint(t,e,on.core.include)));return r.map(((e,t)=>n[t]&&o[t]))},Ys=(e,t,r)=>{const n=on.core.overlapConvexPolygonPoint(t,e.points[0],on.core.include);if(void 0===r)return[!1];const o=Us(r,e.points[0]),c=on.core.overlapConvexPolygonPoint(t,o,on.core.include),s=void 0!==on.core.intersectConvexPolygonLine(t,e.lines[1].vector,e.lines[1].origin,on.core.includeS,on.core.includeL),i=on.core.intersectLineLine(e.lines[1].vector,e.lines[1].origin,r.vector,r.origin,on.core.includeL,on.core.includeL),a=!!i&&on.core.overlapConvexPolygonPoint(t,i,on.core.include);return n&&c&&s&&a};var Xs=Object.freeze({__proto__:null,validateAxiom1:Ds,validateAxiom2:Gs,validateAxiom3:Ws,validateAxiom4:Zs,validateAxiom5:Hs,validateAxiom6:Js,validateAxiom7:Ys,validate:(e,t,r,n)=>Rs(e,[null,Ds,Gs,Ws,Zs,Hs,Js,Ys][e](t,r,((e,t)=>{switch(e){case 3:case"3":case 5:case"5":case 6:case"6":return t;default:return t?t[0]:void 0}})(e,n)))});const Ks=e=>[...e.lines?e.lines:[],...e.points?e.points:[]],$s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;const n=Rs(e,qs["axiom".concat(e)](...Ks(t))).map((e=>on.line(e)));return r&&Rs(e,Xs["validateAxiom".concat(e)](t,r,n)).forEach(((e,t)=>e?t:void 0)).filter((e=>void 0!==e)).forEach((e=>delete n[e])),n};var Qs=Object.freeze({__proto__:null,axiomInBoundary:$s,normalAxiomInBoundary:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;const n=Rs(e,Ts["normalAxiom".concat(e)](...Ks(t))).map((e=>on.line.fromNormalDistance(e)));return r&&Rs(e,Xs["validateAxiom".concat(e)]((e=>({points:e.points,lines:e.lines.map(on.core.uniqueLineToRayLine)}))(t),r,n)).forEach(((e,t)=>e?t:void 0)).filter((e=>void 0!==e)).forEach((e=>delete n[e])),n}});const ei=function(e){return $s(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments.length>2?arguments[2]:void 0)};Object.keys(qs).forEach((e=>{ei[e]=qs[e]})),Object.keys(Ts).forEach((e=>{ei[e]=Ts[e]})),Object.keys(Qs).forEach((e=>{ei[e]=Qs[e]})),Object.keys(Xs).forEach((e=>{ei[e]=Xs[e]}));const ti=(e,t)=>on.core.intersectLineLine(e.vector,e.origin,t.vector,t.origin,on.core.includeL,on.core.includeL),ri=(e,t)=>{const r=on.core.makeMatrix2Reflect(e.vector,e.origin);return on.core.multiplyMatrix2Vector2(r,t)},ni=e=>{let{vertices_coords:t}=e;return on.core.convexHull(t)},oi=(e,t,r)=>{const n=ni(e);if(void 0===r){const e=on.core.clipLineConvexPolygon(n,t.vector,t.origin,on.core.exclude,on.core.includeL);r=on.core.midpoint(...e)}const o=on.core.rotate270(t.vector),c=on.core.clipLineConvexPolygon(n,o,r,on.core.exclude,on.core.includeL).map((e=>on.core.distance(r,e))).sort(((e,t)=>e-t)).shift(),s=on.core.scale(on.core.normalize(o),c);return on.segment(on.core.add(r,on.core.flip(s)),on.core.add(r,s))},ci=(e,t,r)=>{const n=t.map((e=>on.core.midpoint(e[0],e[1]))),o=on.line.fromPoints(...n),c=on.intersect(r,o),s=on.line(r.vector.rotate90(),c);return on.segment(e.lines.map((e=>on.intersect(e,s))))},si=[null,(e,t)=>ei(1,e).map((e=>[oi(t,e)])),e=>[[on.segment(e.points)]],(e,t)=>{const r=ni(t),n=e.lines.map((e=>on.core.clipLineConvexPolygon(r,e.vector,e.origin,on.core.exclude,on.core.includeL))),o=n.map((e=>on.core.subtract(e[1],e[0]))),c=on.core.intersectLineLine(o[0],n[0][0],o[1],n[1][0],on.core.excludeS,on.core.excludeS);return c?ei(3,e).map((t=>((e,t,r,n)=>{const o=e.lines.map((e=>e.vector)),c=o.map(on.core.flip),s=o.concat(c).map((e=>on.ray(e,t))),i=s.filter((e=>on.core.dot(e.vector,r.vector)>0&&on.core.cross2(e.vector,r.vector)>0)).shift(),a=s.filter((e=>on.core.dot(e.vector,r.vector)>0&&on.core.cross2(e.vector,r.vector)<0)).shift(),l=s.filter((e=>on.core.dot(e.vector,r.vector)<0&&on.core.cross2(e.vector,r.vector)>0)).shift(),u=s.filter((e=>on.core.dot(e.vector,r.vector)<0&&on.core.cross2(e.vector,r.vector)<0)).shift(),d=[i,a,l,u].map((e=>on.core.intersectConvexPolygonLine(n,e.vector,e.origin,on.core.excludeS,on.core.excludeR).shift().shift())),f=d.map((e=>on.core.distance(e,t))),g=f[0]<f[1]?d[0]:d[1],h=f[0]<f[1]?on.core.add(a.origin,a.vector.normalize().scale(f[0])):on.core.add(i.origin,i.vector.normalize().scale(f[1])),p=f[2]<f[3]?d[2]:d[3],m=f[2]<f[3]?on.core.add(u.origin,u.vector.normalize().scale(f[2])):on.core.add(l.origin,l.vector.normalize().scale(f[3]));return[on.segment(g,h),on.segment(p,m)]})(e,c,t,r))):[ci(e,n,ei(3,e).filter((e=>void 0!==e)).shift())]},(e,t)=>ei(4,e).map((r=>[oi(t,r,ti(r,e.lines[0]))])),e=>ei(5,e).map((t=>[on.segment(e.points[1],ri(t,e.points[1]))])),e=>ei(6,e).map((t=>e.points.map((e=>on.segment(e,ri(t,e)))))),(e,t)=>ei(7,e).map((r=>[on.segment(e.points[0],ri(r,e.points[0])),oi(t,r,ti(r,e.lines[1]))]))];delete si[0];const ii=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=t.points?t.points.map((e=>on.core.getVector(e))):void 0,n=t.lines?t.lines.map((e=>on.core.getLine(e))):void 0;for(var o=arguments.length,c=new Array(o>2?o-2:0),s=2;s<o;s++)c[s-2]=arguments[s];return si[e]({points:r,lines:n},...c)};Object.keys(si).forEach((e=>{ii[e]=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return ii(e,...r)}}));var ai=Object.assign(Object.create(null),{axiom_arrows:ii,simple_arrow:(e,t)=>{const r=(e=>{let{vertices_coords:t}=e;return on.core.convexHull(t)})(e),n=on.core.boundingBox(r),o=((e,t,r)=>{if(void 0===r){const n=on.core.clipLineConvexPolygon(e,t.vector,t.origin,on.core.exclude,on.core.includeL);if(void 0===n)return;r=on.core.midpoint(...n)}const n=on.core.rotate90(t.vector),o=on.core.clipLineConvexPolygon(e,n,r,on.core.exclude,on.core.includeL).map((e=>on.core.distance(r,e))).sort(((e,t)=>e-t)).shift(),c=on.core.scale(on.core.normalize(n),o);return on.segment(on.core.add(r,on.core.flip(c)),on.core.add(r,c))})(r,t);if(void 0===o)return;const c=on.core.subtract(o[1],o[0]),s=on.core.magnitude(c),i=on.core.dot(c,[1,0]),a=n.span[0]<n.span[1]?n.span[0]:n.span[1];return o.head={width:.1*a,height:.15*a},o.bend=i>0?.3:-.3,o.padding=.05*s,o}});var li=Object.freeze({__proto__:null,flipFacesLayer:e=>Bo(Bo(e).reverse()),facesLayerToEdgesAssignments:(e,t)=>{const r=[],n=Ac(e);return(e.edges_faces?e.edges_faces:po(e)).forEach(((e,o)=>{if(1===e.length&&(r[o]="B"),2===e.length){const c=e.map((e=>n[e]));if(c[0]===c[1])return void(r[o]="F");const s=e.map((e=>t[e])),i=s[0]<s[1],a=c[0]?i:!i;r[o]=a?"V":"M"}})),r},ordersToMatrix:e=>{const t=Object.keys(e).map((e=>e.split(" ").map((e=>parseInt(e,10))))),r=[];t.reduce(((e,t)=>e.concat(t)),[]).forEach((e=>{r[e]=void 0}));const n=r.map((()=>[]));return t.forEach((t=>{let[r,o]=t;n[r][o]=e["".concat(r," ").concat(o)],n[o][r]=-e["".concat(r," ").concat(o)]})),n}});const ui=(e,t,r)=>{const n=e.map((e=>e?(e[0]+e[1])/2:void 0)),o=[];return e.forEach(((c,s)=>{if(!c)return;if(!t&&s===e.length-1)return;const i=c[1],a=i-2*r,l=i+2*r,u=[s,(s+1)%e.length],d=u.map((e=>n[e])).map((e=>e>i)),f=1*(!d[0]&&!d[1])+2*(d[0]&&d[1]),g=o.filter((e=>e.min<i&&e.max>i)).shift(),h={faces:u,taco_type:f};g?g.pairs.push(h):o.push({min:a,max:l,pairs:[h]})})),o.map((e=>e.pairs)).filter((e=>e.length>1)).map((e=>({both:e.filter((e=>0===e.taco_type)).map((e=>e.faces)),left:e.filter((e=>1===e.taco_type)).map((e=>e.faces)),right:e.filter((e=>2===e.taco_type)).map((e=>e.faces))})))},di=(e,t,r)=>t<r?e.slice(t+1,r):e.slice(r+1,t),fi=function(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:on.core.EPSILON;const o=Bo(t),c=e.map((e=>e?e[1]:void 0)),s=e.map((e=>e?Math.min(...e):void 0)).map((e=>e+n)),i=e.map((e=>e?Math.max(...e):void 0)).map((e=>e-n)),a=o.length+(r?0:-1);for(let l=0;l<a;l+=1){const e=(l+1)%o.length;if(o[l]===o[e])continue;const r=di(t,o[l],o[e]).flat(),n=r.map((e=>c[l]<s[e])).reduce(((e,t)=>e&&t),!0),a=r.map((e=>c[l]>i[e])).reduce(((e,t)=>e&&t),!0);if(!n&&!a)return!1}return!0},gi=e=>{const t=Vn(e),r={};let n=0;for(let o=0;o<t.length;o+=1)if(void 0===r[t[o]])n+=1,r[t[o]]=n;else if(void 0!==r[t[o]]){if(r[t[o]]!==n)return!1;n-=1,r[t[o]]=void 0}return!0},hi=(e,t)=>e.map((e=>t[e])).filter((e=>void 0!==e)),pi=(e,t,r,n,o)=>{const c=on.core.flattenArrays(t);if(!fi(e,t,n,o))return!1;for(let s=0;s<r.length;s+=1){const e=hi(c,r[s]);if(!gi(e))return!1}return!0},mi={V:!0,v:!0,M:!0,m:!0},vi={V:1,v:1,M:-1,m:-1},_i=e=>{let t=0;return e.slice(1).concat([e[0]]).map((e=>{const r=(n=e,t%2===0?vi[n]||0:-(vi[n]||0));var n;return t+=void 0===vi[e]?0:1,r}))},yi=(e,t)=>{const r=(e=>{let t=0;const r=e.slice(1);return[!1].concat(r.map((e=>mi[e]?++t:t)).map((e=>e%2===1)))})(t).map(((t,r)=>e[r]*(t?-1:1))),n=e.map((()=>{}));n[0]=[0,r[0]];for(let o=1;o<e.length&&("B"!==t[o]&&"b"!==t[o]);o+=1){const t=n[(o-1+e.length)%e.length][1];n[o]=[t,t+r[o]]}return n},bi={B:!0,b:!0},Ei=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:on.core.EPSILON;const n=yi(e,t),o=_i(t),c=t.map((e=>!bi[e])).reduce(((e,t)=>e&&t),!0);if(c){const e=n[0][0],t=n[n.length-1][1];if(Math.abs(e-t)>r)return[]}const s=ui(n,c,r).map((e=>[e.left,e.right].map(Bo).filter((e=>e.length>1)))).reduce(((e,t)=>e.concat(t)),[]),i=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const u=a+1,d=o[a],f=a>=e.length-1,g=c&&f;if(!pi(n,t,s,g,r))return[];if(g){const e=Bo(t),r=e[0],n=e[a];if(d>0&&n>r)return[];if(d<0&&n<r)return[]}if(f)return[t];if(0===d)return t[l]=[u].concat(t[l]),i(t,u,l);const h=1===d?Array.from(Array(t.length-l)).map(((e,t)=>l+t+1)):Array.from(Array(l+1)).map(((e,t)=>t)),p=h.map((()=>Nc(t)));return p.forEach(((e,t)=>e.splice(h[t],0,u))),p.map(((e,t)=>i(e,u,h[t]))).reduce(((e,t)=>e.concat(t)),[])};return i().map(Bo)},xi=e=>{const t=(r=e).map(((e,t)=>t)).filter((e=>"U"===r[e]||"u"===r[e]));var r;const n=Array.from(Array(2**t.length)).map(((e,t)=>t.toString(2))).map((e=>Array(t.length-e.length+1).join("0")+e)).map((e=>Array.from(e).map((e=>"0"===e?"V":"M")))).map((r=>{const n=e.slice();return t.forEach(((e,t)=>{n[e]=r[t]})),n}));if(e.includes("B")||e.includes("b"))return n;const o=n.map((e=>e.filter((e=>"M"===e||"m"===e)).length)),c=n.map((e=>e.filter((e=>"V"===e||"v"===e)).length));return n.filter(((e,t)=>2===Math.abs(o[t]-c[t])))},Ai=e=>{const t=e[0].length,r=Array.from(Array(t+1)).map((()=>({})));Array.from(Array(Math.pow(2,t))).map(((e,t)=>t.toString(2))).map((e=>Array.from(e).map((e=>parseInt(e,10)+1)).join(""))).map((e=>"11111".concat(e).slice(-t))).forEach((e=>{r[0][e]=!1})),e.forEach((e=>{r[0][e]=!0})),Array.from(Array(t)).map(((e,t)=>t+1)).map((e=>Array.from(Array(Math.pow(3,t))).map(((e,t)=>t.toString(3))).map((e=>"000000".concat(e).slice(-t))).forEach((t=>((e,t,r)=>{const n=Array.from(r).map((e=>parseInt(e,10)));if(n.filter((e=>0===e)).length!==t)return;e[t][r]=!1;let o=!1;for(let c=0;c<n.length;c+=1){const r=[];if(0===n[c]){for(let o=1;o<=2;o+=1)n[c]=o,!1!==e[t-1][n.join("")]&&r.push([c,o]);n[c]=0,r.length>0&&!1===o&&(o=[]),1===r.length&&o.push(r[0])}}!1!==o&&0===o.length&&(o=!0),e[t][r]=o})(r,e,t)))));let n=[];Array.from(Array(t+1)).map(((e,r)=>t-r)).forEach((e=>{const t=[];Object.keys(r[e]).forEach((n=>{let o=r[e][n];o.constructor===Array&&(o=o[0]),t.push([n,o])})),n=n.concat(t)})),n.sort(((e,t)=>parseInt(e[0],10)-parseInt(t[0],10)));const o={};return n.forEach((e=>{o[e[0]]=Object.freeze(e[1])})),Object.freeze(o)},Oi={taco_taco:Ai(["111112","111121","111222","112111","121112","121222","122111","122212","211121","211222","212111","212221","221222","222111","222212","222221"]),taco_tortilla:Ai(["112","121","212","221"]),tortilla_tortilla:Ai(["11","22"]),transitivity:Ai(["112","121","122","211","212","221"])},ki={taco_taco:e=>[[e[0],e[2]],[e[1],e[3]],[e[1],e[2]],[e[0],e[3]],[e[0],e[1]],[e[2],e[3]]],taco_tortilla:e=>[[e[0],e[2]],[e[0],e[1]],[e[1],e[2]]],tortilla_tortilla:e=>[[e[0],e[2]],[e[1],e[3]]],transitivity:e=>[[e[0],e[1]],[e[1],e[2]],[e[2],e[0]]]},Mi=e=>e[0]<e[1]?"".concat(e[0]," ").concat(e[1]):"".concat(e[1]," ").concat(e[0]),wi={taco_taco:e=>[Mi([e[0],e[2]]),Mi([e[1],e[3]]),Mi([e[1],e[2]]),Mi([e[0],e[3]]),Mi([e[0],e[1]]),Mi([e[2],e[3]])],taco_tortilla:e=>[Mi([e[0],e[2]]),Mi([e[0],e[1]]),Mi([e[1],e[2]])],tortilla_tortilla:e=>[Mi([e[0],e[2]]),Mi([e[1],e[3]])],transitivity:e=>[Mi([e[0],e[1]]),Mi([e[1],e[2]]),Mi([e[2],e[0]])]},ji={0:0,1:1,2:-1},Pi=e=>(Object.keys(e).forEach((t=>{e[t]=ji[e[t]]})),e),Si=Object.freeze(Object.keys(Oi)),Ci={0:0,1:2,2:1},Li=function(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),o=2;o<r;o++)n[o-2]=arguments[o];const c=ki[e](t),s=c.map((e=>e[1]<e[0])),i=c.map(((e,t)=>s[t]?"".concat(e[1]," ").concat(e[0]):"".concat(e[0]," ").concat(e[1]))),a=i.map(((e,t)=>{for(let r=0;r<n.length;r+=1)if(n[r][e])return s[t]?Ci[n[r][e]]:n[r][e];return 0})).join("");if(!0===Oi[e][a])return!0;if(!1===Oi[e][a])return!1;const l=Oi[e][a];return[i[l[0]],s[l[0]]?Ci[l[1]]:l[1]]},Ni=(e,t,r)=>{const n={};return Si.forEach((o=>{const c=r.flatMap((e=>t[o][e]));n[o]=zn(c).filter((t=>e[o][t]))})),n},zi=function(e,t,r){let n=r;const o={};for(var c=arguments.length,s=new Array(c>3?c-3:0),i=3;i<c;i++)s[i-3]=arguments[i];do{const r=Ni(e,t,n),c={};for(let t=0;t<Si.length;t+=1){const n=Si[t],i=r[n];for(let t=0;t<i.length;t+=1){const r=Li(n,e[n][i[t]],...s,o);if(!0!==r){if(!1===r)return console.warn("invalid state found",n,e[n][i[t]]),!1;if(o[r[0]]){if(o[r[0]]!==r[1])return console.warn("order conflict",n,e[n][i[t]]),!1}else{const[e,t]=r;c[e]=!0,o[r[0]]=t}}}}n=Object.keys(c)}while(n.length);return o},Fi=(e,t,r)=>{const n=((e,t,r)=>{const n=Ac(e),o=Mo(e,r);for(let l=0;l<o.length;l+=1)n[l]||o[l].reverse();const c=t.map((e=>2===e.length&&e[0]!==e[1])).map(((e,t)=>e?t:void 0)).filter((e=>void 0!==e)),s=c.map((t=>e.edges_vertices[t])).map((t=>t.map((t=>e.vertices_coords[t])))),i=s.map((e=>on.core.subtract2(e[1],e[0]))),a=[];return c.forEach((e=>{a[e]=[]})),c.map(((e,t)=>o.map((e=>on.core.clipLineConvexPolygon(e,i[t],s[t][0],on.core.exclude,on.core.excludeS,r))).map((e=>void 0!==e)))).forEach(((e,t)=>e.forEach(((e,r)=>{e&&a[c[t]].push(r)})))),a})(e,t,r);return n.map(((t,r)=>t.map((t=>[e.edges_faces[r],[t,t]])))).reduce(((e,t)=>e.concat(t)),[])},Ii=e=>1===e[0]&&-1===e[1]||-1===e[0]&&1===e[1]?"both":1===e[0]&&1===e[1]?"right":-1===e[0]&&-1===e[1]?"left":void 0,Vi=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:on.core.EPSILON;const r=wo(e),n=((e,t)=>{const r=e.edges_vertices.map((t=>e.vertices_coords[t[0]])),n=e.edges_vertices.map((t=>on.core.subtract2(e.vertices_coords[t[1]],e.vertices_coords[t[0]])));return e.edges_faces.map(((e,o)=>e.map((e=>on.core.cross2(on.core.subtract2(t[e],r[o]),n[o]))).map((e=>Math.sign(e)))))})(e,r),o=Os(e,t),c=Tn(o).filter((t=>t.map((t=>e.edges_faces[t].length>1)).reduce(((e,t)=>e&&t),!0))),s=c.map((t=>t.map((t=>e.edges_faces[t])))),i=((e,t,r,n)=>{const o=r.map((t=>e.edges_vertices[t[0]].map((t=>e.vertices_coords[t])))),c=o.map((e=>e[0])),s=o.map((e=>on.core.subtract2(e[1],e[0])));return n.map((e=>e.map((e=>e.map((e=>t[e])))))).map(((e,t)=>e.map((e=>e.map((e=>on.core.cross2(on.core.subtract2(e,c[t]),s[t]))).map((e=>Math.sign(e)))))))})(e,r,c,s),a=i.map((e=>e.map(Ii))),l=a.map(((e,t)=>{return(r=e)[0]===r[1]&&"both"!==r[0]?s[t]:void 0;var r})).filter((e=>void 0!==e)),u=a.map(((e,t)=>{return(r=e)[0]===r[1]&&"both"===r[0]?s[t]:void 0;var r})).map(((e,t)=>((e,t)=>{if(void 0!==e)return t[0][0]===t[1][0]?e:[e[0],[e[1][1],e[1][0]]]})(e,i[t]))).filter((e=>void 0!==e)),d=Fi(e,n,t),f=u.concat(d),g=a.map(((e,t)=>{return(r=e)[0]===r[1]||"both"!==r[0]&&"both"!==r[1]?void 0:((e,t,r)=>{const n="left"===t[0]||"left"===t[1]?-1:1,o="both"===t[0]?[...e[1]]:[...e[0]],c="both"===t[0]?0:1;return{taco:o,tortilla:r[c][0]===n?e[c][0]:e[c][1]}})(s[t],a[t],i[t]);var r})).filter((e=>void 0!==e)),h=Ms(e,t),p=Bn(h).map(((e,t)=>n[t].length>1&&n[t][0]===n[t][1]?e:[])).map(((t,r)=>({taco:e.edges_faces[r],tortillas:t}))).filter((e=>e.tortillas.length)).flatMap((e=>e.tortillas.map((t=>({taco:[...e.taco],tortilla:t})))));return{taco_taco:l,tortilla_tortilla:f,taco_tortilla:g.concat(p)}},Bi=function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:on.core.EPSILON;t||(t=ws(e,n)),r||(r=Ac(e));const o=e.faces_vertices.map((t=>t.map((t=>e.vertices_coords[t]))));o.forEach(((e,t)=>{r[t]||e.reverse()}));const c=e.faces_vertices.map((()=>[]));for(let i=0;i<c.length-1;i+=1)for(let e=i+1;e<c.length;e+=1){if(!t[i][e])continue;const r=on.core.clipPolygonPolygon(o[i],o[e],n);r&&(c[i][e]=r)}const s=[];for(let i=0;i<c.length-1;i+=1)for(let e=i+1;e<c.length;e+=1)if(c[i][e])for(let r=e+1;r<c.length;r+=1){if(i===r||e===r)continue;if(!t[i][r]||!t[e][r])continue;on.core.clipPolygonPolygon(c[i][e],o[r],n)&&s.push([i,e,r].sort(((e,t)=>e-t)))}return s},Ti={0:0,1:2,2:1},qi={M:1,m:1,V:2,v:2},Ri=(e,t)=>(t||(t=ws(e)),Tn(t).map((e=>e.join(" ")))),Ui=(e,t,r)=>{r||(r=Ac(e));const n={};t.forEach((e=>{n[e]=!0}));const o={};return e.edges_faces.forEach(((t,c)=>{const s=e.edges_assignment[c],i=qi[s];if(t.length<2||void 0===i)return;const a=r[t[0]]?i:Ti[i],l="".concat(t[0]," ").concat(t[1]),u="".concat(t[1]," ").concat(t[0]);l in n&&(o[l]=a),u in n&&(o[u]=Ti[a])})),o};var Di=Object.freeze({__proto__:null,makeFacePairs:Ri,solveEdgeAdjacentFacePairs:Ui});const Gi=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e-6;const r=ws(e,t),n=Ac(e),o=Vi(e,t),c=((e,t)=>{const r={};return t.taco_taco.map((e=>[e[0][0],e[0][1],e[1][0],e[1][1]].sort(((e,t)=>e-t)))).forEach((e=>["".concat(e[0]," ").concat(e[1]," ").concat(e[2]),"".concat(e[0]," ").concat(e[1]," ").concat(e[3]),"".concat(e[0]," ").concat(e[2]," ").concat(e[3]),"".concat(e[1]," ").concat(e[2]," ").concat(e[3])].forEach((e=>{r[e]=!0})))),t.taco_tortilla.map((e=>[e.taco[0],e.taco[1],e.tortilla].sort(((e,t)=>e-t)).join(" "))).forEach((e=>{r[e]=!0})),e.filter((e=>void 0===r[e.join(" ")]))})(Bi(e,r,n,t),o),s=((e,t)=>{const r={};return r.taco_taco=e.taco_taco.map((e=>[e[0][0],e[1][0],e[0][1],e[1][1]])),r.taco_tortilla=e.taco_tortilla.map((e=>[e.taco[0],e.tortilla,e.taco[1]])),r.tortilla_tortilla=e.tortilla_tortilla.map((e=>[e[0][0],e[0][1],e[1][0],e[1][1]])),r.transitivity=t.map((e=>[e[0],e[1],e[2]])),r})(o,c),i=(e=>{const t={};return Object.keys(e).forEach((e=>{t[e]={}})),Object.keys(e).forEach((r=>{e[r].forEach(((e,n)=>wi[r](e).forEach((e=>{void 0===t[r][e]&&(t[r][e]=[]),t[r][e].push(n)}))))})),t})(s),a=Ri(e,r);return{constraints:s,constraintsLookup:i,facePairs:a,edgeAdjacentOrders:Ui(e,a,n)}},Wi=(e,t)=>{if(!e)return[];const r=[];Object.keys(e).forEach((t=>{const n=t.split(" ").map((e=>parseInt(e,10)));-1===e[t]&&n.reverse(),void 0===r[n[0]]&&(r[n[0]]=[]),r[n[0]].push(n[1])})),t&&t.faces_vertices&&t.faces_vertices.forEach(((e,t)=>{void 0===r[t]&&(r[t]=[])}));const n=[],o=[];let c=0;for(let s=0;s<r.length;s+=1){if(o[s])continue;const e=[s];for(;e.length&&c<2*r.length;){const t=e[e.length-1];if(r[t]&&r[t].length){const n=r[t].pop();o[n]||e.push(n)}else n.push(t),o[t]=!0,e.pop(),c+=1}}return c>=2*r.length&&console.warn("fix protection in topological order"),n},Zi=e=>{const t=e.reduce(((e,t)=>e*t),1),r=e.slice();for(let n=r.length-2;n>=0;n-=1)r[n]*=r[n+1];return r.push(1),r.shift(),Array.from(Array(t)).map(((t,n)=>e.map(((e,t)=>Math.floor(n/r[t])%e))))},Hi={count:function(){return this.branches.map((e=>e.length))},solution:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const n=Array(this.branches.length).fill(0).map(((e,r)=>null!=t[r]?t[r]:e)),o=this.branches?this.branches.map(((e,t)=>e[n[t]])):[];return Object.assign({},this.root,...o)},allSolutions:function(){return Zi(this.count()).map((e=>this.solution(...e)))},facesLayer:function(){return Bo(Wi(this.solution(...arguments)))},allFacesLayers:function(){return Zi(this.count()).map((e=>this.facesLayer(...e)))},faceOrders:function(){return(e=>{const t=Object.keys(e),r=t.map((e=>e.split(" ").map((e=>parseInt(e,10)))));return r.map(((r,n)=>r.push(e[t[n]]))),r})(this.solution(...arguments))},allFaceOrders:function(){return Zi(this.count()).map((e=>this.faceOrders(...e)))}},Ji=function(e,t,r){for(var n=arguments.length,o=new Array(n>3?n-3:0),c=3;c<n;c++)o[c-3]=arguments[c];if(!r.length)return[];const s=r[0],i=[],a=[];[1,2].forEach((n=>{const c=zi(e,t,[s],...o,{[s]:n});!1!==c&&(c[s]=n,Object.keys(c).length===r.length?i.push(c):a.push(c))}));const l=a.map((n=>Ji(e,t,r.filter((e=>!(e in n))),...o,n)));return i.map((e=>[...o,e])).concat(...l)};var Yi=Object.assign(Object.create(null),{solver:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e-6;const r=new Date,{constraints:n,constraintsLookup:o,facePairs:c,edgeAdjacentOrders:s}=Gi(e,t),i=Date.now()-r,a=new Date,l=zi(n,o,Object.keys(s),s);if(!l)return;const u=((e,t,r)=>{const n=Object.keys(t),o={};e.forEach((e=>{o[e]=!0}));let c=0;const s=[];for(;c<e.length;){if(!o[e[c]]){c+=1;continue}const i=[],a=[e[c]],l={[e[c]]:!0};do{const e=a.shift();delete o[e],i.push(e);const c={};n.forEach((n=>{const o=r[n][e];o&&o.map((e=>t[n][e])).map((e=>wi[n](e).forEach((e=>{c[e]=!0}))))}));const s=Object.keys(c).filter((e=>o[e])).filter((e=>!l[e]));a.push(...s),s.forEach((e=>{l[e]=!0}))}while(a.length);c+=1,s.push(i)}return s})(c.filter((e=>!(e in s))).filter((e=>!(e in l))),n,o).map((e=>Ji(n,o,e,s,l))),d=u.map((e=>e.map((e=>Object.assign({},...e))))),f={...s,...l};Pi(f),d.forEach((e=>e.forEach((e=>Pi(e)))));const g=Date.now()-a;return g>50&&console.log("prep ".concat(i,"ms solver ").concat(g,"ms")),Object.assign(Object.create(Hi),{root:f,branches:d})},table:Oi,topologicalOrder:Wi,makeTacosTortillas:Vi,makeFoldedStripTacos:ui,makeTransitivityTrios:Bi,singleVertexSolver:Ei,singleVertexAssignmentSolver:(e,t,r)=>{null==t&&(t=e.map((()=>"U")));const n=xi(t),o=n.map((t=>Ei(e,t,r)));return n.map(((e,t)=>t)).filter((e=>o[e].length>0)).map((e=>({assignment:n[e],layer:o[e]})))},validateLayerSolver:pi,validateTacoTacoFacePairs:gi,validateTacoTortillaStrip:fi,foldStripWithAssignments:yi},li,Di);var Xi=Object.freeze({__proto__:null,kawasakiSolutions:(e,t)=>{let{vertices_coords:r,vertices_edges:n,edges_vertices:o,edges_vectors:c}=e;c||(c=bo({vertices_coords:r,edges_vertices:o})),n||(n=no({edges_vertices:o}));const s=n[t].map((e=>c[e])),i=on.core.counterClockwiseOrder2(s).map((e=>s[e]));return Qc(i)}}),Ki=Object.assign(Object.create(null),{maekawaAssignments:xi,foldAngles4:function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const n=(e=>{let t=0,r=0;for(let n=0;n<e.length;n+=1)"M"!==e[n]&&"m"!==e[n]||(t+=1),"V"!==e[n]&&"v"!==e[n]||(r+=1);for(let n=0;n<e.length;n+=1){if(t>r&&("V"===e[n]||"v"===e[n]))return n;if(r>t&&("M"===e[n]||"m"===e[n]))return n}})(t);if(void 0===n)return;const o=e[(n+1)%e.length],c=e[(n+2)%e.length],s=Math.PI*r,i=-Math.cos(o)*Math.cos(c)+Math.sin(o)*Math.sin(c)*Math.cos(Math.PI-s),a=Math.cos(Math.PI-s)-Math.sin(Math.PI-s)**2*Math.sin(o)*Math.sin(c)/(1-i),l=-Math.acos(a)+Math.PI;return n%2===0?[l,s,l,s].map(((e,t)=>n===t?-e:e)):[s,l,s,l].map(((e,t)=>n===t?-e:e))}},es,Xi,is),$i={axioms:{ar:[null,"\u0627\u0635\u0646\u0639 \u062e\u0637\u0627\u064b \u064a\u0645\u0631 \u0628\u0646\u0642\u0637\u062a\u064a\u0646","\u0627\u0635\u0646\u0639 \u062e\u0637\u0627\u064b \u0639\u0646 \u0637\u0631\u064a\u0642 \u0637\u064a \u0646\u0642\u0637\u0629 \u0648\u0627\u062d\u062f\u0629 \u0625\u0644\u0649 \u0623\u062e\u0631\u0649","\u0627\u0635\u0646\u0639 \u062e\u0637\u0627\u064b \u0639\u0646 \u0637\u0631\u064a\u0642 \u0637\u064a \u062e\u0637 \u0648\u0627\u062d\u062f \u0639\u0644\u0649 \u0622\u062e\u0631","\u0627\u0635\u0646\u0639 \u062e\u0637\u0627\u064b \u064a\u0645\u0631 \u0639\u0628\u0631 \u0646\u0642\u0637\u0629 \u0648\u0627\u062d\u062f\u0629 \u0648\u064a\u062c\u0639\u0644 \u062e\u0637\u0627\u064b \u0648\u0627\u062d\u062f\u0627\u064b \u0641\u0648\u0642 \u0646\u0641\u0633\u0647","\u0627\u0635\u0646\u0639 \u062e\u0637\u0627\u064b \u064a\u0645\u0631 \u0628\u0627\u0644\u0646\u0642\u0637\u0629 \u0627\u0644\u0623\u0648\u0644\u0649 \u0648\u064a\u062c\u0639\u0644 \u0627\u0644\u0646\u0642\u0637\u0629 \u0627\u0644\u062b\u0627\u0646\u064a\u0629 \u0639\u0644\u0649 \u0627\u0644\u062e\u0637","\u0627\u0635\u0646\u0639 \u062e\u0637\u0627\u064b \u064a\u062c\u0644\u0628 \u0627\u0644\u0646\u0642\u0637\u0629 \u0627\u0644\u0623\u0648\u0644\u0649 \u0625\u0644\u0649 \u0627\u0644\u062e\u0637 \u0627\u0644\u0623\u0648\u0644 \u0648\u0627\u0644\u0646\u0642\u0637\u0629 \u0627\u0644\u062b\u0627\u0646\u064a\u0629 \u0625\u0644\u0649 \u0627\u0644\u062e\u0637 \u0627\u0644\u062b\u0627\u0646\u064a","\u0627\u0635\u0646\u0639 \u062e\u0637\u0627\u064b \u064a\u062c\u0644\u0628 \u0646\u0642\u0637\u0629 \u0625\u0644\u0649 \u062e\u0637 \u0648\u064a\u062c\u0639\u0644 \u062e\u0637 \u062b\u0627\u0646\u064a \u0641\u0648\u0642 \u0646\u0641\u0633\u0647"],de:[null,"Falte eine Linie durch zwei Punkte","Falte zwei Punkte aufeinander","Falte zwei Linien aufeinander","Falte eine Linie auf sich selbst, falte dabei durch einen Punkt","Falte einen Punkt auf eine Linie, falte dabei durch einen anderen Punkt","Falte einen Punkt auf eine Linie und einen weiteren Punkt auf eine weitere Linie","Falte einen Punkt auf eine Linie und eine weitere Linie in sich selbst zusammen"],en:[null,"fold a line through two points","fold two points together","fold two lines together","fold a line on top of itself, creasing through a point","fold a point to a line, creasing through another point","fold a point to a line and another point to another line","fold a point to a line and another line onto itself"],es:[null,"dobla una l\xednea entre dos puntos","dobla dos puntos juntos","dobla y une dos l\xedneas","dobla una l\xednea sobre s\xed misma, dobl\xe1ndola hacia un punto","dobla un punto hasta una l\xednea, dobl\xe1ndola a trav\xe9s de otro punto","dobla un punto hacia una l\xednea y otro punto hacia otra l\xednea","dobla un punto hacia una l\xednea y otra l\xednea sobre s\xed misma"],fr:[null,"cr\xe9ez un pli passant par deux points","pliez pour superposer deux points","pliez pour superposer deux lignes","rabattez une ligne sur elle-m\xeame \xe0 l'aide d'un pli qui passe par un point","rabattez un point sur une ligne \xe0 l'aide d'un pli qui passe par un autre point","rabattez un point sur une ligne et un autre point sur une autre ligne","rabattez un point sur une ligne et une autre ligne sur elle-m\xeame"],hi:[null,"\u090f\u0915 \u0915\u094d\u0930\u0940\u091c\u093c \u092c\u0928\u093e\u090f\u0901 \u091c\u094b \u0926\u094b \u0938\u094d\u0925\u093e\u0928\u094b\u0902 \u0938\u0947 \u0917\u0941\u091c\u0930\u0924\u093e \u0939\u0948","\u090f\u0915 \u0938\u094d\u0925\u093e\u0928 \u0915\u094b \u0926\u0942\u0938\u0930\u0947 \u0938\u094d\u0925\u093e\u0928 \u092a\u0930 \u092e\u094b\u0921\u093c\u0915\u0930 \u090f\u0915 \u0915\u094d\u0930\u0940\u091c\u093c \u092c\u0928\u093e\u090f\u0901","\u090f\u0915 \u0930\u0947\u0916\u093e \u092a\u0930 \u0926\u0942\u0938\u0930\u0940 \u0930\u0947\u0916\u093e \u0915\u094b \u092e\u094b\u0921\u093c\u0915\u0930 \u0915\u094d\u0930\u0940\u091c\u093c \u092c\u0928\u093e\u090f\u0901","\u090f\u0915 \u0915\u094d\u0930\u0940\u091c\u093c \u092c\u0928\u093e\u090f\u0901 \u091c\u094b \u090f\u0915 \u0938\u094d\u0925\u093e\u0928 \u0938\u0947 \u0917\u0941\u091c\u0930\u0924\u093e \u0939\u0948 \u0914\u0930 \u090f\u0915 \u0930\u0947\u0916\u093e \u0915\u094b \u0938\u094d\u0935\u092f\u0902 \u0915\u0947 \u090a\u092a\u0930 \u0932\u0947 \u0906\u0924\u093e \u0939\u0948","\u090f\u0915 \u0915\u094d\u0930\u0940\u091c\u093c \u092c\u0928\u093e\u090f\u0901 \u091c\u094b \u092a\u0939\u0932\u0947 \u0938\u094d\u0925\u093e\u0928 \u0938\u0947 \u0917\u0941\u091c\u0930\u0924\u093e \u0939\u0948 \u0914\u0930 \u0926\u0942\u0938\u0930\u0947 \u0938\u094d\u0925\u093e\u0928 \u0915\u094b \u0930\u0947\u0916\u093e \u092a\u0930 \u0932\u0947 \u0906\u0924\u093e \u0939\u0948","\u090f\u0915 \u0915\u094d\u0930\u0940\u091c\u093c \u092c\u0928\u093e\u090f\u0901 \u091c\u094b \u092a\u0939\u0932\u0947 \u0938\u094d\u0925\u093e\u0928 \u0915\u094b \u092a\u0939\u0932\u0940 \u0930\u0947\u0916\u093e \u092a\u0930 \u0914\u0930 \u0926\u0942\u0938\u0930\u0947 \u0938\u094d\u0925\u093e\u0928 \u0915\u094b \u0926\u0942\u0938\u0930\u0940 \u0930\u0947\u0916\u093e \u092a\u0930 \u0932\u0947 \u0906\u0924\u093e \u0939\u0948","\u090f\u0915 \u0915\u094d\u0930\u0940\u091c\u093c \u092c\u0928\u093e\u090f\u0901 \u091c\u094b \u090f\u0915 \u0938\u094d\u0925\u093e\u0928 \u0915\u094b \u090f\u0915 \u0930\u0947\u0916\u093e \u092a\u0930 \u0932\u0947 \u0906\u0924\u093e \u0939\u0948 \u0914\u0930 \u0926\u0942\u0938\u0930\u0940 \u0930\u0947\u0916\u093e \u0915\u094b \u0938\u094d\u0935\u092f\u0902 \u0915\u0947 \u090a\u092a\u0930 \u0932\u0947 \u0906\u0924\u093e \u0939\u0948"],jp:[null,"2\u70b9\u306b\u6cbf\u3063\u3066\u6298\u308a\u76ee\u3092\u4ed8\u3051\u307e\u3059","2\u70b9\u3092\u5408\u308f\u305b\u3066\u6298\u308a\u307e\u3059","2\u3064\u306e\u7dda\u3092\u5408\u308f\u305b\u3066\u6298\u308a\u307e\u3059","\u70b9\u3092\u901a\u904e\u3055\u305b\u3001\u65e2\u306b\u3042\u308b\u7dda\u306b\u6cbf\u3063\u3066\u6298\u308a\u307e\u3059","\u70b9\u3092\u7dda\u6cbf\u3044\u306b\u5408\u308f\u305b\u5225\u306e\u70b9\u3092\u901a\u904e\u3055\u305b\u6298\u308a\u307e\u3059","\u7dda\u306b\u5411\u304b\u3063\u3066\u70b9\u3092\u6298\u308a\u3001\u540c\u6642\u306b\u3082\u3046\u4e00\u65b9\u306e\u7dda\u306b\u5411\u304b\u3063\u3066\u3082\u3046\u4e00\u65b9\u306e\u70b9\u3092\u6298\u308a\u307e\u3059","\u7dda\u306b\u5411\u304b\u3063\u3066\u70b9\u3092\u6298\u308a\u3001\u540c\u6642\u306b\u5225\u306e\u7dda\u3092\u305d\u306e\u4e0a\u306b\u6298\u308a\u307e\u3059"],ko:[null,"\ub450 \uc810\uc744 \ud1b5\uacfc\ud558\ub294 \uc120\uc73c\ub85c \uc811\uc73c\uc138\uc694","\ub450 \uc810\uc744 \ud568\uaed8 \uc811\uc73c\uc138\uc694","\ub450 \uc120\uc744 \ud568\uaed8 \uc811\uc73c\uc138\uc694","\uadf8 \uc704\uc5d0 \uc120\uc744 \uc811\uc73c\uba74\uc11c \uc810\uc744 \ud1b5\uacfc\ud558\uac8c \uc811\uc73c\uc138\uc694","\uc810\uc744 \uc120\uc73c\ub85c \uc811\uc73c\uba74\uc11c, \ub2e4\ub978 \uc810\uc744 \uc9c0\ub098\uac8c \uc811\uc73c\uc138\uc694","\uc810\uc744 \uc120\uc73c\ub85c \uc811\uace0 \ub2e4\ub978 \uc810\uc744 \ub2e4\ub978 \uc120\uc73c\ub85c \uc811\uc73c\uc138\uc694","\uc810\uc744 \uc120\uc73c\ub85c \uc811\uace0 \ub2e4\ub978 \uc120\uc744 \uadf8 \uc704\uc5d0 \uc811\uc73c\uc138\uc694"],ms:[null,"lipat garisan melalui dua titik","lipat dua titik bersama","lipat dua garisan bersama","lipat satu garisan di atasnya sendiri, melipat melalui satu titik","lipat satu titik ke garisan, melipat melalui titik lain","lipat satu titik ke garisan dan satu lagi titik ke garisan lain","lipat satu titik ke garisan dan satu lagi garisan di atasnya sendiri"],pt:[null,"dobre uma linha entre dois pontos","dobre os dois pontos para uni-los","dobre as duas linhas para uni-las","dobre uma linha sobre si mesma, criando uma dobra ao longo de um ponto","dobre um ponto at\xe9 uma linha, criando uma dobra ao longo de outro ponto","dobre um ponto at\xe9 uma linha e outro ponto at\xe9 outra linha","dobre um ponto at\xe9 uma linha e outra linha sobre si mesma"],ru:[null,"\u0441\u043b\u043e\u0436\u0438\u0442\u0435 \u043b\u0438\u043d\u0438\u044e \u0447\u0435\u0440\u0435\u0437 \u0434\u0432\u0435 \u0442\u043e\u0447\u043a\u0438","\u0441\u043b\u043e\u0436\u0438\u0442\u0435 \u0434\u0432\u0435 \u0442\u043e\u0447\u043a\u0438 \u0432\u043c\u0435\u0441\u0442\u0435","\u0441\u043b\u043e\u0436\u0438\u0442\u0435 \u0434\u0432\u0435 \u043b\u0438\u043d\u0438\u0438 \u0432\u043c\u0435\u0441\u0442\u0435","\u0441\u0432\u0435\u0440\u043d\u0438\u0442\u0435 \u043b\u0438\u043d\u0438\u044e \u0441\u0432\u0435\u0440\u0445\u0443 \u0441\u0435\u0431\u044f, \u0441\u0433\u0438\u0431\u0430\u044f \u0447\u0435\u0440\u0435\u0437 \u0442\u043e\u0447\u043a\u0443","\u0441\u043b\u043e\u0436\u0438\u0442\u0435 \u0442\u043e\u0447\u043a\u0443 \u0432 \u043b\u0438\u043d\u0438\u044e, \u0441\u0433\u0438\u0431\u0430\u044f \u0447\u0435\u0440\u0435\u0437 \u0434\u0440\u0443\u0433\u0443\u044e \u0442\u043e\u0447\u043a\u0443","\u0441\u043b\u043e\u0436\u0438\u0442\u0435 \u0442\u043e\u0447\u043a\u0443 \u0432 \u043b\u0438\u043d\u0438\u044e \u0438 \u0434\u0440\u0443\u0433\u0443\u044e \u0442\u043e\u0447\u043a\u0443 \u0432 \u0434\u0440\u0443\u0433\u0443\u044e \u043b\u0438\u043d\u0438\u044e","\u0441\u043b\u043e\u0436\u0438\u0442\u0435 \u0442\u043e\u0447\u043a\u0443 \u0432 \u043b\u0438\u043d\u0438\u044e \u0438 \u0434\u0440\u0443\u0433\u0443\u044e \u043b\u0438\u043d\u0438\u044e \u043d\u0430 \u0441\u0435\u0431\u044f"],tr:[null,"iki noktadan ge\xe7en bir \xe7izgi boyunca katla","iki noktay\u0131 birbirine katla","iki \xe7izgiyi birbirine katla","bir noktadan k\u0131v\u0131rarak kendi \xfczerindeki bir \xe7izgi boyunca katla","ba\u015fka bir noktadan k\u0131v\u0131rarak bir noktay\u0131 bir \xe7izgiye katla","bir noktay\u0131 bir \xe7izgiye ve ba\u015fka bir noktay\u0131 ba\u015fka bir \xe7izgiye katla","bir noktay\u0131 bir \xe7izgiye ve ba\u015fka bir \xe7izgiyi kendi \xfczerine katla"],vi:[null,"t\u1ea1o m\u1ed9t n\u1ebfp g\u1ea5p \u0111i qua hai \u0111i\u1ec3m","t\u1ea1o n\u1ebfp g\u1ea5p b\u1eb1ng c\xe1ch g\u1ea5p m\u1ed9t \u0111i\u1ec3m n\xe0y sang \u0111i\u1ec3m kh\xe1c","t\u1ea1o n\u1ebfp g\u1ea5p b\u1eb1ng c\xe1ch g\u1ea5p m\u1ed9t \u0111\u01b0\u1eddng l\xean m\u1ed9t \u0111\u01b0\u1eddng kh\xe1c","t\u1ea1o m\u1ed9t n\u1ebfp g\u1ea5p \u0111i qua m\u1ed9t \u0111i\u1ec3m v\xe0 \u0111\u01b0a m\u1ed9t \u0111\u01b0\u1eddng l\xean tr\xean ch\xednh n\xf3","t\u1ea1o m\u1ed9t n\u1ebfp g\u1ea5p \u0111i qua \u0111i\u1ec3m \u0111\u1ea7u ti\xean v\xe0 \u0111\u01b0a \u0111i\u1ec3m th\u1ee9 hai l\xean \u0111\u01b0\u1eddng th\u1eb3ng","t\u1ea1o m\u1ed9t n\u1ebfp g\u1ea5p mang \u0111i\u1ec3m \u0111\u1ea7u ti\xean \u0111\u1ebfn \u0111\u01b0\u1eddng \u0111\u1ea7u ti\xean v\xe0 \u0111i\u1ec3m th\u1ee9 hai cho \u0111\u01b0\u1eddng th\u1ee9 hai","t\u1ea1o m\u1ed9t n\u1ebfp g\u1ea5p mang l\u1ea1i m\u1ed9t \u0111i\u1ec3m cho m\u1ed9t \u0111\u01b0\u1eddng v\xe0 \u0111\u01b0a m\u1ed9t \u0111\u01b0\u1eddng th\u1ee9 hai l\xean tr\xean ch\xednh n\xf3"],zh:[null,"\u901a\u904e\u5169\u9ede\u6298\u4e00\u689d\u7dda","\u5c07\u5169\u9ede\u6298\u758a\u8d77\u4f86","\u5c07\u5169\u689d\u7dda\u6298\u758a\u5728\u4e00\u8d77","\u901a\u904e\u4e00\u500b\u9ede\u6298\u758a\u4e00\u689d\u7dda\u5728\u81ea\u8eab\u4e0a\u9762","\u5c07\u4e00\u500b\u9ede\uff0c\u901a\u904e\u53e6\u4e00\u500b\u9ede\u6298\u758a\u6210\u4e00\u689d\u7dda\uff0c","\u5c07\u4e00\u500b\u9ede\u6298\u758a\u70ba\u4e00\u689d\u7dda\uff0c\u518d\u5c07\u53e6\u4e00\u500b\u9ede\u6298\u758a\u5230\u53e6\u4e00\u689d\u7dda","\u5c07\u4e00\u500b\u9ede\u6298\u758a\u6210\u4e00\u689d\u7dda\uff0c\u53e6\u4e00\u689d\u7dda\u6298\u758a\u5230\u5b83\u81ea\u8eab\u4e0a"]},instructions:{fold:{es:"doblez"},"valley fold":{es:"doblez de valle",zh:"\u8c37\u647a"},"mountain fold":{es:"doblez de monta\xf1a",zh:"\u5c71\u647a"},"inside reverse fold":{zh:"\u5167\u4e2d\u5272\u647a"},"outside reverse fold":{zh:"\u5916\u4e2d\u5272\u647a"},sink:{},"open sink":{zh:"\u958b\u653e\u5f0f\u6c89\u58d3\u647a"},"closed sink":{zh:"\u5c01\u9589\u5f0f\u6c89\u58d3\u647a"},"rabbit ear":{zh:"\u5154\u8033\u647a"},"double rabbit ear":{zh:"\u96d9\u5154\u8033\u647a"},"petal fold":{zh:"\u82b1\u74e3\u647a"},blintz:{zh:"\u5750\u588a\u57fa"},squash:{zh:"\u58d3\u647a"},"flip over":{es:"dale la vuelta a tu papel"}}};const Qi=function(e){if(!e)return;const t={},r=e.getAttribute("class"),n=r?r.split(" "):[];for(var o=arguments.length,c=new Array(o>1?o-1:0),s=1;s<o;s++)c[s-1]=arguments[s];n.push(...c),n.forEach((e=>{t[e]=!0}));const i=Object.keys(t).join(" ");e.setAttribute("class",i)},ea={},ta={stroke:E},ra={},na={M:{stroke:"red"},m:{stroke:"red"},V:{stroke:"blue"},v:{stroke:"blue"},F:{stroke:"lightgray"},f:{stroke:"lightgray"}},oa=e=>(e=>{let{vertices_coords:t,edges_vertices:r}=e;return t&&r?r.map((e=>e.map((e=>t[e])))):[]})(e).map((e=>{return"M".concat((t=e)[0][0]," ").concat(t[0][1],"L").concat(t[1][0]," ").concat(t[1][1]);var t})).join(""),ca=e=>{let{vertices_coords:t,edges_vertices:r,edges_assignment:n}=e;if(!t||!r)return{};if(!n)return{u:oa({vertices_coords:t,edges_vertices:r})};const o=(e=>{const t={u:[],f:[],v:[],m:[],b:[]},r=e[h].map((e=>e.toLowerCase()));return e[f].map(((e,t)=>r[t]||"u")).forEach(((e,r)=>t[e].push(r))),t})({vertices_coords:t,edges_vertices:r,edges_assignment:n});return Object.keys(o).forEach((e=>{o[e]=oa({vertices_coords:t,edges_vertices:o[e].map((e=>r[e]))})})),Object.keys(o).forEach((e=>{""===o[e]&&delete o[e]})),o},sa=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(t).forEach((r=>e.setAttributeNS(null,r,t[r])))},ia=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=P.svg.g();if(!e)return r;const n=ys(e),o=(e=>{let{vertices_coords:t,edges_vertices:r,edges_assignment:n}=e;const o=ca({vertices_coords:t,edges_vertices:r,edges_assignment:n});return Object.keys(o).forEach((e=>{const t=P.svg.path(o[e]);Qi(t,vn[e]),o[e]=t})),o})(e);return Object.keys(o).forEach((e=>{Qi(o[e],vn[e]),sa(o[e],n?ra[e]:na[e]),sa(o[e],t[e]),sa(o[e],t[vn[e]]),r.appendChild(o[e]),Object.defineProperty(r,vn[e],{get:()=>o[e]})})),sa(r,n?ea:ta),sa(r,t.stroke?{stroke:t.stroke}:{}),r},aa=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=P.svg.g();if(!e)return r;const n=ys(e),o=(e.edges_assignment?e.edges_assignment:_o(e)).map((e=>e.toLowerCase())),c={};["b","m","v","f","u"].forEach((e=>{const o=P.svg.g();r.appendChild(o),Qi(o,vn[e]),sa(o,n?ra[e]:na[e]),sa(o,t[vn[e]]),Object.defineProperty(r,vn[e],{get:()=>o}),c[e]=o}));const s=e.edges_vertices.map((t=>t.map((t=>e.vertices_coords[t])))).map((e=>P.svg.line(e[0][0],e[0][1],e[1][0],e[1][1])));return e.edges_foldAngle&&s.forEach(((t,r)=>{const n=e.edges_foldAngle[r];var o;0!==n&&180!==n&&-180!==n&&t.setAttributeNS(null,"opacity",(o=n,Math.abs(o)/180))})),s.forEach(((e,t)=>c[o[t]].appendChild(e))),sa(r,n?ea:ta),sa(r,t.stroke?{stroke:t.stroke}:{}),r},la={back:{fill:x},front:{fill:"#ddd"}},ua={back:{opacity:.1},front:{opacity:.1}},da={},fa={stroke:E,"stroke-linejoin":"bevel"},ga={stroke:A,fill:E,"stroke-linejoin":"bevel"},ha={fill:A},pa=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(t).forEach((r=>e.setAttributeNS(null,r,t[r])))},ma=(e,t,r,n)=>{const o=ys(e),c=null!=e[m],s=[[_],[y]],i=Ac(e);i.map((e=>e?s[0]:s[1])).forEach(((e,r)=>{Qi(t[r],e),pa(t[r],o?c?la[e]:ua[e]:da[e]),pa(t[r],n[e])}));const a=c?function(e,t){const r=t.faces_vertices.length||t.faces_edges.length;return Array.from(Array(r)).map(((e,t)=>t)).filter((t=>null==e[t])).concat(Bo(e))}(e[m],e).map((e=>t[e])):t;return a.forEach((e=>r.appendChild(e))),Object.defineProperty(r,_,{get:()=>t.filter(((e,t)=>i[t]))}),Object.defineProperty(r,y,{get:()=>t.filter(((e,t)=>!i[t]))}),pa(r,o?c?fa:ga:ha),r},va={fill:A},_a={stroke:E,fill:x},ya={vertices:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=P.svg.g();return e&&e.vertices_coords?(e.vertices_coords.map((e=>P.svg.circle(e[0],e[1],.01))).forEach((e=>r.appendChild(e))),r.setAttributeNS(null,"fill",A),Object.keys(t).forEach((e=>r.setAttributeNS(null,e,t[e]))),r):r},edges:(e,t)=>xn(e)?ia(e,t):aa(e,t),faces:(e,t)=>null!=e&&null!=e.faces_vertices?function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=P.svg.g();if(!e||!e.vertices_coords||!e.faces_vertices)return r;const n=e.faces_vertices.map((t=>t.map((t=>[0,1].map((r=>e.vertices_coords[t][r])))))).map((e=>P.svg.polygon(e)));return n.forEach(((e,t)=>e.setAttributeNS(null,s,t))),r.setAttributeNS(null,"fill",x),ma(e,n,r,t)}(e,t):function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=P.svg.g();if(!e||g in e===!1||f in e===!1||d in e===!1)return r;const n=e[g].map((t=>t.map((t=>e[f][t])).map(((e,t,r)=>{const n=r[(t+1)%r.length];return e[1]===n[0]||e[1]===n[1]?e[0]:e[1]})).map((t=>[0,1].map((r=>e[d][t][r])))))).map((e=>P.svg.polygon(e)));return n.forEach(((e,t)=>e.setAttributeNS(null,s,t))),r.setAttributeNS(null,"fill","white"),ma(e,n,r,t)}(e,t),boundaries:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=P.svg.g();if(!e||!e.vertices_coords||!e.edges_vertices||!e.edges_assignment)return r;const n=cc(e).vertices.map((t=>[0,1].map((r=>e.vertices_coords[t][r]))));if(0===n.length)return r;const o=P.svg.polygon(n);return Qi(o,v),r.appendChild(o),function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object.keys(t).forEach((r=>e.setAttributeNS(null,r,t[r])))}(r,ys(e)?va:_a),Object.keys(t).forEach((e=>r.setAttributeNS(null,e,t[e]))),r}},ba=(e,t,r)=>{const n=!1===r?P.svg.g():ya[e](t,r);return Qi(n,e),n},Ea=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return[u,l,a,i].map((r=>ba(r,e,t[r])))};[u,l,a,i].forEach((e=>{Ea[e]=function(t){return ba(e,t,(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})[e])}}));const xa=e=>{let{vertices_coords:t}=e;if(null==t||0===t.length)return;const r=Array(2).fill(1/0),n=Array(2).fill(-1/0);t.forEach((e=>{e[0]<r[0]&&(r[0]=e[0]),e[0]>n[0]&&(n[0]=e[0]),e[1]<r[1]&&(r[1]=e[1]),e[1]>n[1]&&(n[1]=e[1])}));return Number.isNaN(r[0])||Number.isNaN(r[1])||Number.isNaN(n[0])||Number.isNaN(n[1])?void 0:[r[0],r[1],n[0]-r[0],n[1]-r[1]]},Aa=e=>"SVG"===(e.nodeName||"").toUpperCase()?e:e.parentNode?Aa(e.parentNode):void 0,Oa=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=Ea(t,r);return n.filter((e=>e.childNodes.length>0)).forEach((t=>e.appendChild(t))),((e,t,r,n)=>{const o=t[3]&&t[3].childNodes.length;if(!(n.strokeWidth||n.viewBox||o))return;const c=xa(r),s=c?Math.max(c[2],c[3]):1,i=Aa(e);if(i&&n.viewBox){const e=c?c.join(" "):"0 0 1 1";i.setAttributeNS(null,"viewBox",e)}if(n.strokeWidth||n["stroke-width"]){const t=n.strokeWidth?n.strokeWidth:n["stroke-width"],r="number"===typeof t?s*t:.01*s;e.setAttributeNS(null,"stroke-width",r)}if(o){const e=n.vertices&&null!=n.vertices.radius?n.vertices.radius:n.radius,r="string"===typeof e?parseFloat(e):e,o="number"!==typeof r||Number.isNaN(r)?.02*s:s*r;((e,t)=>{for(let r=0;r<e.childNodes.length;r+=1)e.childNodes[r].setAttributeNS(null,"r",t)})(t[3],o)}})(e,n,t,r),((e,t)=>{const r=[t.file_classes||[],t.frame_classes||[]].flat();r.length&&Qi(e,...r)})(e,t),Object.keys(Ea).filter((t=>null==e[t])).forEach(((t,r)=>Object.defineProperty(e,t,{get:()=>n[r]}))),e},ka=(e,t)=>Oa(P.svg(),e,t);Object.keys(Ea).forEach((e=>{ka[e]=Ea[e]})),ka.drawInto=Oa,ka.getViewBox=e=>{const t=xa(e);return void 0===t?"":t.join(" ")},Object.defineProperty(ka,"linker",{enumerable:!1,value:function(e){e.graph.svg=this;const t={svg:this};Object.keys(t).forEach((r=>{e.graph.prototype[r]=function(){return t[r](this,...arguments)}}))}.bind(ka)});const Ma={init:()=>{}};function wa(){return Ma.init(...arguments)}const ja="class",Pa="function",Sa="undefined",Ca="number",La="string",Na="object",za="svg",Fa="path",Ia="id",Va="style",Ba="viewBox",Ta="transform",qa="points",Ra="stroke",Ua="none",Da="arrow",Ga="head",Wa="tail",Za=typeof window!==Sa&&typeof window.document!==Sa,Ha=typeof process!==Sa&&null!=process.versions&&null!=process.versions.node,Ja=[];Ja[10]='"error 010: window" not set. if using node/deno, include package @xmldom/xmldom, set to the main export ( ear.window = xmldom; )';const Ya={window:void 0};Za&&(Ya.window=window);const Xa=()=>{if(void 0===Ya.window)throw Ja[10];return Ya.window};var Ka="http://www.w3.org/2000/svg",$a={s:["svg"],d:["defs"],h:["desc","filter","metadata","style","script","title","view"],c:["cdata"],g:["g"],v:["circle","ellipse","line","path","polygon","polyline","rect"],t:["text"],i:["marker","symbol","clipPath","mask"],p:["linearGradient","radialGradient","pattern"],cT:["textPath","tspan"],cG:["stop"],cF:["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]};const Qa=(e,t)=>[e[0]+t[0],e[1]+t[1]],el=(e,t)=>[e[0]-t[0],e[1]-t[1]],tl=(e,t)=>[e[0]*t,e[1]*t],rl=e=>e[0]**2+e[1]**2,nl=e=>Math.sqrt(rl(e)),ol=(e,t)=>rl(el(e,t)),cl=(e,t)=>Math.sqrt(ol(e,t)),sl=(e,t)=>[Math.cos(e)*t,Math.sin(e)*t];var il=Object.freeze({__proto__:null,svg_add2:Qa,svg_sub2:el,svg_scale2:tl,svg_magnitudeSq2:rl,svg_magnitude2:nl,svg_distanceSq2:ol,svg_distance2:cl,svg_polar_to_cart:sl});const al=function(e,t,r,n,o){let c=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(null==o)return"";const s=sl(n,r),i=sl(o,r),a=[i[0]-s[0],i[1]-s[1]],l=s[0]*i[1]-s[1]*i[0],u=s[0]*i[0]+s[1]*i[1],d=Math.atan2(l,u)>0?0:1;let f=c?"M ".concat(e,",").concat(t," l ").concat(s[0],",").concat(s[1]," "):"M ".concat(e+s[0],",").concat(t+s[1]," ");return f+=["a ",r,r,0,d,1,a[0],a[1]].join(" "),c&&(f+=" Z"),f},ll=(e,t,r,n,o)=>[al(e,t,r,n,o,!1)];var ul={arc:{nodeName:Fa,attributes:["d"],args:ll,methods:{setArc:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return e.setAttribute("d",ll(...r))}}}};const dl=(e,t,r,n,o)=>[al(e,t,r,n,o,!0)];var fl={wedge:{nodeName:Fa,args:dl,attributes:["d"],methods:{setArc:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return e.setAttribute("d",dl(...r))}}}};const gl=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return Array.from(Array(129)).map(((e,t)=>(t-128)/128*2+1)).map((o=>[e+(o+1)*r*.5,t+o**2*n]))};var hl={parabola:{nodeName:"polyline",attributes:[qa],args:(e,t,r,n)=>[gl(e,t,r,n).map((e=>"".concat(e[0],",").concat(e[1]))).join(" ")]}};const pl=(e,t,r,n)=>{const o=[t,r];return Array.from(Array(e)).map(((t,r)=>2*Math.PI*(r/e))).map((e=>[Math.cos(e),Math.sin(e)])).map((e=>o.map(((t,r)=>t+n*e[r]))))};var ml={regularPolygon:{nodeName:"polygon",attributes:[qa],args:function(e){return[pl(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,arguments.length>3&&void 0!==arguments[3]?arguments[3]:1).map((e=>"".concat(e[0],",").concat(e[1]))).join(" ")]}}};var vl={roundRect:{nodeName:Fa,attributes:["d"],args:function(e,t,r,n){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;o>r/2&&(o=r/2),o>n/2&&(o=n/2);const c=r-2*o,s=n-2*o,i="A".concat(o," ").concat(o," 0 0 1");return[["M".concat(e+(r-c)/2,",").concat(t),"h".concat(c),i,"".concat(e+r,",").concat(t+(n-s)/2),"v".concat(s),i,"".concat(e+r-o,",").concat(t+n),"h".concat(-c),i,"".concat(e,",").concat(t+n-o),"v".concat(-s),i,"".concat(e+o,",").concat(t)].join(" ")]}}},_l={toCamel:e=>e.replace(/([-_][a-z])/gi,(e=>e.toUpperCase().replace("-","").replace("_",""))),toKebab:e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").replace(/([A-Z])([A-Z])(?=[a-z])/g,"$1-$2").toLowerCase(),capitalized:e=>e.charAt(0).toUpperCase()+e.slice(1)};const yl=e=>null!=e&&typeof e[Symbol.iterator]===Pa,bl=function(){switch(arguments.length){case void 0:case 0:return Array.from(arguments);case 1:return yl(arguments[0])&&typeof arguments[0]!==La?bl(...arguments[0]):[arguments[0]];default:return Array.from(arguments).map((e=>yl(e)?[...bl(e)]:e))}};var El=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e=>typeof e===Ca)).concat(t.filter((e=>typeof e===Na&&null!==e)).map((e=>typeof e.x===Ca?[e.x,e.y]:typeof e[0]===Ca?[e[0],e[1]]:void 0)).filter((e=>void 0!==e)).reduce(((e,t)=>e.concat(t)),[]))};const xl=[Wa,Ga],Al=e=>e.join(","),Ol=e=>"M"+e.map((e=>e.join(","))).join("L")+"Z",kl=(e,t,r)=>{"boolean"===typeof t?e.options[r].visible=t:typeof t===Na?(Object.assign(e.options[r],t),null==t.visible&&(e.options[r].visible=!0)):null==t&&(e.options[r].visible=!0)},Ml=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ga;const n=e.getElementsByClassName("".concat(Da,"-").concat(r))[0];Object.keys(t).map((e=>({key:e,fn:n[_l.toCamel(e)]}))).filter((e=>typeof e.fn===Pa&&"class"!==e.key)).forEach((e=>e.fn(t[e.key]))),Object.keys(t).filter((e=>"class"===e)).forEach((e=>n.classList.add(t[e])))},wl=e=>{const t=function(e){let t=[[0,1],[2,3]].map((t=>t.map((t=>e.points[t]||0)))),r=el(t[1],t[0]),n=Qa(t[0],tl(r,.5));const o=nl(r),c=xl.map((t=>e[t].visible?(1+e[t].padding)*e[t].height*2.5:0)).reduce(((e,t)=>e+t),0);if(o<c){const e=0===o?[c,0]:tl(r,c/o);t=[el,Qa].map((t=>t(n,tl(e,.5)))),r=el(t[1],t[0])}let s=[r[1],-r[0]],i=Qa(n,tl(s,e.bend));const a=t.map((e=>el(i,e))),l=a.map((e=>nl(e))),u=a.map(((e,t)=>0===l[t]?e:tl(e,1/l[t]))),d=u.map((e=>tl(e,-1))),f=d.map((e=>[e[1],-e[0]])),g=xl.map(((t,r)=>e[t].padding?e[t].padding:e.padding?e.padding:0)),h=xl.map(((t,r)=>e[t].height*(e[t].visible?1:0))).map(((e,t)=>e+g[t])),p=t.map(((e,t)=>Qa(e,tl(u[t],h[t]))));r=el(p[1],p[0]),s=[r[1],-r[0]],n=Qa(p[0],tl(r,.5)),i=Qa(n,tl(s,e.bend));const m=p.map(((t,r)=>Qa(t,tl(el(i,t),e.pinch)))),v=xl.map(((t,r)=>[Qa(p[r],tl(d[r],e[t].height)),Qa(p[r],tl(f[r],e[t].width/2)),Qa(p[r],tl(f[r],-e[t].width/2))]));return{line:"M".concat(Al(p[0]),"C").concat(Al(m[0]),",").concat(Al(m[1]),",").concat(Al(p[1])),tail:Ol(v[0]),head:Ol(v[1])}}(e.options);return Object.keys(t).map((t=>({path:t,element:e.getElementsByClassName("".concat(Da,"-").concat(t))[0]}))).filter((e=>e.element)).map((e=>(e.element.setAttribute("d",t[e.path]),e))).filter((t=>e.options[t.path])).forEach((t=>t.element.setAttribute("visibility",e.options[t.path].visible?"visible":"hidden"))),e},jl=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return e.options.points=El(...bl(...r)).slice(0,4),wl(e)};var Pl={setPoints:jl,points:jl,bend:(e,t)=>(e.options.bend=t,wl(e)),pinch:(e,t)=>(e.options.pinch=t,wl(e)),padding:(e,t)=>(e.options.padding=t,wl(e)),head:(e,t)=>(kl(e,t,Ga),Ml(e,t,Ga),wl(e)),tail:(e,t)=>(kl(e,t,Wa),Ml(e,t,Wa),wl(e)),getLine:e=>e.getElementsByClassName("".concat(Da,"-line"))[0],getHead:e=>e.getElementsByClassName("".concat(Da,"-").concat(Ga))[0],getTail:e=>e.getElementsByClassName("".concat(Da,"-").concat(Wa))[0]};const Sl=Object.keys({head:{visible:!1,width:8,height:10,padding:0},tail:{visible:!1,width:8,height:10,padding:0},bend:0,padding:0,pinch:.618,points:[]});var Cl={arrow:{nodeName:"g",attributes:[],args:()=>[],methods:Pl,init:function(e){e.classList.add(Da);const t=["line",Wa,Ga].map((t=>wa.path().addClass("".concat(Da,"-").concat(t)).appendTo(e)));t[0].setAttribute(Va,"fill:none;"),t[1].setAttribute(Ra,Ua),t[2].setAttribute(Ra,Ua),e.options={head:{visible:!1,width:8,height:10,padding:0},tail:{visible:!1,width:8,height:10,padding:0},bend:0,padding:0,pinch:.618,points:[]};for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];Pl.setPoints(e,...n);const c=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];for(let n=0;n<t.length;n+=1){if(typeof t[n]!==Na)continue;const e=Object.keys(t[n]);for(let r=0;r<e.length;r+=1)if(Sl.includes(e[r]))return t[n]}}(...n);return c&&Object.keys(c).filter((e=>Pl[e])).forEach((t=>Pl[t](e,c[t]))),e}}};const Ll=function(){return bl(arguments).reduce(((e,t)=>e.concat(t)),[])},Nl=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5;const n=[e[0]||0,e[1]||0],o=[e[2]||0,e[3]||0],c=el(o,n),s=Qa(n,tl(c,.5)),i=[c[1],-c[0]],a=Qa(s,tl(i,t)),l=Qa(n,tl(el(a,n),r)),u=Qa(o,tl(el(a,o),r));return"M".concat(n[0],",").concat(n[1],"C").concat(l[0],",").concat(l[1]," ").concat(u[0],",").concat(u[1]," ").concat(o[0],",").concat(o[1])},zl=e=>e.slice(1).split(/[, ]+/).map((e=>parseFloat(e))),Fl=e=>{const t=(e=>e.match(/[Mm][(0-9), .-]+/).map((e=>zl(e))))(e).shift(),r=(e=>e.match(/[Cc][(0-9), .-]+/).map((e=>zl(e))))(e).shift();return[...t?[t[t.length-2],t[t.length-1]]:[0,0],...r?[r[r.length-2],r[r.length-1]]:[0,0]]},Il=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];const o=El(...Ll(...r)).slice(0,4);return e.setAttribute("d",Nl(o,e._bend,e._pinch)),e};var Vl={curve:{nodeName:Fa,attributes:["d"],args:function(){return[Nl(El(...Ll(...arguments)))]},methods:{setPoints:Il,bend:(e,t)=>(e._bend=t,Il(e,...Fl(e.getAttribute("d")))),pinch:(e,t)=>(e._pinch=t,Il(e,...Fl(e.getAttribute("d"))))}}};const Bl={};Object.assign(Bl,ul,fl,hl,ml,vl,Cl,Vl);const Tl=Object.keys(Bl),ql=[$a.h,$a.p,$a.i],Rl=[$a.g,$a.v,$a.t,Tl],Ul={svg:[$a.s,$a.d].concat(ql).concat(Rl),g:Rl,text:[$a.cT],linearGradient:[$a.cG],radialGradient:[$a.cG],defs:ql,filter:[$a.cF],marker:Rl,symbol:Rl,clipPath:Rl,mask:Rl},Dl=Object.create(null);Object.keys(Ul).forEach((e=>{Dl[e]=Ul[e].reduce(((e,t)=>e.concat(t)),[])}));function Gl(){const e=El(...Ll(arguments));return 2===e.length&&e.unshift(0,0),4===e.length?function(e,t,r,n){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;const c=r/1-r;return[e-c-o,t-c-o,r+2*c+2*o,n+2*c+2*o].join(" ")}(...e):void 0}const Wl=e=>(new(Xa().DOMParser)).parseFromString("<root></root>","text/xml").createCDATASection("".concat(e)),Zl=e=>{for(;e.lastChild;)e.removeChild(e.lastChild);return e},Hl=(e,t)=>{for(;t.childNodes.length>0;){const r=t.childNodes[0];t.removeChild(r),e.appendChild(r)}return e},Jl=(e,t)=>(Array.from(t.attributes).forEach((t=>e.setAttribute(t.name,t.value))),Hl(e,t));var Yl={removeChildren:Zl,appendTo:(e,t)=>(null!=t&&t.appendChild(e),e),setAttributes:(e,t)=>Object.keys(t).forEach((r=>e.setAttribute(_l.toKebab(r),t[r])))};const Xl=e=>{if(null===e)return e;for(let t=e.childNodes.length-1;t>=0;t-=1){const r=e.childNodes[t];3===r.nodeType&&r.data.match(/^\s*$/)&&e.removeChild(r),1===r.nodeType&&Xl(r)}return e},Kl=e=>(new(Xa().DOMParser)).parseFromString(e,"text/xml"),$l=e=>{const t=e.getElementsByTagName("parsererror");if(t.length>0)throw new Error(t[0]);return Xl(e.documentElement)},Ql=function(e){if(typeof e===La||e instanceof String)try{return $l(Kl(e))}catch(t){return t}if(null!=e.childNodes)return e},eu=e=>(e=>typeof e===La&&/^[\w,\s-]+\.[A-Za-z]{3}$/.test(e)&&e.length<1e4)(e)&&Za&&typeof Xa().fetch===Pa?function(e){return new Promise(((t,r)=>{if(typeof e===La||e instanceof String)fetch(e).then((e=>e.text())).then((e=>$l(Kl(e)))).then((e=>e.nodeName===za?e:e.getElementsByTagName(za)[0])).then((e=>null==e?r(new Error("valid XML found, but no SVG element")):t(e))).catch((e=>r(e)));else if(e instanceof Xa().Document)return asyncDone(e)}))}(e):Ql(e);const tu=function(e,t){if((t=Object.assign({download:!1,output:La,windowStyle:!1,filename:"image.svg"},t)).windowStyle){const t=Xa().document.createElementNS(Ka,Va);t.setAttribute("type","text/css"),t.innerHTML=function(){const e=[];if(Xa().document.styleSheets)for(let r=0;r<Xa().document.styleSheets.length;r+=1){const n=Xa().document.styleSheets[r];try{const t="cssRules"in n?n.cssRules:n.rules;for(let r=0;r<t.length;r+=1){const n=t[r];"cssText"in n?e.push(n.cssText):e.push("".concat(n.selectorText," {\n").concat(n.style.cssText,"\n}\n"))}}catch(t){console.warn(t)}}return e.join("\n")}(),e.appendChild(t)}const r=function(e,t){const r=e.replace(/>\s{0,}</g,"><").replace(/</g,"~::~<").replace(/\s*xmlns\:/g,"~::~xmlns:").split("~::~"),n=r.length;let o=!1,c=0,s="";const i=null!=t&&"string"===typeof t?t:"\t",a=["\n"];for(let l=0;l<100;l+=1)a.push(a[l]+i);for(let l=0;l<n;l+=1)r[l].search(/<!/)>-1?(s+=a[c]+r[l],o=!0,(r[l].search(/-->/)>-1||r[l].search(/\]>/)>-1||r[l].search(/!DOCTYPE/)>-1)&&(o=!1)):r[l].search(/-->/)>-1||r[l].search(/\]>/)>-1?(s+=r[l],o=!1):/^<\w/.exec(r[l-1])&&/^<\/\w/.exec(r[l])&&/^<[\w:\-\.\,]+/.exec(r[l-1])==/^<\/[\w:\-\.\,]+/.exec(r[l])[0].replace("/","")?(s+=r[l],o||(c-=1)):r[l].search(/<\w/)>-1&&-1===r[l].search(/<\//)&&-1===r[l].search(/\/>/)?s=s+=o?r[l]:a[c++]+r[l]:r[l].search(/<\w/)>-1&&r[l].search(/<\//)>-1?s=s+=o?r[l]:a[c]+r[l]:r[l].search(/<\//)>-1?s=s+=o?r[l]:a[--c]+r[l]:r[l].search(/\/>/)>-1?s=s+=o?r[l]:a[c]+r[l]:r[l].search(/<\?/)>-1||r[l].search(/xmlns\:/)>-1||r[l].search(/xmlns\=/)>-1?s+=a[c]+r[l]:s+=r[l];return"\n"===s[0]?s.slice(1):s}((new(Xa().XMLSerializer)).serializeToString(e));return t.download&&Za&&!Ha&&function(e,t){const r=new(Xa().Blob)([t],{type:"text/plain"}),n=Xa().document.createElement("a");n.setAttribute("href",Xa().URL.createObjectURL(r)),n.setAttribute("download",e),Xa().document.body.appendChild(n),n.click(),Xa().document.body.removeChild(n)}(t.filename,r),t.output===za?e:r},ru=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];const o=1===r.length&&typeof r[0]===La?r[0]:Gl(...r);return o&&e.setAttribute(Ba,o),e},nu=function(e){const t=e.getAttribute(Ba);return null==t?void 0:t.split(" ").map((e=>parseFloat(e)))},ou=function(e,t,r){const n=e.createSVGPoint();n.x=t,n.y=r;const o=n.matrixTransform(e.getScreenCTM().inverse());return[o.x,o.y]};var cu=Object.freeze({__proto__:null,setViewBox:ru,getViewBox:nu,convertToViewBox:ou});const su=(e,t)=>{const r=eu(t);if(null!=r)return typeof r.then===Pa?r.then((t=>Jl(e,t))):Jl(e,r)},iu=function(e){const t=nu(e);if(void 0!==t)return t;if(typeof e.getBoundingClientRect===Pa){const t=e.getBoundingClientRect();return[t.x,t.y,t.width,t.height]}return[]},au="svg-background-rectangle",lu=function(e,t){let r=function(e){const t=e.getElementsByTagName(Va);return 0===t.length?void 0:t[0]}(e);return null==r&&(r=this.Constructor(Va),e.insertBefore(r,e.firstChild)),r.textContent="",r.appendChild(Wl(t)),r};var uu={clear:e=>(Array.from(e.attributes).filter((e=>"xmlns"!==e)).forEach((t=>e.removeAttribute(t.name))),Zl(e)),size:ru,setViewBox:ru,getViewBox:nu,padding:function(e,t){const r=nu(e);return void 0!==r&&ru(e,...[-t,-t,2*t,2*t].map(((e,t)=>r[t]+e))),e},background:function(e,t){let r=Array.from(e.childNodes).filter((e=>e.getAttribute(ja)===au)).shift();return null==r&&(r=this.Constructor("rect",null,...iu(e)),r.setAttribute(ja,au),r.setAttribute(Ra,Ua),e.insertBefore(r,e.firstChild)),r.setAttribute("fill",t),e},getWidth:e=>iu(e)[2],getHeight:e=>iu(e)[3],stylesheet:function(e,t){return lu.call(this,e,t)},load:su,save:tu};const du={math:{vector:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return[...t]}}},fu={move:["mousemove","touchmove"],press:["mousedown","touchstart"],release:["mouseup","touchend"],leave:["mouseleave","touchcancel"]},gu=Object.values(fu).reduce(((e,t)=>e.concat(t)),[]),hu=(e,t,r)=>Object.defineProperty(e,t,{get:()=>r,enumerable:!0,configurable:!0}),pu=(e,t)=>{["pressX","pressY"].filter((t=>!Object.prototype.hasOwnProperty.call(e,t))).forEach(((r,n)=>hu(e,r,t[n]))),Object.prototype.hasOwnProperty.call(e,"press")||hu(e,"press",du.math.vector(...t))},mu=function(e){let t=[];const r=[];Object.keys(fu).forEach((e=>{fu[e].forEach((e=>{r[e]=[]}))}));const n={press:(e,r)=>{t=r,pu(e,t)},release:()=>{},leave:()=>{},move:(e,r)=>{e.buttons>0&&void 0===t[0]?t=r:0===e.buttons&&void 0!==t[0]&&(t=[]),pu(e,t)}};Object.keys(fu).forEach((t=>{const o="on".concat(_l.capitalized(t));Object.defineProperty(e,o,{set:o=>{null!=o?fu[t].forEach((c=>{const s=r=>{const c=null!=r.touches?r.touches[0]:r;if(void 0!==c){const o=ou(e,c.clientX,c.clientY).map((e=>Number.isNaN(e)?void 0:e));["x","y"].filter((e=>!Object.prototype.hasOwnProperty.call(r,e))).forEach(((e,t)=>hu(r,e,o[t]))),Object.prototype.hasOwnProperty.call(r,"position")||hu(r,"position",du.math.vector(...o)),n[t](r,o)}o(r)};e.addEventListener&&(r[c].push(s),e.addEventListener(c,s))})):(t=>{fu[t].forEach((t=>r[t].forEach((r=>e.removeEventListener(t,r)))))})(t)},enumerable:!0})})),Object.defineProperty(e,"off",{value:()=>((e,t)=>gu.forEach((r=>{t[r].forEach((t=>e.removeEventListener(r,t))),t[r]=[]})))(e,r)})};var vu=()=>Math.random().toString(36).replace(/[^a-z]+/g,"").concat("aaaaa").substr(0,5);const _u=[["cx","cy"],["x","y"]],yu=function(e){const t=[0,0],r={selected:!1,svg:void 0,updatePosition:e=>e},n=()=>{r.svg&&(r.svg.parentNode||e.appendChild(r.svg),_u.filter((e=>null!=r.svg[e[0]])).forEach((e=>e.forEach(((e,n)=>{r.svg.setAttribute(e,t[n])})))))},o=new Proxy(t,{set:(e,t,r)=>(e[t]=r,n(),!0)}),c=function(){El(...Ll(...arguments)).forEach(((e,r)=>{t[r]=e})),n(),typeof t.delegate===Pa&&t.delegate.apply(t.pointsContainer,[o,t.pointsContainer])};return t.delegate=void 0,t.setPosition=c,t.onMouseMove=e=>r.selected?c(r.updatePosition(e)):void 0,t.onMouseUp=()=>{r.selected=!1},t.distance=e=>Math.sqrt(ol(e,t)),["x","y"].forEach(((e,r)=>Object.defineProperty(t,e,{get:()=>t[r],set:e=>{t[r]=e}}))),[za,"updatePosition","selected"].forEach((e=>Object.defineProperty(t,e,{get:()=>r[e],set:t=>{r[e]=t}}))),Object.defineProperty(t,"remove",{value:()=>{var e;(e=r.svg)&&e.parentNode&&e.parentNode.removeChild(e),t.delegate=void 0}}),o},bu=function(e,t,r){let n,o;const c=Array.from(Array(t)).map((()=>yu(e,r))),s=e=>typeof o===Pa?o.call(c,e,n,c):void 0;c.forEach((e=>{e.delegate=s,e.pointsContainer=c}));e.onPress=function(e){c.length>0&&(n=c.map(((t,r)=>({i:r,d:ol(t,[e.x,e.y])}))).sort(((e,t)=>e.d-t.d)).shift().i,c[n].selected=!0)},e.onMove=function(e){c.forEach((t=>t.onMouseMove(e)))},e.onRelease=function(){c.forEach((e=>e.onMouseUp())),n=void 0},Object.defineProperty(c,"selectedIndex",{get:()=>n}),Object.defineProperty(c,"selected",{get:()=>c[n]}),Object.defineProperty(c,"add",{value:t=>{c.push(yu(e,t))}}),c.removeAll=()=>{for(;c.length>0;)c.pop().remove()};const i={onChange:(e,t)=>{if(o=e,!0===t){const t=c.length-1;e.call(c,c[t],t,c)}},position:e=>c.forEach(((t,r)=>t.setPosition(e.call(c,t,r,c)))),svg:e=>c.forEach(((t,r)=>{t.svg=e.call(c,t,r,c)}))};return Object.keys(i).forEach((e=>{c[e]=function(){return typeof arguments[0]===Pa&&i[e](...arguments),c}})),c.parent=function(e){return null!=e&&null!=e.appendChild&&c.forEach((t=>{e.appendChild(t.svg)})),c},c},Eu=e=>{e.controls=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return bu.call(e,e,...r)}};var xu={svg:{args:function(){return[Gl(El(...arguments))].filter((e=>null!=e))},methods:uu,init:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];r.filter((e=>typeof e===La)).forEach((t=>su(e,t))),r.filter((e=>null!=e)).filter((e=>typeof e.appendChild===Pa)).forEach((t=>t.appendChild(e))),mu(e),function(e){let t;const r={};let n,o=0;const c=()=>{Xa().cancelAnimationFrame&&Xa().cancelAnimationFrame(n),Object.keys(r).forEach((e=>delete r[e])),t=void 0,o=0};Object.defineProperty(e,"play",{set:e=>{if(c(),null==e)return;const s=vu();r[s]=c=>{t||(t=c,o=0),e({time:.001*(c-t),frame:o}),o+=1,r[s]&&(n=Xa().requestAnimationFrame(r[s]))},Xa().requestAnimationFrame&&(n=Xa().requestAnimationFrame(r[s]))},enumerable:!0}),Object.defineProperty(e,"stop",{value:c,enumerable:!0})}(e),Eu(e)}}};const Au=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];const o=r.map((e=>Ql(e))).filter((e=>void 0!==e));return o.filter((e=>e.tagName===za)).forEach((t=>Hl(e,t))),o.filter((e=>e.tagName!==za)).forEach((t=>e.appendChild(t))),e};var Ou={g:{init:Au,methods:{load:Au}}},ku=Object.assign(Object.create(null),{svg:[Ba],line:["x1","y1","x2","y2"],rect:["x","y","width","height"],circle:["cx","cy","r"],ellipse:["cx","cy","rx","ry"],polygon:[qa],polyline:[qa],path:["d"],text:["x","y"],mask:[Ia],symbol:[Ia],clipPath:[Ia,"clip-rule"],marker:[Ia,"markerHeight","markerUnits","markerWidth","orient","refX","refY"],linearGradient:["x1","x2","y1","y2"],radialGradient:["cx","cy","r","fr","fx","fy"],stop:["offset","stop-color","stop-opacity"],pattern:["patternContentUnits","patternTransform","patternUnits"]});const Mu=(e,t)=>(e.setAttribute(ku.circle[2],t),e),wu=(e,t,r)=>([...El(...Ll(t,r)).slice(0,2)].forEach(((t,r)=>e.setAttribute(ku.circle[r],t))),e);var ju={circle:{args:(e,t,r,n)=>{const o=El(...Ll(e,t,r,n));switch(o.length){case 0:case 1:return[,,...o];case 2:case 3:return o;default:return((e,t,r,n)=>[e,t,cl([e,t],[r,n])])(...o)}},methods:{radius:Mu,setRadius:Mu,origin:wu,setOrigin:wu,center:wu,setCenter:wu,position:wu,setPosition:wu}}};const Pu=(e,t,r)=>([,,t,r].forEach(((t,r)=>e.setAttribute(ku.ellipse[r],t))),e),Su=(e,t,r)=>([...El(...Ll(t,r)).slice(0,2)].forEach(((t,r)=>e.setAttribute(ku.ellipse[r],t))),e);var Cu={ellipse:{args:(e,t,r,n)=>{const o=El(...Ll(e,t,r,n)).slice(0,4);switch(o.length){case 0:case 1:case 2:return[,,...o];default:return o}},methods:{radius:Pu,setRadius:Pu,origin:Su,setOrigin:Su,center:Su,setCenter:Su,position:Su,setPosition:Su}}};const Lu=function(){return El(...bl(...arguments)).slice(0,4)};var Nu={line:{args:Lu,methods:{setPoints:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return Lu(...r).forEach(((t,r)=>e.setAttribute(ku.line[r],t))),e}}}};const zu=/[MmLlSsQqLlHhVvCcSsQqTtAaZz]/g,Fu=/-?[0-9]*\.?\d+/g,Iu={m:"move",l:"line",v:"vertical",h:"horizontal",a:"ellipse",c:"curve",s:"smoothCurve",q:"quadCurve",t:"smoothQuadCurve",z:"close"};Object.keys(Iu).forEach((e=>{const t=Iu[e];Iu[e.toUpperCase()]=t.charAt(0).toUpperCase()+t.slice(1)}));const Vu=e=>{const t=e.getAttribute("d");return null==t?"":t},Bu=function(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),o=2;o<r;o++)n[o-2]=arguments[o];return e.setAttribute("d","".concat(Vu(e)).concat(t).concat(Ll(...n).join(" "))),e},Tu=e=>function(e){const t=[];let r;for(;null!==(r=zu.exec(e));)t.push(r);return t.map((t=>({command:e[t.index],index:t.index}))).reduceRight(((t,r)=>{const n=e.substring(r.index,t.length?t[t.length-1].index:e.length);return t.concat([{command:r.command,index:r.index,chunk:n.length>0?n.substr(1,n.length-1):n}])}),[]).reverse().map((e=>{const t=e.chunk.match(Fu);return e.en=Iu[e.command],e.values=t?t.map(parseFloat):[],delete e.chunk,e}))}(Vu(e)),qu={addCommand:Bu,appendCommand:Bu,clear:e=>(e.removeAttribute("d"),e),getCommands:Tu,get:Tu,getD:e=>e.getAttribute("d")};Object.keys(Iu).forEach((e=>{qu[Iu[e]]=function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return Bu(t,e,...n)}}));var Ru={path:{methods:qu}};const Uu=(e,t,r)=>([,,t,r].forEach(((t,r)=>e.setAttribute(ku.rect[r],t))),e),Du=(e,t,r)=>([...El(...Ll(t,r)).slice(0,2)].forEach(((t,r)=>e.setAttribute(ku.rect[r],t))),e),Gu=function(e){return[0,1].forEach((t=>{e[2+t]<0&&(void 0===e[0+t]&&(e[0+t]=0),e[0+t]+=e[2+t],e[2+t]=-e[2+t])})),e};var Wu={rect:{args:(e,t,r,n)=>{const o=El(...Ll(e,t,r,n)).slice(0,4);switch(o.length){case 0:case 1:case 2:case 3:return Gu([,,...o]);default:return Gu(o)}},methods:{origin:Du,setOrigin:Du,center:Du,setCenter:Du,size:Uu,setSize:Uu}}},Zu={style:{init:(e,t)=>{e.textContent="",e.appendChild(Wl(t))},methods:{setTextContent:(e,t)=>(e.textContent="",e.appendChild(Wl(t)),e)}}},Hu={text:{args:(e,t,r)=>El(...Ll(e,t,r)).slice(0,2),init:(e,t,r,n,o)=>{const c=[t,r,n,o].filter((e=>typeof e===La)).shift();c&&e.appendChild(Xa().document.createTextNode(c))}}};const Ju=function(){return Array.from(arguments).filter((e=>typeof e===La||e instanceof String)).shift()||vu()},Yu=function(){return[Ju(...arguments)]};var Xu={mask:{args:Yu},clipPath:{args:Yu},symbol:{args:Yu},marker:{args:Yu,methods:{size:ru,setViewBox:ru}}};const Ku=e=>{const t=e.getAttribute(qa);return null==t?"":t},$u=function(){return Array.from(Array(Math.floor(arguments.length/2))).map(((e,t)=>"".concat(arguments[2*t+0],",").concat(arguments[2*t+1]))).join(" ")},Qu=function(){return[$u(...El(...bl(...arguments)))]},ed=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return e.setAttribute(qa,Qu(...r)[0]),e},td=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return e.setAttribute(qa,[Ku(e),Qu(...r)[0]].filter((e=>""!==e)).join(" ")),e},rd=function(){return 1===arguments.length&&typeof(arguments.length<=0?void 0:arguments[0])===La?[arguments.length<=0?void 0:arguments[0]]:Qu(...arguments)};var nd={polyline:{args:rd,methods:{setPoints:ed,addPoint:td}},polygon:{args:rd,methods:{setPoints:ed,addPoint:td}}},od=Object.assign({},xu,Ou,ju,Cu,Nu,Ru,Wu,Zu,Hu,Xu,nd),cd={presentation:["color","color-interpolation","cursor","direction","display","fill","fill-opacity","fill-rule","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","image-rendering","letter-spacing","opacity","overflow","paint-order","pointer-events","preserveAspectRatio","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tabindex","transform-origin","user-select","vector-effect","visibility"],animation:["accumulate","additive","attributeName","begin","by","calcMode","dur","end","from","keyPoints","keySplines","keyTimes","max","min","repeatCount","repeatDur","restart","to","values"],effects:["azimuth","baseFrequency","bias","color-interpolation-filters","diffuseConstant","divisor","edgeMode","elevation","exponent","filter","filterRes","filterUnits","flood-color","flood-opacity","in","in2","intercept","k1","k2","k3","k4","kernelMatrix","lighting-color","limitingConeAngle","mode","numOctaves","operator","order","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","primitiveUnits","radius","result","seed","specularConstant","specularExponent","stdDeviation","stitchTiles","surfaceScale","targetX","targetY","type","xChannelSelector","yChannelSelector"],text:["dx","dy","alignment-baseline","baseline-shift","dominant-baseline","lengthAdjust","method","overline-position","overline-thickness","rotate","spacing","startOffset","strikethrough-position","strikethrough-thickness","text-anchor","text-decoration","text-rendering","textLength","underline-position","underline-thickness","word-spacing","writing-mode"],gradient:["gradientTransform","gradientUnits","spreadMethod"]};Object.values($a).reduce(((e,t)=>e.concat(t)),[]).filter((e=>void 0===ku[e])).forEach((e=>{ku[e]=[]})),[[[za,"defs","g"].concat($a.v,$a.t),cd.presentation],[["filter"],cd.effects],[$a.cT.concat("text"),cd.text],[$a.cF,cd.effects],[$a.cG,cd.gradient]].forEach((e=>e[0].forEach((t=>{ku[t]=ku[t].concat(e[1])}))));const sd=e=>{if(null==e)return[];const t=e.getAttribute(ja);return null==t?[]:t.split(" ").filter((e=>""!==e))};var id={addClass:(e,t)=>{const r=sd(e).filter((e=>e!==t));r.push(t),e.setAttributeNS(null,ja,r.join(" "))},removeClass:(e,t)=>{const r=sd(e).filter((e=>e!==t));e.setAttributeNS(null,ja,r.join(" "))},setClass:(e,t)=>{e.setAttributeNS(null,ja,t)},setId:(e,t)=>{e.setAttributeNS(null,Ia,t)}};const ad=e=>{const t=e.getAttribute(Ta);return null==t||""===t?void 0:t},ld={clearTransform:e=>(e.removeAttribute(Ta),e)};["translate","rotate","scale","matrix"].forEach((e=>{ld[e]=function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return t.setAttribute(Ta,[ad(t),"".concat(e,"(").concat(n.join(" "),")")].filter((e=>void 0!==e)).join(" "))}}));const ud={};["clip-path","mask","symbol","marker-end","marker-mid","marker-start"].forEach((e=>{ud[_l.toCamel(e)]=(t,r)=>t.setAttribute(e,function(e){if(null==e)return"";if(typeof e===La)return"url"===e.slice(0,3)?e:"url(#".concat(e,")");if(null!=e.getAttribute){const t=e.getAttribute(Ia);return"url(#".concat(t,")")}return""}(r))}));const dd={};$a.v.push(...Object.keys(Bl)),Object.keys(Bl).forEach((e=>{Bl[e].attributes=void 0===Bl[e].attributes?[...cd.presentation]:Bl[e].attributes.concat(cd.presentation)})),Object.assign(dd,od,Bl),Object.keys($a).forEach((e=>$a[e].filter((e=>void 0===dd[e])).forEach((e=>{dd[e]={}}))));const fd=function(){return Array.from(arguments)};Object.keys(dd).forEach((e=>{dd[e].nodeName||(dd[e].nodeName=e),dd[e].init||(dd[e].init=fd),dd[e].args||(dd[e].args=fd),dd[e].methods||(dd[e].methods={}),dd[e].attributes||(dd[e].attributes=ku[e]||[])}));const gd=(e,t)=>{e.forEach((e=>Object.keys(t).forEach((r=>{dd[e].methods[r]=function(){return t[r](...arguments),arguments[0]}}))))};gd(Ll($a.t,$a.v,$a.g,$a.s,$a.p,$a.i,$a.h,$a.d),id),gd(Ll($a.t,$a.v,$a.g,$a.s,$a.p,$a.i,$a.h,$a.d),Yl),gd(Ll($a.v,$a.g,$a.s),ld),gd(Ll($a.t,$a.v,$a.g),ud);const hd={svg:{version:"1.1",xmlns:Ka},style:{type:"text/css"}},pd={},md=function(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),o=2;o<r;o++)n[o-2]=arguments[o];const c=Xa().document.createElementNS(Ka,dd[e].nodeName);return t&&t.appendChild(c),((e,t)=>{hd[t]&&Object.keys(hd[t]).forEach((r=>e.setAttribute(r,hd[t][r])))})(c,e),dd[e].init(c,...n),dd[e].args(...n).forEach(((t,r)=>{null!=dd[e].attributes[r]&&c.setAttribute(dd[e].attributes[r],t)})),dd[e].attributes.forEach((e=>{Object.defineProperty(c,_l.toCamel(e),{value:function(){return c.setAttribute(e,...arguments),c}})})),Object.keys(dd[e].methods).forEach((t=>Object.defineProperty(c,t,{value:function(){return dd[e].methods[t].call(pd,c,...arguments)}}))),Dl[e]&&Dl[e].forEach((e=>{const t=function(){return md(e,c,...arguments)};dd[e].static&&Object.keys(dd[e].static).forEach((r=>{t[r]=function(){return dd[e].static[r](c,...arguments)}})),Object.defineProperty(c,e,{value:t})})),c};pd.Constructor=md;const vd={};Object.keys($a).forEach((e=>$a[e].forEach((e=>{vd[e]=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return md(e,null,...r)}}))));const _d=(e,t)=>{["segment","circle","ellipse","rect","polygon"].filter((e=>t[e]&&t[e].prototype)).forEach((r=>{t[r].prototype.svg=function(){return e.path(this.svgPath())}})),du.math.vector=t.vector},yd=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];r.filter((e=>typeof e===Pa)).forEach((t=>t.call(e,e)))};Ma.init=function(){const e=md(za,null,...arguments);return"loading"===Xa().document.readyState?Xa().document.addEventListener("DOMContentLoaded",(()=>yd(e,...arguments))):yd(e,...arguments),e},wa.NS=Ka,wa.linker=function(e){e.graph&&e.origami&&(e.svg=this,_d(this,e),((e,t)=>{const r="origami";dd[r]={nodeName:"g",init:function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return t.graph.svg.drawInto(e,...n)},args:()=>[],methods:dd.g.methods,attributes:dd.g.attributes,static:{}},Object.keys(t.graph.svg).forEach((e=>{dd[r].static[e]=function(r){for(var n=arguments.length,o=new Array(n>1?n-1:0),c=1;c<n;c++)o[c-1]=arguments[c];const s=t.graph.svg[e](...o);return r.appendChild(s),s}})),Dl[r]=[...Dl.g],Dl.svg.push(r),Dl.g.push(r),e[r]=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return md(r,null,...t)},Object.keys(t.graph.svg).forEach((n=>{e[r][n]=t.graph.svg[n]}))})(this,e))}.bind(wa),Object.assign(wa,vd),wa.core=Object.assign(Object.create(null),{load:eu,save:tu,coordinates:El,flatten:Ll,attributes:ku,children:Dl,cdata:Wl},_l,id,Yl,il,ld,cu),Object.defineProperty(wa,"window",{enumerable:!1,set:e=>{var t;(t=e).document||(t.document=(e=>(new e.DOMParser).parseFromString("<!DOCTYPE html><title>.</title>","text/html"))(t)),Ya.window=t,Ya.window}});var bd=Object.freeze({__proto__:null,make_faces_geometry:e=>{const{THREE:t}=j(),r=e.vertices_coords.map((e=>[e[0],e[1],e[2]||0])).flat(),n=e.vertices_coords.map((()=>[0,0,1])).flat(),o=e.vertices_coords.map((()=>[1,1,1])).flat(),c=e.faces_vertices.map((e=>e.map(((e,t,r)=>[r[0],r[t+1],r[t+2]])).slice(0,e.length-2))).flat(2),s=new t.BufferGeometry;return s.setAttribute("position",new t.Float32BufferAttribute(r,3)),s.setAttribute("normal",new t.Float32BufferAttribute(n,3)),s.setAttribute("color",new t.Float32BufferAttribute(o,3)),s.setIndex(c),s},make_edges_geometry:function(e){let{vertices_coords:t,edges_vertices:r,edges_assignment:n,edges_coords:o,edges_vector:c}=e,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.002,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const{THREE:a}=j();o||(o=r.map((e=>e.map((e=>t[e]))))),c||(c=o.map((e=>on.core.subtract(e[1],e[0])))),o=o.map((e=>e.map((e=>on.core.resize(3,e))))),c=c.map((e=>on.core.resize(3,e)));const l={B:[0,0,0],M:[0,0,0],F:[0,0,0],V:[0,0,0]},u=n.map((e=>[l[e],l[e],l[e],l[e],l[e],l[e],l[e],l[e]])).flat(3),d=o.map(((e,t)=>function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(on.core.magSquared(t)<on.core.EPSILON)return[];const o=on.core.normalize(t),c=[[1,0,0],[0,1,0],[0,0,1]].map((e=>on.core.cross3(e,o))).sort(((e,t)=>on.core.magnitude(t)-on.core.magnitude(e))).shift(),s=[on.core.normalize(c)];for(let l=1;l<4;l+=1)s.push(on.core.cross3(s[l-1],o));const i=s.map((e=>on.core.scale(e,r))),a=[-n,n].map((e=>on.core.scale(o,e)));return(0===n?e:e.map(((e,t)=>on.core.add(e,a[t])))).map((e=>i.map((t=>on.core.add(e,t))))).flat()}(e,c[t],s,i))).flat(2),f=c.map((e=>{if(on.core.magSquared(e)<on.core.EPSILON)throw new Error("degenerate edge");on.core.normalize(e);const t=on.core.scale(on.core.normalize(on.core.cross3(e,[0,0,-1])),s),r=on.core.scale(on.core.normalize(on.core.cross3(e,[0,0,1])),s);return[t,[-t[2],t[1],t[0]],r,[-r[2],r[1],r[0]],t,[-t[2],t[1],t[0]],r,[-r[2],r[1],r[0]]]})).flat(2),g=o.map(((e,t)=>[8*t+0,8*t+4,8*t+1,8*t+1,8*t+4,8*t+5,8*t+1,8*t+5,8*t+2,8*t+2,8*t+5,8*t+6,8*t+2,8*t+6,8*t+3,8*t+3,8*t+6,8*t+7,8*t+3,8*t+7,8*t+0,8*t+0,8*t+7,8*t+4,8*t+0,8*t+1,8*t+3,8*t+1,8*t+2,8*t+3,8*t+5,8*t+4,8*t+7,8*t+7,8*t+6,8*t+5])).flat(),h=new a.BufferGeometry;return h.setAttribute("position",new a.Float32BufferAttribute(d,3)),h.setAttribute("normal",new a.Float32BufferAttribute(f,3)),h.setAttribute("color",new a.Float32BufferAttribute(u,3)),h.setIndex(g),h.computeVertexNormals(),h}});const Ed=Object.assign(P,Ns,{math:on.core,axiom:ei,diagram:ai,layer:Yi,singleVertex:Ki,text:$i,webgl:bd});Object.keys(on).filter((e=>"core"!==e)).forEach((e=>{Ed[e]=on[e]})),Object.defineProperty(Ed,"use",{enumerable:!1,value:function(e){null!=e&&"function"===typeof e.linker&&e.linker(this)}.bind(Ed)}),k||(Ed.use(ka),Ed.use(wa)),Object.defineProperty(Ed,"window",{enumerable:!1,set:e=>{var t;(t=e).document||(t.document=(e=>(new e.DOMParser).parseFromString("<!DOCTYPE html><title>.</title>","text/html"))(t)),w.window=t,w.window,wa.window=e}})}}]);