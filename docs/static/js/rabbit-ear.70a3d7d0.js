"use strict";(self.webpackChunkreference_finder=self.webpackChunkreference_finder||[]).push([["606"],{2351:function(e,t,r){r.d(t,{Z:()=>uW});let n="undefined",o="number",i="object",a="index",s="vertices",c="edges",l="faces",u="boundaries",f="vertices_coords",p="edges_vertices",d="faces_edges",h="edges_assignment",m="edges_foldAngle",g="faces_layer",v="boundary",_="front",y="back",b="foldedForm",E="black",x="white",O="none",k=typeof window!==n&&typeof window.document!==n;typeof process!==n&&null!=process.versions&&process.versions.node;let M=typeof self===i&&self.constructor&&"DedicatedWorkerGlobalScope"===self.constructor.name,A=[];A[10]='"error 010: window" not set. if using node/deno, include package @xmldom/xmldom, set to the main export ( ear.window = xmldom; )';let j={window:void 0},P=e=>new e.DOMParser().parseFromString("<!DOCTYPE html><title>.</title>","text/html"),w=e=>(e.document||(e.document=P(e)),j.window=e,j.window);k&&(j.window=window);let S=()=>{if(void 0===j.window)throw A[10];return j.window};var $=Object.create(null);let C=function(e){switch(e.constructor.name){case"vector":case"matrix":case"segment":case"ray":case"line":case"circle":case"ellipse":case"rect":case"polygon":return e.constructor.name}if("object"==typeof e){if(null!=e.radius)return"circle";if(null!=e.width)return"rect";if(null!=e.x||"number"==typeof e[0])return"vector";if(null!=e[0]&&e[0].length&&("number"==typeof e[0].x||"number"==typeof e[0][0]))return"segment";if(null!=e.vector&&null!=e.origin)return"line"}},L=(e,t)=>t.length===e?t:Array(e).fill(0).map((e,r)=>t[r]?t[r]:e),N=(e,t)=>{let r=e.length>t.length?e.length:t.length;return[e,t].map(e=>L(r,e))},z=function(e){let t=`${e}`.match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return t?Math.max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0},F=function(e,t=15){if("number"!=typeof e)return e;let r=parseFloat(e.toFixed(t));return z(r)===Math.min(t,z(e))?e:r},I=e=>null!=e&&"function"==typeof e[Symbol.iterator],V=function(){switch(arguments.length){case void 0:case 0:return Array.from(arguments);case 1:return I(arguments[0])&&"string"!=typeof arguments[0]?V(...arguments[0]):[arguments[0]];default:return Array.from(arguments).map(e=>I(e)?[...V(e)]:e)}},B=function(){switch(arguments.length){case void 0:case 0:return Array.from(arguments);case 1:return I(arguments[0])&&"string"!=typeof arguments[0]?B(...arguments[0]):[arguments[0]];default:return Array.from(arguments).map(e=>I(e)?[...B(e)]:e).reduce((e,t)=>e.concat(t),[])}};var q=Object.freeze({__proto__:null,resize:L,resizeUp:N,resizeDown:(e,t)=>{let r=e.length>t.length?t.length:e.length;return[e,t].map(e=>L(r,e))},cleanNumber:F,semiFlattenArrays:V,flattenArrays:B}),T=Object.create(null);let R=1e-6,U=Math.PI/180,D=2*Math.PI;var G=Object.freeze({__proto__:null,EPSILON:R,R2D:180/Math.PI,D2R:U,TWO_PI:D});let W=()=>!0,Z=e=>e*e,J=(e,t)=>e+(t||0),H=e=>void 0!==e,Y=e=>Math.atan2(e[1],e[0]),X=e=>[Math.cos(e),Math.sin(e)],K=(e,t,r=R)=>Math.abs(e-t)<r,Q=(e,t,r=R)=>K(e,t,r)?0:Math.sign(t-e),ee=(e,t,r=R)=>{for(let n=0;n<Math.max(e.length,t.length);n+=1)if(!K(e[n]||0,t[n]||0,r))return!1;return!0},et=(e,t=R)=>e>-t,er=(e,t=R)=>e>t,en=W,eo=W,ei=(e,t=R)=>e>-t&&e<1+t,ea=(e,t=R)=>e>t&&e<1-t,es=e=>e<-R?0:e,ec=e=>e<-R?0:e>1+R?1:e;var el=Object.freeze({__proto__:null,fnTrue:W,fnSquare:Z,fnAdd:J,fnNotUndefined:H,fnAnd:(e,t)=>e&&t,fnCat:(e,t)=>e.concat(t),fnVec2Angle:Y,fnToVec2:X,fnEqual:(e,t)=>e===t,fnEpsilonEqual:K,fnEpsilonSort:Q,fnEpsilonEqualVectors:ee,include:et,exclude:er,includeL:en,excludeL:eo,includeR:et,excludeR:er,includeS:ei,excludeS:ea,lineLimiter:e=>e,rayLimiter:es,segmentLimiter:ec});let eu=e=>Math.sqrt(e.map(Z).reduce(J,0)),ef=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),ep=e=>e.map(Z).reduce(J,0),ed=e=>{let t=eu(e);return 0===t?e:e.map(e=>e/t)},eh=e=>{let t=ef(e);return 0===t?e:[e[0]/t,e[1]/t]},em=(e,t)=>e.map(e=>e*t),eg=(e,t)=>[e[0]*t,e[1]*t],ev=(e,t)=>e.map((e,r)=>e+(t[r]||0)),e_=(e,t)=>[e[0]+t[0],e[1]+t[1]],ey=(e,t)=>e.map((e,r)=>e-(t[r]||0)),eb=(e,t)=>[e[0]-t[0],e[1]-t[1]],eE=(e,t)=>e.map((r,n)=>e[n]*t[n]).reduce(J,0),ex=(e,t)=>e[0]*t[0]+e[1]*t[1],eO=(e,t)=>e.map((e,r)=>(e+t[r])/2),ek=function(){if(0==arguments.length)return[];let e=arguments[0].length>0?arguments[0].length:0,t=Array(e).fill(0);return Array.from(arguments).forEach(e=>t.forEach((r,n)=>{t[n]+=e[n]||0})),t.map(e=>e/arguments.length)},eM=(e,t,r)=>{let n=1-r;return e.map((e,o)=>e*n+(t[o]||0)*r)},eA=(e,t)=>e[0]*t[1]-e[1]*t[0],ej=(e,t)=>[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]],eP=(e,t)=>Math.sqrt(e.map((r,n)=>(e[n]-t[n])**2).reduce(J,0)),ew=(e,t)=>{let r=e[0]-t[0],n=e[1]-t[1];return Math.sqrt(r*r+n*n)},eS=e=>e.map(e=>-e),e$=e=>[-e[1],e[0]],eC=e=>[e[1],-e[0]],eL=(e,t=R)=>e.map(e=>Math.abs(e)).reduce(J,0)<t,eN=(e,t,r=R)=>1-Math.abs(eE(ed(e),ed(t)))<r;var ez=Object.freeze({__proto__:null,magnitude:eu,magnitude2:ef,magSquared:ep,normalize:ed,normalize2:eh,scale:em,scale2:eg,add:ev,add2:e_,subtract:ey,subtract2:eb,dot:eE,dot2:ex,midpoint:eO,midpoint2:(e,t)=>eg(e_(e,t),.5),average:ek,lerp:eM,cross2:eA,cross3:ej,distance:eP,distance2:ew,distance3:(e,t)=>{let r=e[0]-t[0],n=e[1]-t[1],o=e[2]-t[2];return Math.sqrt(r*r+n*n+o*o)},flip:eS,rotate90:e$,rotate270:eC,degenerate:eL,parallel:eN,parallel2:(e,t,r=R)=>Math.abs(eA(e,t))<r});let eF=Object.freeze([1,0,0,0,1,0,0,0,1]),eI=Object.freeze(eF.concat(0,0,0)),eV=e=>eI.map((t,r)=>Math.abs(t-e[r])<R).reduce((e,t)=>e&&t,!0),eB=(e,t)=>[e[0]*t[0]+e[3]*t[1]+e[6]*t[2]+e[9],e[1]*t[0]+e[4]*t[1]+e[7]*t[2]+e[10],e[2]*t[0]+e[5]*t[1]+e[8]*t[2]+e[11]],eq=(e,t,r)=>({vector:[e[0]*t[0]+e[3]*t[1]+e[6]*t[2],e[1]*t[0]+e[4]*t[1]+e[7]*t[2],e[2]*t[0]+e[5]*t[1]+e[8]*t[2]],origin:[e[0]*r[0]+e[3]*r[1]+e[6]*r[2]+e[9],e[1]*r[0]+e[4]*r[1]+e[7]*r[2]+e[10],e[2]*r[0]+e[5]*r[1]+e[8]*r[2]+e[11]]}),eT=(e,t)=>[e[0]*t[0]+e[3]*t[1]+e[6]*t[2],e[1]*t[0]+e[4]*t[1]+e[7]*t[2],e[2]*t[0]+e[5]*t[1]+e[8]*t[2],e[0]*t[3]+e[3]*t[4]+e[6]*t[5],e[1]*t[3]+e[4]*t[4]+e[7]*t[5],e[2]*t[3]+e[5]*t[4]+e[8]*t[5],e[0]*t[6]+e[3]*t[7]+e[6]*t[8],e[1]*t[6]+e[4]*t[7]+e[7]*t[8],e[2]*t[6]+e[5]*t[7]+e[8]*t[8],e[0]*t[9]+e[3]*t[10]+e[6]*t[11]+e[9],e[1]*t[9]+e[4]*t[10]+e[7]*t[11]+e[10],e[2]*t[9]+e[5]*t[10]+e[8]*t[11]+e[11]],eR=e=>e[0]*e[4]*e[8]-e[0]*e[7]*e[5]-e[3]*e[1]*e[8]+e[3]*e[7]*e[2]+e[6]*e[1]*e[5]-e[6]*e[4]*e[2],eU=e=>{let t=eR(e);if(1e-6>Math.abs(t)||Number.isNaN(t)||!Number.isFinite(e[9])||!Number.isFinite(e[10])||!Number.isFinite(e[11]))return;let r=[e[4]*e[8]-e[7]*e[5],-e[1]*e[8]+e[7]*e[2],e[1]*e[5]-e[4]*e[2],-e[3]*e[8]+e[6]*e[5],e[0]*e[8]-e[6]*e[2],-e[0]*e[5]+e[3]*e[2],e[3]*e[7]-e[6]*e[4],-e[0]*e[7]+e[6]*e[1],e[0]*e[4]-e[3]*e[1],-e[3]*e[7]*e[11]+e[3]*e[8]*e[10]+e[6]*e[4]*e[11]-e[6]*e[5]*e[10]-e[9]*e[4]*e[8]+e[9]*e[5]*e[7],e[0]*e[7]*e[11]-e[0]*e[8]*e[10]-e[6]*e[1]*e[11]+e[6]*e[2]*e[10]+e[9]*e[1]*e[8]-e[9]*e[2]*e[7],-e[0]*e[4]*e[11]+e[0]*e[5]*e[10]+e[3]*e[1]*e[11]-e[3]*e[2]*e[10]-e[9]*e[1]*e[5]+e[9]*e[2]*e[4]],n=1/t;return r.map(e=>e*n)},eD=(e=0,t=0,r=0)=>eF.concat(e,t,r),eG=(e,t,r,n,o)=>{let i=eF.concat([0,1,2].map(e=>t[e]||0)),a=Math.cos(e),s=Math.sin(e);return i[3*r+r]=a,i[3*r+n]=(o?1:-1)*s,i[3*n+r]=(o?-1:1)*s,i[3*n+n]=a,i},eW=(e,t=[0,0,0])=>eG(e,t,1,2,!0),eZ=(e,t=[0,0,0])=>eG(e,t,0,2,!1),eJ=(e,t=[0,0,0])=>eG(e,t,0,1,!0),eH=(e,t=[0,0,1],r=[0,0,0])=>{let n=[0,1,2].map(e=>r[e]||0),[o,i,a]=L(3,ed(t)),s=Math.cos(e),c=Math.sin(e),l=1-s,u=eF.concat(-n[0],-n[1],-n[2]);return eT(eF.concat(n[0],n[1],n[2]),eT([l*o*o+s,l*i*o+a*c,l*a*o-i*c,l*o*i-a*c,l*i*i+s,l*a*i+o*c,l*o*a+i*c,l*i*a-o*c,l*a*a+s,0,0,0],u))},eY=(e=1,t=[0,0,0])=>[e,0,0,0,e,0,0,0,e,-(e*t[0])+t[0],-(e*t[1])+t[1],-(e*t[2])+t[2]],eX=(e,t=[0,0])=>{let r=Math.atan2(e[1],e[0]),n=Math.cos(r),o=Math.sin(r),i=Math.cos(-r),a=Math.sin(-r),s=n*i+o*a,c=-(n*a)+o*i,l=o*i+-n*a,u=-(o*a)+-n*i,f=t[0]+-(s*t[0])+-t[1]*l,p=t[1]+-(c*t[0])+-t[1]*u;return[s,c,0,l,u,0,0,0,1,f,p,0]};var eK=Object.freeze({__proto__:null,identity3x3:eF,identity3x4:eI,isIdentity3x4:eV,multiplyMatrix3Vector3:eB,multiplyMatrix3Line3:eq,multiplyMatrices3:eT,determinant3:eR,invertMatrix3:eU,makeMatrix3Translate:eD,makeMatrix3RotateX:eW,makeMatrix3RotateY:eZ,makeMatrix3RotateZ:eJ,makeMatrix3Rotate:eH,makeMatrix3Scale:eY,makeMatrix3ReflectZ:eX});let eQ=(e,t)=>({vector:e||[],origin:t||[]}),e0=function(){if(arguments[0]instanceof T.vector)return arguments[0];let e=B(arguments);return e.length>0&&"object"==typeof e[0]&&null!==e[0]&&!Number.isNaN(e[0].x)&&(e=["x","y","z"].map(t=>e[0][t]).filter(H)),e.filter(e=>"number"==typeof e)},e1=function(){return V(arguments).map(e=>e0(e))},e2=function(){if(arguments[0]instanceof T.segment)return arguments[0];let e=V(arguments);return 4===e.length?[[e[0],e[1]],[e[2],e[3]]]:e.map(e=>e0(e))},e3=function(){let e=V(arguments);return 0===e.length?eQ([],[]):e[0]instanceof T.line||e[0]instanceof T.ray||e[0]instanceof T.segment?e[0]:e[0].constructor===Object&&void 0!==e[0].vector?eQ(e[0].vector||[],e[0].origin||[]):"number"==typeof e[0]?eQ(e0(e)):eQ(...e.map(e=>e0(e)))},e8=(e=0,t=0,r=0,n=0)=>({x:e,y:t,width:r,height:n}),e5=function(){if(arguments[0]instanceof T.rect)return arguments[0];let e=B(arguments);if(e.length>0&&"object"==typeof e[0]&&null!==e[0]&&!Number.isNaN(e[0].width))return e8(...["x","y","width","height"].map(t=>e[0][t]).filter(H));let t=e.filter(e=>"number"==typeof e);return e8(...t.length<4?[,,...t]:t)},e4=(e=1,...t)=>({radius:e,origin:[...t]}),e6=function(){if(arguments[0]instanceof T.circle)return arguments[0];let e=e1(arguments),t=B(arguments).filter(e=>"number"==typeof e);if(2==arguments.length){if(1===e[1].length)return e4(e[1][0],...e[0]);if(1===e[0].length)return e4(e[0][0],...e[1]);if(e[0].length>1&&e[1].length>1)return e4(ew(...e),...e[0])}else switch(t.length){case 0:break;case 1:return e4(t[0],0,0,0);default:return e4(t.pop(),...t)}return e4(1,0,0,0)},e9=[[0,1,3,4,9,10],[0,1,2,3,4,5,6,7,8,9,10,11],[0,1,2,void 0,3,4,5,void 0,6,7,8,void 0,9,10,11]];[11,7,3].forEach(e=>delete e9[2][e]);let e7=e=>e9[e<8?0:e<13?1:2],te=function(){let e=B(arguments),t=[...eI];return e7(e.length).forEach((r,n)=>{null!=e[n]&&(t[r]=e[n])}),t};var tt=Object.freeze({__proto__:null,getVector:e0,getVectorOfVectors:e1,getSegment:e2,getLine:e3,getRay:e3,getRectParams:e8,getRect:e5,getCircle:e6,getMatrix3x4:te});let tr=({vector:e,origin:t})=>{let r=eu(e),n=e$(e),o=eE(t,n)/r;return{normal:em(n,1/r),distance:o}},tn=({normal:e,distance:t})=>({vector:eC(e),origin:em(e,t)});var to=Object.freeze({__proto__:null,rayLineToUniqueLine:tr,uniqueLineToRayLine:tn});let ti=(e,t,r)=>{let n,o=t.map((t,n)=>({o:t,i:n,d:r(e,t)})),i=1/0;for(let e=0;e<o.length;e+=1)o[e].d<i&&(n=e,i=o[e].d);return n},ta=(e,t=Q,r=R)=>{let n=[0];for(let o=1;o<e.length;o+=1)switch(t(e[o][0],e[n[0]][0],r)){case 0:n.push(o);break;case 1:n=[o]}return n},ts=(e,t=R)=>{let r=ta(e,Q,t),n=0;for(let t=1;t<r.length;t+=1)e[r[t]][1]<e[r[n]][1]&&(n=t);return r[n]},tc=(e,t,r,n,o=R)=>{t=L(e.length,t),r=L(e.length,r);let i=ep(e),a=eE(e,ey(r,t));return ev(t,em(e,n(a/i,o)))},tl=(e,t)=>{let r=e.map((e,t,r)=>ey(r[(t+1)%r.length],e));return e.map((e,n)=>tc(r[n],e,t,ec)).map((e,r)=>({point:e,i:r,distance:eP(e,t)})).sort((e,t)=>e.distance-t.distance).shift()},tu=(e,t,r)=>ev(t,em(ed(ey(r,t)),e));var tf=Object.freeze({__proto__:null,smallestComparisonSearch:ti,minimum2DPointIndex:ts,nearestPoint2:(e,t)=>{let r=ti(e,t,ew);return void 0===r?void 0:t[r]},nearestPoint:(e,t)=>{let r=ti(e,t,eP);return void 0===r?void 0:t[r]},nearestPointOnLine:tc,nearestPointOnPolygon:tl,nearestPointOnCircle:tu});let tp=(e,t=R)=>{let r=[[0]],n=0;for(let o=1;o<e.length;o+=1)K(e[o],e[o-1],t)?r[n].push(o):(n=r.length,r.push([o]));return r},td=(e=[],t=R)=>{let r=ts(e,t),n=e.map(t=>eb(t,e[r])).map(e=>eh(e)).map(e=>ex([0,1],e)),o=n.map((e,t)=>({a:e,i:t})).sort((e,t)=>e.a-t.a).map(e=>e.i).filter(e=>e!==r);return[[r]].concat(tp(o.map(e=>n[e]),t).map(e=>e.map(e=>o[e])).map(t=>1===t.length?t:t.map(t=>({i:t,len:ew(e[t],e[r])})).sort((e,t)=>e.len-t.len).map(e=>e.i)))};var th=Object.freeze({__proto__:null,sortPointsAlongVector2:(e,t)=>e.map(e=>({point:e,d:e[0]*t[0]+e[1]*t[1]})).sort((e,t)=>e.d-t.d).map(e=>e.point),clusterIndicesOfSortedNumbers:tp,radialSortPointIndices:td});let tm=[1,0,0,1],tg=tm.concat(0,0),tv=e=>e[0]*e[3]-e[1]*e[2],t_=(e,t=[0,0])=>{let r=Math.cos(e),n=Math.sin(e);return[r,n,-n,r,t[0],t[1]]};var ty=Object.freeze({__proto__:null,identity2x2:tm,identity2x3:tg,multiplyMatrix2Vector2:(e,t)=>[e[0]*t[0]+e[2]*t[1]+e[4],e[1]*t[0]+e[3]*t[1]+e[5]],multiplyMatrix2Line2:(e,t,r)=>({vector:[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1]],origin:[e[0]*r[0]+e[2]*r[1]+e[4],e[1]*r[0]+e[3]*r[1]+e[5]]}),multiplyMatrices2:(e,t)=>[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]],determinant2:tv,invertMatrix2:e=>{let t=tv(e);if(!(1e-6>Math.abs(t)||Number.isNaN(t))&&Number.isFinite(e[4])&&Number.isFinite(e[5]))return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[3]*e[4])/t,(e[1]*e[4]-e[0]*e[5])/t]},makeMatrix2Translate:(e=0,t=0)=>tm.concat(e,t),makeMatrix2Scale:(e,t,r=[0,0])=>[e,0,0,t,-(e*r[0])+r[0],-(t*r[1])+r[1]],makeMatrix2Rotate:t_,makeMatrix2Reflect:(e,t=[0,0])=>{let r=Math.atan2(e[1],e[0]),n=Math.cos(r),o=Math.sin(r),i=Math.cos(-r),a=Math.sin(-r),s=n*i+o*a,c=-(n*a)+o*i,l=o*i+-n*a,u=-(o*a)+-n*i,f=t[0]+-(s*t[0])+-t[1]*l,p=t[1]+-(c*t[0])+-t[1]*u;return[s,c,l,u,f,p]}});let tb=(e,t,r=er,n=R)=>e.map((e,t,r)=>[e,r[(t+1)%r.length]]).map(e=>eA(ed(ey(e[1],e[0])),ey(t,e[0]))).map(e=>r(e,n)).map((e,t,r)=>e===r[0]).reduce((e,t)=>e&&t,!0),tE=(e,t,r,n,o=ei,i=R)=>{if(Math.abs(eA(ed(e),ed(r)))<i)return;let a=eA(e,r),s=ey(n,t),c=eS(s),l=eA(s,r)/a;if(o(-(eA(c,e)/a),i/eu(r)))return l},tx=(e,t,r)=>ev(t,em(e,r)),tO=(e,t,r,n,o)=>e.map((e,t,r)=>[ey(r[(t+1)%r.length],e),e]).map(e=>tE(t,r,e[0],e[1],n,o)).filter(H).sort((e,t)=>e-t),tk=(e,t,r)=>{let n=0,o=e.length-1;for(;n<o&&!t(e[n+1]-e[n],r);)n+=1;for(;o>n&&!t(e[o]-e[o-1],r);)o-=1;if(!(n>=o))return[e[n],e[o]]},tM=(e,t,r,n=et,o=en,i=R)=>{let a=tO(e,t,r,ei,i);if(a.length<2)return;let s=tk(a,n,2*i/eu(t));if(void 0===s)return;let c=s.map(e=>o(e)?e:e<.5?0:1);if(!(Math.abs(c[0]-c[1])<2*i/eu(t)))return tb(e,tx(t,r,(c[0]+c[1])/2),n,i)?c.map(e=>tx(t,r,e)):void 0},tA=(e,t)=>{for(;e<0;)e+=D;for(;t<0;)t+=D;for(;e>D;)e-=D;for(;t>D;)t-=D;let r=e-t;return r>=0?r:D-(t-e)},tj=(e,t)=>{for(;e<0;)e+=D;for(;t<0;)t+=D;for(;e>D;)e-=D;for(;t>D;)t-=D;let r=t-e;return r>=0?r:D-(e-t)},tP=(e,t)=>{let r=t[0]*e[0]+t[1]*e[1],n=Math.atan2(t[0]*e[1]-t[1]*e[0],r);return n<0&&(n+=D),n},tw=(e,t)=>{let r=e[0]*t[0]+e[1]*t[1],n=Math.atan2(e[0]*t[1]-e[1]*t[0],r);return n<0&&(n+=D),n},tS=(e,t)=>X(Y(e)-tP(e,t)/2),t$=(e,t)=>X(Y(e)+tw(e,t)/2),tC=(e,t,r)=>{let n=tA(t,r)/e;return Array.from(Array(e-1)).map((e,r)=>t+n*(r+1))},tL=(e,t,r)=>{let n=tj(t,r)/e;return Array.from(Array(e-1)).map((e,r)=>t+n*(r+1))},tN=(e,t,r)=>tC(e,Math.atan2(t[1],t[0]),Math.atan2(r[1],r[0])).map(X),tz=(e,t,r)=>tL(e,Math.atan2(t[1],t[0]),Math.atan2(r[1],r[0])).map(X),tF=(e,t,r,n,o=R)=>{let i=eA(e,r),a=eE(e,r),s=i>-o?[t$(e,r)]:[tS(e,r)];s[1]=i>-o?e$(s[0]):eC(s[0]);let c=((n[0]-t[0])*r[1]-r[0]*(n[1]-t[1]))/i,l=Math.abs(eA(...[e,r].map(e=>ed(e))))<o,u=l?eO(t,n):[t[0]+e[0]*c,t[1]+e[1]*c],f=s.map(e=>({vector:e,origin:u}));return l&&delete f[+(a>-o)],f},tI=function(){let e=Array.from(arguments).flat(),t=e.map((e,t)=>t).sort((t,r)=>e[t]-e[r]);return t.slice(t.indexOf(0),t.length).concat(t.slice(0,t.indexOf(0)))},tV=function(){let e=Array.from(arguments).flat();return tI(e).map(t=>e[t]).map((e,t,r)=>[e,r[(t+1)%r.length]]).map(e=>tj(e[0],e[1]))},tB=(e,t,r,n=R)=>{let o=eA(eh(eb(t,e)),eh(eb(r,e)));return K(o,0,n)?K(ew(e,t)+ew(t,r),ew(e,r))?0:void 0:Math.sign(o)};var tq=Object.freeze({__proto__:null,isCounterClockwiseBetween:(e,t,r)=>{for(;r<t;)r+=D;for(;e>t;)e-=D;for(;e<t;)e+=D;return e<r},clockwiseAngleRadians:tA,counterClockwiseAngleRadians:tj,clockwiseAngle2:tP,counterClockwiseAngle2:tw,clockwiseBisect2:tS,counterClockwiseBisect2:t$,clockwiseSubsectRadians:tC,counterClockwiseSubsectRadians:tL,clockwiseSubsect2:tN,counterClockwiseSubsect2:tz,bisectLines2:tF,counterClockwiseOrderRadians:tI,counterClockwiseOrder2:function(){return tI(V(arguments).map(Y))},counterClockwiseSectorsRadians:tV,counterClockwiseSectors2:function(){return tV(e1(arguments).map(Y))},threePointTurnDirection:tB});let tT=e=>e.concat(e.slice(0,-1).reverse()),tR=(e=[],t=!1,r=R)=>{if(e.length<2)return[];let n=td(e,r).map(e=>1===e.length?e:tT(e)).flat();n.push(n[0]);let o=[n[0]],i=1,a={"-1":()=>o.pop(),1:e=>{o.push(e),i+=1},undefined:()=>{i+=1}};for(a[0]=t?a["1"]:a["-1"];i<n.length;){if(o.length<2){o.push(n[i]),i+=1;continue}let t=o[o.length-2],s=o[o.length-1],c=n[i];a[tB(...[t,s,c].map(t=>e[t]),r)](c)}return o.pop(),o},tU=(e=[],t=!1,r=R)=>tR(e,t,r).map(t=>e[t]);var tD=Object.freeze({__proto__:null,convexHullIndices:tR,convexHull:tU});let tG=(e,t,r,n,o=en,i=en,a=R)=>{if(Math.abs(eA(ed(e),ed(r)))<a)return;let s=eA(e,r),c=[n[0]-t[0],n[1]-t[1]],l=[-c[0],-c[1]],u=eA(c,r)/s,f=-(eA(l,e)/s);if(o(u,a/eu(e))&&i(f,a/eu(r)))return ev(t,em(e,u))},tW=(e,t,r)=>{let n=Array.from(Array(e-1)).map((t,r)=>(r+1)/e).map(e=>eM(t.origin,r.origin,e)),o=[...t.vector];return n.map(e=>({origin:e,vector:o}))},tZ=(e,t,r)=>{let n=tG(t.vector,t.origin,r.vector,r.origin);return(tP(t.vector,r.vector)<tw(t.vector,r.vector)?tN(e,t.vector,r.vector):tz(e,t.vector,r.vector)).map(e=>({origin:n,vector:e}))};var tJ=Object.freeze({__proto__:null,pleat:(e,t,r)=>{let n=e3(t),o=e3(r);return eN(n.vector,o.vector)?tW(e,n,o):tZ(e,n,o)}});let tH=e=>Array.from(Array(Math.floor(e))).map((t,r)=>r/e*D),tY=(e,t)=>e.map(e=>[t*Math.cos(e),t*Math.sin(e)]).map(e=>e.map(e=>F(e,14))),tX=(e=3,t=1)=>tY(tH(e),t),tK=(e=3,t=1)=>{let r=Math.PI/e;return tY(tH(e).map(e=>e+r),t)},tQ=function(e,t,r){let n=t[0]-e[0],o=t[1]-e[1],i=r[0]-e[0],a=r[1]-e[1],s=n*(e[0]+t[0])+o*(e[1]+t[1]),c=i*(e[0]+r[0])+a*(e[1]+r[1]),l=2*(n*(r[1]-t[1])-o*(r[0]-t[0]));if(Math.abs(l)<R){let n=Math.min(e[0],t[0],r[0]),o=Math.min(e[1],t[1],r[1]),i=(Math.max(e[0],t[0],r[0])-n)*.5,a=(Math.max(e[1],t[1],r[1])-o)*.5;return{origin:[n+i,o+a],radius:Math.sqrt(i*i+a*a)}}let u=[(a*s-o*c)/l,(n*c-i*s)/l],f=u[0]-e[0],p=u[1]-e[1];return{origin:u,radius:Math.sqrt(f*f+p*p)}},t0=e=>.5*e.map((e,t,r)=>{let n=r[(t+1)%r.length];return e[0]*n[1]-n[0]*e[1]}).reduce(J,0),t1=e=>{let t=1/(6*t0(e));return e.map((e,t,r)=>{let n=r[(t+1)%r.length],o=e[0]*n[1]-n[0]*e[1];return[(e[0]+n[0])*o,(e[1]+n[1])*o]}).reduce((e,t)=>[e[0]+t[0],e[1]+t[1]],[0,0]).map(e=>e*t)},t2=(e,t=0)=>{let r=Array(e[0].length).fill(1/0),n=Array(e[0].length).fill(-1/0);e.forEach(e=>e.forEach((e,o)=>{e<r[o]&&(r[o]=e-t),e>n[o]&&(n[o]=e+t)}));let o=n.map((e,t)=>e-r[t]);return{min:r,max:n,span:o}};var t3=Object.freeze({__proto__:null,makePolygonCircumradius:tX,makePolygonCircumradiusSide:tK,makePolygonInradius:(e=3,t=1)=>tX(e,t/Math.cos(Math.PI/e)),makePolygonInradiusSide:(e=3,t=1)=>tK(e,t/Math.cos(Math.PI/e)),makePolygonSideLength:(e=3,t=1)=>tX(e,t/2/Math.sin(Math.PI/e)),makePolygonSideLengthSide:(e=3,t=1)=>tK(e,t/2/Math.sin(Math.PI/e)),makePolygonNonCollinear:(e,t=R)=>{let r=e.map((e,t,r)=>[e,r[(t+1)%r.length]]).map(e=>ey(e[1],e[0])).map((e,t,r)=>[e,r[(t+r.length-1)%r.length]]).map(e=>!eN(e[1],e[0],t));return e.filter((e,t)=>r[t])},circumcircle:tQ,signedArea:t0,centroid:t1,boundingBox:t2});let t8=(e,t,r,n=eo,o=R)=>{let i=ey(r,t),a=ep(e),s=Math.sqrt(a);if(s<o)return!1;let c=eA(i,e.map(e=>e/s)),l=eE(i,e)/a;return Math.abs(c)<o&&n(l,o/s)},t5=(e,t,r)=>{let n=e.map((e,n)=>({point:t8(t,r,e,en)?e:null,at_index:n})).filter(e=>null!=e.point),o=e.map((e,n,o)=>({point:tG(t,r,ey(e,o[(n+1)%o.length]),o[(n+1)%o.length],eo,ea),at_index:n})).filter(e=>null!=e.point);if(2===o.length){let t=o.slice().sort((e,t)=>e.at_index-t.at_index),r=e.slice(t[1].at_index+1).concat(e.slice(0,t[0].at_index+1));r.push(t[0].point),r.push(t[1].point);let n=e.slice(t[0].at_index+1,t[1].at_index+1);return n.push(t[1].point),n.push(t[0].point),[r,n]}if(1===o.length&&1===n.length){n[0].type="v",o[0].type="e";let t=n.concat(o).sort((e,t)=>e.at_index-t.at_index),r=e.slice(t[1].at_index+1).concat(e.slice(0,t[0].at_index+1));"e"===t[0].type&&r.push(t[0].point),r.push(t[1].point);let i=e.slice(t[0].at_index+1,t[1].at_index+1);return"e"===t[1].type&&i.push(t[1].point),i.push(t[0].point),[r,i]}if(2===n.length){let t=n.slice().sort((e,t)=>e.at_index-t.at_index);return[e.slice(t[1].at_index).concat(e.slice(0,t[0].at_index+1)),e.slice(t[0].at_index,t[1].at_index+1)]}return[e.slice()]},t4=(e,t,r)=>{let n=e.map((e,t)=>({vector:r[t],origin:e})).map((e,t,r)=>tG(e.vector,e.origin,r[(t+1)%r.length].vector,r[(t+1)%r.length].origin,er,er)),o=t.map((e,t)=>tc(e.vector,e.origin,n[t],e=>e));if(3===e.length)return e.map(e=>({type:"skeleton",points:[e,n[0]]})).concat([{type:"perpendicular",points:[o[0],n[0]]}]);let i=n.map((e,t)=>eP(e,o[t])),a=0;i.forEach((e,t)=>{e<i[a]&&(a=t)});let s=[{type:"skeleton",points:[e[a],n[a]]},{type:"skeleton",points:[e[(a+1)%e.length],n[a]]},{type:"perpendicular",points:[o[a],n[a]]}],c=tS(eS(t[(a+t.length-1)%t.length].vector),t[(a+1)%t.length].vector),l=a===e.length-1;return e.splice(a,2,n[a]),t.splice(a,1),r.splice(a,2,c),l&&(e.splice(0,1),r.splice(0,1),t.push(t.shift())),s.concat(t4(e,t,r))},t6=e=>{let t=e.map((e,t,r)=>[e,r[(t+1)%r.length]]).map(e=>({vector:ey(e[1],e[0]),origin:e[0]})),r=e.map((e,t,r)=>[(t-1+r.length)%r.length,t,(t+1)%r.length].map(e=>r[e])).map(e=>[ey(e[0],e[1]),ey(e[2],e[1])]).map(e=>tS(...e));return t4([...e],t,r)};var t9=Object.freeze({__proto__:null,collinearBetween:(e,t,r,n=!1,o=R)=>[e,r].map(e=>ee(t,e)).reduce((e,t)=>e||t,!1)?n:K(1,eE(...[[e,t],[t,r]].map(e=>ey(e[1],e[0])).map(e=>ed(e))),o)}),t7=Object.freeze({__proto__:null,enclosingBoundingBoxes:(e,t)=>{let r=Math.min(e.min.length,t.min.length);for(let n=0;n<r;n+=1)if(t.min[n]<e.min[n]||t.max[n]>e.max[n])return!1;return!0},enclosingPolygonPolygon:(e,t,r=et)=>{let n=e.map(e=>tb(t,e,r)).reduce((e,t)=>e||t,!1),o=t.map(e=>tb(t,e,r)).reduce((e,t)=>e&&t,!0);return!n&&o}});let re=e=>e>=1?0:e<=-1?Math.PI:Math.acos(e),rt=(e,t,r)=>{let n=t[0]-e[0],o=t[1]-e[1],i=n*Math.cos(r)+o*Math.sin(r),a=o*Math.cos(r)-n*Math.sin(r);return[e[0]+i,e[1]+a]},rr=(e,t,r,n,o=R)=>{let i=e<r?e:r,a=e<r?r:e,s=e<r?t:n,c=e<r?n:t,l=[s[0]-c[0],s[1]-c[1]],u=Math.sqrt(l[0]**2+l[1]**2);if(u<o)return;let f=l.map((e,t)=>e/u*a+c[t]);if(Math.abs(a+i-u)<o||Math.abs(a-(i+u))<o)return[f];if(u+i<a||a+i<u)return;let p=re((i*i-u*u-a*a)/(-2*u*a));return[rt(c,f,+p),rt(c,f,-p)]},rn=(e,t,r,n,o=en,i=R)=>{let a=r[0]**2+r[1]**2,s=Math.sqrt(a),c=0===s?r:r.map(e=>e/s),l=e$(c),u=eA(ey(n,t),c);if(Math.abs(u)>e+i)return;let f=Math.sqrt(e**2-u**2),p=(e,r)=>t[r]-l[r]*u+c[r]*e,d=Math.abs(e-Math.abs(u))<i?[f].map(e=>[e,e].map(p)):[-f,f].map(e=>[e,e].map(p)),h=d.map(e=>e.map((e,t)=>e-n[t])).map(e=>e[0]*r[0]+r[1]*e[1]).map(e=>e/a);return d.filter((e,t)=>o(h[t],i))},ro=e=>{for(let t=1;t<e.length;t+=1)if(!ee(e[0],e[t]))return[e[0],e[t]]},ri=(e,t,r,n=ei,o=en,i=R)=>{let a=e.map((e,t,r)=>[e,r[(t+1)%r.length]]).map(e=>tG(ey(e[1],e[0]),e[0],t,r,n,o,i)).filter(e=>void 0!==e);switch(a.length){case 0:return;case 1:return[a];default:return ro(a)||[a[0]]}},ra=(e,t,r,n=ei,o=eo,i=R)=>{let a,s=ri(e,t,r,n,o,i);switch(o){case er:a=et;break;case ea:a=ei;break;default:return s}let c=ri(e,t,r,ei,a,i);if(void 0===c)return;let l=ro(c);if(void 0===l)switch(o){case er:return tb(e,r,er,i)?c:void 0;case ea:return tb(e,ev(r,t),er,i)||tb(e,r,er,i)?c:void 0;default:return}return tb(e,eO(...l),er,i)?l:s},rs={polygon:e=>[e],rect:e=>[e],circle:e=>[e.radius,e.origin],line:e=>[e.vector,e.origin],ray:e=>[e.vector,e.origin],segment:e=>[e.vector,e.origin]},rc={polygon:{line:(e,t,r,n,o)=>ra(...e,...t,ei,n,o),ray:(e,t,r,n,o)=>ra(...e,...t,ei,n,o),segment:(e,t,r,n,o)=>ra(...e,...t,ei,n,o)},circle:{circle:(e,t,r,n,o)=>rr(...e,...t,o),line:(e,t,r,n,o)=>rn(...e,...t,n,o),ray:(e,t,r,n,o)=>rn(...e,...t,n,o),segment:(e,t,r,n,o)=>rn(...e,...t,n,o)},line:{polygon:(e,t,r,n,o)=>ra(...t,...e,ei,r,o),circle:(e,t,r,n,o)=>rn(...t,...e,r,o),line:(e,t,r,n,o)=>tG(...e,...t,r,n,o),ray:(e,t,r,n,o)=>tG(...e,...t,r,n,o),segment:(e,t,r,n,o)=>tG(...e,...t,r,n,o)},ray:{polygon:(e,t,r,n,o)=>ra(...t,...e,ei,r,o),circle:(e,t,r,n,o)=>rn(...t,...e,r,o),line:(e,t,r,n,o)=>tG(...t,...e,n,r,o),ray:(e,t,r,n,o)=>tG(...e,...t,r,n,o),segment:(e,t,r,n,o)=>tG(...e,...t,r,n,o)},segment:{polygon:(e,t,r,n,o)=>ra(...t,...e,ei,r,o),circle:(e,t,r,n,o)=>rn(...t,...e,r,o),line:(e,t,r,n,o)=>tG(...t,...e,n,r,o),ray:(e,t,r,n,o)=>tG(...t,...e,n,r,o),segment:(e,t,r,n,o)=>tG(...e,...t,r,n,o)}},rl={polygon:"polygon",rect:"polygon",circle:"circle",line:"line",ray:"ray",segment:"segment"},ru={polygon:er,rect:er,circle:er,line:eo,ray:er,segment:ea},rf=function(e,t,r){let n=C(e),o=C(t),i=rl[n],a=rl[o],s=rs[n](e),c=rs[o](t),l=e.domain_function||ru[n],u=t.domain_function||ru[o];return rc[i][a](s,c,l,u,r)},rp=(e,t,r=R)=>{for(let n=0;n<2;n+=1){let o=0===n?e:t,i=0===n?t:e;for(let e=0;e<o.length;e+=1){let t=o[e],n=e$(ey(o[(e+1)%o.length],o[e])),a=i.map(e=>ey(e,t)).map(e=>eE(n,e)),s=eE(n,ey(o[(e+2)%o.length],t))>0;if(a.map(e=>s?e<r:e>-r).reduce((e,t)=>e&&t,!0))return!1}}return!0},rd=(e,t,r,n=er,o=R)=>n(e-ew(t,r),o),rh=(e,t,r,n,o=eo,i=eo,a=R)=>{let s=eA(e,r),c=[n[0]-t[0],n[1]-t[1]];if(Math.abs(s)<a){if(Math.abs(eA(c,e))>a)return!1;let t=ev(c,r),n=eE(e,e),o=eE(c,e)/n,i=eE(t,e)/n;return!((o<i?o:i)>1-a)&&!((o<i?i:o)<a)}let l=[-c[0],-c[1]],u=eA(c,r)/s,f=-(eA(l,e)/s);return o(u,a/eu(e))&&i(f,a/eu(r))},rm={polygon:e=>[e],rect:e=>[e],circle:e=>[e.radius,e.origin],line:e=>[e.vector,e.origin],ray:e=>[e.vector,e.origin],segment:e=>[e.vector,e.origin],vector:e=>[e]},rg={polygon:{polygon:(e,t,r,n,o)=>rp(...e,...t,o),vector:(e,t,r,n,o)=>tb(...e,...t,r,o)},circle:{vector:(e,t,r,n,o)=>rd(...e,...t,er,o)},line:{line:(e,t,r,n,o)=>rh(...e,...t,r,n,o),ray:(e,t,r,n,o)=>rh(...e,...t,r,n,o),segment:(e,t,r,n,o)=>rh(...e,...t,r,n,o),vector:(e,t,r,n,o)=>t8(...e,...t,r,o)},ray:{line:(e,t,r,n,o)=>rh(...t,...e,n,r,o),ray:(e,t,r,n,o)=>rh(...e,...t,r,n,o),segment:(e,t,r,n,o)=>rh(...e,...t,r,n,o),vector:(e,t,r,n,o)=>t8(...e,...t,r,o)},segment:{line:(e,t,r,n,o)=>rh(...t,...e,n,r,o),ray:(e,t,r,n,o)=>rh(...t,...e,n,r,o),segment:(e,t,r,n,o)=>rh(...e,...t,r,n,o),vector:(e,t,r,n,o)=>t8(...e,...t,r,o)},vector:{polygon:(e,t,r,n,o)=>tb(...t,...e,n,o),circle:(e,t,r,n,o)=>rd(...t,...e,er,o),line:(e,t,r,n,o)=>t8(...t,...e,n,o),ray:(e,t,r,n,o)=>t8(...t,...e,n,o),segment:(e,t,r,n,o)=>t8(...t,...e,n,o),vector:(e,t,r,n,o)=>ee(...e,...t,o)}},rv={polygon:"polygon",rect:"polygon",circle:"circle",line:"line",ray:"ray",segment:"segment",vector:"vector"},r_={polygon:er,rect:er,circle:er,line:eo,ray:er,segment:ea,vector:eo},ry=function(e,t,r){let n=C(e),o=C(t),i=rv[n],a=rv[o],s=rm[n](e),c=rm[o](t),l=e.domain_function||r_[n],u=t.domain_function||r_[o];return rg[i][a](s,c,l,u,r)},rb={preserve:{magnitude:function(){return eu(this)},isEquivalent:function(){return ee(this,e0(arguments))},isParallel:function(){return eN(...N(this,e0(arguments)))},isCollinear:function(e){return ry(this,e)},dot:function(){return eE(...N(this,e0(arguments)))},distanceTo:function(){return eP(...N(this,e0(arguments)))},overlap:function(e){return ry(this,e)}},vector:{copy:function(){return[...this]},normalize:function(){return ed(this)},scale:function(){return em(this,arguments[0])},flip:function(){return eS(this)},rotate90:function(){return e$(this)},rotate270:function(){return eC(this)},cross:function(){return ej(L(3,this),L(3,e0(arguments)))},transform:function(){return eB(te(arguments),L(3,this))},add:function(){return ev(this,L(this.length,e0(arguments)))},subtract:function(){return ey(this,L(this.length,e0(arguments)))},rotateZ:function(e,t){return eB(te(t_(e,t)),L(3,this))},lerp:function(e,t){return eM(this,L(this.length,e0(e)),t)},midpoint:function(){return eO(...N(this,e0(arguments)))},bisect:function(){return t$(this,e0(arguments))}}},rE={};Object.keys(rb.preserve).forEach(e=>{rE[e]=rb.preserve[e]}),Object.keys(rb.vector).forEach(e=>{rE[e]=function(){return T.vector(...rb.vector[e].apply(this,arguments))}});var rx={vector:{P:Array.prototype,A:function(){this.push(...e0(arguments))},G:{x:function(){return this[0]},y:function(){return this[1]},z:function(){return this[2]}},M:rE,S:{fromAngle:function(e){return T.vector(Math.cos(e),Math.sin(e))},fromAngleDegrees:function(e){return T.vector.fromAngle(e*U)}}}},rO={fromPoints:function(){let e=e1(arguments);return this.constructor({vector:ey(e[1],e[0]),origin:e[0]})},fromAngle:function(){let e=arguments[0]||0;return this.constructor({vector:[Math.cos(e),Math.sin(e)],origin:[0,0]})},perpendicularBisector:function(){let e=e1(arguments);return this.constructor({vector:e$(ey(e[1],e[0])),origin:ek(e[0],e[1])})}};let rk={isParallel:function(){let e=N(this.vector,e3(arguments).vector);return eN(...e)},isCollinear:function(){let e=e3(arguments);return t8(this.vector,this.origin,e.origin)&&eN(...N(this.vector,e.vector))},isDegenerate:function(e=R){return eL(this.vector,e)},reflectionMatrix:function(){return T.matrix(eX(this.vector,this.origin))},nearestPoint:function(){let e=e0(arguments);return T.vector(tc(this.vector,this.origin,e,this.clip_function))},transform:function(){let e=this.dimension,t=eq(te(arguments),L(3,this.vector),L(3,this.origin));return this.constructor(L(e,t.vector),L(e,t.origin))},translate:function(){let e=ev(...N(this.origin,e0(arguments)));return this.constructor(this.vector,e)},intersect:function(){return rf(this,...arguments)},overlap:function(){return ry(this,...arguments)},bisect:function(e,t){let r=e3(e);return tF(this.vector,this.origin,r.vector,r.origin,t).map(e=>this.constructor(e))}};var rM={line:{P:Object.prototype,A:function(){let e=e3(...arguments);this.vector=T.vector(e.vector),this.origin=T.vector(L(this.vector.length,e.origin));let t=tr({vector:this.vector,origin:this.origin});this.normal=t.normal,this.distance=t.distance,Object.defineProperty(this,"domain_function",{writable:!0,value:en})},G:{dimension:function(){return[this.vector,this.origin].map(e=>e.length).reduce((e,t)=>Math.max(e,t),0)}},M:Object.assign({},rk,{inclusive:function(){return this.domain_function=en,this},exclusive:function(){return this.domain_function=eo,this},clip_function:e=>e,svgPath:function(e=2e4){let t=ev(this.origin,em(this.vector,-e/2)),r=em(this.vector,e);return`M${t[0]} ${t[1]}l${r[0]} ${r[1]}`}}),S:Object.assign({fromNormalDistance:function(){return this.constructor(tn(arguments[0]))}},rO)}},rA={ray:{P:Object.prototype,A:function(){let e=e3(...arguments);this.vector=T.vector(e.vector),this.origin=T.vector(L(this.vector.length,e.origin)),Object.defineProperty(this,"domain_function",{writable:!0,value:et})},G:{dimension:function(){return[this.vector,this.origin].map(e=>e.length).reduce((e,t)=>Math.max(e,t),0)}},M:Object.assign({},rk,{inclusive:function(){return this.domain_function=et,this},exclusive:function(){return this.domain_function=er,this},flip:function(){return T.ray(eS(this.vector),this.origin)},scale:function(e){return T.ray(this.vector.scale(e),this.origin)},normalize:function(){return T.ray(this.vector.normalize(),this.origin)},clip_function:es,svgPath:function(e=1e4){let t=this.vector.scale(e);return`M${this.origin[0]} ${this.origin[1]}l${t[0]} ${t[1]}`}}),S:rO}},rj={segment:{P:Array.prototype,A:function(){let e=e2(...arguments);this.push(...[e[0],e[1]].map(e=>T.vector(e))),this.vector=T.vector(ey(this[1],this[0])),this.origin=this[0],Object.defineProperty(this,"domain_function",{writable:!0,value:ei})},G:{points:function(){return this},magnitude:function(){return eu(this.vector)},dimension:function(){return[this.vector,this.origin].map(e=>e.length).reduce((e,t)=>Math.max(e,t),0)}},M:Object.assign({},rk,{inclusive:function(){return this.domain_function=ei,this},exclusive:function(){return this.domain_function=ea,this},clip_function:ec,transform:function(...e){let t=this.points[0].length,r=te(e),n=this.points.map(e=>L(3,e)).map(e=>eB(r,e)).map(e=>L(t,e));return T.segment(n)},translate:function(){let e=e0(arguments),t=this.points.map(t=>ev(...N(t,e)));return T.segment(t)},midpoint:function(){return T.vector(ek(this.points[0],this.points[1]))},svgPath:function(){let e=this.points.map(e=>`${e[0]} ${e[1]}`);return["M","L"].map((t,r)=>`${t}${e[r]}`).join("")}}),S:{fromPoints:function(){return this.constructor(...arguments)}}}};let rP=function(e,t,r,n,o,i){let a=Math.cos(o),s=Math.sin(o),c=Math.cos(i),l=Math.sin(i);return[e+a*r*c+-s*n*l,t+s*r*c+a*n*l]},rw=function(e,t,r,n,o,i,a){let s=i;if(s<0&&!Number.isNaN(s))for(;s<0;)s+=2*Math.PI;let c=a>2*Math.PI?2*Math.PI:a,l=rP(e,t,r,n,o,s),u=rP(e,t,r,n,o,s+c/2),f=rP(e,t,r,n,o,s+c),p=+(c/2>Math.PI);return{x1:l[0],y1:l[1],x2:u[0],y2:u[1],x3:f[0],y3:f[1],fa:p,fs:+(c/2>0)}},rS=e=>F(e,4),r$=(e,t,r,n,o,i,a)=>`A${rS(e)} ${rS(t)} ${rS(r)} ${rS(n)} ${rS(o)} ${rS(i)} ${rS(a)}`,rC=function(e,t,r,n){let o=t>r,i=Math.sqrt(o?t**2-r**2:r**2-t**2),a=o?Math.cos(n):Math.sin(n),s=o?Math.sin(n):Math.cos(n);return[T.vector(e[0]+i*a,e[1]+i*s),T.vector(e[0]-i*a,e[1]-i*s)]},rL={area:function(){return t0(this)},centroid:function(){return T.vector(t1(this))},boundingBox:function(){return t2(this)},straightSkeleton:function(){return t6(this)},scale:function(e,t=t1(this)){let r=this.map(e=>[0,1].map((r,n)=>e[n]-t[n])).map(r=>r.map((n,o)=>t[o]+r[o]*e));return this.constructor.fromPoints(r)},rotate:function(e,t=t1(this)){let r=this.map(r=>{let n=[r[0]-t[0],r[1]-t[1]],o=Math.sqrt(n[0]**2+n[1]**2),i=Math.atan2(n[1],n[0]);return[t[0]+Math.cos(i+e)*o,t[1]+Math.sin(i+e)*o]});return T.polygon(r)},translate:function(){let e=e0(...arguments),t=this.map(t=>t.map((t,r)=>t+e[r]));return this.constructor.fromPoints(t)},transform:function(){let e=te(...arguments),t=this.map(t=>eB(e,L(3,t)));return T.polygon(t)},nearest:function(){let e=e0(...arguments),t=tl(this,e);return void 0===t?void 0:Object.assign(t,{edge:this.sides[t.i]})},split:function(){let e=e3(...arguments);return t5(this,e.vector,e.origin).map(e=>T.polygon(e))},overlap:function(){return ry(this,...arguments)},intersect:function(){return rf(this,...arguments)},clip:function(e,t){let r=e.domain_function?e.domain_function:en,n=tM(this,e.vector,e.origin,this.domain_function,r,t);return n?T.segment(n):void 0},svgPath:function(){let e=Array(this.length).fill("L");return e[0]="M",`${this.map((t,r)=>`${e[r]}${t[0]} ${t[1]}`).join("")}z`}},rN=e=>[[e.x,e.y],[e.x+e.width,e.y],[e.x+e.width,e.y+e.height],[e.x,e.y+e.height]],rz=e=>[[[e.x,e.y],[e.x+e.width,e.y]],[[e.x+e.width,e.y],[e.x+e.width,e.y+e.height]],[[e.x+e.width,e.y+e.height],[e.x,e.y+e.height]],[[e.x,e.y+e.height],[e.x,e.y]]];var rF={rect:{P:Array.prototype,A:function(){let e=e5(...arguments);this.width=e.width,this.height=e.height,this.origin=T.vector(e.x,e.y),this.push(...rN(this)),Object.defineProperty(this,"domain_function",{writable:!0,value:et})},G:{x:function(){return this.origin[0]},y:function(){return this.origin[1]},center:function(){return T.vector(this.origin[0]+this.width/2,this.origin[1]+this.height/2)}},M:Object.assign({},rL,{inclusive:function(){return this.domain_function=et,this},exclusive:function(){return this.domain_function=er,this},area:function(){return this.width*this.height},segments:function(){return rz(this)},svgPath:function(){return`M${this.origin.join(" ")}h${this.width}v${this.height}h${-this.width}Z`}}),S:{fromPoints:function(){let e=t2(e1(arguments));return T.rect(e.min[0],e.min[1],e.span[0],e.span[1])}}}},rI={polygon:{P:Array.prototype,A:function(){this.push(...V(arguments)),this.sides=this.map((e,t,r)=>[e,r[(t+1)%r.length]]),this.vectors=this.sides.map(e=>ey(e[1],e[0])),Object.defineProperty(this,"domain_function",{writable:!0,value:et})},G:{isConvex:function(){},points:function(){return this}},M:Object.assign({},rL,{inclusive:function(){return this.domain_function=et,this},exclusive:function(){return this.domain_function=er,this},segments:function(){return this.sides}}),S:{fromPoints:function(){return this.constructor(...arguments)},regularPolygon:function(){return this.constructor(tX(...arguments))},convexHull:function(){return this.constructor(tU(...arguments))}}}};let rV=(e,t)=>{for(let r=0;r<12;r+=1)e[r]=t[r];return e},rB=Object.assign({},rx,rM,rA,rj,{circle:{A:function(){let e=e6(...arguments);this.radius=e.radius,this.origin=T.vector(...e.origin)},G:{x:function(){return this.origin[0]},y:function(){return this.origin[1]},z:function(){return this.origin[2]}},M:{nearestPoint:function(){return T.vector(tu(this.radius,this.origin,e0(arguments)))},intersect:function(e){return rf(this,e)},overlap:function(e){return ry(this,e)},svgPath:function(e=0,t=2*Math.PI){let r=rw(this.origin[0],this.origin[1],this.radius,this.radius,0,e,t),n=r$(this.radius,this.radius,0,r.fa,r.fs,r.x2,r.y2),o=r$(this.radius,this.radius,0,r.fa,r.fs,r.x3,r.y3);return`M${r.x1} ${r.y1}${n}${o}`},points:function(e=128){return Array.from(Array(e)).map((t,r)=>2*Math.PI/e*r).map(e=>[this.origin[0]+this.radius*Math.cos(e),this.origin[1]+this.radius*Math.sin(e)])},polygon:function(){return T.polygon(this.points(arguments[0]))},segments:function(){let e=this.points(arguments[0]);return e.map((t,r)=>{let n=(r+1)%e.length;return[t,e[n]]})}},S:{fromPoints:function(){if(3==arguments.length){let e=tQ(...arguments);return this.constructor(e.radius,e.origin)}return this.constructor(...arguments)},fromThreePoints:function(){let e=tQ(...arguments);return this.constructor(e.radius,e.origin)}}}},{ellipse:{A:function(){let e=B(arguments).filter(e=>!Number.isNaN(e)),t=L(5,e);this.rx=t[0],this.ry=t[1],this.origin=T.vector(t[2],t[3]),this.spin=t[4],this.foci=rC(this.origin,this.rx,this.ry,this.spin)},G:{x:function(){return this.origin[0]},y:function(){return this.origin[1]}},M:{svgPath:function(e=0,t=2*Math.PI){let r=rw(this.origin[0],this.origin[1],this.rx,this.ry,this.spin,e,t),n=r$(this.rx,this.ry,this.spin/Math.PI*180,r.fa,r.fs,r.x2,r.y2),o=r$(this.rx,this.ry,this.spin/Math.PI*180,r.fa,r.fs,r.x3,r.y3);return`M${r.x1} ${r.y1}${n}${o}`},points:function(e=128){return Array.from(Array(e)).map((t,r)=>2*Math.PI/e*r).map(e=>rP(this.origin.x,this.origin.y,this.rx,this.ry,this.spin,e))},polygon:function(){return T.polygon(this.points(arguments[0]))},segments:function(){let e=this.points(arguments[0]);return e.map((t,r)=>{let n=(r+1)%e.length;return[t,e[n]]})}},S:{}}},rF,rI,{polyline:{P:Array.prototype,A:function(){this.push(...V(arguments))},G:{points:function(){return this}},M:{svgPath:function(){let e=Array(this.length).fill("L");return e[0]="M",`${this.map((t,r)=>`${e[r]}${t[0]} ${t[1]}`).join("")}`}},S:{fromPoints:function(){return this.constructor(...arguments)}}}},{matrix:{P:Array.prototype,A:function(){te(arguments).forEach(e=>this.push(e))},G:{},M:{copy:function(){return T.matrix(...Array.from(this))},set:function(){return rV(this,te(arguments))},isIdentity:function(){return eV(this)},multiply:function(e){return rV(this,eT(this,e))},determinant:function(){return eR(this)},inverse:function(){return rV(this,eU(this))},translate:function(e,t,r){return rV(this,eT(this,eD(e,t,r)))},rotateX:function(e){return rV(this,eT(this,eW(e)))},rotateY:function(e){return rV(this,eT(this,eZ(e)))},rotateZ:function(e){return rV(this,eT(this,eJ(e)))},rotate:function(e,t,r){return rV(this,eT(this,eH(e,t,r)))},scale:function(e){return rV(this,eT(this,eY(e)))},reflectZ:function(e,t){return rV(this,eT(this,eX(e,t)))},transform:function(...e){return T.vector(eB(this,L(3,e0(e))))},transformVector:function(e){return T.vector(eB(this,L(3,e0(e))))},transformLine:function(...e){let t=e3(e);return T.line(eq(this,t.vector,t.origin))}},S:{}}}),rq=function(e,t){let r=Object.create(rB[e].proto);return rB[e].A.apply(r,t),r};Object.assign(T,{vector:function(){return rq("vector",arguments)},line:function(){return rq("line",arguments)},ray:function(){return rq("ray",arguments)},segment:function(){return rq("segment",arguments)},circle:function(){return rq("circle",arguments)},ellipse:function(){return rq("ellipse",arguments)},rect:function(){return rq("rect",arguments)},polygon:function(){return rq("polygon",arguments)},polyline:function(){return rq("polyline",arguments)},matrix:function(){return rq("matrix",arguments)}}),Object.keys(rB).forEach(e=>{let t={};t.prototype=null!=rB[e].P?Object.create(rB[e].P):Object.create(Object.prototype),t.prototype.constructor=t,T[e].prototype=t.prototype,T[e].prototype.constructor=T[e],Object.keys(rB[e].G).forEach(r=>Object.defineProperty(t.prototype,r,{get:rB[e].G[r]})),Object.keys(rB[e].M).forEach(r=>Object.defineProperty(t.prototype,r,{value:rB[e].M[r]})),Object.keys(rB[e].S).forEach(t=>Object.defineProperty(T[e],t,{value:rB[e].S[t].bind(T[e].prototype)})),rB[e].proto=t.prototype});let rT=T;rT.core=Object.assign(Object.create(null),G,q,tt,el,ez,th,tq,tD,tJ,t3,tq,ty,eK,tf,to,t9,t7,{intersectConvexPolygonLine:ra,intersectCircleCircle:rr,intersectCircleLine:rn,intersectLineLine:tG,overlapConvexPolygons:rp,overlapConvexPolygonPoint:tb,overlapBoundingBoxes:(e,t)=>{let r=Math.min(e.min.length,t.min.length);for(let n=0;n<r;n+=1)if(e.min[n]>t.max[n]||e.max[n]<t.min[n])return!1;return!0},overlapLineLine:rh,overlapLinePoint:t8,clipLineConvexPolygon:tM,clipPolygonPolygon:(e,t,r=R)=>{let n,o,i,a,s=e=>(o[0]-n[0])*(e[1]-n[1])>(o[1]-n[1])*(e[0]-n[0])+r,c=()=>{let e=[n[0]-o[0],n[1]-o[1]],t=[i[0]-a[0],i[1]-a[1]],r=n[0]*o[1]-n[1]*o[0],s=i[0]*a[1]-i[1]*a[0],c=1/(e[0]*t[1]-e[1]*t[0]);return[(r*t[0]-s*e[0])*c,(r*t[1]-s*e[1])*c]},l=e;for(let e in n=t[t.length-1],t){o=t[e];let r=l;for(let e in l=[],i=r[r.length-1],r)s(a=r[e])?(s(i)||l.push(c()),l.push(a)):s(i)&&l.push(c()),i=a;n=o}return 0===l.length?void 0:l},splitConvexPolygon:t5,straightSkeleton:t6}),rT.typeof=C,rT.intersect=rf,rT.overlap=ry;let rR=function(e,t){let r=this;Object.defineProperty(e,"degree",{get:()=>r.vertices_vertices&&r.vertices_vertices[t]?r.vertices_vertices[t].length:null})},rU=function(e,t){let r=this;Object.defineProperty(e,"coords",{get:()=>{if(r.edges_vertices&&r.edges_vertices[t]&&r.vertices_coords)return r.edges_vertices[t].map(e=>r.vertices_coords[e])}})},rD=function(e,t){let r=this;Object.defineProperty(e,"simple",{get:()=>{if(!r.faces_vertices||!r.faces_vertices[t])return null;for(let n=0;n<e.length-1;n+=1)for(let o=n+1;o<e.length;o+=1)if(r.faces_vertices[t][n]===r.faces_vertices[t][o])return!1;return!0}})},rG=function(e,t){let r=this;Object.defineProperty(e,"coords",{get:()=>{if(r.faces_vertices&&r.faces_vertices[t]&&r.vertices_coords)return r.faces_vertices[t].map(e=>r.vertices_coords[e])}})};var rW={vertices:function(e,t){return rR.call(this,e,t),e},edges:function(e,t){return rU.call(this,e,t),e},faces:function(e,t){return rD.call(this,e,t),rG.call(this,e,t),e}};let rZ="Rabbit Ear",rJ=["vertices_coords","vertices_vertices","vertices_faces","edges_vertices","edges_faces","edges_assignment","edges_foldAngle","edges_length","faces_vertices","faces_edges","vertices_edges","edges_edges","faces_faces"],rH=["edgeOrders","faceOrders"],rY=Object.freeze([].concat(["file_spec","file_creator","file_author","file_title","file_description","file_classes","file_frames"]).concat(["frame_author","frame_title","frame_description","frame_attributes","frame_classes","frame_unit","frame_parent","frame_inherit"]).concat(rJ).concat(rH)),rX=Object.freeze(["edges_vector","vertices_sectors","faces_sectors","faces_matrix"]),rK=Array.from("MmVvBbFfUu"),rQ={vertices:"vertex",edges:"edge",faces:"face"},r0={b:"boundary",m:"mountain",v:"valley",f:"flat",u:"unassigned"};rK.forEach(e=>{r0[e.toUpperCase()]=r0[e]});let r1={M:-180,m:-180,V:180,v:180,B:0,b:0,F:0,f:0,U:0,u:0},r2=e=>r1[e]||0,r3=e=>e>rT.core.EPSILON?"V":e<-rT.core.EPSILON?"M":"U",r8=e=>rT.core.fnEpsilonEqual(0,e)||rT.core.fnEpsilonEqual(-180,e)||rT.core.fnEpsilonEqual(180,e),r5=({edges_foldAngle:e})=>{if(!e)return!0;for(let t=0;t<e.length;t+=1)if(!r8(e[t]))return!1;return!0},r4=(e,t)=>Object.keys(e).map(e=>e.substring(e.length-t.length,e.length)===t?e:void 0).filter(e=>void 0!==e),r6=(e,t)=>Object.keys(e).map(e=>e.substring(0,t.length)===t?e:void 0).filter(e=>void 0!==e),r9=(e,t)=>r6(e,`${t}_`),r7=(e,t)=>r4(e,`_${t}`),ne=(e,t)=>{let r=r9(e,t);if(0===r.length)return[];let n=Array.from(Array(Math.max(...r.map(t=>e[t].length)))).map(()=>({}));return r.forEach(t=>n.forEach((r,o)=>{n[o][t]=e[t][o]})),n},nt=(e={})=>0===Object.keys(e).length?0:[].concat(rY,rX).filter(t=>e[t]).length/Object.keys(e).length;var nr=Object.freeze({__proto__:null,singularize:rQ,pluralize:{vertex:"vertices",edge:"edges",face:"faces"},edgesAssignmentNames:r0,edgesAssignmentDegrees:r1,edgeAssignmentToFoldAngle:r2,edgeFoldAngleToAssignment:r3,edgeFoldAngleIsFlat:r8,edgesFoldAngleAreAllFlat:r5,filterKeysWithSuffix:r4,filterKeysWithPrefix:r6,getGraphKeysWithPrefix:r9,getGraphKeysWithSuffix:r7,transposeGraphArrays:ne,transposeGraphArrayAtIndex:function(e,t,r){let n=r9(e,t);if(0===n.length)return;let o={};return n.forEach(t=>{o[t]=e[t][r]}),o},isFoldObject:nt});let nn=(e,t,r=rT.core.EPSILON)=>{let n=e.length;for(let o=0;o<n;o+=1)if(Math.abs(e[o]-t[o])>r)return!1;return!0},no=({vertices_coords:e},t=rT.core.EPSILON)=>{if(!e)return[];let r=e.map(()=>[]);for(let n=0;n<e.length-1;n+=1)for(let o=n+1;o<e.length;o+=1)r[n][o]=nn(e[n],e[o],t);let n=r.map(e=>e.map((e,t)=>e?t:void 0).filter(e=>void 0!==e)),o=[],i=Array(e.length).fill(!1),a=0,s=(t,r)=>{if(!i[r]&&a!==e.length)for(i[r]=!0,a+=1,o[t]||(o[t]=[]),o[t].push(r);n[r].length>0;)s(t,n[r][0]),n[r].splice(0,1)};for(let t=0;t<e.length&&(s(t,t),a!==e.length);t+=1);return o.filter(e=>e.length)},ni=(...e)=>Math.max(0,...e.filter(e=>void 0!==e).map(e=>e.length)),na=(e,t)=>ni(...r9(e,t).map(t=>e[t]));na.vertices=({vertices_coords:e,vertices_faces:t,vertices_vertices:r})=>ni(e,t,r),na.edges=({edges_vertices:e,edges_edges:t,edges_faces:r})=>ni(e,t,r),na.faces=({faces_vertices:e,faces_edges:t,faces_faces:r})=>ni(e,t,r);let ns=e=>{let t={};return e.forEach(e=>{t[e]=!0}),Object.keys(t).map(e=>parseInt(e,10))},nc=e=>ns(e).sort((e,t)=>e-t),nl=(e,t)=>(t.sort((e,t)=>e-t),[e.slice(t[1]).concat(e.slice(0,t[0]+1)),e.slice(t[0],t[1]+1)]),nu=e=>{let t={};return e.forEach(e=>{void 0===t[e]&&(t[e]=0),t[e]+=1}),e.filter(e=>t[e]>1)},nf=e=>e.map(e=>e.map((e,t)=>!0===e?t:void 0).filter(e=>void 0!==e)),np=e=>{let t=[];for(let r=0;r<e.length-1;r+=1)for(let n=r+1;n<e.length;n+=1)e[r][n]&&t.push([r,n]);return t};var nd=Object.freeze({__proto__:null,uniqueIntegers:ns,uniqueSortedIntegers:nc,splitCircularArray:nl,getLongestArray:e=>{if(1===e.length)return e[0];let t=e.map(e=>e.length),r=0;for(let n=0;n<e.length;n+=1)t[n]>t[r]&&(r=n);return e[r]},removeSingleInstances:nu,booleanMatrixToIndexedArray:nf,booleanMatrixToUniqueIndexPairs:np,makeSelfRelationalArrayClusters:e=>{let t=[],r=(n,o)=>void 0!==t[n]?0:(t[n]=o,e[n].forEach(e=>r(e,o)),1);for(let t=0,n=0;t<e.length;t+=1)t in e&&(n+=r(t,n));return t},circularArrayValidRanges:e=>{let t=e.map(e=>void 0!==e);if(t.reduce((e,t)=>e&&t,!0))return[[0,e.length-1]];let r=t.map((e,t,r)=>e&&!r[(t-1+r.length)%r.length]),n=r.reduce((e,t)=>e+ +!!t,0),o=Array(n),i=Array(n).fill(0),a=t[0]&&t[e.length-1]?0:n-1;return t.forEach((e,n)=>{a=(a+ +!!r[n])%i.length,i[a]+=+!!t[n],r[n]&&(o[a]=n)}),o.map((t,r)=>[t,(t+i[r]-1)%e.length])}});let nh=(e,t,r)=>{let n,o,i,a=na(e,t),s=nc(r),c=[];for(n=0,o=0,i=0;n<a;n+=1,o+=1){for(;n===s[i];)c[n]=void 0,n+=1,i+=1;n<a&&(c[n]=o)}return r7(e,t).forEach(t=>e[t].forEach((r,n)=>e[t][n].forEach((r,o)=>{e[t][n][o]=c[r]}))),s.reverse(),r9(e,t).forEach(t=>s.forEach(r=>e[t].splice(r,1))),c},nm=(e,t,r)=>{let n,o,i,a=na(e,t),s=nc(Object.keys(r).map(e=>parseInt(e,10))),c=[];for(n=0,o=0,i=0;n<a;n+=1,o+=1){for(;n===s[i];)c[n]=c[r[s[i]]],void 0===c[n]&&console.log("replace() found an undefined",c),n+=1,i+=1;n<a&&(c[n]=o)}return r7(e,t).forEach(t=>e[t].forEach((r,n)=>e[t][n].forEach((r,o)=>{e[t][n][o]=c[r]}))),s.reverse(),r9(e,t).forEach(t=>s.forEach(r=>e[t].splice(r,1))),c},ng=(e,t)=>no(e,t).filter(e=>e.length>1),nv=({vertices_coords:e,edges_vertices:t,faces_vertices:r})=>{if(!e)return[];let n=e.length,o=Array(n).fill(!1);return t&&t.forEach(e=>{e.filter(e=>!o[e]).forEach(e=>{o[e]=!0,n-=1})}),r&&r.forEach(e=>{e.filter(e=>!o[e]).forEach(e=>{o[e]=!0,n-=1})}),o.map((e,t)=>e?void 0:t).filter(e=>void 0!==e)},n_=(e,t)=>(t||(t=nv(e)),{map:nh(e,s,t),remove:t}),ny=(e,t=rT.core.EPSILON)=>{let r=[],n=[],o=no(e,t).filter(e=>e.length>1);return o.forEach(e=>{for(let t=1;t<e.length;t+=1)r[e[t]]=e[0],n.push(e[t])}),o.map(t=>t.map(t=>e.vertices_coords[t])).map(e=>rT.core.average(...e)).forEach((t,r)=>{e.vertices_coords[o[r][0]]=t}),{map:nm(e,s,r),remove:n}};var nb=Object.freeze({__proto__:null,getDuplicateVertices:ng,getEdgeIsolatedVertices:({vertices_coords:e,edges_vertices:t})=>{if(!e||!t)return[];let r=e.length,n=Array(r).fill(!1);return t.forEach(e=>{e.filter(e=>!n[e]).forEach(e=>{n[e]=!0,r-=1})}),n.map((e,t)=>e?void 0:t).filter(e=>void 0!==e)},getFaceIsolatedVertices:({vertices_coords:e,faces_vertices:t})=>{if(!e||!t)return[];let r=e.length,n=Array(r).fill(!1);return t.forEach(e=>{e.filter(e=>!n[e]).forEach(e=>{n[e]=!0,r-=1})}),n.map((e,t)=>e?void 0:t).filter(e=>void 0!==e)},getIsolatedVertices:nv,removeIsolatedVertices:n_,removeDuplicateVertices:ny});let nE=e=>{let t=-1;return e.filter(e=>void 0!==e).forEach(e=>e.forEach(e=>e.forEach(e=>{e>t&&(t=e)}))),t},nx=e=>{let t=-1;return e.forEach(e=>{e[0]>t&&(t=e[0]),e[1]>t&&(t=e[1])}),t},nO={edges:"edgeOrders",faces:"faceOrders"},nk=(e,t)=>Math.max(nE(r7(e,t).map(t=>e[t])),e[nO[t]]?nx(e[nO[t]]):-1)+1;nk.vertices=e=>nk(e,s),nk.edges=e=>nk(e,c),nk.faces=e=>nk(e,l);let nM=({vertices_vertices:e,vertices_sectors:t},r,n,o={})=>{let i={},a={vertices:[r],edges:[],angles:[]},s=r,c=n;for(;;){let r=e[c],n=(r.indexOf(s)+r.length-1)%r.length,l=r[n],u=`${c} ${l}`;if(i[u])return Object.assign(o,i),a.vertices.pop(),a;if(i[u]=!0,o[u])return;a.vertices.push(c),a.edges.push(u),t&&a.angles.push(t[c][n]),s=c,c=l}},nA=({vertices_vertices:e,vertices_sectors:t})=>{let r={vertices_vertices:e,vertices_sectors:t},n={};return e.map((e,t)=>e.map(e=>nM(r,t,e,n)).filter(e=>void 0!==e)).flat()},nj=e=>e.filter(e=>e.angles.map(e=>Math.PI-e).reduce((e,t)=>e+t,0)>0);var nP=Object.freeze({__proto__:null,counterClockwiseWalk:nM,planarVertexWalk:nA,filterWalkedBoundaryFace:nj});let nw=({vertices_coords:e},t,r)=>t.map(t=>e[t]).map(t=>rT.core.subtract(t,e[r])).map(e=>Math.atan2(e[1],e[0])).map(e=>e>-rT.core.EPSILON?e:e+2*Math.PI).map((e,t)=>({a:e,i:t})).sort((e,t)=>e.a-t.a).map(e=>e.i).map(e=>t[e]),nS=({vertices_coords:e},t,r)=>t.map(t=>({i:t,d:rT.core.dot(e[t],r)})).sort((e,t)=>e.d-t.d).map(e=>e.i);var n$=Object.freeze({__proto__:null,sortVerticesCounterClockwise:nw,sortVerticesAlongVector:nS});let nC=({edges_vertices:e})=>{let t=[];return e.forEach((e,r)=>e.forEach(e=>{void 0===t[e]&&(t[e]=[]),t[e].push(r)})),t},nL=({edges_vertices:e,vertices_vertices:t})=>{let r=nI({edges_vertices:e});return t.map((e,t)=>e.map(e=>r[`${t} ${e}`]))},nN=({vertices_coords:e,vertices_edges:t,edges_vertices:r})=>{t||(t=nC({edges_vertices:r}));let n=t.map((e,t)=>e.map(e=>r[e].filter(e=>e!==t)).reduce((e,t)=>e.concat(t),[]));return void 0===e?n:n.map((t,r)=>nw({vertices_coords:e},t,r))},nz=({vertices_coords:e,faces_vertices:t})=>{if(!t)return e.map(()=>[]);let r=void 0!==e?e.map(()=>[]):Array.from(Array(nk.vertices({faces_vertices:t}))).map(()=>[]);return t.forEach((e,t)=>{let n=[];e.forEach(e=>{n[e]=t}),n.forEach((e,t)=>r[t].push(e))}),r},nF=({vertices_coords:e,vertices_vertices:t,faces_vertices:r})=>{if(!r)return e.map(()=>[]);if(!t)return nz({vertices_coords:e,faces_vertices:r});let n=nB({faces_vertices:r});return t.map((e,t)=>e.map((e,r,n)=>[n[(r+1)%n.length],t,e].join(" "))).map(e=>e.map(e=>n[e]))},nI=({edges_vertices:e})=>{let t={};return e.map(e=>e.join(" ")).forEach((e,r)=>{t[e]=r}),e.map(e=>`${e[1]} ${e[0]}`).forEach((e,r)=>{t[e]=r}),t},nV=({edges_vertices:e})=>{let t={};return e.map(e=>e.join(" ")).forEach((e,r)=>{t[e]=r}),t},nB=({faces_vertices:e})=>{let t={};return e.forEach((e,r)=>e.map((t,r)=>[0,1,2].map(t=>(r+t)%e.length).map(t=>e[t]).join(" ")).forEach(e=>{t[e]=r})),t},nq=({vertices_coords:e,vertices_vertices:t,edges_vertices:r,edges_vector:n})=>{n||(n=nJ({vertices_coords:e,edges_vertices:r}));let o=nV({edges_vertices:r});return t.map((e,r)=>t[r].map(e=>{let t=o[`${r} ${e}`],i=o[`${e} ${r}`];return void 0!==t?n[t]:void 0!==i?rT.core.flip(n[i]):void 0}))},nT=({vertices_coords:e,vertices_vertices:t,edges_vertices:r,edges_vector:n})=>nq({vertices_coords:e,vertices_vertices:t,edges_vertices:r,edges_vector:n}).map(e=>1===e.length?[rT.core.TWO_PI]:rT.core.counterClockwiseSectors2(e)),nR=({edges_vertices:e,faces_edges:t})=>{let r=void 0!==e?e.map(()=>[]):Array.from(Array(nk.edges({faces_edges:t}))).map(()=>[]);return t.forEach((e,t)=>{let n=[];e.forEach(e=>{n[e]=t}),n.forEach((e,t)=>r[t].push(e))}),r},nU=({vertices_coords:e,edges_vertices:t,edges_vector:r,faces_vertices:n,faces_edges:o,faces_center:i})=>{if(!t)return nR({faces_edges:o});r||(r=nJ({vertices_coords:e,edges_vertices:t}));let a=t.map(t=>e[t[0]]);i||(i=n1({vertices_coords:e,faces_vertices:n}));let s=t.map(()=>[]);return o.forEach((e,t)=>{let r=[];e.forEach(e=>{r[e]=t}),r.forEach((e,t)=>s[t].push(e))}),s.forEach((e,t)=>{let n=e.map(e=>i[e]).map(e=>rT.core.subtract2(e,a[t])).map(e=>rT.core.cross2(e,r[t]));e.sort((e,t)=>n[e]-n[t])}),s},nD={M:-180,m:-180,V:180,v:180},nG=({edges_assignment:e})=>e.map(e=>nD[e]||0),nW=({edges_foldAngle:e})=>e.map(e=>0===e?"F":e<0?"M":"V"),nZ=({vertices_coords:e,edges_vertices:t})=>t.map(t=>t.map(t=>e[t])),nJ=({vertices_coords:e,edges_vertices:t})=>nZ({vertices_coords:e,edges_vertices:t}).map(e=>rT.core.subtract(e[1],e[0])),nH=({vertices_coords:e,edges_vertices:t,edges_coords:r},n=0)=>(r||(r=nZ({vertices_coords:e,edges_vertices:t})),r.map(e=>rT.core.boundingBox(e,n))),nY=({vertices_coords:e,vertices_vertices:t,vertices_edges:r,vertices_sectors:n,edges_vertices:o,edges_vector:i})=>{t||(t=nN({vertices_coords:e,edges_vertices:o,vertices_edges:r})),n||(n=nT({vertices_coords:e,vertices_vertices:t,edges_vertices:o,edges_vector:i}));let a=nI({edges_vertices:o});return nj(nA({vertices_vertices:t,vertices_sectors:n})).map(e=>({...e,edges:e.edges.map(e=>a[e])}))},nX=e=>e.faces_edges.map(t=>t.map(t=>e.edges_vertices[t]).map((e,t,r)=>{let n=r[(t+1)%r.length];return e[0]===n[0]||e[0]===n[1]?e[1]:e[0]})),nK=e=>{let t=nI(e);return e.faces_vertices.map(e=>e.map((e,t,r)=>[e,r[(t+1)%r.length]].join(" "))).map(e=>e.map(e=>t[e]))},nQ=({faces_vertices:e})=>{let t=e.map(()=>[]),r={};return e.map((e,t)=>e.map((n,o,i)=>{let a=i[(o+1)%e.length];a<n&&([n,a]=[a,n]);let s=`${n} ${a}`;void 0===r[s]&&(r[s]={}),r[s][t]=!0})),Object.values(r).map(e=>Object.keys(e)).filter(e=>e.length>1).forEach(e=>{t[e[0]].push(parseInt(e[1],10)),t[e[1]].push(parseInt(e[0],10))}),t},n0=({vertices_coords:e,faces_vertices:t},r)=>t.map(t=>t.map(t=>e[t])).map(e=>rT.core.makePolygonNonCollinear(e,r)),n1=({vertices_coords:e,faces_vertices:t})=>t.map(t=>t.map(t=>e[t])).map(e=>rT.core.centroid(e)),n2=({vertices_coords:e,faces_vertices:t})=>t.map(t=>t.map(t=>e[t]).reduce((e,t)=>[e[0]+t[0],e[1]+t[1]],[0,0]).map(e=>e/t.length));var n3=Object.freeze({__proto__:null,makeVerticesEdgesUnsorted:nC,makeVerticesEdges:nL,makeVerticesVertices:nN,makeVerticesFacesUnsorted:nz,makeVerticesFaces:nF,makeVerticesToEdgeBidirectional:nI,makeVerticesToEdge:nV,makeVerticesToFace:nB,makeVerticesVerticesVector:nq,makeVerticesSectors:nT,makeEdgesEdges:({edges_vertices:e,vertices_edges:t})=>e.map((e,r)=>{let n=t[e[0]].filter(e=>e!==r),o=t[e[1]].filter(e=>e!==r);return n.concat(o)}),makeEdgesFacesUnsorted:nR,makeEdgesFaces:nU,makeEdgesFoldAngle:nG,makeEdgesAssignment:nW,makeEdgesCoords:nZ,makeEdgesVector:nJ,makeEdgesLength:({vertices_coords:e,edges_vertices:t})=>nJ({vertices_coords:e,edges_vertices:t}).map(e=>rT.core.magnitude(e)),makeEdgesBoundingBox:nH,makePlanarFaces:nY,makeFacesVerticesFromEdges:nX,makeFacesEdgesFromVertices:nK,makeFacesFaces:nQ,makeFacesPolygon:n0,makeFacesPolygonQuick:({vertices_coords:e,faces_vertices:t})=>t.map(t=>t.map(t=>e[t])),makeFacesCenter:n1,makeFacesCenterQuick:n2});let n8=({edges_vertices:e})=>{let t=[];for(let r=0;r<e.length;r+=1)e[r][0]===e[r][1]&&t.push(r);return t},n5=({edges_vertices:e})=>{if(!e)return[];let t=[],r={};for(let n=0;n<e.length;n+=1){let o=`${e[n][0]} ${e[n][1]}`,i=`${e[n][1]} ${e[n][0]}`;void 0!==r[o]?t[n]=r[o]:(r[o]=n,r[i]=n)}return t},n4=(e,t,r)=>{let n={};r.forEach(e=>{n[e]=!0}),r7(e,t).forEach(t=>e[t].forEach((r,o)=>{for(let i=r.length-1;i>=0;i-=1)!0===n[r[i]]&&e[t][o].splice(i,1)}))},n6=(e,t)=>(t||(t=n8(e)),t.length&&n4(e,c,t),{map:nh(e,c,t),remove:t}),n9=(e,t)=>{t||(t=n5(e));let r=Object.keys(t).map(e=>parseInt(e,10)),n=nm(e,c,t);return r.length&&(e.vertices_edges||e.vertices_vertices||e.vertices_faces)&&(e.vertices_edges=nC(e),e.vertices_vertices=nN(e),e.vertices_edges=nL(e),e.vertices_faces=nF(e)),{map:n,remove:r}};var n7=Object.freeze({__proto__:null,getCircularEdges:n8,getDuplicateEdges:n5,removeCircularEdges:n6,removeDuplicateEdges:n9});let oe=(...e)=>{if(0===e.length)return[];let t=e[0].map((e,t)=>t);return e.forEach(e=>t.forEach((r,n)=>{t[n]=e[r]})),t},ot=(...e)=>{if(0===e.length)return[];let t=e[0].map((e,t)=>[t]);return e.forEach(e=>{t.forEach((r,n)=>r.forEach((r,o)=>{t[n][o]=e[r]})),t.forEach((e,r)=>{t[r]=e.reduce((e,t)=>e.concat(t),[]).filter(e=>void 0!==e)})}),t},or=(...e)=>{if(0===e.length)return[];let t=e[0].reduce((e,t)=>e.concat(t),[]).map((e,t)=>[t]);return e.forEach(e=>{let r=[];e.forEach((e,n)=>{typeof e===o?r[n]=t[e]:r[n]=e.map(e=>t[e]).reduce((e,t)=>e.concat(t),[])}),t=r}),t},on=e=>{let t=[];return e.forEach((e,r)=>{null!=e&&(typeof e===o&&(void 0!==t[e]?typeof t[e]===o?t[e]=[t[e],r]:t[e].push(r):t[e]=r),e.constructor===Array&&e.forEach(e=>{t[e]=r}))}),t},oo=e=>{let t=[];return e.forEach((e,r)=>{t[e]=r}),t};var oi=Object.freeze({__proto__:null,mergeSimpleNextmaps:oe,mergeNextmaps:ot,mergeSimpleBackmaps:(...e)=>{if(0===e.length)return[];let t=e[0].map((e,t)=>t);return e.forEach(e=>{t=e.map(e=>t[e])}),t},mergeBackmaps:or,invertMap:on,invertSimpleMap:oo});let oa=(e,t)=>{let r=ny(e,t),n=n6(e),o=n9(e),i=n_(e),a=oo(r.map),s=i.remove.map(e=>a[e]),c=oo(n.map),l=o.remove.map(e=>c[e]);return{vertices:{map:oe(r.map,i.map),remove:r.remove.concat(s)},edges:{map:oe(n.map,o.map),remove:n.remove.concat(l)}}},os=e=>{let t={vertices:na.vertices(e),edges:na.edges(e),faces:na.faces(e)},r={vertices:nk.vertices(e),edges:nk.edges(e),faces:nk.faces(e)};return{vertices:t.vertices>=r.vertices,edges:t.edges>=r.edges,faces:t.faces>=r.faces}},oc=(e,t)=>{let r=n5(e),n=n8(e),o=nv(e),i=ng(e,t),a=os(e);return{summary:0===r.length&&0===n.length&&0===o.length&&a.vertices&&a.edges&&a.faces?"valid":"problematic",vertices:{isolated:o,duplicate:i,references:a.vertices},edges:{circular:n,duplicate:r,references:a.edges},faces:{references:a.faces}}},ol=e=>{let t=e.edges_vertices.length;if(e.edges_assignment||(e.edges_assignment=[]),e.edges_foldAngle||(e.edges_foldAngle=[]),e.edges_assignment.length>e.edges_foldAngle.length)for(let t=e.edges_foldAngle.length;t<e.edges_assignment.length;t+=1)e.edges_foldAngle[t]=r2(e.edges_assignment[t]);if(e.edges_foldAngle.length>e.edges_assignment.length)for(let t=e.edges_assignment.length;t<e.edges_foldAngle.length;t+=1)e.edges_assignment[t]=r3(e.edges_foldAngle[t]);for(let r=e.edges_assignment.length;r<t;r+=1)e.edges_assignment[r]="U",e.edges_foldAngle[r]=0},ou=(e,t)=>{if(void 0!==t||e.faces_vertices||e.faces_edges||(t=!0),t&&e.vertices_coords){let t=nY(e);e.faces_vertices=t.map(e=>e.vertices),e.faces_edges=t.map(e=>e.edges);return}e.faces_vertices&&e.faces_edges||(e.faces_vertices&&!e.faces_edges?e.faces_edges=nK(e):e.faces_edges&&!e.faces_vertices?e.faces_vertices=nX(e):(e.faces_vertices=[],e.faces_edges=[]))},of=(e,t)=>("object"==typeof e&&e.edges_vertices&&(e.vertices_edges=nC(e),e.vertices_vertices=nN(e),e.vertices_edges=nL(e),ol(e),ou(e,t),e.vertices_faces=nF(e),e.edges_faces=nR(e),e.faces_faces=nQ(e)),e),op=(e,t=rT.core.EPSILON)=>nH(e,t).map(t=>e.vertices_coords.map(e=>e[0]>t.min[0]&&e[1]>t.min[1]&&e[0]<t.max[0]&&e[1]<t.max[1])),od=({vertices_coords:e,edges_vertices:t,edges_coords:r},n=rT.core.EPSILON)=>{let o=nH({vertices_coords:e,edges_vertices:t,edges_coords:r},n),i=t.map(()=>[]);for(let e=0;e<t.length-1;e+=1)for(let r=e+1;r<t.length;r+=1){let t=(o[e].max[0]<o[r].min[0]||o[r].max[0]<o[e].min[0])&&(o[e].max[1]<o[r].min[1]||o[r].max[1]<o[e].min[1]);i[e][r]=!t,i[r][e]=!t}for(let e=0;e<t.length;e+=1)i[e][e]=!0;return i};var oh=Object.freeze({__proto__:null,getEdgesVerticesOverlappingSpan:op,getEdgesEdgesOverlapingSpans:od});let om=({edges_vertices:e},t,r)=>(r.forEach(r=>{e[r][0]===t&&e[r][1]===t&&console.warn("removePlanarVertex circular edge")}),r.map(r=>e[r][0]===t?e[r][1]:e[r][0])),og=({vertices_coords:e,vertices_edges:t,edges_vertices:r},n,o=rT.core.EPSILON)=>{if(!e||!r)return!1;t||(t=nC({edges_vertices:r}));let i=t[n];if(void 0===i||2!==i.length)return!1;let a=om({edges_vertices:r},n,i),s=[a[0],n,a[1]].map(t=>e[t]);return rT.core.collinearBetween(...s,!1,o)},ov=({vertices_coords:e,edges_vertices:t,edges_coords:r},n=rT.core.EPSILON)=>{r||(r=t.map(t=>t.map(t=>e[t])));let o=op({vertices_coords:e,edges_vertices:t,edges_coords:r},n);for(let t=0;t<r.length;t+=1)for(let i=0;i<e.length;i+=1)o[t][i]&&(o[t][i]=rT.core.overlapLinePoint(rT.core.subtract(r[t][1],r[t][0]),r[t][0],e[i],rT.core.excludeS,n));return o.map(e=>e.map((e,t)=>e?t:void 0).filter(e=>void 0!==e))};var o_=Object.freeze({__proto__:null,isVertexCollinear:og,getVerticesEdgesOverlap:ov});let oy=({vertices_coords:e,edges_vertices:t},r,n,o=rT.core.EPSILON)=>{let i=rT.core.normalize2(r),a=t.map(t=>e[t[0]]),s=t.map(t=>t.map(t=>e[t])).map(e=>rT.core.subtract2(e[1],e[0])).map(e=>rT.core.parallel2(e,r,o));for(let e=0;e<t.length;e+=1){if(!s[e])continue;if(rT.core.fnEpsilonEqualVectors(a[e],n)){s[e]=!0;continue}let t=rT.core.normalize2(rT.core.subtract2(a[e],n)),r=Math.abs(rT.core.dot2(t,i));s[e]=Math.abs(1-r)<o}return s},ob=({vertices_coords:e,edges_vertices:t,edges_coords:r},n,o,i=rT.core.EPSILON)=>{r||(r=nZ({vertices_coords:e,edges_vertices:t}));let a=rT.core.boundingBox([n,o],i),s=rT.core.subtract2(o,n);return nH({vertices_coords:e,edges_vertices:t,edges_coords:r},i).map(e=>rT.core.overlapBoundingBoxes(a,e)).map((e,t)=>e?rT.core.intersectLineLine(s,n,rT.core.subtract2(r[t][1],r[t][0]),r[t][0],rT.core.includeS,rT.core.includeS,i):void 0)},oE=function({vertices_coords:e,edges_vertices:t,edges_vector:r,edges_origin:n},o=rT.core.EPSILON){r||(r=nJ({vertices_coords:e,edges_vertices:t})),n||(n=t.map(t=>e[t[0]]));let i=r.map(()=>[]),a=od({vertices_coords:e,edges_vertices:t},o);for(let e=0;e<r.length-1;e+=1)for(let t=e+1;t<r.length;t+=1){if(!0!==a[e][t]){i[e][t]=void 0;continue}i[e][t]=rT.core.intersectLineLine(r[e],n[e],r[t],n[t],rT.core.excludeS,rT.core.excludeS,o),i[t][e]=i[e][t]}return i},ox=({vertices_coords:e,edges_vertices:t,faces_vertices:r,faces_edges:n},o,i,a,s=rT.core.EPSILON)=>{let c=r[o].map(t=>e[t]).map(e=>rT.core.overlapLinePoint(i,a,e,()=>!0,s)).map((e,t)=>e?t:void 0).filter(e=>void 0!==e),l=c.map(e=>r[o][e]);if(c.concat(c.map(e=>e+r[o].length)).map((e,t,r)=>r[t+1]-e==1).reduce((e,t)=>e||t,!1))return;if(l.length>1)return{vertices:l,edges:[]};let u=n[o].map(r=>t[r].map(t=>e[t])).map(e=>rT.core.intersectLineLine(i,a,rT.core.subtract(e[1],e[0]),e[0],rT.core.includeL,rT.core.excludeS,s)).map((e,t)=>({coords:e,edge:n[o][t]})).filter(e=>void 0!==e.coords).filter(e=>!l.map(r=>t[e.edge].includes(r)).reduce((e,t)=>e||t,!1));return u.length+l.length===2?{vertices:l,edges:u}:void 0};var oO=Object.freeze({__proto__:null,makeEdgesLineParallelOverlap:oy,makeEdgesSegmentIntersection:ob,makeEdgesEdgesIntersection:oE,intersectConvexFaceLine:ox});let ok=(e,t=rT.core.EPSILON)=>{let r=e.edges_vertices.map(t=>t.map(t=>e.vertices_coords[t])),n=r.map(e=>rT.core.subtract(e[1],e[0])),o=r.map(e=>e[0]),i=oE({vertices_coords:e.vertices_coords,edges_vertices:e.edges_vertices,edges_vector:n,edges_origin:o},1e-6),a=ov({vertices_coords:e.vertices_coords,edges_vertices:e.edges_vertices,edges_coords:r},t);if(0===i.flat().filter(e=>void 0!==e).length&&0===a.flat().filter(e=>void 0!==e).length)return;let s={vertices:e.vertices_coords.length};i.forEach(t=>t.filter(e=>void 0!==e).filter(e=>2===e.length).forEach(t=>{let r=e.vertices_coords.length;e.vertices_coords.push([...t]),t.splice(0,2),t.push(r)})),i.forEach((e,t)=>{e.forEach((e,r)=>{e&&(i[t][r]=e[0])})});let c=i.map(e=>e.filter(e=>void 0!==e));e.edges_vertices.forEach((e,t)=>e.push(...c[t],...a[t])),e.edges_vertices.forEach((t,r)=>{e.edges_vertices[r]=nS({vertices_coords:e.vertices_coords},t,n[r])});let l=e.edges_vertices.map((e,t)=>Array(e.length-1).fill(t)).flat();if(e.edges_vertices=e.edges_vertices.map(e=>Array.from(Array(e.length-1)).map((t,r,n)=>[e[r],e[r+1]])).flat(),e.edges_assignment&&e.edges_foldAngle&&e.edges_foldAngle.length>e.edges_assignment.length)for(let t=e.edges_assignment.length;t<e.edges_foldAngle.length;t+=1)e.edges_assignment[t]=r3(e.edges_foldAngle[t]);return e.edges_assignment&&(e.edges_assignment=l.map(t=>e.edges_assignment[t]||"U")),e.edges_foldAngle&&(e.edges_foldAngle=l.map(t=>e.edges_foldAngle[t]).map((t,r)=>void 0===t?r2(e.edges_assignment[r]):t)),{vertices:{new:Array.from(Array(e.vertices_coords.length-s.vertices)).map((e,t)=>s.vertices+t)},edges:{backmap:l}}},oM=[f,p,h,m],oA=(e,t=rT.core.EPSILON)=>{let r;e.vertices_coords=e.vertices_coords.map(e=>e.slice(0,2)),[s,c,l].map(t=>r9(e,t)).flat().filter(e=>!oM.includes(e)).forEach(t=>delete e[t]);let n={vertices:{},edges:{}};for(r=0;r<20;r+=1){let r=ny(e,t/2),o=n9(e),i=n6(e),a=ok(e,t);if(void 0===a){n.vertices.map=void 0===n.vertices.map?r.map:ot(n.vertices.map,r.map),n.edges.map=void 0===n.edges.map?ot(o.map,i.map):ot(n.edges.map,o.map,i.map);break}let s=on(a.edges.backmap),c=ot(o.map,i.map,s);n.vertices.map=void 0===n.vertices.map?r.map:ot(n.vertices.map,r.map),n.edges.map=void 0===n.edges.map?c:ot(n.edges.map,c)}return 20===r&&console.warn("fragment reached max iterations"),n},oj=({edges_vertices:e,edges_assignment:t})=>ns(e.filter((e,r)=>"B"===t[r]||"b"===t[r]).flat()),oP=()=>({vertices:[],edges:[]}),ow=({vertices_edges:e,edges_vertices:t,edges_assignment:r})=>{if(void 0===r)return oP();e||(e=nC({edges_vertices:t}));let n=r.map(e=>"B"===e||"b"===e),o=[],i=[],a=-1;for(let e=0;e<n.length;e+=1)if(n[e]){a=e;break}if(-1===a)return oP();n[a]=!1,o.push(a),i.push(t[a][0]);let s=t[a][1];for(;i[0]!==s;){if(i.push(s),void 0===(a=e[s].filter(e=>n[e]).shift()))return oP();t[a][0]===s?[,s]=t[a]:[s]=t[a],n[a]=!1,o.push(a)}return{vertices:i,edges:o}};var oS=Object.freeze({__proto__:null,getBoundingBox:({vertices_coords:e},t)=>rT.core.boundingBox(e,t),getBoundaryVertices:oj,getBoundary:ow,getPlanarBoundary:({vertices_coords:e,vertices_edges:t,vertices_vertices:r,edges_vertices:n})=>{r||(r=nN({vertices_coords:e,vertices_edges:t,edges_vertices:n}));let o=nI({edges_vertices:n}),i=[],a=[],s={vertices:a,edges:i},c=-1/0,l=-1;if(e.forEach((e,t)=>{e[0]>c&&(c=e[0],l=t)}),-1===l)return s;a.push(l);let u=e[l],f=r[l],p=f.map(t=>e[t]).map(e=>[e[0]-u[0],e[1]-u[1]]).map(e=>Math.atan2(e[1],e[0])).map(e=>e<0?e+2*Math.PI:e).map((e,t)=>({a:e,i:t})).sort((e,t)=>e.a-t.a).shift().i,d=f[p],h=o[l<d?`${l} ${d}`:`${d} ${l}`];i.push(h);let m=l,g=d,v=0;for(;v<1e4;){let e=r[g],t=(e.indexOf(m)+1)%e.length,n=e[t],c=o[g<n?`${g} ${n}`:`${n} ${g}`];if(c===i[0])return s;a.push(g),i.push(c),m=g,g=n,v+=1}return console.warn("calculate boundary potentially entered infinite loop"),s}});let o$=function(e,t){return r4(e,"coords").forEach(r=>{e[r]=e[r].map(e=>rT.core.resize(3,e)).map(e=>rT.core.multiplyMatrix3Vector3(t,e))}),r4(e,"matrix").forEach(r=>{e[r]=e[r].map(e=>rT.core.multiplyMatrices3(e,t))}),e};var oC={scale:(e,t,...r)=>{let n=rT.core.getVector(...r),o=rT.core.resize(3,n);return o$(e,rT.core.makeMatrix3Scale(t,o))},translate:(e,...t)=>{let r=rT.core.getVector(...t),n=rT.core.resize(3,r);return o$(e,rT.core.makeMatrix3Translate(...n))},rotateZ:(e,t,...r)=>{let n=rT.core.getVector(...r),o=rT.core.resize(3,n);return o$(e,rT.core.makeMatrix3RotateZ(t,...o))},transform:o$};let oL=(e,t)=>{let r={};t.forEach(e=>{r[e]=!0});let n=e.map(e=>!!r[e]),o=[],i=n.indexOf(!1),a={};for(let t=i+1;t<n.length;t+=1)n[t]&&!a[e[t]]&&(o.push(e[t]),a[e[t]]=!0);for(let t=0;t<i;t+=1)n[t]&&!a[e[t]]&&(o.push(e[t]),a[e[t]]=!0);return o},oN=({faces_vertices:e,faces_faces:t},r=0)=>{if(t||(t=nQ({faces_vertices:e})),0===t.length)return[];let n=[[{face:r}]],o={};o[r]=!0;do{let r=n[n.length-1].map(e=>t[e.face].map(t=>({face:t,parent:e.face}))).reduce((e,t)=>e.concat(t),[]),i={};r.forEach((e,t)=>{o[e.face]&&(i[t]=!0),o[e.face]=!0});let a=r.filter((e,t)=>!i[t]);a.map(t=>oL(e[t.face],e[t.parent])).forEach((e,t)=>{let r=e.slice(0,2);a[t].edge_vertices=r}),n[n.length]=a}while(n[n.length-1].length>0);return n.length>0&&0===n[n.length-1].length&&n.pop(),n};var oz=Object.freeze({__proto__:null,getFaceFaceSharedVertices:oL,makeFaceSpanningTree:oN});let oF=({vertices_coords:e,vertices_faces:t,faces_vertices:r},n)=>{t||(t=nF({faces_vertices:r}));let o=t.map(e=>e.filter(e=>null!=e).shift()).map(e=>void 0===e?rT.core.identity2x3:n[e]);return e.map((e,t)=>rT.core.multiplyMatrix2Vector2(o[t],e))},oI={U:!0,u:!0},oV=({vertices_coords:e,edges_vertices:t,edges_foldAngle:r,edges_assignment:n,faces_vertices:o,faces_faces:i},a=0)=>{!n&&r&&(n=nW({edges_foldAngle:r})),r||(r=n?nG({edges_assignment:n}):Array(t.length).fill(0));let s=nI({edges_vertices:t}),c=o.map(()=>rT.core.identity3x4);return oN({faces_vertices:o,faces_faces:i},a).slice(1).forEach(t=>t.forEach(t=>{let o=t.edge_vertices.map(t=>e[t]),i=s[t.edge_vertices.join(" ")],a=oI[n[i]]?Math.PI:r[i]*Math.PI/180,l=rT.core.makeMatrix3Rotate(a,rT.core.subtract(...rT.core.resizeUp(o[1],o[0])),o[0]);c[t.face]=rT.core.multiplyMatrices3(c[t.parent],l)})),c},oB={M:!0,m:!0,V:!0,v:!0,U:!0,u:!0,F:!1,f:!1,B:!1,b:!1},oq=({edges_vertices:e,edges_foldAngle:t,edges_assignment:r})=>void 0===r?void 0===t?e.map(()=>!0):t.map(e=>e<-rT.core.EPSILON||e>rT.core.EPSILON):r.map(e=>oB[e]),oT=({vertices_coords:e,edges_vertices:t,edges_foldAngle:r,edges_assignment:n,faces_vertices:o,faces_faces:i},a=0)=>{r||(r=n?nG({edges_assignment:n}):Array(t.length).fill(0));let s=oq({edges_vertices:t,edges_foldAngle:r,edges_assignment:n}),c=nI({edges_vertices:t}),l=o.map(()=>rT.core.identity2x3);return oN({faces_vertices:o,faces_faces:i},a).slice(1).forEach(t=>t.forEach(t=>{let r=t.edge_vertices.map(t=>e[t]),n=c[t.edge_vertices.join(" ")],o=rT.core.subtract2(r[1],r[0]),i=r[0],a=s[n]?rT.core.makeMatrix2Reflect(o,i):rT.core.identity2x3;l[t.face]=rT.core.multiplyMatrices2(l[t.parent],a)})),l};var oR=Object.freeze({__proto__:null,multiplyVerticesFacesMatrix2:oF,makeFacesMatrix:oV,makeEdgesIsFolded:oq,makeFacesMatrix2:oT});let oU=({vertices_coords:e,vertices_faces:t,edges_vertices:r,edges_foldAngle:n,edges_assignment:o,faces_vertices:i,faces_faces:a,faces_matrix:s},c)=>{s=oV({vertices_coords:e,edges_vertices:r,edges_foldAngle:n,edges_assignment:o,faces_vertices:i,faces_faces:a},c),t||(t=nF({faces_vertices:i}));let l=t.map(e=>e.filter(e=>null!=e).shift()).map(e=>void 0===e?rT.core.identity3x4:s[e]);return e.map(e=>rT.core.resize(3,e)).map((e,t)=>rT.core.multiplyMatrix3Vector3(l[t],e))},oD=({vertices_coords:e,edges_vertices:t,edges_foldAngle:r,edges_assignment:n,faces_vertices:o,faces_faces:i},a=0)=>{let s=oq({edges_vertices:t,edges_foldAngle:r,edges_assignment:n}),c=[];o[a].forEach(t=>{c[t]=[...e[t]]});let l=[];l[a]=!1;let u=nI({edges_vertices:t});return oN({faces_vertices:o,faces_faces:i},a).slice(1).forEach(r=>r.forEach(r=>{let n=u[r.edge_vertices.join(" ")],i=t[n].map(e=>c[e]);if(void 0===i[0]||void 0===i[1])return;let a=t[n].map(t=>e[t]),f=a[0],p=rT.core.normalize2(rT.core.subtract2(a[1],a[0])),d=rT.core.rotate90(p);l[r.face]=s[n]?!l[r.parent]:l[r.parent];let h=rT.core.normalize2(rT.core.subtract2(i[1],i[0])),m=i[0],g=l[r.face]?rT.core.rotate270(h):rT.core.rotate90(h);o[r.face].filter(e=>void 0===c[e]).forEach(t=>{let r=rT.core.subtract2(e[t],f),n=rT.core.dot(r,d),o=rT.core.dot(r,p),i=rT.core.scale2(h,o),a=rT.core.scale2(g,n),s=rT.core.add2(rT.core.add2(m,i),a);c[t]=s})})),c};var oG=Object.freeze({__proto__:null,makeVerticesCoordsFolded:oU,makeVerticesCoordsFlatFolded:oD});let oW=e=>e.map(e=>e[0]*e[3]-e[1]*e[2]).map(e=>e>=0),oZ=({vertices_coords:e,faces_vertices:t})=>t.map(t=>t.map(t=>e[t]).map((e,t,r)=>[e,r[(t+1)%r.length]]).map(e=>(e[1][0]-e[0][0])*(e[1][1]+e[0][1])).reduce((e,t)=>e+t,0)).map(e=>e<0);var oJ=Object.freeze({__proto__:null,makeFacesWindingFromMatrix:e=>e.map(e=>e[0]*e[4]-e[1]*e[3]).map(e=>e>=0),makeFacesWindingFromMatrix2:oW,makeFacesWinding:oZ});let oH=e=>{let t=e.faces_vertices.map(t=>t.map(t=>e.vertices_coords[t])).reduce((e,t)=>e.concat(t),[]),r=0,n=e.faces_vertices.map(e=>e.map(e=>r++));return{vertices_coords:JSON.parse(JSON.stringify(t)),faces_vertices:n}},oY=({vertices_coords:e,faces_vertices:t},r=.333)=>{let n=oH({vertices_coords:e,faces_vertices:t}),o=oZ(n),i=n.faces_vertices.map(e=>e.map(e=>n.vertices_coords[e])).map(e=>e.map((e,t,r)=>rT.core.subtract2(e,r[(t+1)%r.length]))),a=n2({vertices_coords:e,faces_vertices:t}),s=t.map(t=>t.map(t=>e[t])).map((e,t)=>e.map(e=>rT.core.distance2(e,a[t])));console.log("faces_point_distances",s);let c=i.map((e,t)=>e.map((e,t,r)=>[e,rT.core.flip(r[(t-1+r.length)%r.length])]).map(e=>o[t]?rT.core.counterClockwiseBisect2(...e):rT.core.clockwiseBisect2(...e))).map((e,t)=>e.map((e,r)=>rT.core.scale(e,s[t][r])));return n.faces_vertices.forEach((e,t)=>e.forEach((e,o)=>{n.vertices_coords[e]=rT.core.add2(n.vertices_coords[e],rT.core.scale2(c[t][o],-r))})),n};var oX=Object.freeze({__proto__:null,explodeFaces:oH,explodeShrinkFaces:oY});let oK=({vertices_coords:e},t)=>{if(!e)return;let r=rT.core.resize(e[0].length,t),n=e.map((e,t)=>({d:rT.core.distance(r,e),i:t})).sort((e,t)=>e.d-t.d).shift();return n?n.i:void 0},oQ=({vertices_coords:e,edges_vertices:t},r)=>{if(!e||!t)return;let n=t.map(t=>t.map(t=>e[t])).map(e=>rT.core.nearestPointOnLine(rT.core.subtract(e[1],e[0]),e[0],r,rT.core.segmentLimiter));return rT.core.smallestComparisonSearch(r,n,rT.core.distance)},o0=({vertices_coords:e,faces_vertices:t},r)=>{if(!e||!t)return;let n=t.map((t,r)=>({face:t.map(t=>e[t]),i:r})).filter(e=>rT.core.overlapConvexPolygonPoint(e.face,r)).shift();return void 0===n?void 0:n.i},o1=(e,t)=>{let r=o0(e,t);if(void 0!==r)return r;if(e.edges_faces){let r=oQ(e,t),n=e.edges_faces[r];if(1===n.length)return n[0];if(n.length>1){let r=n2({vertices_coords:e.vertices_coords,faces_vertices:n.map(t=>e.faces_vertices[t])}).map(e=>rT.core.distance(e,t)),o=0;for(let e=0;e<r.length;e+=1)r[e]<r[o]&&(o=e);return n[o]}}};var o2=Object.freeze({__proto__:null,nearestVertex:oK,nearestEdge:oQ,faceContainingPoint:o0,nearestFace:o1});let o3=function(e){let t,r;if(typeof e!==i||!e)return e;if("[object Array]"===Object.prototype.toString.apply(e)){for(r=0,t=[];r<e.length;r+=1)t[r]=o3(e[r]);return t}for(r in t={},e)e.hasOwnProperty(r)&&(t[r]=o3(e[r]));return t},o8=(e,t,r=rT.core.EPSILON)=>{e.vertices_coords||(e.vertices_coords=[]),"number"==typeof t[0]&&(t=[t]);let n=t.map(t=>e.vertices_coords.map(e=>rT.core.distance(e,t)<r).map((e,t)=>e?t:void 0).filter(e=>void 0!==e).shift()),o=e.vertices_coords.length,i=t.filter((e,t)=>void 0===n[t]);return e.vertices_coords.push(...i),n.map(e=>void 0===e?o++:e)},o5=({vertices_faces:e,edges_vertices:t,edges_faces:r,faces_edges:n,faces_vertices:o},i)=>{if(r&&r[i])return r[i];let a=t[i];if(void 0!==e){let t=[];for(let r=0;r<e[a[0]].length;r+=1)for(let n=0;n<e[a[1]].length;n+=1)if(e[a[0]][r]===e[a[1]][n]){if(void 0===e[a[0]][r])continue;t.push(e[a[0]][r])}return t}if(n){let e=[];for(let t=0;t<n.length;t+=1)for(let r=0;r<n[t].length;r+=1)n[t][r]===i&&e.push(t);return e}o&&console.warn("todo: findAdjacentFacesToEdge")},o4=(e,t,r)=>{let n=e.edges_vertices[t],o=[{edges_vertices:[n[0],r]},{edges_vertices:[r,n[1]]}];if(o.forEach(r=>[h,m].filter(r=>e[r]&&void 0!==e[r][t]).forEach(n=>{r[n]=e[n][t]})),e.vertices_coords&&(e.edges_length||e.edges_vector)){let t=o.map(t=>t.edges_vertices.map(t=>e.vertices_coords[t]));e.edges_vector&&o.forEach((e,r)=>{e.edges_vector=rT.core.subtract(t[r][1],t[r][0])}),e.edges_length&&o.forEach((e,r)=>{e.edges_length=rT.core.distance2(...t[r])})}return o},o6=({vertices_vertices:e},t,r)=>{e&&(e[t]=[...r],r.forEach((r,n,o)=>{let i=o[(n+1)%o.length],a=e[r].indexOf(i);e[r][a]=t}))},o9=({vertices_coords:e,vertices_vertices:t,vertices_sectors:r},n)=>{r&&(r[n]=1===t[n].length?[rT.core.TWO_PI]:rT.core.counterClockwiseSectors2(t[n].map(t=>rT.core.subtract2(e[t],e[n]))))},o7=({vertices_edges:e},t,r,n,o)=>{e&&(e[r]=[...o],n.map(r=>e[r].indexOf(t)).forEach((t,r)=>{e[n[r]][t]=o[r]}))},ie=({vertices_faces:e},t,r)=>{e&&(e[t]=[...r])},it=({edges_faces:e},t,r)=>{e&&t.forEach(t=>{e[t]=[...r]})},ir=({faces_vertices:e},t,r,n)=>{e&&n.map(t=>e[t]).forEach(e=>e.map((e,t,n)=>{let o=(t+1)%n.length;return e===r[0]&&n[o]===r[1]||e===r[1]&&n[o]===r[0]?o:void 0}).filter(e=>void 0!==e).sort((e,t)=>t-e).forEach(r=>e.splice(r,0,t)))},io=({edges_vertices:e,faces_vertices:t,faces_edges:r},n)=>{let o=nI({edges_vertices:e});n.map(e=>t[e].map((e,t,r)=>[e,r[(t+1)%r.length]]).map(e=>o[e.join(" ")])).forEach((e,t)=>{r[n[t]]=e})},ii=(e,t,r,n=rT.core.EPSILON)=>{if(e.edges_vertices.length<t)return{};let o=e.edges_vertices[t];r||(r=rT.core.midpoint(...o));let i=o.map(t=>e.vertices_coords[t]).map(e=>rT.core.distance(e,r)<n);if(i[0])return{vertex:o[0],edges:{}};if(i[1])return{vertex:o[1],edges:{}};let a=e.vertices_coords.length;e.vertices_coords[a]=r;let s=[0,1].map(t=>t+e.edges_vertices.length);o4(e,t,a).forEach((t,r)=>Object.keys(t).forEach(n=>{e[n][s[r]]=t[n]})),o6(e,a,o),o9(e,a),o7(e,t,a,o,s);let l=o5(e,t);l&&(ie(e,a,l),it(e,s,l),ir(e,a,o,l),io(e,l));let u=nh(e,c,[t]);return s.forEach((e,t)=>{s[t]=u[s[t]]}),u.splice(-2),u[t]=s,{vertex:a,edges:{map:u,new:s,remove:t}}},ia=({vertices_coords:e},t,r)=>{let n=t.map(t=>e[t]).reverse();return{edges_vertices:[...t],edges_foldAngle:0,edges_assignment:"U",edges_length:rT.core.distance2(...n),edges_vector:rT.core.subtract(...n),edges_faces:[r,r]}},is=(e,t,r)=>{let n=e.edges_vertices.length,o=ia(e,r,t);return Object.keys(o).filter(t=>void 0!==e[t]).forEach(t=>{e[t][n]=o[t]}),n},ic=({edges_vertices:e,faces_vertices:t,faces_edges:r},n,o)=>{let i=o.map(e=>t[n].indexOf(e)),a=nl(t[n],i).map(e=>({faces_vertices:e}));if(r){let t=nI({edges_vertices:e});a.map(e=>e.faces_vertices.map((e,t,r)=>`${e} ${r[(t+1)%r.length]}`).map(e=>t[e])).forEach((e,t)=>{a[t].faces_edges=e})}return a},il=(e,t,r)=>{let n=[0,1].map(t=>e.faces_vertices.length+t);return ic(e,t,r).forEach((t,r)=>Object.keys(t).forEach(o=>{e[o][n[r]]=t[o]})),n},iu=(e,{vertices:t,edges:r})=>{let n,o,i=r.map(t=>{let r=ii(e,n?n[t.edge]:t.edge,t.coords);return n=n?ot(n,r.edges.map):r.edges.map,r});return t.push(...i.map(e=>e.vertex)),i.forEach(e=>{e.edges.remove=o?o[e.edges.remove]:e.edges.remove;let t=oo(e.edges.map);o=o?or(o,t):t}),{vertices:t,edges:{map:n,remove:i.map(e=>e.edges.remove)}}},ip="splitFace potentially given a non-convex face",id=({vertices_coords:e,vertices_vertices:t,edges_vertices:r},n)=>{let o=r[n][0],i=r[n][1];t[o]=nw({vertices_coords:e},t[o].concat(i),o),t[i]=nw({vertices_coords:e},t[i].concat(o),i)},ih=({edges_vertices:e,vertices_edges:t,vertices_vertices:r},n)=>{if(!t||!r)return;let o=e[n];o.map(e=>r[e]).map((e,t)=>e.indexOf(o[(t+1)%o.length])).forEach((e,r)=>t[o[r]].splice(e,0,n))},im=(e,t,r)=>{let n={};r.forEach(t=>e.faces_vertices[t].forEach(e=>{n[e]||(n[e]=[]),n[e].push(t)})),e.faces_vertices[t].forEach(r=>{let o=e.vertices_faces[r].indexOf(t),i=n[r];if(-1===o||!i)return void console.warn(ip);e.vertices_faces[r].splice(o,1,...i)})},ig=(e,t,r,n)=>{let o={};n.forEach(t=>e.faces_edges[t].forEach(e=>{o[e]||(o[e]=[]),o[e].push(t)})),[...e.faces_edges[t],r].forEach(r=>{let n=o[r],i=[];for(let n=0;n<e.edges_faces[r].length;n+=1)e.edges_faces[r][n]===t&&i.push(n);if(0===i.length||!n)return void console.warn(ip);i.reverse().forEach(t=>e.edges_faces[r].splice(t,1));let a=i[i.length-1];e.edges_faces[r].splice(a,0,...n)})},iv=({faces_vertices:e,faces_faces:t},r,n)=>{let o=t[r],i=n.map(t=>e[t]),a=o.map(t=>{let r=e[t],o=[0,0];for(let e=0;e<i.length;e+=1){let t=0;for(let n=0;n<r.length;n+=1)-1!==i[e].indexOf(r[n])&&(t+=1);o[e]=t}return o[0]>=2?n[0]:o[1]>=2?n[1]:void 0});n.forEach((e,r,o)=>{t[e]=[o[(r+1)%n.length]]}),o.forEach((e,n)=>{for(let o=0;o<t[e].length;o+=1)t[e][o]===r&&(t[e][o]=a[n],t[a[n]].push(e))})},i_=(e,t,r,n,o)=>{let i=ox(e,t,r,n,o);if(void 0===i)return;let a=iu(e,i);a.edges.new=is(e,t,a.vertices),id(e,a.edges.new),ih(e,a.edges.new);let s=il(e,t,a.vertices);im(e,t,s),ig(e,t,a.edges.new,s),iv(e,t,s);let c=nh(e,l,[t]);return s.forEach((e,t)=>{s[t]=c[s[t]]}),c.splice(-2),c[t]=s,a.faces={map:c,new:s,remove:t},a},iy={};iy.prototype=Object.create(Object.prototype),iy.prototype.constructor=iy;let ib=Object.assign({clean:oa,validate:oc,populate:of,fragment:oA,addVertices:o8,splitEdge:ii,faceSpanningTree:oN,explodeFaces:oH,explodeShrinkFaces:oY},oC);Object.keys(ib).forEach(e=>{iy.prototype[e]=function(){return ib[e](this,...arguments)}}),iy.prototype.splitFace=function(e,...t){let r=rT.core.getLine(...t);return i_(this,e,r.vector,r.origin)},iy.prototype.copy=function(){return Object.assign(Object.create(Object.getPrototypeOf(this)),o3(this))},iy.prototype.clear=function(){return rJ.forEach(e=>delete this[e]),rH.forEach(e=>delete this[e]),delete this.file_frames,this},iy.prototype.boundingBox=function(){return rT.rect.fromPoints(this.vertices_coords)},iy.prototype.unitize=function(){if(!this.vertices_coords)return this;let e=rT.core.bounding_box(this.vertices_coords),t=Math.max(...e.span),r=0===t?1:1/t,n=e.min;return this.vertices_coords=this.vertices_coords.map(e=>rT.core.subtract(e,n)).map(e=>e.map(e=>e*r)),this},iy.prototype.folded=function(){let e=this.faces_matrix2?oF(this,this.faces_matrix2):oU(this,...arguments);return Object.assign(Object.create(Object.getPrototypeOf(this)),Object.assign(o3(this),{vertices_coords:e,frame_classes:[b]}))},iy.prototype.flatFolded=function(){let e=this.faces_matrix2?oF(this,this.faces_matrix2):oD(this,...arguments);return Object.assign(Object.create(Object.getPrototypeOf(this)),Object.assign(o3(this),{vertices_coords:e,frame_classes:[b]}))};let iE=function(e){let t=Object.create(null);return Object.keys(e).forEach(r=>{t[r.substring(this.length+1)]=e[r]}),t},ix=function(e){return ne(this,e).map(iE.bind(e)).map(rW[e].bind(this))};[s,c,l].forEach(e=>Object.defineProperty(iy.prototype,e,{enumerable:!0,get:function(){return ix.call(this,e)}})),Object.defineProperty(iy.prototype,v,{enumerable:!0,get:function(){let e=ow(this),t=e.vertices.map(e=>this.vertices_coords[e]);return Object.keys(e).forEach(r=>{t[r]=e[r]}),Object.assign(t,e)}});let iO={vertices:oK,edges:oQ,faces:o1};iy.prototype.nearest=function(){let e=rT.core.getVector(arguments),t=Object.create(null),r={};return[s,c,l].forEach(n=>{Object.defineProperty(t,rQ[n],{enumerable:!0,get:()=>(void 0!==r[n]||(r[n]=iO[n](this,e)),r[n])}),r6(this,n).forEach(e=>Object.defineProperty(t,e,{enumerable:!0,get:()=>this[e][t[rQ[n]]]}))}),t};var ik=iy.prototype;let iM=function(e,t){let r=ow(e).vertices.map(t=>e.vertices_coords[t]),n=t.vector?t.vector:rT.core.subtract2(t[1],t[0]),o=t.origin?t.origin:t[0],i=t.domain_function?t.domain_function:rT.core.includeL;return rT.core.clipLineConvexPolygon(r,n,o,rT.core.include,i)},iA=(e,t)=>{e.edges_vertices||(e.edges_vertices=[]),"number"==typeof t[0]&&(t=[t]);let r=t.map((t,r)=>e.edges_vertices.length+r);e.edges_vertices.push(...t);let n=n9(e).map;return r.map(e=>n[e])},ij=(e,t,r)=>{let n=Array.from(Array(t.length-1)).map((e,r)=>[t[r],t[r+1]]),o=n.map(e=>e.join(" ")).map(e=>void 0===r[e]),i=n.filter((e,t)=>o[t]),a=Array.from(Array(i.length)).map((t,r)=>e.edges_vertices.length+r);a.forEach((t,r)=>{e.edges_vertices[t]=i[r]}),e.edges_assignment&&a.forEach(t=>{e.edges_assignment[t]="U"}),e.edges_foldAngle&&a.forEach(t=>{e.edges_foldAngle[t]=0});for(let r=0;r<t.length;r+=1){let n=t[r],i=[o[r-1]?t[r-1]:void 0,o[r]?t[r+1]:void 0].filter(e=>void 0!==e),a=(e.vertices_vertices[n]?e.vertices_vertices[n]:[]).concat(i);e.vertices_vertices[n]=nw(e,a,t[r])}let s=nI(e);for(let r=0;r<t.length;r+=1){let n=t[r];e.vertices_edges[n]=e.vertices_vertices[n].map(e=>s[`${n} ${e}`])}return t.map(t=>1===e.vertices_vertices[t].length?[rT.core.TWO_PI]:rT.core.counterClockwiseSectors2(e.vertices_vertices[t].map(r=>rT.core.subtract2(e.vertices_coords[r],e.vertices_coords[t])))).forEach((r,n)=>{e.vertices_sectors[t[n]]=r}),a},iP=(e,t,r,n=rT.core.EPSILON)=>{e.vertices_sectors||(e.vertices_sectors=nT(e));let o=[t,r].map(e=>[e[0],e[1]]),i=rT.core.subtract2(o[1],o[0]),a=ob(e,o[0],o[1],n),s=a.map((e,t)=>void 0===e?void 0:t).filter(e=>void 0!==e).sort((e,t)=>e-t),c={};s.forEach(t=>e.edges_faces[t].forEach(e=>{c[e]=!0}));let l=Object.keys(c).map(e=>parseInt(e,10)).sort((e,t)=>e-t),u=s.reverse().map(t=>ii(e,t,a[t],n)).map(e=>e.vertex),f=o8(e,o,n),p={};u.forEach(e=>{p[e]=!0}),f.forEach(e=>{p[e]=!0});let d=nS(e,Object.keys(p).map(e=>parseInt(e,10)),i),h=nI(e),m=ij(e,d,h);m.forEach(t=>{let r=e.edges_vertices[t];h[`${r[0]} ${r[1]}`]=t,h[`${r[1]} ${r[0]}`]=t});let g=d.map(t=>e.vertices_vertices[t].map(e=>[[e,t],[t,e]])).reduce((e,t)=>e.concat(t),[]).reduce((e,t)=>e.concat(t),[]),v={},_=nj(g.map(t=>nM(e,t[0],t[1],v)).filter(e=>void 0!==e));nh(e,"faces",l);let y=_.map((t,r)=>e.faces_vertices.length+r);return e.faces_vertices&&y.forEach((t,r)=>{e.faces_vertices[t]=_[r].vertices}),e.faces_edges&&y.forEach((t,r)=>{e.faces_edges[t]=_[r].edges.map(e=>h[e])}),e.faces_angles&&y.forEach((t,r)=>{e.faces_angles[t]=_[r].faces_angles}),e.vertices_faces&&(e.vertices_faces=nF(e)),e.edges_faces&&(e.edges_faces=nR(e)),e.faces_faces&&(e.faces_faces=nQ(e)),(e.vertices_coords.length!==e.vertices_vertices.length||e.vertices_coords.length!==e.vertices_edges.length||e.vertices_coords.length!==e.vertices_faces.length)&&console.warn("vertices mismatch",JSON.parse(JSON.stringify(e))),(e.edges_vertices.length!==e.edges_faces.length||e.edges_vertices.length!==e.edges_assignment.length)&&console.warn("edges mismatch",JSON.parse(JSON.stringify(e))),(e.faces_vertices.length!==e.faces_edges.length||e.faces_vertices.length!==e.faces_faces.length)&&console.warn("faces mismatch",JSON.parse(JSON.stringify(e))),m},iw=({vertices_vertices:e},t)=>{let r=[t[1],t[0]];t.map((t,n)=>e[t].indexOf(r[n])).forEach((r,n)=>e[t[n]].splice(r,1))},iS=({vertices_edges:e},t,r)=>{r.map((r,n)=>e[r].indexOf(t)).forEach((t,n)=>e[r[n]].splice(t,1))},i$=(e,t,r,n)=>{let o=t.map(t=>e.faces_edges[t].indexOf(r)),i=[];t.forEach((t,r)=>e.faces_vertices[t].forEach((e,t,o)=>{let a=o[(t+1)%o.length];(e===n[0]&&a===n[1]||e===n[1]&&a===n[0])&&(i[r]=t)})),(void 0===i[0]||void 0===i[1])&&console.warn("removePlanarEdge error joining faces");let a=t.map(t=>e.faces_edges[t].length),s=t.map(t=>e.faces_vertices[t].length),c=a.map(e=>e-1),l=s.map(e=>e-1),u=o.map((e,t)=>(e+1)%a[t]),f=i.map((e,t)=>(e+1)%s[t]),p=t.map((t,r)=>Array.from(Array(c[r])).map((e,t)=>(u[r]+t)%a[r]).map(r=>e.faces_edges[t][r])),d=t.map((t,r)=>Array.from(Array(l[r])).map((e,t)=>(f[r]+t)%s[r]).map(r=>e.faces_vertices[t][r])),h=t.map(t=>e.faces_faces[t]).reduce((e,t)=>e.concat(t),[]).filter(e=>e!==t[0]&&e!==t[1]);return{vertices:d[0].concat(d[1]),edges:p[0].concat(p[1]),faces:h}},iC=(e,t)=>{let r=[...e.edges_vertices[t]].sort((e,t)=>t-e),n=[...e.edges_faces[t]];iw(e,r),iS(e,t,r);let o=r.map(t=>0===e.vertices_vertices[t].length),i=r.filter((e,t)=>o[t]);if(2===n.length&&n[0]!==n[1]){let o=e.faces_vertices.length,i=i$(e,n,t,r);e.faces_vertices.push(i.vertices),e.faces_edges.push(i.edges),e.faces_faces.push(i.faces),e.vertices_faces.forEach((t,r)=>{let i=!1;t.forEach((a,s)=>{if(a===n[0]||a===n[1]){e.vertices_faces[r][s]=o;let n=i?[r,1]:[r,1,o];t.splice(...n),i=!0}})}),e.edges_faces.forEach((t,r)=>t.forEach((t,i)=>{(t===n[0]||t===n[1])&&(e.edges_faces[r][i]=o)})),e.faces_faces.forEach((t,r)=>t.forEach((t,i)=>{(t===n[0]||t===n[1])&&(e.faces_faces[r][i]=o)})),e.faces_vertices.forEach(t=>t.forEach(t=>{void 0===t&&console.log("FOUND ONE before remove",e.faces_vertices)})),nh(e,"faces",n)}if(2===n.length&&n[0]===n[1]&&i.length){let r=n[0];e.faces_vertices[r]=e.faces_vertices[r].filter(e=>!i.includes(e)).filter((e,t,r)=>e!==r[(t+1)%r.length]),e.faces_edges[r]=e.faces_edges[r].filter(e=>e!==t)}nh(e,"edges",[t]),nh(e,"vertices",i)},iL=(e,t,r)=>(r.forEach(r=>{e.edges_vertices[r][0]===t&&e.edges_vertices[r][1]===t&&console.warn("removePlanarVertex circular edge")}),r.map(r=>e.edges_vertices[r][0]===t?e.edges_vertices[r][1]:e.edges_vertices[r][0])),iN=(e,t)=>{let r=e.vertices_edges[t],n=nc(e.vertices_faces[t].filter(e=>null!=e));if(2!==r.length||n.length>2)return void console.warn("cannot remove non 2-degree vertex yet (e,f)",r,n);let o=iL(e,t,r),i=o.slice().reverse();r.sort((e,t)=>e-t),o.forEach(t=>{let n=e.vertices_edges[t].indexOf(r[1]);-1!==n&&(e.vertices_edges[t][n]=r[0])}),o.forEach((r,n)=>{let o=e.vertices_vertices[r].indexOf(t);if(-1===o)return void console.warn("removePlanarVertex unknown vertex issue");e.vertices_vertices[r][o]=i[n]}),e.edges_vertices[r[0]]=[...o],n.forEach(r=>{let n=e.faces_vertices[r].indexOf(t);if(-1===n)return void console.warn("removePlanarVertex unknown face_vertex issue");e.faces_vertices[r].splice(n,1)}),n.forEach(t=>{let n=e.faces_edges[t].indexOf(r[1]);if(-1===n)return void console.warn("removePlanarVertex unknown face_edge issue");e.faces_edges[t].splice(n,1)}),nh(e,"vertices",[t]),nh(e,"edges",[r[1]])},iz=e=>[0,1].map(t=>e.filter((e,r)=>r%2===t).reduce((e,t)=>e+t,0)),iF=e=>e.map((e,t,r)=>[e,r[(t+1)%r.length]]).map(e=>rT.core.counterClockwiseAngleRadians(...e)).map((e,t,r)=>r.slice(t+1,r.length).concat(r.slice(0,t))).map(e=>iz(e).map(e=>Math.PI-e)).map((t,r)=>e[r]+t[0]).map((t,r)=>rT.core.isCounterClockwiseBetween(t,e[r],e[(r+1)%e.length])?t:void 0),iI=e=>iF(e.map(e=>Math.atan2(e[1],e[0]))).map(e=>void 0===e?void 0:[Math.cos(e),Math.sin(e)]);var iV=Object.freeze({__proto__:null,alternatingSum:iz,alternatingSumDifference:e=>{let t=e.reduce((e,t)=>e+t,0)/2;return iz(e).map(e=>e-t)},kawasakiSolutionsRadians:iF,kawasakiSolutionsVectors:iI});let iB={B:!0,b:!0,F:!0,f:!0,U:!0,u:!0},iq=({vertices_edges:e,edges_assignment:t})=>e.map(e=>e.map(e=>iB[t[e]]).reduce((e,t)=>e&&t,!0)).map((e,t)=>e?t:void 0).filter(e=>void 0!==e),iT={M:!0,m:!0,V:!0,v:!0},iR={M:-1,m:-1,V:1,v:1},iU=({edges_vertices:e,vertices_edges:t,edges_assignment:r})=>{t||(t=nC({edges_vertices:e}));let n=t.map(e=>e.map(e=>iR[r[e]]).filter(e=>void 0!==e).reduce((e,t)=>e+t,0)).map(e=>2===e||-2===e);return oj({edges_vertices:e,edges_assignment:r}).forEach(e=>{n[e]=!0}),iq({vertices_edges:t,edges_assignment:r}).forEach(e=>{n[e]=!0}),n.map((e,t)=>e?void 0:t).filter(e=>void 0!==e)},iD=({vertices_coords:e,vertices_vertices:t,vertices_edges:r,edges_vertices:n,edges_assignment:o,edges_vector:i},a=rT.core.EPSILON)=>{t||(t=nN({vertices_coords:e,vertices_edges:r,edges_vertices:n}));let s=nq({vertices_coords:e,vertices_vertices:t,edges_vertices:n,edges_vector:i}).map((e,t)=>e.filter((e,n)=>iT[o[r[t][n]]])).map(e=>e.length>1?rT.core.counterClockwiseSectors2(e):[0,0]).map(e=>iz(e)).map(e=>Math.abs(e[0]-e[1])<a);return oj({edges_vertices:n,edges_assignment:o}).forEach(e=>{s[e]=!0}),iq({vertices_edges:r,edges_assignment:o}).forEach(e=>{s[e]=!0}),s.map((e,t)=>e?void 0:t).filter(e=>void 0!==e)};var iG=Object.freeze({__proto__:null,validateMaekawa:iU,validateKawasaki:iD});let iW={};iW.prototype=Object.create(ik),iW.prototype.constructor=iW;let iZ=function(e){return e.mountain=(t=-180)=>(e.forEach(e=>{this.edges_assignment[e]="M",this.edges_foldAngle[e]=t}),e),e.valley=(t=180)=>(e.forEach(e=>{this.edges_assignment[e]="V",this.edges_foldAngle[e]=t}),e),e.flat=()=>(e.forEach(e=>{this.edges_assignment[e]="F",this.edges_foldAngle[e]=0}),e),e};["line","ray","segment"].forEach(e=>{iW.prototype[e]=function(){let t=rT[e](...arguments);if(!t)return;let r=iM(this,t);if(!r)return;let n=iP(this,r[0],r[1]);return iZ.call(this,n)}}),["circle","ellipse","rect","polygon"].forEach(e=>{iW.prototype[e]=function(){let t=rT[e](...arguments);if(!t)return;let r=t.segments(96).map(e=>rT.segment(e)).map(e=>iM(this,e)).filter(e=>void 0!==e);if(!r)return;let n=[],o=[];r.forEach(e=>{let t=o8(this,e);n.push(...t),o.push(...iA(this,t))});let{map:i}=oA(this).edges;return of(this),iZ.call(this,o.map(e=>i[e]).reduce((e,t)=>e.concat(t),[]))}}),iW.prototype.removeEdge=function(e){let t=this.edges_vertices[e];return iC(this,e),t.map(e=>og(this,e)).map((e,r)=>e?t[r]:void 0).filter(e=>void 0!==e).sort((e,t)=>t-e).forEach(e=>iN(this,e)),!0},iW.prototype.validate=function(e){let t=oc(this,e);return t.vertices.kawasaki=iD(this,e),t.vertices.maekawa=iU(this),this.edges_foldAngle&&(t.edges.not_flat=this.edges_foldAngle.map((e,t)=>r8(e)?void 0:t).filter(e=>void 0!==e)),"valid"===t.summary&&(t.vertices.kawasaki.length||t.vertices.maekawa.length?t.summary="invalid":t.edges.not_flat.length&&(t.summary="not flat")),t};var iJ=iW.prototype;let iH=(e,t)=>{let r=[],n=e.map((e,t)=>t),o=n.filter(e=>t[e]),i=n.filter(e=>!t[e]);return i.sort((t,r)=>e[t]-e[r]).forEach((e,t)=>{r[e]=t}),o.sort((t,r)=>e[r]-e[t]).forEach((e,t)=>{r[e]=i.length+t}),r},iY=(e,t,r,n)=>{let o=rT.core.subtract2(r,t),i=rT.core.cross2(e,o);return n?i>0:i<0},iX=(e,t)=>e.faces_vertices[t]?e.faces_vertices[t].map(t=>e.vertices_coords[t]).reduce((e,t)=>[e[0]+t[0],e[1]+t[1]],[0,0]).map(r=>r/e.faces_vertices[t].length):[0,0],iK={F:!0,f:!0,U:!0,u:!0},iQ={M:"V",m:"V",V:"M",v:"M"},i0=e=>iQ[e]||e,i1=(e,t)=>({center:e.faces_center[t],matrix:e.faces_matrix2[t],winding:e.faces_winding[t],crease:e.faces_crease[t],side:e.faces_side[t],layer:e.faces_layer[t]}),i2=(e,t,r,n="V",o=rT.core.EPSILON)=>{let i=i0(n);of(e),e.faces_layer||(e.faces_layer=Array(e.faces_vertices.length).fill(0)),e.faces_center=e.faces_vertices.map((t,r)=>iX(e,r)),e.faces_matrix2||(e.faces_matrix2=oT(e,0)),e.faces_winding=oW(e.faces_matrix2),e.faces_crease=e.faces_matrix2.map(rT.core.invertMatrix2).map(e=>rT.core.multiplyMatrix2Line2(e,t,r)),e.faces_side=e.faces_vertices.map((t,r)=>iY(e.faces_crease[r].vector,e.faces_crease[r].origin,e.faces_center[r],e.faces_winding[r]));let a=oy({vertices_coords:oF(e,e.faces_matrix2),edges_vertices:e.edges_vertices},t,r,o).map((e,t)=>e?t:void 0).filter(e=>void 0!==e).filter(t=>iK[e.edges_assignment[t]]);a.map(t=>e.edges_faces[t].find(e=>null!=e)).map(t=>e.faces_winding[t]).map(e=>e?n:i).forEach((t,r)=>{e.edges_assignment[a[r]]=t,e.edges_foldAngle[a[r]]=r2(t)});let s=i1(e,0),c=e.faces_vertices.map((e,t)=>t).reverse().map(t=>{let r=i1(e,t),a=i_(e,t,r.crease.vector,r.crease.origin,o);if(void 0!==a)return e.edges_assignment[a.edges.new]=r.winding?n:i,e.edges_foldAngle[a.edges.new]=r2(e.edges_assignment[a.edges.new]),a.faces.map[a.faces.remove].forEach(t=>{e.faces_center[t]=iX(e,t),e.faces_side[t]=iY(r.crease.vector,r.crease.origin,e.faces_center[t],r.winding),e.faces_layer[t]=r.layer}),a}).filter(e=>void 0!==e),l=ot(...c.map(e=>e.faces.map)),u=ot(...c.map(e=>e.edges.map).filter(e=>void 0!==e)),f=c.map(e=>e.faces.remove).reverse();e.faces_layer=iH(e.faces_layer,e.faces_side);let p=l&&l[0]&&2===l[0].length,d=p?l[0].filter(t=>e.faces_side[t]).shift():0,h=s.matrix;return n!==i&&(h=p||e.faces_side[0]?rT.core.multiplyMatrices2(s.matrix,rT.core.makeMatrix2Reflect(s.crease.vector,s.crease.origin)):s.matrix),e.faces_matrix2=oT(e,d).map(e=>rT.core.multiplyMatrices2(h,e)),delete e.faces_center,delete e.faces_winding,delete e.faces_crease,delete e.faces_side,{faces:{map:l,remove:f},edges:{map:u}}},i3={};i3.prototype=Object.create(ik),i3.prototype.constructor=i3,i3.prototype.flatFold=function(){let e=rT.core.getLine(arguments);return i2(this,e.vector,e.origin),this};var i8=i3.prototype;let i5=e=>e.frame_classes&&e.frame_classes.includes("foldedForm")||e.file_classes&&e.file_classes.includes("foldedForm");var i4=Object.freeze({__proto__:null,isFoldedForm:i5});let i6=({vertices_coords:e,edges_vertices:t,edges_coords:r},n=rT.core.EPSILON)=>{r||(r=nZ({vertices_coords:e,edges_vertices:t}));let o=nH({vertices_coords:e,edges_vertices:t,edges_coords:r}),i=Array.from(Array(r.length)).map(()=>[]),a=o.length?o[0].min.length:0;for(let e=0;e<r.length-1;e+=1)for(let t=e+1;t<r.length;t+=1){let r=!0;for(let i=0;i<a;i+=1)rT.core.fnEpsilonEqual(o[e].min[i],o[t].min[i],n)&&rT.core.fnEpsilonEqual(o[e].max[i],o[t].max[i],n)||(r=!1);i[e][t]=r,i[t][e]=r}for(let e=0;e<r.length-1;e+=1)for(let t=e+1;t<r.length;t+=1){if(!i[e][t])continue;let o=rT.core.fnEpsilonEqualVectors(r[e][0],r[t][0],n)&&rT.core.fnEpsilonEqualVectors(r[e][1],r[t][1],n),a=rT.core.fnEpsilonEqualVectors(r[e][0],r[t][1],n)&&rT.core.fnEpsilonEqualVectors(r[e][1],r[t][0],n),s=o||a;i[e][t]=s,i[t][e]=s}return nf(i)},i9=({vertices_coords:e,edges_vertices:t,edges_vector:r},n)=>{r||(r=nJ({vertices_coords:e,edges_vertices:t}));let o=r.length,i=r.map(e=>rT.core.normalize(e)),a=Array.from(Array(o)).map(()=>Array.from(Array(o)));for(let e=0;e<o-1;e+=1)for(let t=e+1;t<o;t+=1){let r=1-Math.abs(rT.core.dot(i[e],i[t]))<n;a[e][t]=r,a[t][e]=r}return a},i7=(e,t,r,n,o)=>{for(let i=0;i<e.length-1;i+=1)for(let a=i+1;a<e.length;a+=1)e[i][a]&&(e[i][a]=rT.core.overlapLineLine(t[i],r[i],t[a],r[a],n,n,o),e[a][i]=e[i][a])},ae=({vertices_coords:e,edges_vertices:t,edges_vector:r},n)=>{r||(r=nJ({vertices_coords:e,edges_vertices:t}));let o=t.map(t=>e[t[0]]),i=i9({vertices_coords:e,edges_vertices:t,edges_vector:r},n);return i7(i,r,o,rT.core.excludeS,n),i};var at=Object.freeze({__proto__:null,makeEdgesEdgesSimilar:i6,makeEdgesEdgesParallel:i9,makeEdgesEdgesCrossing:({vertices_coords:e,edges_vertices:t,edges_vector:r},n)=>{r||(r=nJ({vertices_coords:e,edges_vertices:t}));let o=t.map(t=>e[t[0]]),i=i9({vertices_coords:e,edges_vertices:t,edges_vector:r},n).map(e=>e.map(e=>!e));for(let e=0;e<i.length;e+=1)i[e][e]=void 0;return i7(i,r,o,rT.core.excludeS,n),i},makeEdgesEdgesParallelOverlap:ae});let ar=({vertices_coords:e,edges_vertices:t,edges_vector:r,edges_faces:n,faces_vertices:o},i)=>{r||(r=nJ({vertices_coords:e,edges_vertices:t}));let a=oZ({vertices_coords:e,faces_vertices:o}),s=t.map(t=>e[t[0]]),c=t.map(()=>Array.from(Array(o.length)));n.forEach((e,t)=>e.forEach(e=>{c[t][e]=!1}));let l=i6({vertices_coords:e,edges_vertices:t}),u=t.map(t=>t.map(t=>e[t])),f=o.map(t=>t.map(t=>e[t]));for(let e=0;e<a.length;e+=1)a[e]||f[e].reverse();let p=nH({edges_coords:u}),d=f.map(e=>rT.core.boundingBox(e));for(let e=0;e<c.length;e+=1)for(let t=0;t<c[e].length;t+=1)if(!1!==c[e][t]&&!rT.core.overlapBoundingBoxes(d[t],p[e])){c[e][t]=!1;continue}let h={};for(let e=0;e<c.length;e+=1)if(!h[e]){for(let t=0;t<c[e].length;t+=1)if(void 0===c[e][t]){if(u[e].map(e=>rT.core.overlapConvexPolygonPoint(f[t],e,rT.core.exclude,i)).reduce((e,t)=>e||t,!1)||rT.core.intersectConvexPolygonLine(f[t],r[e],s[e],rT.core.excludeS,rT.core.excludeS,i)){c[e][t]=!0;continue}c[e][t]=!1}l[e].forEach(t=>{c[t]=c[e].slice(),h[t]=!0})}return c},an=({vertices_coords:e,faces_vertices:t},r=rT.core.EPSILON)=>{let n=Array.from(Array(t.length)).map(()=>Array.from(Array(t.length))),o=t.map(t=>t.map(t=>e[t])),i=o.map(e=>rT.core.boundingBox(e));for(let e=0;e<i.length-1;e+=1)for(let t=e+1;t<i.length;t+=1)rT.core.overlapBoundingBoxes(i[e],i[t])||(n[e][t]=!1,n[t][e]=!1);let a=o.map(e=>rT.core.makePolygonNonCollinear(e,r));for(let e=0;e<t.length-1;e+=1)for(let o=e+1;o<t.length;o+=1){if(!1===n[e][o])continue;let t=rT.core.overlapConvexPolygons(a[e],a[o],r);n[e][o]=t,n[o][e]=t}return n};var ao=Object.freeze({__proto__:null,makeEdgesFacesOverlap:ar,makeFacesFacesOverlap:an}),ai=Object.assign(Object.create(null),{count:na,countImplied:nk,validate:oc,clean:oa,populate:of,remove:nh,replace:nm,removePlanarVertex:iN,removePlanarEdge:iC,addVertices:o8,addEdges:iA,splitEdge:ii,splitFace:i_,flatFold:i2,addPlanarSegment:iP,subgraph:(e,t)=>{let r={},n={};[l,c,s].forEach(o=>{r[o]=Array.from(Array(na[o](e))).map((e,t)=>t),n[o]=nc(t[o]||[]).reverse()}),Object.keys(n).forEach(e=>n[e].forEach(t=>r[e].splice(t,1)));let o=JSON.parse(JSON.stringify(e));return Object.keys(r).forEach(e=>nh(o,e,r[e])),o},clip:iM,fragment:oA,getVerticesClusters:no,clone:o3},n3,oS,nP,o2,nr,n$,oh,oi,i4,oO,ao,oC,nb,n7,o_,at,oG,oz,oR,oJ,oX,nd);let aa={},as=(e,t)=>[[0,0],[e,0],[e,t],[0,t]],ac=e=>of({vertices_coords:e,edges_vertices:e.map((e,t,r)=>[t,(t+1)%r.length]),edges_assignment:Array(e.length).fill("B")});aa.square=(e=1)=>ac(as(e,e)),aa.rectangle=(e=1,t=1)=>ac(as(e,t)),aa.polygon=(e=3,t=1)=>ac(rT.core.makePolygonCircumradius(e,t)),aa.kite=()=>of({vertices_coords:[[0,0],[Math.sqrt(2)-1,0],[1,0],[1,1-(Math.sqrt(2)-1)],[1,1],[0,1]],edges_vertices:[[0,1],[1,2],[2,3],[3,4],[4,5],[5,0],[5,1],[3,5],[5,2]],edges_assignment:Array.from("BBBBBBVVF")});let al=Object.create(null),au={graph:ik,cp:iJ,origami:i8},af={graph:()=>{},cp:aa.square,origami:aa.square},ap={graph:()=>({file_spec:1.1,file_creator:rZ}),cp:()=>({file_spec:1.1,file_creator:rZ,frame_classes:["creasePattern"]}),origami:()=>({file_spec:1.1,file_creator:rZ,frame_classes:["foldedForm"]})};Object.keys(au).forEach(e=>{al[e]=function(){let t=Array.from(arguments).filter(e=>nt(e)).map(e=>JSON.parse(JSON.stringify(e)));return of(Object.assign(Object.create(au[e]),t.length?{}:af[e](),...t,ap[e]()))},al[e].prototype=au[e],al[e].prototype.constructor=al[e],Object.keys(aa).forEach(t=>{al[e][t]=function(){return al[e](aa[t](...arguments))}})}),Object.assign(al.graph,ai);let ad=(e,t)=>{let r=rT.core.cross2(e.normal,t.normal);if(!(Math.abs(r)<rT.core.EPSILON))return[(e.distance*t.normal[1]-t.distance*e.normal[1])/r,(t.distance*e.normal[0]-e.distance*t.normal[0])/r]},ah=e=>e<0?-Math.pow(-e,1/3):Math.pow(e,1/3),am=(e,t,r,n,o)=>{switch(e){case 1:return[-o/n];case 2:{let e=Math.pow(n,2)-4*r*o;if(e<-rT.core.EPSILON)return[];let t=-n/(2*r);if(e<rT.core.EPSILON)return[t];let i=Math.sqrt(e)/(2*r);return[t+i,t-i]}case 3:{let e=r/t,i=n/t,a=(3*i-Math.pow(e,2))/9,s=(9*e*i-o/t*27-2*Math.pow(e,3))/54,c=Math.pow(a,3)+Math.pow(s,2),l=-e/3;if(c>0){let e=Math.sqrt(c);return[l+ah(s+e)+ah(s-e)]}if(Math.abs(c)<rT.core.EPSILON){let e=Math.pow(s,1/3);if(s<0)return[];return[l+2*e,l-e]}let u=Math.atan2(Math.sqrt(-c),s)/3,f=Math.pow(Math.pow(s,2)-c,1/6),p=f*Math.cos(u),d=f*Math.sin(u);return[l+2*p,l-p-Math.sqrt(3)*d,l-p+Math.sqrt(3)*d]}default:return[]}},ag=(e,t,r,n)=>{if(.02>Math.abs(1-rT.core.dot2(e.normal,r)/e.distance))return[];let o=rT.core.rotate90(e.normal),i=rT.core.subtract2(rT.core.add2(r,rT.core.scale2(e.normal,e.distance)),rT.core.scale2(n,2)),a=rT.core.subtract2(rT.core.scale2(e.normal,e.distance),r),s=rT.core.dot2(n,t.normal)-t.distance,c=2*rT.core.dot2(a,o),l=rT.core.dot2(a,a),u=rT.core.dot2(rT.core.add2(i,a),o),f=rT.core.dot2(i,a),p=rT.core.dot2(o,t.normal),d=rT.core.dot2(a,t.normal),h=s+u*p+d,m=s*c+f*p+u*d,g=0;return Math.abs(m)>rT.core.EPSILON&&(g=1),Math.abs(h)>rT.core.EPSILON&&(g=2),Math.abs(p)>rT.core.EPSILON&&(g=3),am(g,p,h,m,s*l+f*d).map(t=>rT.core.add2(rT.core.scale2(e.normal,e.distance),rT.core.scale2(o,t))).map(e=>({p:e,normal:rT.core.normalize2(rT.core.subtract2(e,r))})).map(e=>({normal:e.normal,distance:rT.core.dot2(e.normal,rT.core.midpoint2(e.p,r))}))};var av=Object.freeze({__proto__:null,normalAxiom1:(e,t)=>{let r=rT.core.normalize2(rT.core.rotate90(rT.core.subtract2(t,e)));return{normal:r,distance:rT.core.dot2(rT.core.add2(e,t),r)/2}},normalAxiom2:(e,t)=>{let r=rT.core.normalize2(rT.core.subtract2(t,e));return{normal:r,distance:rT.core.dot2(rT.core.add2(e,t),r)/2}},normalAxiom3:(e,t)=>{let r=ad(e,t);return void 0===r?[{normal:e.normal,distance:(e.distance+t.distance*rT.core.dot2(e.normal,t.normal))/2}]:[rT.core.add2,rT.core.subtract2].map(r=>rT.core.normalize2(r(e.normal,t.normal))).map(e=>({normal:e,distance:rT.core.dot2(r,e)}))},normalAxiom4:(e,t)=>{let r=rT.core.rotate90(e.normal),n=rT.core.dot2(t,r);return{normal:r,distance:n}},normalAxiom5:(e,t,r)=>{let n=rT.core.dot2(t,e.normal),o=e.distance-n,i=rT.core.distance2(t,r);if(o>i)return[];let a=Math.sqrt(i*i-o*o),s=rT.core.scale2(e.normal,o),c=rT.core.add2(t,s),l=rT.core.scale2(rT.core.rotate90(e.normal),a);return(a<rT.core.EPSILON?[c]:[rT.core.add2(c,l),rT.core.subtract2(c,l)]).map(e=>rT.core.normalize2(rT.core.subtract2(r,e))).map(e=>({normal:e,distance:rT.core.dot2(t,e)}))},normalAxiom6:ag,normalAxiom7:(e,t,r)=>{let n=rT.core.rotate90(e.normal),o=rT.core.dot2(n,t.normal);if(Math.abs(o)<rT.core.EPSILON)return;let i=rT.core.dot2(r,n),a=rT.core.dot2(r,t.normal);return{normal:n,distance:(t.distance+2*i*o-a)/(2*o)}}}),a_=Object.freeze({__proto__:null,axiom1:(e,t)=>({vector:rT.core.normalize2(rT.core.subtract2(...rT.core.resizeUp(t,e))),origin:e}),axiom2:(e,t)=>({vector:rT.core.normalize2(rT.core.rotate90(rT.core.subtract2(...rT.core.resizeUp(t,e)))),origin:rT.core.midpoint2(e,t)}),axiom3:(e,t)=>rT.core.bisectLines2(e.vector,e.origin,t.vector,t.origin),axiom4:(e,t)=>({vector:rT.core.rotate90(rT.core.normalize2(e.vector)),origin:t}),axiom5:(e,t,r)=>(rT.core.intersectCircleLine(rT.core.distance2(t,r),t,e.vector,e.origin,rT.core.include_l)||[]).map(e=>({vector:rT.core.normalize2(rT.core.rotate90(rT.core.subtract2(...rT.core.resizeUp(e,r)))),origin:rT.core.midpoint2(r,e)})),axiom6:(e,t,r,n)=>ag(rT.core.rayLineToUniqueLine(e),rT.core.rayLineToUniqueLine(t),r,n).map(rT.core.uniqueLineToRayLine),axiom7:(e,t,r)=>{let n=rT.core.intersectLineLine(e.vector,e.origin,t.vector,r,rT.core.include_l,rT.core.include_l);return void 0===n?void 0:{vector:rT.core.normalize2(rT.core.rotate90(rT.core.subtract2(...rT.core.resizeUp(n,r)))),origin:rT.core.midpoint2(r,n)}}});let ay=(e,t)=>{switch(e){case 3:case"3":case 5:case"5":case 6:case"6":return t;case 7:case"7":return void 0===t?[]:[t];default:return[t]}},ab=(e,t)=>{switch(e){case 3:case"3":case 5:case"5":case 6:case"6":return t;default:return t?t[0]:void 0}},aE=(e,t)=>{let r=rT.core.makeMatrix2Reflect(e.vector,e.origin);return rT.core.multiplyMatrix2Vector2(r,t)},ax=(e,t)=>e.points.map(e=>rT.core.overlapConvexPolygonPoint(t,e,rT.core.include)).reduce((e,t)=>e&&t,!0),aO=(e,t,r)=>{let n=e.lines.map(e=>rT.core.clipLineConvexPolygon(t,e.vector,e.origin,rT.core.include,rT.core.includeL));if(void 0===n[0]||void 0===n[1])return[!1,!1];let o=r.map(e=>void 0===e?void 0:rT.core.clipLineConvexPolygon(t,e.vector,e.origin,rT.core.include,rT.core.includeL)),i=[0,1].map(e=>void 0!==o[e]),a=r.map(e=>void 0===e?void 0:[aE(e,n[0][0]),aE(e,n[0][1])]).map(e=>void 0!==e&&(rT.core.overlapLinePoint(rT.core.subtract(n[1][1],n[1][0]),n[1][0],e[0],rT.core.includeS)||rT.core.overlapLinePoint(rT.core.subtract(n[1][1],n[1][0]),n[1][0],e[1],rT.core.includeS)||rT.core.overlapLinePoint(rT.core.subtract(e[1],e[0]),e[0],n[1][0],rT.core.includeS)||rT.core.overlapLinePoint(rT.core.subtract(e[1],e[0]),e[0],n[1][1],rT.core.includeS)));return[0,1].map(e=>!0===a[e]&&!0===i[e])},ak=(e,t)=>{let r=rT.core.intersectLineLine(e.lines[0].vector,e.lines[0].origin,rT.core.rotate90(e.lines[0].vector),e.points[0],rT.core.includeL,rT.core.includeL);return[e.points[0],r].filter(e=>void 0!==e).map(e=>rT.core.overlapConvexPolygonPoint(t,e,rT.core.include)).reduce((e,t)=>e&&t,!0)},aM=(e,t,r)=>{if(0===r.length)return[];let n=e.points.map(e=>rT.core.overlapConvexPolygonPoint(t,e,rT.core.include)).reduce((e,t)=>e&&t,!0);return r.map(t=>aE(t,e.points[1])).map(e=>rT.core.overlapConvexPolygonPoint(t,e,rT.core.include)).map(e=>e&&n)},aA=function(e,t,r){if(0===r.length)return[];if(!e.points.map(e=>rT.core.overlapConvexPolygonPoint(t,e,rT.core.include)).reduce((e,t)=>e&&t,!0))return r.map(()=>!1);let n=r.map(t=>aE(t,e.points[0])).map(e=>rT.core.overlapConvexPolygonPoint(t,e,rT.core.include)),o=r.map(t=>aE(t,e.points[1])).map(e=>rT.core.overlapConvexPolygonPoint(t,e,rT.core.include));return r.map((e,t)=>n[t]&&o[t])},aj=(e,t,r)=>{let n=rT.core.overlapConvexPolygonPoint(t,e.points[0],rT.core.include);if(void 0===r)return[!1];let o=aE(r,e.points[0]),i=rT.core.overlapConvexPolygonPoint(t,o,rT.core.include),a=void 0!==rT.core.intersectConvexPolygonLine(t,e.lines[1].vector,e.lines[1].origin,rT.core.includeS,rT.core.includeL),s=rT.core.intersectLineLine(e.lines[1].vector,e.lines[1].origin,r.vector,r.origin,rT.core.includeL,rT.core.includeL),c=!!s&&rT.core.overlapConvexPolygonPoint(t,s,rT.core.include);return n&&i&&a&&c};var aP=Object.freeze({__proto__:null,validateAxiom1:ax,validateAxiom2:ax,validateAxiom3:aO,validateAxiom4:ak,validateAxiom5:aM,validateAxiom6:aA,validateAxiom7:aj,validate:(e,t,r,n)=>ay(e,[null,ax,ax,aO,ak,aM,aA,aj][e](t,r,ab(e,n)))});let aw=e=>({points:e.points,lines:e.lines.map(rT.core.uniqueLineToRayLine)}),aS=e=>[...e.lines?e.lines:[],...e.points?e.points:[]],a$=(e,t={},r)=>{let n=ay(e,a_[`axiom${e}`](...aS(t))).map(e=>rT.line(e));return r&&ay(e,aP[`validateAxiom${e}`](t,r,n)).forEach((e,t)=>e?t:void 0).filter(e=>void 0!==e).forEach(e=>delete n[e]),n};var aC=Object.freeze({__proto__:null,axiomInBoundary:a$,normalAxiomInBoundary:(e,t={},r)=>{let n=ay(e,av[`normalAxiom${e}`](...aS(t))).map(e=>rT.line.fromNormalDistance(e));return r&&ay(e,aP[`validateAxiom${e}`](aw(t),r,n)).forEach((e,t)=>e?t:void 0).filter(e=>void 0!==e).forEach(e=>delete n[e]),n}});let aL=(e,t={},r)=>a$(e,t,r);Object.keys(a_).forEach(e=>{aL[e]=a_[e]}),Object.keys(av).forEach(e=>{aL[e]=av[e]}),Object.keys(aC).forEach(e=>{aL[e]=aC[e]}),Object.keys(aP).forEach(e=>{aL[e]=aP[e]});let aN=(e,t)=>rT.core.intersectLineLine(e.vector,e.origin,t.vector,t.origin,rT.core.includeL,rT.core.includeL),az=(e,t)=>{let r=rT.core.makeMatrix2Reflect(e.vector,e.origin);return rT.core.multiplyMatrix2Vector2(r,t)},aF=({vertices_coords:e})=>rT.core.convexHull(e),aI=(e,t,r)=>{let n=aF(e);if(void 0===r){let e=rT.core.clipLineConvexPolygon(n,t.vector,t.origin,rT.core.exclude,rT.core.includeL);r=rT.core.midpoint(...e)}let o=rT.core.rotate270(t.vector),i=rT.core.clipLineConvexPolygon(n,o,r,rT.core.exclude,rT.core.includeL).map(e=>rT.core.distance(r,e)).sort((e,t)=>e-t).shift(),a=rT.core.scale(rT.core.normalize(o),i);return rT.segment(rT.core.add(r,rT.core.flip(a)),rT.core.add(r,a))},aV=(e,t,r)=>{let n=t.map(e=>rT.core.midpoint(e[0],e[1])),o=rT.line.fromPoints(...n),i=rT.intersect(r,o),a=rT.line(r.vector.rotate90(),i);return rT.segment(e.lines.map(e=>rT.intersect(e,a)))},aB=(e,t,r,n)=>{let o=e.lines.map(e=>e.vector),i=o.map(rT.core.flip),a=o.concat(i).map(e=>rT.ray(e,t)),s=a.filter(e=>rT.core.dot(e.vector,r.vector)>0&&rT.core.cross2(e.vector,r.vector)>0).shift(),c=a.filter(e=>rT.core.dot(e.vector,r.vector)>0&&0>rT.core.cross2(e.vector,r.vector)).shift(),l=a.filter(e=>0>rT.core.dot(e.vector,r.vector)&&rT.core.cross2(e.vector,r.vector)>0).shift(),u=a.filter(e=>0>rT.core.dot(e.vector,r.vector)&&0>rT.core.cross2(e.vector,r.vector)).shift(),f=[s,c,l,u].map(e=>rT.core.intersectConvexPolygonLine(n,e.vector,e.origin,rT.core.excludeS,rT.core.excludeR).shift().shift()),p=f.map(e=>rT.core.distance(e,t)),d=p[0]<p[1]?f[0]:f[1],h=p[0]<p[1]?rT.core.add(c.origin,c.vector.normalize().scale(p[0])):rT.core.add(s.origin,s.vector.normalize().scale(p[1])),m=p[2]<p[3]?f[2]:f[3],g=p[2]<p[3]?rT.core.add(u.origin,u.vector.normalize().scale(p[2])):rT.core.add(l.origin,l.vector.normalize().scale(p[3]));return[rT.segment(d,h),rT.segment(m,g)]},aq=[null,(e,t)=>aL(1,e).map(e=>[aI(t,e)]),e=>[[rT.segment(e.points)]],(e,t)=>{let r=aF(t),n=e.lines.map(e=>rT.core.clipLineConvexPolygon(r,e.vector,e.origin,rT.core.exclude,rT.core.includeL)),o=n.map(e=>rT.core.subtract(e[1],e[0])),i=rT.core.intersectLineLine(o[0],n[0][0],o[1],n[1][0],rT.core.excludeS,rT.core.excludeS);return i?aL(3,e).map(t=>aB(e,i,t,r)):[aV(e,n,aL(3,e).filter(e=>void 0!==e).shift())]},(e,t)=>aL(4,e).map(r=>[aI(t,r,aN(r,e.lines[0]))]),e=>aL(5,e).map(t=>[rT.segment(e.points[1],az(t,e.points[1]))]),e=>aL(6,e).map(t=>e.points.map(e=>rT.segment(e,az(t,e)))),(e,t)=>aL(7,e).map(r=>[rT.segment(e.points[0],az(r,e.points[0])),aI(t,r,aN(r,e.lines[1]))])];delete aq[0];let aT=(e,t={},...r)=>{let n=t.points?t.points.map(e=>rT.core.getVector(e)):void 0,o=t.lines?t.lines.map(e=>rT.core.getLine(e)):void 0;return aq[e]({points:n,lines:o},...r)};Object.keys(aq).forEach(e=>{aT[e]=(...t)=>aT(e,...t)});let aR=({vertices_coords:e})=>rT.core.convexHull(e),aU=(e,t,r)=>{if(void 0===r){let n=rT.core.clipLineConvexPolygon(e,t.vector,t.origin,rT.core.exclude,rT.core.includeL);if(void 0===n)return;r=rT.core.midpoint(...n)}let n=rT.core.rotate90(t.vector),o=rT.core.clipLineConvexPolygon(e,n,r,rT.core.exclude,rT.core.includeL).map(e=>rT.core.distance(r,e)).sort((e,t)=>e-t).shift(),i=rT.core.scale(rT.core.normalize(n),o);return rT.segment(rT.core.add(r,rT.core.flip(i)),rT.core.add(r,i))};var aD=Object.assign(Object.create(null),{axiom_arrows:aT,simple_arrow:(e,t)=>{let r=aR(e),n=rT.core.boundingBox(r),o=aU(r,t);if(void 0===o)return;let i=rT.core.subtract(o[1],o[0]),a=rT.core.magnitude(i),s=rT.core.dot(i,[1,0]),c=n.span[0]<n.span[1]?n.span[0]:n.span[1];return o.head={width:.1*c,height:.15*c},o.bend=s>0?.3:-.3,o.padding=.05*a,o}}),aG=Object.freeze({__proto__:null,flipFacesLayer:e=>on(on(e).reverse()),facesLayerToEdgesAssignments:(e,t)=>{let r=[],n=oZ(e);return(e.edges_faces?e.edges_faces:nU(e)).forEach((e,o)=>{if(1===e.length&&(r[o]="B"),2===e.length){let i=e.map(e=>n[e]);if(i[0]===i[1]){r[o]="F";return}let a=e.map(e=>t[e]),s=a[0]<a[1],c=i[0]?s:!s;r[o]=c?"V":"M"}}),r},ordersToMatrix:e=>{let t=Object.keys(e).map(e=>e.split(" ").map(e=>parseInt(e,10))),r=[];t.reduce((e,t)=>e.concat(t),[]).forEach(e=>{r[e]=void 0});let n=r.map(()=>[]);return t.forEach(([t,r])=>{n[t][r]=e[`${t} ${r}`],n[r][t]=-e[`${t} ${r}`]}),n}});let aW=(e,t,r)=>{let n=e.map(e=>e?(e[0]+e[1])/2:void 0),o=[];return e.forEach((i,a)=>{if(!i||!t&&a===e.length-1)return;let s=i[1],c=[a,(a+1)%e.length],l=c.map(e=>n[e]).map(e=>e>s),u=+(!l[0]&&!l[1])+2*(l[0]&&l[1]),f=o.filter(e=>e.min<s&&e.max>s).shift(),p={faces:c,taco_type:u};f?f.pairs.push(p):o.push({min:s-2*r,max:s+2*r,pairs:[p]})}),o.map(e=>e.pairs).filter(e=>e.length>1).map(e=>({both:e.filter(e=>0===e.taco_type).map(e=>e.faces),left:e.filter(e=>1===e.taco_type).map(e=>e.faces),right:e.filter(e=>2===e.taco_type).map(e=>e.faces)}))},aZ=(e,t,r)=>t<r?e.slice(t+1,r):e.slice(r+1,t),aJ=(e,t,r=!0,n=rT.core.EPSILON)=>{let o=on(t),i=e.map(e=>e?e[1]:void 0),a=e.map(e=>e?Math.min(...e):void 0).map(e=>e+n),s=e.map(e=>e?Math.max(...e):void 0).map(e=>e-n),c=o.length+(r?0:-1);for(let e=0;e<c;e+=1){let r=(e+1)%o.length;if(o[e]===o[r])continue;let n=aZ(t,o[e],o[r]).flat(),c=n.map(t=>i[e]<a[t]).reduce((e,t)=>e&&t,!0),l=n.map(t=>i[e]>s[t]).reduce((e,t)=>e&&t,!0);if(!c&&!l)return!1}return!0},aH=e=>{let t=nu(e),r={},n=0;for(let e=0;e<t.length;e+=1)if(void 0===r[t[e]])n+=1,r[t[e]]=n;else if(void 0!==r[t[e]]){if(r[t[e]]!==n)return!1;n-=1,r[t[e]]=void 0}return!0},aY=(e,t)=>e.map(e=>t[e]).filter(e=>void 0!==e),aX=(e,t,r,n,o)=>{let i=rT.core.flattenArrays(t);if(!aJ(e,t,n,o))return!1;for(let e=0;e<r.length;e+=1)if(!aH(aY(i,r[e])))return!1;return!0},aK={V:!0,v:!0,M:!0,m:!0},aQ=e=>{let t=0;return[!1].concat(e.slice(1).map(e=>aK[e]?++t:t).map(e=>e%2==1))},a0={V:1,v:1,M:-1,m:-1},a1=(e,t)=>t%2==0?a0[e]||0:-(a0[e]||0),a2=e=>{let t=0;return e.slice(1).concat([e[0]]).map(e=>{let r=a1(e,t);return t+=+(void 0!==a0[e]),r})},a3=(e,t)=>{let r=aQ(t).map((t,r)=>e[r]*(t?-1:1)),n=e.map(()=>void 0);n[0]=[0,r[0]];for(let o=1;o<e.length&&"B"!==t[o]&&"b"!==t[o];o+=1){let t=n[(o-1+e.length)%e.length][1];n[o]=[t,t+r[o]]}return n},a8={B:!0,b:!0},a5=(e,t,r=rT.core.EPSILON)=>{let n=a3(e,t),o=a2(t),i=t.map(e=>!a8[e]).reduce((e,t)=>e&&t,!0);if(i&&Math.abs(n[0][0]-n[n.length-1][1])>r)return[];let a=aW(n,i,r).map(e=>[e.left,e.right].map(on).filter(e=>e.length>1)).reduce((e,t)=>e.concat(t),[]),s=(t=[0],c=0,l=0)=>{let u=c+1,f=o[c],p=c>=e.length-1,d=i&&p;if(!aX(n,t,a,d,r))return[];if(d){let e=on(t),r=e[0],n=e[c];if(f>0&&n>r||f<0&&n<r)return[]}if(p)return[t];if(0===f)return t[l]=[u].concat(t[l]),s(t,u,l);let h=1===f?Array.from(Array(t.length-l)).map((e,t)=>l+t+1):Array.from(Array(l+1)).map((e,t)=>t),m=h.map(()=>o3(t));return m.forEach((e,t)=>e.splice(h[t],0,u)),m.map((e,t)=>s(e,u,h[t])).reduce((e,t)=>e.concat(t),[])};return s().map(on)},a4=e=>e.map((e,t)=>t).filter(t=>"U"===e[t]||"u"===e[t]),a6=e=>{let t=a4(e),r=Array.from(Array(2**t.length)).map((e,t)=>t.toString(2)).map(e=>Array(t.length-e.length+1).join("0")+e).map(e=>Array.from(e).map(e=>"0"===e?"V":"M")).map(r=>{let n=e.slice();return t.forEach((e,t)=>{n[e]=r[t]}),n});if(e.includes("B")||e.includes("b"))return r;let n=r.map(e=>e.filter(e=>"M"===e||"m"===e).length),o=r.map(e=>e.filter(e=>"V"===e||"v"===e).length);return r.filter((e,t)=>2===Math.abs(n[t]-o[t]))},a9=(e,t,r)=>{let n=Array.from(r).map(e=>parseInt(e,10));if(n.filter(e=>0===e).length!==t)return;e[t][r]=!1;let o=!1;for(let r=0;r<n.length;r+=1){let i=[];if(0===n[r]){for(let o=1;o<=2;o+=1)n[r]=o,!1!==e[t-1][n.join("")]&&i.push([r,o]);n[r]=0,i.length>0&&!1===o&&(o=[]),1===i.length&&o.push(i[0])}}!1!==o&&0===o.length&&(o=!0),e[t][r]=o},a7=e=>{let t=e[0].length,r=Array.from(Array(t+1)).map(()=>({}));Array.from(Array(Math.pow(2,t))).map((e,t)=>t.toString(2)).map(e=>Array.from(e).map(e=>parseInt(e,10)+1).join("")).map(e=>`11111${e}`.slice(-t)).forEach(e=>{r[0][e]=!1}),e.forEach(e=>{r[0][e]=!0}),Array.from(Array(t)).map((e,t)=>t+1).map(e=>Array.from(Array(Math.pow(3,t))).map((e,t)=>t.toString(3)).map(e=>`000000${e}`.slice(-t)).forEach(t=>a9(r,e,t)));let n=[];Array.from(Array(t+1)).map((e,r)=>t-r).forEach(e=>{let t=[];Object.keys(r[e]).forEach(n=>{let o=r[e][n];o.constructor===Array&&(o=o[0]),t.push([n,o])}),n=n.concat(t)}),n.sort((e,t)=>parseInt(e[0],10)-parseInt(t[0],10));let o={};return n.forEach(e=>{o[e[0]]=Object.freeze(e[1])}),Object.freeze(o)},se={taco_taco:a7(["111112","111121","111222","112111","121112","121222","122111","122212","211121","211222","212111","212221","221222","222111","222212","222221"]),taco_tortilla:a7(["112","121","212","221"]),tortilla_tortilla:a7(["11","22"]),transitivity:a7(["112","121","122","211","212","221"])},st={taco_taco:e=>[[e[0],e[2]],[e[1],e[3]],[e[1],e[2]],[e[0],e[3]],[e[0],e[1]],[e[2],e[3]]],taco_tortilla:e=>[[e[0],e[2]],[e[0],e[1]],[e[1],e[2]]],tortilla_tortilla:e=>[[e[0],e[2]],[e[1],e[3]]],transitivity:e=>[[e[0],e[1]],[e[1],e[2]],[e[2],e[0]]]},sr=e=>e[0]<e[1]?`${e[0]} ${e[1]}`:`${e[1]} ${e[0]}`,sn={taco_taco:e=>[sr([e[0],e[2]]),sr([e[1],e[3]]),sr([e[1],e[2]]),sr([e[0],e[3]]),sr([e[0],e[1]]),sr([e[2],e[3]])],taco_tortilla:e=>[sr([e[0],e[2]]),sr([e[0],e[1]]),sr([e[1],e[2]])],tortilla_tortilla:e=>[sr([e[0],e[2]]),sr([e[1],e[3]])],transitivity:e=>[sr([e[0],e[1]]),sr([e[1],e[2]]),sr([e[2],e[0]])]},so={0:0,1:1,2:-1},si=e=>(Object.keys(e).forEach(t=>{e[t]=so[e[t]]}),e),sa=Object.freeze(Object.keys(se)),ss={0:0,1:2,2:1},sc=(e,t,...r)=>{let n=st[e](t),o=n.map(e=>e[1]<e[0]),i=n.map((e,t)=>o[t]?`${e[1]} ${e[0]}`:`${e[0]} ${e[1]}`),a=i.map((e,t)=>{for(let n=0;n<r.length;n+=1)if(r[n][e])return o[t]?ss[r[n][e]]:r[n][e];return 0}).join("");if(!0===se[e][a])return!0;if(!1===se[e][a])return!1;let s=se[e][a];return[i[s[0]],o[s[0]]?ss[s[1]]:s[1]]},sl=(e,t,r)=>{let n={};return sa.forEach(o=>{let i=r.flatMap(e=>t[o][e]);n[o]=ns(i).filter(t=>e[o][t])}),n},su=(e,t,r,...n)=>{let o=r,i={};do{let r=sl(e,t,o),a={};for(let t=0;t<sa.length;t+=1){let o=sa[t],s=r[o];for(let t=0;t<s.length;t+=1){let r=sc(o,e[o][s[t]],...n,i);if(!0!==r){if(!1===r)return console.warn("invalid state found",o,e[o][s[t]]),!1;if(i[r[0]]){if(i[r[0]]!==r[1])return console.warn("order conflict",o,e[o][s[t]]),!1}else{let[e,t]=r;a[e]=!0,i[r[0]]=t}}}}o=Object.keys(a)}while(o.length);return i},sf=(e,t,r)=>{let n=Object.keys(t),o={};e.forEach(e=>{o[e]=!0});let i=0,a=[];for(;i<e.length;){if(!o[e[i]]){i+=1;continue}let s=[],c=[e[i]],l={[e[i]]:!0};do{let e=c.shift();delete o[e],s.push(e);let i={};n.forEach(n=>{let o=r[n][e];o&&o.map(e=>t[n][e]).map(e=>sn[n](e).forEach(e=>{i[e]=!0}))});let a=Object.keys(i).filter(e=>o[e]).filter(e=>!l[e]);c.push(...a),a.forEach(e=>{l[e]=!0})}while(c.length);i+=1,a.push(s)}return a},sp=(e,t,r)=>{let n=oZ(e),o=n0(e,r);for(let e=0;e<o.length;e+=1)n[e]||o[e].reverse();let i=t.map(e=>2===e.length&&e[0]!==e[1]).map((e,t)=>e?t:void 0).filter(e=>void 0!==e),a=i.map(t=>e.edges_vertices[t]).map(t=>t.map(t=>e.vertices_coords[t])),s=a.map(e=>rT.core.subtract2(e[1],e[0])),c=[];return i.forEach(e=>{c[e]=[]}),i.map((e,t)=>o.map(e=>rT.core.clipLineConvexPolygon(e,s[t],a[t][0],rT.core.exclude,rT.core.excludeS,r)).map(e=>void 0!==e)).forEach((e,t)=>e.forEach((e,r)=>{e&&c[i[t]].push(r)})),c},sd=(e,t,r)=>sp(e,t,r).map((t,r)=>t.map(t=>[e.edges_faces[r],[t,t]])).reduce((e,t)=>e.concat(t),[]),sh=(e,t)=>{let r=e.edges_vertices.map(t=>e.vertices_coords[t[0]]),n=e.edges_vertices.map(t=>rT.core.subtract2(e.vertices_coords[t[1]],e.vertices_coords[t[0]]));return e.edges_faces.map((e,o)=>e.map(e=>rT.core.cross2(rT.core.subtract2(t[e],r[o]),n[o])).map(e=>Math.sign(e)))},sm=(e,t,r,n)=>{let o=r.map(t=>e.edges_vertices[t[0]].map(t=>e.vertices_coords[t])),i=o.map(e=>e[0]),a=o.map(e=>rT.core.subtract2(e[1],e[0]));return n.map(e=>e.map(e=>e.map(e=>t[e]))).map((e,t)=>e.map(e=>e.map(e=>rT.core.cross2(rT.core.subtract2(e,i[t]),a[t])).map(e=>Math.sign(e))))},sg=e=>1===e[0]&&-1===e[1]||-1===e[0]&&1===e[1]?"both":1===e[0]&&1===e[1]?"right":-1===e[0]&&-1===e[1]?"left":void 0,sv=e=>e[0]===e[1]&&"both"!==e[0],s_=e=>e[0]===e[1]&&"both"===e[0],sy=e=>e[0]!==e[1]&&("both"===e[0]||"both"===e[1]),sb=(e,t,r)=>{let n="left"===t[0]||"left"===t[1]?-1:1,o="both"===t[0]?[...e[1]]:[...e[0]],i=+("both"!==t[0]);return{taco:o,tortilla:r[i][0]===n?e[i][0]:e[i][1]}},sE=(e,t)=>{if(void 0!==e)return t[0][0]===t[1][0]?e:[e[0],[e[1][1],e[1][0]]]},sx=(e,t=rT.core.EPSILON)=>{let r=n1(e),n=sh(e,r),o=np(ae(e,t)).filter(t=>t.map(t=>e.edges_faces[t].length>1).reduce((e,t)=>e&&t,!0)),i=o.map(t=>t.map(t=>e.edges_faces[t])),a=sm(e,r,o,i),s=a.map(e=>e.map(sg)),c=s.map((e,t)=>sv(e)?i[t]:void 0).filter(e=>void 0!==e),l=s.map((e,t)=>s_(e)?i[t]:void 0).map((e,t)=>sE(e,a[t])).filter(e=>void 0!==e),u=sd(e,n,t),f=l.concat(u),p=s.map((e,t)=>sy(e)?sb(i[t],s[t],a[t]):void 0).filter(e=>void 0!==e),d=nf(ar(e,t)).map((e,t)=>n[t].length>1&&n[t][0]===n[t][1]?e:[]).map((t,r)=>({taco:e.edges_faces[r],tortillas:t})).filter(e=>e.tortillas.length).flatMap(e=>e.tortillas.map(t=>({taco:[...e.taco],tortilla:t})));return{taco_taco:c,tortilla_tortilla:f,taco_tortilla:p.concat(d)}},sO=(e,t,r,n=rT.core.EPSILON)=>{t||(t=an(e,n)),r||(r=oZ(e));let o=e.faces_vertices.map(t=>t.map(t=>e.vertices_coords[t]));o.forEach((e,t)=>{r[t]||e.reverse()});let i=e.faces_vertices.map(()=>[]);for(let e=0;e<i.length-1;e+=1)for(let r=e+1;r<i.length;r+=1){if(!t[e][r])continue;let a=rT.core.clipPolygonPolygon(o[e],o[r],n);a&&(i[e][r]=a)}let a=[];for(let e=0;e<i.length-1;e+=1)for(let r=e+1;r<i.length;r+=1)if(i[e][r])for(let s=r+1;s<i.length;s+=1)e!==s&&r!==s&&t[e][s]&&t[r][s]&&rT.core.clipPolygonPolygon(i[e][r],o[s],n)&&a.push([e,r,s].sort((e,t)=>e-t));return a},sk=(e,t)=>{let r={};return t.taco_taco.map(e=>[e[0][0],e[0][1],e[1][0],e[1][1]].sort((e,t)=>e-t)).forEach(e=>[`${e[0]} ${e[1]} ${e[2]}`,`${e[0]} ${e[1]} ${e[3]}`,`${e[0]} ${e[2]} ${e[3]}`,`${e[1]} ${e[2]} ${e[3]}`].forEach(e=>{r[e]=!0})),t.taco_tortilla.map(e=>[e.taco[0],e.taco[1],e.tortilla].sort((e,t)=>e-t).join(" ")).forEach(e=>{r[e]=!0}),e.filter(e=>void 0===r[e.join(" ")])},sM=(e,t)=>{let r={};return r.taco_taco=e.taco_taco.map(e=>[e[0][0],e[1][0],e[0][1],e[1][1]]),r.taco_tortilla=e.taco_tortilla.map(e=>[e.taco[0],e.tortilla,e.taco[1]]),r.tortilla_tortilla=e.tortilla_tortilla.map(e=>[e[0][0],e[0][1],e[1][0],e[1][1]]),r.transitivity=t.map(e=>[e[0],e[1],e[2]]),r},sA=e=>{let t={};return Object.keys(e).forEach(e=>{t[e]={}}),Object.keys(e).forEach(r=>{e[r].forEach((e,n)=>sn[r](e).forEach(e=>{void 0===t[r][e]&&(t[r][e]=[]),t[r][e].push(n)}))}),t},sj={0:0,1:2,2:1},sP={M:1,m:1,V:2,v:2},sw=(e,t)=>(t||(t=an(e)),np(t).map(e=>e.join(" "))),sS=(e,t,r)=>{r||(r=oZ(e));let n={};t.forEach(e=>{n[e]=!0});let o={};return e.edges_faces.forEach((t,i)=>{let a=sP[e.edges_assignment[i]];if(t.length<2||void 0===a)return;let s=r[t[0]]?a:sj[a],c=`${t[0]} ${t[1]}`,l=`${t[1]} ${t[0]}`;c in n&&(o[c]=s),l in n&&(o[l]=sj[s])}),o};var s$=Object.freeze({__proto__:null,makeFacePairs:sw,solveEdgeAdjacentFacePairs:sS});let sC=(e,t=1e-6)=>{let r=an(e,t),n=oZ(e),o=sx(e,t),i=sk(sO(e,r,n,t),o),a=sM(o,i),s=sA(a),c=sw(e,r),l=sS(e,c,n);return{constraints:a,constraintsLookup:s,facePairs:c,edgeAdjacentOrders:l}},sL=(e,t)=>{if(!e)return[];let r=[];Object.keys(e).forEach(t=>{let n=t.split(" ").map(e=>parseInt(e,10));-1===e[t]&&n.reverse(),void 0===r[n[0]]&&(r[n[0]]=[]),r[n[0]].push(n[1])}),t&&t.faces_vertices&&t.faces_vertices.forEach((e,t)=>{void 0===r[t]&&(r[t]=[])});let n=[],o=[],i=0;for(let e=0;e<r.length;e+=1){if(o[e])continue;let t=[e];for(;t.length&&i<2*r.length;){let e=t[t.length-1];if(r[e]&&r[e].length){let n=r[e].pop();o[n]||t.push(n);continue}n.push(e),o[e]=!0,t.pop(),i+=1}}return i>=2*r.length&&console.warn("fix protection in topological order"),n},sN=e=>{let t=Object.keys(e),r=t.map(e=>e.split(" ").map(e=>parseInt(e,10)));return r.map((r,n)=>r.push(e[t[n]])),r},sz=e=>{let t=e.reduce((e,t)=>e*t,1),r=e.slice();for(let e=r.length-2;e>=0;e-=1)r[e]*=r[e+1];return r.push(1),r.shift(),Array.from(Array(t)).map((t,n)=>e.map((e,t)=>Math.floor(n/r[t])%e))},sF={count:function(){return this.branches.map(e=>e.length)},solution:function(...e){let t=Array(this.branches.length).fill(0).map((t,r)=>null!=e[r]?e[r]:t),r=this.branches?this.branches.map((e,r)=>e[t[r]]):[];return Object.assign({},this.root,...r)},allSolutions:function(){return sz(this.count()).map(e=>this.solution(...e))},facesLayer:function(...e){return on(sL(this.solution(...e)))},allFacesLayers:function(){return sz(this.count()).map(e=>this.facesLayer(...e))},faceOrders:function(...e){return sN(this.solution(...e))},allFaceOrders:function(){return sz(this.count()).map(e=>this.faceOrders(...e))}},sI=(e,t,r,...n)=>{if(!r.length)return[];let o=r[0],i=[],a=[];[1,2].forEach(s=>{let c=su(e,t,[o],...n,{[o]:s});!1!==c&&(c[o]=s,Object.keys(c).length===r.length?i.push(c):a.push(c))});let s=a.map(o=>sI(e,t,r.filter(e=>!(e in o)),...n,o));return i.map(e=>[...n,e]).concat(...s)};var sV=Object.assign(Object.create(null),{solver:(e,t=1e-6)=>{let r=new Date,{constraints:n,constraintsLookup:o,facePairs:i,edgeAdjacentOrders:a}=sC(e,t),s=Date.now()-r,c=new Date,l=su(n,o,Object.keys(a),a);if(!l)return;let u=sf(i.filter(e=>!(e in a)).filter(e=>!(e in l)),n,o).map(e=>sI(n,o,e,a,l)).map(e=>e.map(e=>Object.assign({},...e))),f={...a,...l};si(f),u.forEach(e=>e.forEach(e=>si(e)));let p=Date.now()-c;return p>50&&console.log(`prep ${s}ms solver ${p}ms`),Object.assign(Object.create(sF),{root:f,branches:u})},table:se,topologicalOrder:sL,makeTacosTortillas:sx,makeFoldedStripTacos:aW,makeTransitivityTrios:sO,singleVertexSolver:a5,singleVertexAssignmentSolver:(e,t,r)=>{null==t&&(t=e.map(()=>"U"));let n=a6(t),o=n.map(t=>a5(e,t,r));return n.map((e,t)=>t).filter(e=>o[e].length>0).map(e=>({assignment:n[e],layer:o[e]}))},validateLayerSolver:aX,validateTacoTacoFacePairs:aH,validateTacoTortillaStrip:aJ,foldStripWithAssignments:a3},aG,s$);let sB=e=>{let t=0,r=0;for(let n=0;n<e.length;n+=1)("M"===e[n]||"m"===e[n])&&(t+=1),("V"===e[n]||"v"===e[n])&&(r+=1);for(let n=0;n<e.length;n+=1)if(t>r&&("V"===e[n]||"v"===e[n])||r>t&&("M"===e[n]||"m"===e[n]))return n};var sq=Object.freeze({__proto__:null,kawasakiSolutions:({vertices_coords:e,vertices_edges:t,edges_vertices:r,edges_vectors:n},o)=>{n||(n=nJ({vertices_coords:e,edges_vertices:r})),t||(t=nC({edges_vertices:r}));let i=t[o].map(e=>n[e]);return iI(rT.core.counterClockwiseOrder2(i).map(e=>i[e]))}}),sT=Object.assign(Object.create(null),{maekawaAssignments:a6,foldAngles4:(e,t,r=0)=>{let n=sB(t);if(void 0===n)return;let o=e[(n+1)%e.length],i=e[(n+2)%e.length],a=Math.PI*r,s=-Math.cos(o)*Math.cos(i)+Math.sin(o)*Math.sin(i)*Math.cos(Math.PI-a),c=-Math.acos(Math.cos(Math.PI-a)-Math.sin(Math.PI-a)**2*Math.sin(o)*Math.sin(i)/(1-s))+Math.PI;return n%2==0?[c,a,c,a].map((e,t)=>n===t?-e:e):[a,c,a,c].map((e,t)=>n===t?-e:e)}},iV,sq,iG);let sR=(e,...t)=>{if(!e)return;let r={},n=e.getAttribute("class"),o=n?n.split(" "):[];o.push(...t),o.forEach(e=>{r[e]=!0});let i=Object.keys(r).join(" ");e.setAttribute("class",i)},sU={},sD={stroke:E},sG={},sW={M:{stroke:"red"},m:{stroke:"red"},V:{stroke:"blue"},v:{stroke:"blue"},F:{stroke:"lightgray"},f:{stroke:"lightgray"}},sZ=e=>{let t={u:[],f:[],v:[],m:[],b:[]},r=e[h].map(e=>e.toLowerCase());return e[p].map((e,t)=>r[t]||"u").forEach((e,r)=>t[e].push(r)),t},sJ=({vertices_coords:e,edges_vertices:t})=>e&&t?t.map(t=>t.map(t=>e[t])):[],sH=e=>`M${e[0][0]} ${e[0][1]}L${e[1][0]} ${e[1][1]}`,sY=e=>sJ(e).map(e=>sH(e)).join(""),sX=({vertices_coords:e,edges_vertices:t,edges_assignment:r})=>{if(!e||!t)return{};if(!r)return{u:sY({vertices_coords:e,edges_vertices:t})};let n=sZ({vertices_coords:e,edges_vertices:t,edges_assignment:r});return Object.keys(n).forEach(r=>{n[r]=sY({vertices_coords:e,edges_vertices:n[r].map(e=>t[e])})}),Object.keys(n).forEach(e=>{""===n[e]&&delete n[e]}),n},sK=({vertices_coords:e,edges_vertices:t,edges_assignment:r})=>{let n=sX({vertices_coords:e,edges_vertices:t,edges_assignment:r});return Object.keys(n).forEach(e=>{let t=$.svg.path(n[e]);sR(t,r0[e]),n[e]=t}),n},sQ=(e,t={})=>Object.keys(t).forEach(r=>e.setAttributeNS(null,r,t[r])),s0=(e,t={})=>{let r=$.svg.g();if(!e)return r;let n=i5(e),o=sK(e);return Object.keys(o).forEach(e=>{sR(o[e],r0[e]),sQ(o[e],n?sG[e]:sW[e]),sQ(o[e],t[e]),sQ(o[e],t[r0[e]]),r.appendChild(o[e]),Object.defineProperty(r,r0[e],{get:()=>o[e]})}),sQ(r,n?sU:sD),sQ(r,t.stroke?{stroke:t.stroke}:{}),r},s1=e=>Math.abs(e)/180,s2=(e,t={})=>{let r=$.svg.g();if(!e)return r;let n=i5(e),o=(e.edges_assignment?e.edges_assignment:nW(e)).map(e=>e.toLowerCase()),i={};["b","m","v","f","u"].forEach(e=>{let o=$.svg.g();r.appendChild(o),sR(o,r0[e]),sQ(o,n?sG[e]:sW[e]),sQ(o,t[r0[e]]),Object.defineProperty(r,r0[e],{get:()=>o}),i[e]=o});let a=e.edges_vertices.map(t=>t.map(t=>e.vertices_coords[t])).map(e=>$.svg.line(e[0][0],e[0][1],e[1][0],e[1][1]));return e.edges_foldAngle&&a.forEach((t,r)=>{let n=e.edges_foldAngle[r];0!==n&&180!==n&&-180!==n&&t.setAttributeNS(null,"opacity",s1(n))}),a.forEach((e,t)=>i[o[t]].appendChild(e)),sQ(r,n?sU:sD),sQ(r,t.stroke?{stroke:t.stroke}:{}),r},s3={back:{fill:x},front:{fill:"#ddd"}},s8={back:{opacity:.1},front:{opacity:.1}},s5={},s4={stroke:E,"stroke-linejoin":"bevel"},s6={stroke:O,fill:E,"stroke-linejoin":"bevel"},s9={fill:O},s7=(e,t={})=>Object.keys(t).forEach(r=>e.setAttributeNS(null,r,t[r])),ce=(e,t,r,n)=>{var o;let i=i5(e),a=null!=e[g],s=[[_],[y]],c=oZ(e);return c.map(e=>e?s[0]:s[1]).forEach((e,r)=>{sR(t[r],e),s7(t[r],i?a?s3[e]:s8[e]:s5[e]),s7(t[r],n[e])}),(a?(o=e[g],Array.from(Array(e.faces_vertices.length||e.faces_edges.length)).map((e,t)=>t).filter(e=>null==o[e]).concat(on(o))).map(e=>t[e]):t).forEach(e=>r.appendChild(e)),Object.defineProperty(r,_,{get:()=>t.filter((e,t)=>c[t])}),Object.defineProperty(r,y,{get:()=>t.filter((e,t)=>!c[t])}),s7(r,i?a?s4:s6:s9),r},ct=(e,t={})=>{let r=$.svg.g();if(!e||!e.vertices_coords||!e.faces_vertices)return r;let n=e.faces_vertices.map(t=>t.map(t=>[0,1].map(r=>e.vertices_coords[t][r]))).map(e=>$.svg.polygon(e));return n.forEach((e,t)=>e.setAttributeNS(null,a,t)),r.setAttributeNS(null,"fill",x),ce(e,n,r,t)},cr=function(e,t={}){let r=$.svg.g();if(!e||d in e==!1||p in e==!1||f in e==!1)return r;let n=e[d].map(t=>t.map(t=>e[p][t]).map((e,t,r)=>{let n=r[(t+1)%r.length];return e[1]===n[0]||e[1]===n[1]?e[0]:e[1]}).map(t=>[0,1].map(r=>e[f][t][r]))).map(e=>$.svg.polygon(e));return n.forEach((e,t)=>e.setAttributeNS(null,a,t)),r.setAttributeNS(null,"fill","white"),ce(e,n,r,t)},cn={fill:O},co={stroke:E,fill:x},ci=(e,t={})=>Object.keys(t).forEach(r=>e.setAttributeNS(null,r,t[r])),ca={vertices:(e,t={})=>{let r=$.svg.g();return e&&e.vertices_coords&&(e.vertices_coords.map(e=>$.svg.circle(e[0],e[1],.01)).forEach(e=>r.appendChild(e)),r.setAttributeNS(null,"fill",O),Object.keys(t).forEach(e=>r.setAttributeNS(null,e,t[e]))),r},edges:(e,t)=>r5(e)?s0(e,t):s2(e,t),faces:(e,t)=>null!=e&&null!=e.faces_vertices?ct(e,t):cr(e,t),boundaries:(e,t={})=>{let r=$.svg.g();if(!e||!e.vertices_coords||!e.edges_vertices||!e.edges_assignment)return r;let n=ow(e).vertices.map(t=>[0,1].map(r=>e.vertices_coords[t][r]));if(0===n.length)return r;let o=$.svg.polygon(n);return sR(o,v),r.appendChild(o),ci(r,i5(e)?cn:co),Object.keys(t).forEach(e=>r.setAttributeNS(null,e,t[e])),r}},cs=(e,t,r)=>{let n=!1===r?$.svg.g():ca[e](t,r);return sR(n,e),n},cc=(e,t={})=>[u,l,c,s].map(r=>cs(r,e,t[r]));[u,l,c,s].forEach(e=>{cc[e]=function(t,r={}){return cs(e,t,r[e])}});let cl=({vertices_coords:e})=>{if(null==e||0===e.length)return;let t=[,,].fill(1/0),r=[,,].fill(-1/0);return e.forEach(e=>{e[0]<t[0]&&(t[0]=e[0]),e[0]>r[0]&&(r[0]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>r[1]&&(r[1]=e[1])}),Number.isNaN(t[0])||Number.isNaN(t[1])||Number.isNaN(r[0])||Number.isNaN(r[1])?void 0:[t[0],t[1],r[0]-t[0],r[1]-t[1]]},cu=(e,t)=>{for(let r=0;r<e.childNodes.length;r+=1)e.childNodes[r].setAttributeNS(null,"r",t)},cf=e=>"SVG"===(e.nodeName||"").toUpperCase()?e:e.parentNode?cf(e.parentNode):void 0,cp=(e,t,r,n)=>{let o=t[3]&&t[3].childNodes.length;if(!(n.strokeWidth||n.viewBox||o))return;let i=cl(r),a=i?Math.max(i[2],i[3]):1,s=cf(e);if(s&&n.viewBox){let e=i?i.join(" "):"0 0 1 1";s.setAttributeNS(null,"viewBox",e)}if(n.strokeWidth||n["stroke-width"]){let t=n.strokeWidth?n.strokeWidth:n["stroke-width"];e.setAttributeNS(null,"stroke-width","number"==typeof t?a*t:.01*a)}if(o){let e=n.vertices&&null!=n.vertices.radius?n.vertices.radius:n.radius,r="string"==typeof e?parseFloat(e):e,o="number"!=typeof r||Number.isNaN(r)?.02*a:a*r;cu(t[3],o)}},cd=(e,t)=>{let r=[t.file_classes||[],t.frame_classes||[]].flat();r.length&&sR(e,...r)},ch=(e,t,r={})=>{let n=cc(t,r);return n.filter(e=>e.childNodes.length>0).forEach(t=>e.appendChild(t)),cp(e,n,t,r),cd(e,t),Object.keys(cc).filter(t=>null==e[t]).forEach((t,r)=>Object.defineProperty(e,t,{get:()=>n[r]})),e},cm=(e,t)=>ch($.svg(),e,t);Object.keys(cc).forEach(e=>{cm[e]=cc[e]}),cm.drawInto=ch,cm.getViewBox=e=>{let t=cl(e);return void 0===t?"":t.join(" ")},Object.defineProperty(cm,"linker",{enumerable:!1,value:(function(e){e.graph.svg=this;let t={svg:this};Object.keys(t).forEach(r=>{e.graph.prototype[r]=function(){return t[r](this,...arguments)}})}).bind(cm)});let cg={init:()=>{}};function cv(){return cg.init(...arguments)}let c_="class",cy="function",cb="undefined",cE="number",cx="string",cO="object",ck="path",cM="style",cA="viewBox",cj="transform",cP="points",cw="stroke",cS="none",c$="arrow",cC="head",cL="tail",cN=typeof window!==cb&&typeof window.document!==cb,cz=typeof process!==cb&&null!=process.versions&&null!=process.versions.node,cF=[];cF[10]='"error 010: window" not set. if using node/deno, include package @xmldom/xmldom, set to the main export ( ear.window = xmldom; )';let cI={window:void 0},cV=e=>new e.DOMParser().parseFromString("<!DOCTYPE html><title>.</title>","text/html"),cB=e=>(e.document||(e.document=cV(e)),cI.window=e,cI.window);cN&&(cI.window=window);let cq=()=>{if(void 0===cI.window)throw cF[10];return cI.window};var cT="http://www.w3.org/2000/svg",cR={s:["svg"],d:["defs"],h:["desc","filter","metadata","style","script","title","view"],c:["cdata"],g:["g"],v:["circle","ellipse","line","path","polygon","polyline","rect"],t:["text"],i:["marker","symbol","clipPath","mask"],p:["linearGradient","radialGradient","pattern"],cT:["textPath","tspan"],cG:["stop"],cF:["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]};let cU=(e,t)=>[e[0]+t[0],e[1]+t[1]],cD=(e,t)=>[e[0]-t[0],e[1]-t[1]],cG=(e,t)=>[e[0]*t,e[1]*t],cW=e=>e[0]**2+e[1]**2,cZ=e=>Math.sqrt(cW(e)),cJ=(e,t)=>cW(cD(e,t)),cH=(e,t)=>Math.sqrt(cJ(e,t)),cY=(e,t)=>[Math.cos(e)*t,Math.sin(e)*t];var cX=Object.freeze({__proto__:null,svg_add2:cU,svg_sub2:cD,svg_scale2:cG,svg_magnitudeSq2:cW,svg_magnitude2:cZ,svg_distanceSq2:cJ,svg_distance2:cH,svg_polar_to_cart:cY});let cK=(e,t,r,n,o,i=!1)=>{if(null==o)return"";let a=cY(n,r),s=cY(o,r),c=[s[0]-a[0],s[1]-a[1]],l=Math.atan2(a[0]*s[1]-a[1]*s[0],a[0]*s[0]+a[1]*s[1])>0?0:1,u=i?`M ${e},${t} l ${a[0]},${a[1]} `:`M ${e+a[0]},${t+a[1]} `;return u+=["a ",r,r,0,l,1,c[0],c[1]].join(" "),i&&(u+=" Z"),u},cQ=(e,t,r,n,o)=>[cK(e,t,r,n,o,!1)],c0=(e,t,r,n,o)=>[cK(e,t,r,n,o,!0)],c1=(e=-1,t=0,r=2,n=1)=>Array.from(Array(129)).map((e,t)=>(t-128)/128*2+1).map(o=>[e+(o+1)*r*.5,t+o**2*n]),c2=(e,t,r,n)=>{let o=[t,r];return Array.from(Array(e)).map((t,r)=>2*Math.PI*(r/e)).map(e=>[Math.cos(e),Math.sin(e)]).map(e=>o.map((t,r)=>t+n*e[r]))};var c3={roundRect:{nodeName:ck,attributes:["d"],args:(e,t,r,n,o=0)=>{o>r/2&&(o=r/2),o>n/2&&(o=n/2);let i=r-2*o,a=n-2*o,s=`A${o} ${o} 0 0 1`;return[[`M${e+(r-i)/2},${t}`,`h${i}`,s,`${e+r},${t+(n-a)/2}`,`v${a}`,s,`${e+r-o},${t+n}`,`h${-i}`,s,`${e},${t+n-o}`,`v${-a}`,s,`${e+o},${t}`].join(" ")]}}},c8={toCamel:e=>e.replace(/([-_][a-z])/ig,e=>e.toUpperCase().replace("-","").replace("_","")),toKebab:e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").replace(/([A-Z])([A-Z])(?=[a-z])/g,"$1-$2").toLowerCase(),capitalized:e=>e.charAt(0).toUpperCase()+e.slice(1)};let c5=e=>null!=e&&typeof e[Symbol.iterator]===cy,c4=function(){switch(arguments.length){case void 0:case 0:return Array.from(arguments);case 1:return c5(arguments[0])&&typeof arguments[0]!==cx?c4(...arguments[0]):[arguments[0]];default:return Array.from(arguments).map(e=>c5(e)?[...c4(e)]:e)}};var c6=(...e)=>e.filter(e=>typeof e===cE).concat(e.filter(e=>typeof e===cO&&null!==e).map(e=>typeof e.x===cE?[e.x,e.y]:typeof e[0]===cE?[e[0],e[1]]:void 0).filter(e=>void 0!==e).reduce((e,t)=>e.concat(t),[]));let c9=[cL,cC],c7=e=>e.join(","),le=e=>"M"+e.map(e=>e.join(",")).join("L")+"Z",lt=function(e){let t=[[0,1],[2,3]].map(t=>t.map(t=>e.points[t]||0)),r=cD(t[1],t[0]),n=cU(t[0],cG(r,.5)),o=cZ(r),i=c9.map(t=>e[t].visible?(1+e[t].padding)*e[t].height*2.5:0).reduce((e,t)=>e+t,0);if(o<i){let e=0===o?[i,0]:cG(r,i/o);t=[cD,cU].map(t=>t(n,cG(e,.5))),r=cD(t[1],t[0])}let a=[r[1],-r[0]],s=cU(n,cG(a,e.bend)),c=t.map(e=>cD(s,e)),l=c.map(e=>cZ(e)),u=c.map((e,t)=>0===l[t]?e:cG(e,1/l[t])),f=u.map(e=>cG(e,-1)),p=f.map(e=>[e[1],-e[0]]),d=c9.map((t,r)=>e[t].padding?e[t].padding:e.padding?e.padding:0),h=c9.map((t,r)=>!!e[t].visible*e[t].height).map((e,t)=>e+d[t]),m=t.map((e,t)=>cU(e,cG(u[t],h[t])));a=[(r=cD(m[1],m[0]))[1],-r[0]],n=cU(m[0],cG(r,.5)),s=cU(n,cG(a,e.bend));let g=m.map((t,r)=>cU(t,cG(cD(s,t),e.pinch))),v=c9.map((t,r)=>[cU(m[r],cG(f[r],e[t].height)),cU(m[r],cG(p[r],e[t].width/2)),cU(m[r],cG(p[r],-e[t].width/2))]);return{line:`M${c7(m[0])}C${c7(g[0])},${c7(g[1])},${c7(m[1])}`,tail:le(v[0]),head:le(v[1])}},lr=(e,t,r)=>{"boolean"==typeof t?e.options[r].visible=t:typeof t===cO?(Object.assign(e.options[r],t),null==t.visible&&(e.options[r].visible=!0)):null==t&&(e.options[r].visible=!0)},ln=(e,t={},r=cC)=>{let n=e.getElementsByClassName(`${c$}-${r}`)[0];Object.keys(t).map(e=>({key:e,fn:n[c8.toCamel(e)]})).filter(e=>typeof e.fn===cy&&"class"!==e.key).forEach(e=>e.fn(t[e.key])),Object.keys(t).filter(e=>"class"===e).forEach(e=>n.classList.add(t[e]))},lo=e=>{let t=lt(e.options);return Object.keys(t).map(t=>({path:t,element:e.getElementsByClassName(`${c$}-${t}`)[0]})).filter(e=>e.element).map(e=>(e.element.setAttribute("d",t[e.path]),e)).filter(t=>e.options[t.path]).forEach(t=>t.element.setAttribute("visibility",e.options[t.path].visible?"visible":"hidden")),e},li=(e,...t)=>(e.options.points=c6(...c4(...t)).slice(0,4),lo(e));var la={setPoints:li,points:li,bend:(e,t)=>(e.options.bend=t,lo(e)),pinch:(e,t)=>(e.options.pinch=t,lo(e)),padding:(e,t)=>(e.options.padding=t,lo(e)),head:(e,t)=>(lr(e,t,cC),ln(e,t,cC),lo(e)),tail:(e,t)=>(lr(e,t,cL),ln(e,t,cL),lo(e)),getLine:e=>e.getElementsByClassName(`${c$}-line`)[0],getHead:e=>e.getElementsByClassName(`${c$}-${cC}`)[0],getTail:e=>e.getElementsByClassName(`${c$}-${cL}`)[0]};let ls=()=>({visible:!1,width:8,height:10,padding:0}),lc=()=>({head:ls(),tail:ls(),bend:0,padding:0,pinch:.618,points:[]}),ll=Object.keys(lc()),lu=(...e)=>{for(let t=0;t<e.length;t+=1){if(typeof e[t]!==cO)continue;let r=Object.keys(e[t]);for(let n=0;n<r.length;n+=1)if(ll.includes(r[n]))return e[t]}},lf=function(){return c4(arguments).reduce((e,t)=>e.concat(t),[])},lp=(e=[],t=0,r=.5)=>{let n=[e[0]||0,e[1]||0],o=[e[2]||0,e[3]||0],i=cD(o,n),a=cU(n,cG(i,.5)),s=cU(a,cG([i[1],-i[0]],t)),c=cU(n,cG(cD(s,n),r)),l=cU(o,cG(cD(s,o),r));return`M${n[0]},${n[1]}C${c[0]},${c[1]} ${l[0]},${l[1]} ${o[0]},${o[1]}`},ld=e=>e.slice(1).split(/[, ]+/).map(e=>parseFloat(e)),lh=e=>e.match(/[Cc][(0-9), .-]+/).map(e=>ld(e)),lm=e=>e.match(/[Mm][(0-9), .-]+/).map(e=>ld(e)),lg=e=>{let t=lm(e).shift(),r=lh(e).shift();return[...t?[t[t.length-2],t[t.length-1]]:[0,0],...r?[r[r.length-2],r[r.length-1]]:[0,0]]},lv=(e,...t)=>{let r=c6(...lf(...t)).slice(0,4);return e.setAttribute("d",lp(r,e._bend,e._pinch)),e},l_={};Object.assign(l_,{arc:{nodeName:ck,attributes:["d"],args:cQ,methods:{setArc:(e,...t)=>e.setAttribute("d",cQ(...t))}}},{wedge:{nodeName:ck,args:c0,attributes:["d"],methods:{setArc:(e,...t)=>e.setAttribute("d",c0(...t))}}},{parabola:{nodeName:"polyline",attributes:[cP],args:(e,t,r,n)=>[c1(e,t,r,n).map(e=>`${e[0]},${e[1]}`).join(" ")]}},{regularPolygon:{nodeName:"polygon",attributes:[cP],args:(e,t=0,r=0,n=1)=>[c2(e,t,r,n).map(e=>`${e[0]},${e[1]}`).join(" ")]}},c3,{arrow:{nodeName:"g",attributes:[],args:()=>[],methods:la,init:function(e,...t){e.classList.add(c$);let r=["line",cL,cC].map(t=>cv.path().addClass(`${c$}-${t}`).appendTo(e));r[0].setAttribute(cM,"fill:none;"),r[1].setAttribute(cw,cS),r[2].setAttribute(cw,cS),e.options=lc(),la.setPoints(e,...t);let n=lu(...t);return n&&Object.keys(n).filter(e=>la[e]).forEach(t=>la[t](e,n[t])),e}}},{curve:{nodeName:ck,attributes:["d"],args:(...e)=>[lp(c6(...lf(...e)))],methods:{setPoints:lv,bend:(e,t)=>(e._bend=t,lv(e,...lg(e.getAttribute("d")))),pinch:(e,t)=>(e._pinch=t,lv(e,...lg(e.getAttribute("d"))))}}});let ly=Object.keys(l_),lb=[cR.h,cR.p,cR.i],lE=[cR.g,cR.v,cR.t,ly],lx={svg:[cR.s,cR.d].concat(lb).concat(lE),g:lE,text:[cR.cT],linearGradient:[cR.cG],radialGradient:[cR.cG],defs:lb,filter:[cR.cF],marker:lE,symbol:lE,clipPath:lE,mask:lE},lO=Object.create(null);Object.keys(lx).forEach(e=>{lO[e]=lx[e].reduce((e,t)=>e.concat(t),[])});let lk=function(e,t,r,n,o=0){let i=r/1-r;return[e-i-o,t-i-o,r+2*i+2*o,n+2*i+2*o].join(" ")};function lM(){let e=c6(...lf(arguments));return 2===e.length&&e.unshift(0,0),4===e.length?lk(...e):void 0}let lA=e=>new(cq()).DOMParser().parseFromString("<root></root>","text/xml").createCDATASection(`${e}`),lj=e=>{for(;e.lastChild;)e.removeChild(e.lastChild);return e},lP=(e,t)=>{for(;t.childNodes.length>0;){let r=t.childNodes[0];t.removeChild(r),e.appendChild(r)}return e},lw=(e,t)=>(Array.from(t.attributes).forEach(t=>e.setAttribute(t.name,t.value)),lP(e,t));var lS={removeChildren:lj,appendTo:(e,t)=>(null!=t&&t.appendChild(e),e),setAttributes:(e,t)=>Object.keys(t).forEach(r=>e.setAttribute(c8.toKebab(r),t[r]))};let l$=e=>{if(null===e)return e;for(let t=e.childNodes.length-1;t>=0;t-=1){let r=e.childNodes[t];3===r.nodeType&&r.data.match(/^\s*$/)&&e.removeChild(r),1===r.nodeType&&l$(r)}return e},lC=e=>new(cq()).DOMParser().parseFromString(e,"text/xml"),lL=e=>{let t=e.getElementsByTagName("parsererror");if(t.length>0)throw Error(t[0]);return l$(e.documentElement)},lN=function(e){if(typeof e===cx||e instanceof String)try{return lL(lC(e))}catch(e){return e}if(null!=e.childNodes)return e},lz=e=>typeof e===cx&&/^[\w,\s-]+\.[A-Za-z]{3}$/.test(e)&&e.length<1e4,lF=e=>lz(e)&&cN&&typeof cq().fetch===cy?new Promise((t,r)=>{if(typeof e===cx||e instanceof String)fetch(e).then(e=>e.text()).then(e=>lL(lC(e))).then(e=>"svg"===e.nodeName?e:e.getElementsByTagName("svg")[0]).then(e=>null==e?r(Error("valid XML found, but no SVG element")):t(e)).catch(e=>r(e));else if(e instanceof cq().Document)return asyncDone(e)}):lN(e),lI=()=>({download:!1,output:cx,windowStyle:!1,filename:"image.svg"}),lV=function(){let e=[];if(cq().document.styleSheets)for(let t=0;t<cq().document.styleSheets.length;t+=1){let r=cq().document.styleSheets[t];try{let t="cssRules"in r?r.cssRules:r.rules;for(let r=0;r<t.length;r+=1){let n=t[r];"cssText"in n?e.push(n.cssText):e.push(`${n.selectorText} {
${n.style.cssText}
}
`)}}catch(e){console.warn(e)}}return e.join("\n")},lB=function(e,t){let r=new(cq()).Blob([t],{type:"text/plain"}),n=cq().document.createElement("a");n.setAttribute("href",cq().URL.createObjectURL(r)),n.setAttribute("download",e),cq().document.body.appendChild(n),n.click(),cq().document.body.removeChild(n)},lq=function(e,t){if((t=Object.assign(lI(),t)).windowStyle){let t=cq().document.createElementNS(cT,cM);t.setAttribute("type","text/css"),t.innerHTML=lV(),e.appendChild(t)}let r=function(e,t){let r=e.replace(/>\s{0,}</g,"><").replace(/</g,"~::~<").replace(/\s*xmlns\:/g,"~::~xmlns:").split("~::~"),n=r.length,o=!1,i=0,a="",s=["\n"];for(let e=0;e<100;e+=1)s.push(s[e]+"	");for(let e=0;e<n;e+=1)r[e].search(/<!/)>-1?(a+=s[i]+r[e],o=!0,(r[e].search(/-->/)>-1||r[e].search(/\]>/)>-1||r[e].search(/!DOCTYPE/)>-1)&&(o=!1)):r[e].search(/-->/)>-1||r[e].search(/\]>/)>-1?(a+=r[e],o=!1):/^<\w/.exec(r[e-1])&&/^<\/\w/.exec(r[e])&&/^<[\w:\-\.\,]+/.exec(r[e-1])==/^<\/[\w:\-\.\,]+/.exec(r[e])[0].replace("/","")?(a+=r[e],o||(i-=1)):r[e].search(/<\w/)>-1&&-1===r[e].search(/<\//)&&-1===r[e].search(/\/>/)?a=o?a+=r[e]:a+=s[i++]+r[e]:r[e].search(/<\w/)>-1&&r[e].search(/<\//)>-1?a=o?a+=r[e]:a+=s[i]+r[e]:r[e].search(/<\//)>-1?a=o?a+=r[e]:a+=s[--i]+r[e]:r[e].search(/\/>/)>-1?a=o?a+=r[e]:a+=s[i]+r[e]:r[e].search(/<\?/)>-1||r[e].search(/xmlns\:/)>-1||r[e].search(/xmlns\=/)>-1?a+=s[i]+r[e]:a+=r[e];return"\n"===a[0]?a.slice(1):a}(new(cq()).XMLSerializer().serializeToString(e));return t.download&&cN&&!cz&&lB(t.filename,r),"svg"===t.output?e:r},lT=(e,...t)=>{let r=1===t.length&&typeof t[0]===cx?t[0]:lM(...t);return r&&e.setAttribute(cA,r),e},lR=function(e){let t=e.getAttribute(cA);return null==t?void 0:t.split(" ").map(e=>parseFloat(e))},lU=function(e,t,r){let n=e.createSVGPoint();n.x=t,n.y=r;let o=n.matrixTransform(e.getScreenCTM().inverse());return[o.x,o.y]};var lD=Object.freeze({__proto__:null,setViewBox:lT,getViewBox:lR,convertToViewBox:lU});let lG=(e,t)=>{let r=lF(t);if(null!=r)return typeof r.then===cy?r.then(t=>lw(e,t)):lw(e,r)},lW=function(e){let t=lR(e);if(void 0!==t)return t;if(typeof e.getBoundingClientRect===cy){let t=e.getBoundingClientRect();return[t.x,t.y,t.width,t.height]}return[]},lZ="svg-background-rectangle",lJ=function(e){let t=e.getElementsByTagName(cM);return 0===t.length?void 0:t[0]},lH=function(e,t){let r=lJ(e);return null==r&&(r=this.Constructor(cM),e.insertBefore(r,e.firstChild)),r.textContent="",r.appendChild(lA(t)),r},lY={math:{vector:(...e)=>[...e]}},lX={move:["mousemove","touchmove"],press:["mousedown","touchstart"],release:["mouseup","touchend"],leave:["mouseleave","touchcancel"]},lK=Object.values(lX).reduce((e,t)=>e.concat(t),[]),lQ=(e,t)=>lK.forEach(r=>{t[r].forEach(t=>e.removeEventListener(r,t)),t[r]=[]}),l0=(e,t,r)=>Object.defineProperty(e,t,{get:()=>r,enumerable:!0,configurable:!0}),l1=(e,t)=>{["pressX","pressY"].filter(t=>!Object.prototype.hasOwnProperty.call(e,t)).forEach((r,n)=>l0(e,r,t[n])),Object.prototype.hasOwnProperty.call(e,"press")||l0(e,"press",lY.math.vector(...t))},l2=function(e){let t=[],r=[];Object.keys(lX).forEach(e=>{lX[e].forEach(e=>{r[e]=[]})});let n=t=>lX[t].forEach(t=>r[t].forEach(r=>e.removeEventListener(t,r))),o={press:(e,r)=>{l1(e,t=r)},release:()=>{},leave:()=>{},move:(e,r)=>{e.buttons>0&&void 0===t[0]?t=r:0===e.buttons&&void 0!==t[0]&&(t=[]),l1(e,t)}};Object.keys(lX).forEach(t=>{Object.defineProperty(e,`on${c8.capitalized(t)}`,{set:i=>{if(null==i)return void n(t);lX[t].forEach(n=>{let a=r=>{let n=null!=r.touches?r.touches[0]:r;if(void 0!==n){let i=lU(e,n.clientX,n.clientY).map(e=>Number.isNaN(e)?void 0:e);["x","y"].filter(e=>!Object.prototype.hasOwnProperty.call(r,e)).forEach((e,t)=>l0(r,e,i[t])),Object.prototype.hasOwnProperty.call(r,"position")||l0(r,"position",lY.math.vector(...i)),o[t](r,i)}i(r)};e.addEventListener&&(r[n].push(a),e.addEventListener(n,a))})},enumerable:!0})}),Object.defineProperty(e,"off",{value:()=>lQ(e,r)})};var l3=()=>Math.random().toString(36).replace(/[^a-z]+/g,"").concat("aaaaa").substr(0,5);let l8=function(e){let t,r,n={},o=0,i=()=>{cq().cancelAnimationFrame&&cq().cancelAnimationFrame(r),Object.keys(n).forEach(e=>delete n[e]),t=void 0,o=0};Object.defineProperty(e,"play",{set:e=>{if(i(),null==e)return;let a=l3();n[a]=i=>{t||(t=i,o=0),e({time:(i-t)*.001,frame:o}),o+=1,n[a]&&(r=cq().requestAnimationFrame(n[a]))},cq().requestAnimationFrame&&(r=cq().requestAnimationFrame(n[a]))},enumerable:!0}),Object.defineProperty(e,"stop",{value:i,enumerable:!0})},l5=e=>e&&e.parentNode?e.parentNode.removeChild(e):void 0,l4=[["cx","cy"],["x","y"]],l6=function(e,t={}){let r=[0,0],n={selected:!1,svg:void 0,updatePosition:e=>e},o=()=>{n.svg&&(n.svg.parentNode||e.appendChild(n.svg),l4.filter(e=>null!=n.svg[e[0]]).forEach(e=>e.forEach((e,t)=>{n.svg.setAttribute(e,r[t])})))},i=new Proxy(r,{set:(e,t,r)=>(e[t]=r,o(),!0)}),a=function(...e){c6(...lf(...e)).forEach((e,t)=>{r[t]=e}),o(),typeof r.delegate===cy&&r.delegate.apply(r.pointsContainer,[i,r.pointsContainer])};return r.delegate=void 0,r.setPosition=a,r.onMouseMove=e=>n.selected?a(n.updatePosition(e)):void 0,r.onMouseUp=()=>{n.selected=!1},r.distance=e=>Math.sqrt(cJ(e,r)),["x","y"].forEach((e,t)=>Object.defineProperty(r,e,{get:()=>r[t],set:e=>{r[t]=e}})),["svg","updatePosition","selected"].forEach(e=>Object.defineProperty(r,e,{get:()=>n[e],set:t=>{n[e]=t}})),Object.defineProperty(r,"remove",{value:()=>{l5(n.svg),r.delegate=void 0}}),i},l9=function(e,t,r){let n,o,i=Array.from(Array(t)).map(()=>l6(e,r)),a=e=>typeof o===cy?o.call(i,e,n,i):void 0;i.forEach(e=>{e.delegate=a,e.pointsContainer=i}),e.onPress=function(e){i.length>0&&(n=i.map((t,r)=>({i:r,d:cJ(t,[e.x,e.y])})).sort((e,t)=>e.d-t.d).shift().i,i[n].selected=!0)},e.onMove=function(e){i.forEach(t=>t.onMouseMove(e))},e.onRelease=function(){i.forEach(e=>e.onMouseUp()),n=void 0},Object.defineProperty(i,"selectedIndex",{get:()=>n}),Object.defineProperty(i,"selected",{get:()=>i[n]}),Object.defineProperty(i,"add",{value:t=>{i.push(l6(e,t))}}),i.removeAll=()=>{for(;i.length>0;)i.pop().remove()};let s={onChange:(e,t)=>{if(o=e,!0===t){let t=i.length-1;e.call(i,i[t],t,i)}},position:e=>i.forEach((t,r)=>t.setPosition(e.call(i,t,r,i))),svg:e=>i.forEach((t,r)=>{t.svg=e.call(i,t,r,i)})};return Object.keys(s).forEach(e=>{i[e]=function(){return typeof arguments[0]===cy&&s[e](...arguments),i}}),i.parent=function(e){return null!=e&&null!=e.appendChild&&i.forEach(t=>{e.appendChild(t.svg)}),i},i},l7=e=>{e.controls=(...t)=>l9.call(e,e,...t)},ue=(e,...t)=>{let r=t.map(e=>lN(e)).filter(e=>void 0!==e);return r.filter(e=>"svg"===e.tagName).forEach(t=>lP(e,t)),r.filter(e=>"svg"!==e.tagName).forEach(t=>e.appendChild(t)),e};var ut=Object.assign(Object.create(null),{svg:[cA],line:["x1","y1","x2","y2"],rect:["x","y","width","height"],circle:["cx","cy","r"],ellipse:["cx","cy","rx","ry"],polygon:[cP],polyline:[cP],path:["d"],text:["x","y"],mask:["id"],symbol:["id"],clipPath:["id","clip-rule"],marker:["id","markerHeight","markerUnits","markerWidth","orient","refX","refY"],linearGradient:["x1","x2","y1","y2"],radialGradient:["cx","cy","r","fr","fx","fy"],stop:["offset","stop-color","stop-opacity"],pattern:["patternContentUnits","patternTransform","patternUnits"]});let ur=(e,t)=>(e.setAttribute(ut.circle[2],t),e),un=(e,t,r)=>([...c6(...lf(t,r)).slice(0,2)].forEach((t,r)=>e.setAttribute(ut.circle[r],t)),e),uo=(e,t,r,n)=>[e,t,cH([e,t],[r,n])],ui=(e,t,r)=>([,,t,r].forEach((t,r)=>e.setAttribute(ut.ellipse[r],t)),e),ua=(e,t,r)=>([...c6(...lf(t,r)).slice(0,2)].forEach((t,r)=>e.setAttribute(ut.ellipse[r],t)),e),us=(...e)=>c6(...c4(...e)).slice(0,4),uc=/[MmLlSsQqLlHhVvCcSsQqTtAaZz]/g,ul=/-?[0-9]*\.?\d+/g,uu={m:"move",l:"line",v:"vertical",h:"horizontal",a:"ellipse",c:"curve",s:"smoothCurve",q:"quadCurve",t:"smoothQuadCurve",z:"close"};Object.keys(uu).forEach(e=>{let t=uu[e];uu[e.toUpperCase()]=t.charAt(0).toUpperCase()+t.slice(1)});let uf=function(e){let t,r=[];for(;null!==(t=uc.exec(e));)r.push(t);return r.map(t=>({command:e[t.index],index:t.index})).reduceRight((t,r)=>{let n=e.substring(r.index,t.length?t[t.length-1].index:e.length);return t.concat([{command:r.command,index:r.index,chunk:n.length>0?n.substr(1,n.length-1):n}])},[]).reverse().map(e=>{let t=e.chunk.match(ul);return e.en=uu[e.command],e.values=t?t.map(parseFloat):[],delete e.chunk,e})},up=e=>{let t=e.getAttribute("d");return null==t?"":t},ud=(e,t,...r)=>(e.setAttribute("d",`${up(e)}${t}${lf(...r).join(" ")}`),e),uh=e=>uf(up(e)),um={addCommand:ud,appendCommand:ud,clear:e=>(e.removeAttribute("d"),e),getCommands:uh,get:uh,getD:e=>e.getAttribute("d")};Object.keys(uu).forEach(e=>{um[uu[e]]=(t,...r)=>ud(t,e,...r)});let ug=(e,t,r)=>([,,t,r].forEach((t,r)=>e.setAttribute(ut.rect[r],t)),e),uv=(e,t,r)=>([...c6(...lf(t,r)).slice(0,2)].forEach((t,r)=>e.setAttribute(ut.rect[r],t)),e),u_=function(e){return[0,1].forEach(t=>{e[2+t]<0&&(void 0===e[0+t]&&(e[0+t]=0),e[0+t]+=e[2+t],e[2+t]=-e[2+t])}),e},uy=(...e)=>[function(){return Array.from(arguments).filter(e=>typeof e===cx||e instanceof String).shift()||l3()}(...e)],ub=e=>{let t=e.getAttribute(cP);return null==t?"":t},uE=(...e)=>[function(){return Array.from(Array(Math.floor(arguments.length/2))).map((e,t)=>`${arguments[2*t+0]},${arguments[2*t+1]}`).join(" ")}(...c6(...c4(...e)))],ux=(e,...t)=>(e.setAttribute(cP,uE(...t)[0]),e),uO=(e,...t)=>(e.setAttribute(cP,[ub(e),uE(...t)[0]].filter(e=>""!==e).join(" ")),e),uk=function(...e){return 1===e.length&&typeof e[0]===cx?[e[0]]:uE(...e)};var uM=Object.assign({},{svg:{args:(...e)=>[lM(c6(...e))].filter(e=>null!=e),methods:{clear:e=>(Array.from(e.attributes).filter(e=>"xmlns"!==e).forEach(t=>e.removeAttribute(t.name)),lj(e)),size:lT,setViewBox:lT,getViewBox:lR,padding:function(e,t){let r=lR(e);return void 0!==r&&lT(e,...[-t,-t,2*t,2*t].map((e,t)=>r[t]+e)),e},background:function(e,t){let r=Array.from(e.childNodes).filter(e=>e.getAttribute(c_)===lZ).shift();return null==r&&((r=this.Constructor("rect",null,...lW(e))).setAttribute(c_,lZ),r.setAttribute(cw,cS),e.insertBefore(r,e.firstChild)),r.setAttribute("fill",t),e},getWidth:e=>lW(e)[2],getHeight:e=>lW(e)[3],stylesheet:function(e,t){return lH.call(this,e,t)},load:lG,save:lq},init:(e,...t)=>{t.filter(e=>typeof e===cx).forEach(t=>lG(e,t)),t.filter(e=>null!=e).filter(e=>typeof e.appendChild===cy).forEach(t=>t.appendChild(e)),l2(e),l8(e),l7(e)}}},{g:{init:ue,methods:{load:ue}}},{circle:{args:(e,t,r,n)=>{let o=c6(...lf(e,t,r,n));switch(o.length){case 0:case 1:return[,,...o];case 2:case 3:return o;default:return uo(...o)}},methods:{radius:ur,setRadius:ur,origin:un,setOrigin:un,center:un,setCenter:un,position:un,setPosition:un}}},{ellipse:{args:(e,t,r,n)=>{let o=c6(...lf(e,t,r,n)).slice(0,4);switch(o.length){case 0:case 1:case 2:return[,,...o];default:return o}},methods:{radius:ui,setRadius:ui,origin:ua,setOrigin:ua,center:ua,setCenter:ua,position:ua,setPosition:ua}}},{line:{args:us,methods:{setPoints:(e,...t)=>(us(...t).forEach((t,r)=>e.setAttribute(ut.line[r],t)),e)}}},{path:{methods:um}},{rect:{args:(e,t,r,n)=>{let o=c6(...lf(e,t,r,n)).slice(0,4);switch(o.length){case 0:case 1:case 2:case 3:return u_([,,...o]);default:return u_(o)}},methods:{origin:uv,setOrigin:uv,center:uv,setCenter:uv,size:ug,setSize:ug}}},{style:{init:(e,t)=>{e.textContent="",e.appendChild(lA(t))},methods:{setTextContent:(e,t)=>(e.textContent="",e.appendChild(lA(t)),e)}}},{text:{args:(e,t,r)=>c6(...lf(e,t,r)).slice(0,2),init:(e,t,r,n,o)=>{let i=[t,r,n,o].filter(e=>typeof e===cx).shift();i&&e.appendChild(cq().document.createTextNode(i))}}},{mask:{args:uy},clipPath:{args:uy},symbol:{args:uy},marker:{args:uy,methods:{size:lT,setViewBox:lT}}},{polyline:{args:uk,methods:{setPoints:ux,addPoint:uO}},polygon:{args:uk,methods:{setPoints:ux,addPoint:uO}}}),uA={presentation:["color","color-interpolation","cursor","direction","display","fill","fill-opacity","fill-rule","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","image-rendering","letter-spacing","opacity","overflow","paint-order","pointer-events","preserveAspectRatio","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tabindex","transform-origin","user-select","vector-effect","visibility"],effects:["azimuth","baseFrequency","bias","color-interpolation-filters","diffuseConstant","divisor","edgeMode","elevation","exponent","filter","filterRes","filterUnits","flood-color","flood-opacity","in","in2","intercept","k1","k2","k3","k4","kernelMatrix","lighting-color","limitingConeAngle","mode","numOctaves","operator","order","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","primitiveUnits","radius","result","seed","specularConstant","specularExponent","stdDeviation","stitchTiles","surfaceScale","targetX","targetY","type","xChannelSelector","yChannelSelector"],text:["dx","dy","alignment-baseline","baseline-shift","dominant-baseline","lengthAdjust","method","overline-position","overline-thickness","rotate","spacing","startOffset","strikethrough-position","strikethrough-thickness","text-anchor","text-decoration","text-rendering","textLength","underline-position","underline-thickness","word-spacing","writing-mode"],gradient:["gradientTransform","gradientUnits","spreadMethod"]};Object.values(cR).reduce((e,t)=>e.concat(t),[]).filter(e=>void 0===ut[e]).forEach(e=>{ut[e]=[]}),[[["svg","defs","g"].concat(cR.v,cR.t),uA.presentation],[["filter"],uA.effects],[cR.cT.concat("text"),uA.text],[cR.cF,uA.effects],[cR.cG,uA.gradient]].forEach(e=>e[0].forEach(t=>{ut[t]=ut[t].concat(e[1])}));let uj=e=>{if(null==e)return[];let t=e.getAttribute(c_);return null==t?[]:t.split(" ").filter(e=>""!==e)};var uP={addClass:(e,t)=>{let r=uj(e).filter(e=>e!==t);r.push(t),e.setAttributeNS(null,c_,r.join(" "))},removeClass:(e,t)=>{let r=uj(e).filter(e=>e!==t);e.setAttributeNS(null,c_,r.join(" "))},setClass:(e,t)=>{e.setAttributeNS(null,c_,t)},setId:(e,t)=>{e.setAttributeNS(null,"id",t)}};let uw=e=>{let t=e.getAttribute(cj);return null==t||""===t?void 0:t},uS={clearTransform:e=>(e.removeAttribute(cj),e)};["translate","rotate","scale","matrix"].forEach(e=>{uS[e]=(t,...r)=>t.setAttribute(cj,[uw(t),`${e}(${r.join(" ")})`].filter(e=>void 0!==e).join(" "))});let u$=function(e){if(null==e)return"";if(typeof e===cx)return"url"===e.slice(0,3)?e:`url(#${e})`;if(null!=e.getAttribute){let t=e.getAttribute("id");return`url(#${t})`}return""},uC={};["clip-path","mask","symbol","marker-end","marker-mid","marker-start"].forEach(e=>{uC[c8.toCamel(e)]=(t,r)=>t.setAttribute(e,u$(r))});let uL={};cR.v.push(...Object.keys(l_)),Object.keys(l_).forEach(e=>{l_[e].attributes=void 0===l_[e].attributes?[...uA.presentation]:l_[e].attributes.concat(uA.presentation)}),Object.assign(uL,uM,l_),Object.keys(cR).forEach(e=>cR[e].filter(e=>void 0===uL[e]).forEach(e=>{uL[e]={}}));let uN=function(){return Array.from(arguments)};Object.keys(uL).forEach(e=>{uL[e].nodeName||(uL[e].nodeName=e),uL[e].init||(uL[e].init=uN),uL[e].args||(uL[e].args=uN),uL[e].methods||(uL[e].methods={}),uL[e].attributes||(uL[e].attributes=ut[e]||[])});let uz=(e,t)=>{e.forEach(e=>Object.keys(t).forEach(r=>{uL[e].methods[r]=function(){return t[r](...arguments),arguments[0]}}))};uz(lf(cR.t,cR.v,cR.g,cR.s,cR.p,cR.i,cR.h,cR.d),uP),uz(lf(cR.t,cR.v,cR.g,cR.s,cR.p,cR.i,cR.h,cR.d),lS),uz(lf(cR.v,cR.g,cR.s),uS),uz(lf(cR.t,cR.v,cR.g),uC);let uF={svg:{version:"1.1",xmlns:cT},style:{type:"text/css"}},uI=(e,t)=>{uF[t]&&Object.keys(uF[t]).forEach(r=>e.setAttribute(r,uF[t][r]))},uV={},uB=(e,t,...r)=>{let n=cq().document.createElementNS(cT,uL[e].nodeName);return t&&t.appendChild(n),uI(n,e),uL[e].init(n,...r),uL[e].args(...r).forEach((t,r)=>{null!=uL[e].attributes[r]&&n.setAttribute(uL[e].attributes[r],t)}),uL[e].attributes.forEach(e=>{Object.defineProperty(n,c8.toCamel(e),{value:function(){return n.setAttribute(e,...arguments),n}})}),Object.keys(uL[e].methods).forEach(t=>Object.defineProperty(n,t,{value:function(){return uL[e].methods[t].call(uV,n,...arguments)}})),lO[e]&&lO[e].forEach(e=>{let t=function(){return uB(e,n,...arguments)};uL[e].static&&Object.keys(uL[e].static).forEach(r=>{t[r]=function(){return uL[e].static[r](n,...arguments)}}),Object.defineProperty(n,e,{value:t})}),n};uV.Constructor=uB;let uq={};Object.keys(cR).forEach(e=>cR[e].forEach(e=>{uq[e]=(...t)=>uB(e,null,...t)}));let uT=(e,t)=>{["segment","circle","ellipse","rect","polygon"].filter(e=>t[e]&&t[e].prototype).forEach(r=>{t[r].prototype.svg=function(){return e.path(this.svgPath())}}),lY.math.vector=t.vector},uR=(e,t)=>{let r="origami";uL[r]={nodeName:"g",init:function(e,...r){return t.graph.svg.drawInto(e,...r)},args:()=>[],methods:uL.g.methods,attributes:uL.g.attributes,static:{}},Object.keys(t.graph.svg).forEach(e=>{uL[r].static[e]=(r,...n)=>{let o=t.graph.svg[e](...n);return r.appendChild(o),o}}),lO[r]=[...lO.g],lO.svg.push(r),lO.g.push(r),e[r]=(...e)=>uB(r,null,...e),Object.keys(t.graph.svg).forEach(n=>{e[r][n]=t.graph.svg[n]})},uU=function(e,...t){t.filter(e=>typeof e===cy).forEach(t=>t.call(e,e))};cg.init=function(){let e=uB("svg",null,...arguments);return"loading"===cq().document.readyState?cq().document.addEventListener("DOMContentLoaded",()=>uU(e,...arguments)):uU(e,...arguments),e},cv.NS=cT,cv.linker=(function(e){e.graph&&e.origami&&(e.svg=this,uT(this,e),uR(this,e))}).bind(cv),Object.assign(cv,uq),cv.core=Object.assign(Object.create(null),{load:lF,save:lq,coordinates:c6,flatten:lf,attributes:ut,children:lO,cdata:lA},c8,uP,lS,cX,uS,lD),Object.defineProperty(cv,"window",{enumerable:!1,set:e=>{cB(e)}});let uD=(e,t,r,n=0)=>{if(rT.core.magSquared(t)<rT.core.EPSILON)return[];let o=rT.core.normalize(t),i=[[1,0,0],[0,1,0],[0,0,1]].map(e=>rT.core.cross3(e,o)).sort((e,t)=>rT.core.magnitude(t)-rT.core.magnitude(e)).shift(),a=[rT.core.normalize(i)];for(let e=1;e<4;e+=1)a.push(rT.core.cross3(a[e-1],o));let s=a.map(e=>rT.core.scale(e,r)),c=[-n,n].map(e=>rT.core.scale(o,e));return(0===n?e:e.map((e,t)=>rT.core.add(e,c[t]))).map(e=>s.map(t=>rT.core.add(e,t))).flat()};var uG=Object.freeze({__proto__:null,make_faces_geometry:e=>{let{THREE:t}=S(),r=e.vertices_coords.map(e=>[e[0],e[1],e[2]||0]).flat(),n=e.vertices_coords.map(()=>[0,0,1]).flat(),o=e.vertices_coords.map(()=>[1,1,1]).flat(),i=e.faces_vertices.map(e=>e.map((e,t,r)=>[r[0],r[t+1],r[t+2]]).slice(0,e.length-2)).flat(2),a=new t.BufferGeometry;return a.setAttribute("position",new t.Float32BufferAttribute(r,3)),a.setAttribute("normal",new t.Float32BufferAttribute(n,3)),a.setAttribute("color",new t.Float32BufferAttribute(o,3)),a.setIndex(i),a},make_edges_geometry:function({vertices_coords:e,edges_vertices:t,edges_assignment:r,edges_coords:n,edges_vector:o},i=.002,a=0){let{THREE:s}=S();n||(n=t.map(t=>t.map(t=>e[t]))),o||(o=n.map(e=>rT.core.subtract(e[1],e[0]))),n=n.map(e=>e.map(e=>rT.core.resize(3,e))),o=o.map(e=>rT.core.resize(3,e));let c={B:[0,0,0],M:[0,0,0],F:[0,0,0],V:[0,0,0]},l=r.map(e=>[c[e],c[e],c[e],c[e],c[e],c[e],c[e],c[e]]).flat(3),u=n.map((e,t)=>uD(e,o[t],i,a)).flat(2),f=o.map(e=>{if(rT.core.magSquared(e)<rT.core.EPSILON)throw Error("degenerate edge");rT.core.normalize(e);let t=rT.core.scale(rT.core.normalize(rT.core.cross3(e,[0,0,-1])),i),r=rT.core.scale(rT.core.normalize(rT.core.cross3(e,[0,0,1])),i);return[t,[-t[2],t[1],t[0]],r,[-r[2],r[1],r[0]],t,[-t[2],t[1],t[0]],r,[-r[2],r[1],r[0]]]}).flat(2),p=n.map((e,t)=>[8*t+0,8*t+4,8*t+1,8*t+1,8*t+4,8*t+5,8*t+1,8*t+5,8*t+2,8*t+2,8*t+5,8*t+6,8*t+2,8*t+6,8*t+3,8*t+3,8*t+6,8*t+7,8*t+3,8*t+7,8*t+0,8*t+0,8*t+7,8*t+4,8*t+0,8*t+1,8*t+3,8*t+1,8*t+2,8*t+3,8*t+5,8*t+4,8*t+7,8*t+7,8*t+6,8*t+5]).flat(),d=new s.BufferGeometry;return d.setAttribute("position",new s.Float32BufferAttribute(u,3)),d.setAttribute("normal",new s.Float32BufferAttribute(f,3)),d.setAttribute("color",new s.Float32BufferAttribute(l,3)),d.setIndex(p),d.computeVertexNormals(),d}});let uW=Object.assign($,al,{math:rT.core,axiom:aL,diagram:aD,layer:sV,singleVertex:sT,text:{axioms:{ar:[null,"   ","        ","        ","          ","         ","            ","          "],de:[null,"Falte eine Linie durch zwei Punkte","Falte zwei Punkte aufeinander","Falte zwei Linien aufeinander","Falte eine Linie auf sich selbst, falte dabei durch einen Punkt","Falte einen Punkt auf eine Linie, falte dabei durch einen anderen Punkt","Falte einen Punkt auf eine Linie und einen weiteren Punkt auf eine weitere Linie","Falte einen Punkt auf eine Linie und eine weitere Linie in sich selbst zusammen"],en:[null,"fold a line through two points","fold two points together","fold two lines together","fold a line on top of itself, creasing through a point","fold a point to a line, creasing through another point","fold a point to a line and another point to another line","fold a point to a line and another line onto itself"],es:[null,"dobla una l\xednea entre dos puntos","dobla dos puntos juntos","dobla y une dos l\xedneas","dobla una l\xednea sobre s\xed misma, dobl\xe1ndola hacia un punto","dobla un punto hasta una l\xednea, dobl\xe1ndola a trav\xe9s de otro punto","dobla un punto hacia una l\xednea y otro punto hacia otra l\xednea","dobla un punto hacia una l\xednea y otra l\xednea sobre s\xed misma"],fr:[null,"cr\xe9ez un pli passant par deux points","pliez pour superposer deux points","pliez pour superposer deux lignes","rabattez une ligne sur elle-m\xeame \xe0 l'aide d'un pli qui passe par un point","rabattez un point sur une ligne \xe0 l'aide d'un pli qui passe par un autre point","rabattez un point sur une ligne et un autre point sur une autre ligne","rabattez un point sur une ligne et une autre ligne sur elle-m\xeame"],hi:[null,"        ","         ","        ","                  ","                 ","                   ","                      "],jp:[null,"2","2","2","","","",""],ko:[null,"    ","   ","   ","      ","  ,    ","       ","       "],ms:[null,"lipat garisan melalui dua titik","lipat dua titik bersama","lipat dua garisan bersama","lipat satu garisan di atasnya sendiri, melipat melalui satu titik","lipat satu titik ke garisan, melipat melalui titik lain","lipat satu titik ke garisan dan satu lagi titik ke garisan lain","lipat satu titik ke garisan dan satu lagi garisan di atasnya sendiri"],pt:[null,"dobre uma linha entre dois pontos","dobre os dois pontos para uni-los","dobre as duas linhas para uni-las","dobre uma linha sobre si mesma, criando uma dobra ao longo de um ponto","dobre um ponto at\xe9 uma linha, criando uma dobra ao longo de outro ponto","dobre um ponto at\xe9 uma linha e outro ponto at\xe9 outra linha","dobre um ponto at\xe9 uma linha e outra linha sobre si mesma"],ru:[null,"    ","   ","   ","   ,   ","   ,    ","         ","        "],tr:[null,"iki noktadan ge\xe7en bir \xe7izgi boyunca katla","iki noktay birbirine katla","iki \xe7izgiyi birbirine katla","bir noktadan kvrarak kendi \xfczerindeki bir \xe7izgi boyunca katla","baka bir noktadan kvrarak bir noktay bir \xe7izgiye katla","bir noktay bir \xe7izgiye ve baka bir noktay baka bir \xe7izgiye katla","bir noktay bir \xe7izgiye ve baka bir \xe7izgiyi kendi \xfczerine katla"],vi:[null,"to mt np gp i qua hai im","to np gp bng c\xe1ch gp mt im n\xe0y sang im kh\xe1c","to np gp bng c\xe1ch gp mt ng l\xean mt ng kh\xe1c","to mt np gp i qua mt im v\xe0 a mt ng l\xean tr\xean ch\xednh n\xf3","to mt np gp i qua im u ti\xean v\xe0 a im th hai l\xean ng thng","to mt np gp mang im u ti\xean n ng u ti\xean v\xe0 im th hai cho ng th hai","to mt np gp mang li mt im cho mt ng v\xe0 a mt ng th hai l\xean tr\xean ch\xednh n\xf3"],zh:[null,"","","","","","",""]},instructions:{fold:{es:"doblez"},"valley fold":{es:"doblez de valle",zh:""},"mountain fold":{es:"doblez de monta\xf1a",zh:""},"inside reverse fold":{zh:""},"outside reverse fold":{zh:""},sink:{},"open sink":{zh:""},"closed sink":{zh:""},"rabbit ear":{zh:""},"double rabbit ear":{zh:""},"petal fold":{zh:""},blintz:{zh:""},squash:{zh:""},"flip over":{es:"dale la vuelta a tu papel"}}},webgl:uG});Object.keys(rT).filter(e=>"core"!==e).forEach(e=>{uW[e]=rT[e]}),Object.defineProperty(uW,"use",{enumerable:!1,value:(function(e){null!=e&&"function"==typeof e.linker&&e.linker(this)}).bind(uW)}),M||(uW.use(cm),uW.use(cv)),Object.defineProperty(uW,"window",{enumerable:!1,set:e=>{w(e),cv.window=e}})}}]);