"use strict";(self.webpackChunkreference_finder=self.webpackChunkreference_finder||[]).push([["606"],{2351:function(e,t,r){r.d(t,{Z:function(){return uJ}});let n="undefined",i="number",o="object",a="index",s="vertices",c="edges",l="faces",u="boundaries",f="vertices_coords",p="edges_vertices",h="faces_edges",d="edges_assignment",m="edges_foldAngle",g="faces_layer",v="boundary",_="front",y="back",b="foldedForm",E="black",x="white",O="none",k=typeof window!==n&&typeof window.document!==n;typeof process!==n&&null!=process.versions&&process.versions.node;let M=typeof self===o&&self.constructor&&"DedicatedWorkerGlobalScope"===self.constructor.name,A=[];A[10]='"error 010: window" not set. if using node/deno, include package @xmldom/xmldom, set to the main export ( ear.window = xmldom; )';let j={window:void 0},P=e=>new e.DOMParser().parseFromString("<!DOCTYPE html><title>.</title>","text/html"),w=e=>(!e.document&&(e.document=P(e)),j.window=e,j.window);k&&(j.window=window);let S=()=>{if(void 0===j.window)throw A[10];return j.window};var $=Object.create(null);let C=function(e){switch(e.constructor.name){case"vector":case"matrix":case"segment":case"ray":case"line":case"circle":case"ellipse":case"rect":case"polygon":return e.constructor.name}if("object"==typeof e){if(null!=e.radius)return"circle";if(null!=e.width)return"rect";if(null!=e.x||"number"==typeof e[0])return"vector";if(null!=e[0]&&e[0].length&&("number"==typeof e[0].x||"number"==typeof e[0][0]))return"segment";if(null!=e.vector&&null!=e.origin)return"line"}},L=(e,t)=>t.length===e?t:Array(e).fill(0).map((e,r)=>t[r]?t[r]:e),N=(e,t)=>{let r=e.length>t.length?e.length:t.length;return[e,t].map(e=>L(r,e))},z=function(e){let t=`${e}`.match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return t?Math.max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0},F=function(e,t=15){if("number"!=typeof e)return e;let r=parseFloat(e.toFixed(t));return z(r)===Math.min(t,z(e))?e:r},I=e=>null!=e&&"function"==typeof e[Symbol.iterator],V=function(){switch(arguments.length){case void 0:case 0:return Array.from(arguments);case 1:return I(arguments[0])&&"string"!=typeof arguments[0]?V(...arguments[0]):[arguments[0]];default:return Array.from(arguments).map(e=>I(e)?[...V(e)]:e)}},B=function(){switch(arguments.length){case void 0:case 0:return Array.from(arguments);case 1:return I(arguments[0])&&"string"!=typeof arguments[0]?B(...arguments[0]):[arguments[0]];default:return Array.from(arguments).map(e=>I(e)?[...B(e)]:e).reduce((e,t)=>e.concat(t),[])}};var q=Object.freeze({__proto__:null,resize:L,resizeUp:N,resizeDown:(e,t)=>{let r=e.length>t.length?t.length:e.length;return[e,t].map(e=>L(r,e))},cleanNumber:F,semiFlattenArrays:V,flattenArrays:B}),T=Object.create(null);let R=1e-6,U=Math.PI/180,D=2*Math.PI;var G=Object.freeze({__proto__:null,EPSILON:R,R2D:180/Math.PI,D2R:U,TWO_PI:D});let W=()=>!0,Z=e=>e*e,J=(e,t)=>e+(t||0),H=e=>void 0!==e,Y=e=>Math.atan2(e[1],e[0]),X=e=>[Math.cos(e),Math.sin(e)],K=(e,t,r=R)=>Math.abs(e-t)<r,Q=(e,t,r=R)=>K(e,t,r)?0:Math.sign(t-e),ee=(e,t,r=R)=>{for(let n=0;n<Math.max(e.length,t.length);n+=1)if(!K(e[n]||0,t[n]||0,r))return!1;return!0},et=(e,t=R)=>e>-t,er=(e,t=R)=>e>t,en=W,ei=W,eo=(e,t=R)=>e>-t&&e<1+t,ea=(e,t=R)=>e>t&&e<1-t,es=e=>e<-R?0:e,ec=e=>e<-R?0:e>1+R?1:e;var el=Object.freeze({__proto__:null,fnTrue:W,fnSquare:Z,fnAdd:J,fnNotUndefined:H,fnAnd:(e,t)=>e&&t,fnCat:(e,t)=>e.concat(t),fnVec2Angle:Y,fnToVec2:X,fnEqual:(e,t)=>e===t,fnEpsilonEqual:K,fnEpsilonSort:Q,fnEpsilonEqualVectors:ee,include:et,exclude:er,includeL:en,excludeL:ei,includeR:et,excludeR:er,includeS:eo,excludeS:ea,lineLimiter:e=>e,rayLimiter:es,segmentLimiter:ec});let eu=e=>Math.sqrt(e.map(Z).reduce(J,0)),ef=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),ep=e=>e.map(Z).reduce(J,0),eh=e=>{let t=eu(e);return 0===t?e:e.map(e=>e/t)},ed=e=>{let t=ef(e);return 0===t?e:[e[0]/t,e[1]/t]},em=(e,t)=>e.map(e=>e*t),eg=(e,t)=>[e[0]*t,e[1]*t],ev=(e,t)=>e.map((e,r)=>e+(t[r]||0)),e_=(e,t)=>[e[0]+t[0],e[1]+t[1]],ey=(e,t)=>e.map((e,r)=>e-(t[r]||0)),eb=(e,t)=>[e[0]-t[0],e[1]-t[1]],eE=(e,t)=>e.map((r,n)=>e[n]*t[n]).reduce(J,0),ex=(e,t)=>e[0]*t[0]+e[1]*t[1],eO=(e,t)=>e.map((e,r)=>(e+t[r])/2),ek=function(){if(0==arguments.length)return[];let e=arguments[0].length>0?arguments[0].length:0,t=Array(e).fill(0);return Array.from(arguments).forEach(e=>t.forEach((r,n)=>{t[n]+=e[n]||0})),t.map(e=>e/arguments.length)},eM=(e,t,r)=>{let n=1-r;return e.map((e,i)=>e*n+(t[i]||0)*r)},eA=(e,t)=>e[0]*t[1]-e[1]*t[0],ej=(e,t)=>[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]],eP=(e,t)=>Math.sqrt(e.map((r,n)=>(e[n]-t[n])**2).reduce(J,0)),ew=(e,t)=>{let r=e[0]-t[0],n=e[1]-t[1];return Math.sqrt(r*r+n*n)},eS=e=>e.map(e=>-e),e$=e=>[-e[1],e[0]],eC=e=>[e[1],-e[0]],eL=(e,t=R)=>e.map(e=>Math.abs(e)).reduce(J,0)<t,eN=(e,t,r=R)=>1-Math.abs(eE(eh(e),eh(t)))<r;var ez=Object.freeze({__proto__:null,magnitude:eu,magnitude2:ef,magSquared:ep,normalize:eh,normalize2:ed,scale:em,scale2:eg,add:ev,add2:e_,subtract:ey,subtract2:eb,dot:eE,dot2:ex,midpoint:eO,midpoint2:(e,t)=>eg(e_(e,t),.5),average:ek,lerp:eM,cross2:eA,cross3:ej,distance:eP,distance2:ew,distance3:(e,t)=>{let r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2];return Math.sqrt(r*r+n*n+i*i)},flip:eS,rotate90:e$,rotate270:eC,degenerate:eL,parallel:eN,parallel2:(e,t,r=R)=>Math.abs(eA(e,t))<r});let eF=Object.freeze([1,0,0,0,1,0,0,0,1]),eI=Object.freeze(eF.concat(0,0,0)),eV=e=>eI.map((t,r)=>Math.abs(t-e[r])<R).reduce((e,t)=>e&&t,!0),eB=(e,t)=>[e[0]*t[0]+e[3]*t[1]+e[6]*t[2]+e[9],e[1]*t[0]+e[4]*t[1]+e[7]*t[2]+e[10],e[2]*t[0]+e[5]*t[1]+e[8]*t[2]+e[11]],eq=(e,t,r)=>({vector:[e[0]*t[0]+e[3]*t[1]+e[6]*t[2],e[1]*t[0]+e[4]*t[1]+e[7]*t[2],e[2]*t[0]+e[5]*t[1]+e[8]*t[2]],origin:[e[0]*r[0]+e[3]*r[1]+e[6]*r[2]+e[9],e[1]*r[0]+e[4]*r[1]+e[7]*r[2]+e[10],e[2]*r[0]+e[5]*r[1]+e[8]*r[2]+e[11]]}),eT=(e,t)=>[e[0]*t[0]+e[3]*t[1]+e[6]*t[2],e[1]*t[0]+e[4]*t[1]+e[7]*t[2],e[2]*t[0]+e[5]*t[1]+e[8]*t[2],e[0]*t[3]+e[3]*t[4]+e[6]*t[5],e[1]*t[3]+e[4]*t[4]+e[7]*t[5],e[2]*t[3]+e[5]*t[4]+e[8]*t[5],e[0]*t[6]+e[3]*t[7]+e[6]*t[8],e[1]*t[6]+e[4]*t[7]+e[7]*t[8],e[2]*t[6]+e[5]*t[7]+e[8]*t[8],e[0]*t[9]+e[3]*t[10]+e[6]*t[11]+e[9],e[1]*t[9]+e[4]*t[10]+e[7]*t[11]+e[10],e[2]*t[9]+e[5]*t[10]+e[8]*t[11]+e[11]],eR=e=>e[0]*e[4]*e[8]-e[0]*e[7]*e[5]-e[3]*e[1]*e[8]+e[3]*e[7]*e[2]+e[6]*e[1]*e[5]-e[6]*e[4]*e[2],eU=e=>{let t=eR(e);if(1e-6>Math.abs(t)||Number.isNaN(t)||!Number.isFinite(e[9])||!Number.isFinite(e[10])||!Number.isFinite(e[11]))return;let r=[e[4]*e[8]-e[7]*e[5],-e[1]*e[8]+e[7]*e[2],e[1]*e[5]-e[4]*e[2],-e[3]*e[8]+e[6]*e[5],e[0]*e[8]-e[6]*e[2],-e[0]*e[5]+e[3]*e[2],e[3]*e[7]-e[6]*e[4],-e[0]*e[7]+e[6]*e[1],e[0]*e[4]-e[3]*e[1],-e[3]*e[7]*e[11]+e[3]*e[8]*e[10]+e[6]*e[4]*e[11]-e[6]*e[5]*e[10]-e[9]*e[4]*e[8]+e[9]*e[5]*e[7],e[0]*e[7]*e[11]-e[0]*e[8]*e[10]-e[6]*e[1]*e[11]+e[6]*e[2]*e[10]+e[9]*e[1]*e[8]-e[9]*e[2]*e[7],-e[0]*e[4]*e[11]+e[0]*e[5]*e[10]+e[3]*e[1]*e[11]-e[3]*e[2]*e[10]-e[9]*e[1]*e[5]+e[9]*e[2]*e[4]],n=1/t;return r.map(e=>e*n)},eD=(e=0,t=0,r=0)=>eF.concat(e,t,r),eG=(e,t,r,n,i)=>{let o=eF.concat([0,1,2].map(e=>t[e]||0)),a=Math.cos(e),s=Math.sin(e);return o[3*r+r]=a,o[3*r+n]=(i?1:-1)*s,o[3*n+r]=(i?-1:1)*s,o[3*n+n]=a,o},eW=(e,t=[0,0,0])=>eG(e,t,1,2,!0),eZ=(e,t=[0,0,0])=>eG(e,t,0,2,!1),eJ=(e,t=[0,0,0])=>eG(e,t,0,1,!0),eH=(e,t=[0,0,1],r=[0,0,0])=>{let n=[0,1,2].map(e=>r[e]||0),[i,o,a]=L(3,eh(t)),s=Math.cos(e),c=Math.sin(e),l=1-s,u=eF.concat(-n[0],-n[1],-n[2]);return eT(eF.concat(n[0],n[1],n[2]),eT([l*i*i+s,l*o*i+a*c,l*a*i-o*c,l*i*o-a*c,l*o*o+s,l*a*o+i*c,l*i*a+o*c,l*o*a-i*c,l*a*a+s,0,0,0],u))},eY=(e=1,t=[0,0,0])=>[e,0,0,0,e,0,0,0,e,-(e*t[0])+t[0],-(e*t[1])+t[1],-(e*t[2])+t[2]],eX=(e,t=[0,0])=>{let r=Math.atan2(e[1],e[0]),n=Math.cos(r),i=Math.sin(r),o=Math.cos(-r),a=Math.sin(-r),s=n*o+i*a,c=-(n*a)+i*o,l=i*o+-n*a,u=-(i*a)+-n*o,f=t[0]+-(s*t[0])+-t[1]*l,p=t[1]+-(c*t[0])+-t[1]*u;return[s,c,0,l,u,0,0,0,1,f,p,0]};var eK=Object.freeze({__proto__:null,identity3x3:eF,identity3x4:eI,isIdentity3x4:eV,multiplyMatrix3Vector3:eB,multiplyMatrix3Line3:eq,multiplyMatrices3:eT,determinant3:eR,invertMatrix3:eU,makeMatrix3Translate:eD,makeMatrix3RotateX:eW,makeMatrix3RotateY:eZ,makeMatrix3RotateZ:eJ,makeMatrix3Rotate:eH,makeMatrix3Scale:eY,makeMatrix3ReflectZ:eX});let eQ=(e,t)=>({vector:e||[],origin:t||[]}),e0=function(){if(arguments[0]instanceof T.vector)return arguments[0];let e=B(arguments);return e.length>0&&"object"==typeof e[0]&&null!==e[0]&&!Number.isNaN(e[0].x)&&(e=["x","y","z"].map(t=>e[0][t]).filter(H)),e.filter(e=>"number"==typeof e)},e1=function(){return V(arguments).map(e=>e0(e))},e2=function(){if(arguments[0]instanceof T.segment)return arguments[0];let e=V(arguments);return 4===e.length?[[e[0],e[1]],[e[2],e[3]]]:e.map(e=>e0(e))},e3=function(){let e=V(arguments);return 0===e.length?eQ([],[]):e[0]instanceof T.line||e[0]instanceof T.ray||e[0]instanceof T.segment?e[0]:e[0].constructor===Object&&void 0!==e[0].vector?eQ(e[0].vector||[],e[0].origin||[]):"number"==typeof e[0]?eQ(e0(e)):eQ(...e.map(e=>e0(e)))},e8=(e=0,t=0,r=0,n=0)=>({x:e,y:t,width:r,height:n}),e5=function(){if(arguments[0]instanceof T.rect)return arguments[0];let e=B(arguments);if(e.length>0&&"object"==typeof e[0]&&null!==e[0]&&!Number.isNaN(e[0].width))return e8(...["x","y","width","height"].map(t=>e[0][t]).filter(H));let t=e.filter(e=>"number"==typeof e);return e8(...t.length<4?[,,...t]:t)},e4=(e=1,...t)=>({radius:e,origin:[...t]}),e6=function(){if(arguments[0]instanceof T.circle)return arguments[0];let e=e1(arguments),t=B(arguments).filter(e=>"number"==typeof e);if(2==arguments.length){if(1===e[1].length)return e4(e[1][0],...e[0]);if(1===e[0].length)return e4(e[0][0],...e[1]);if(e[0].length>1&&e[1].length>1)return e4(ew(...e),...e[0])}else switch(t.length){case 0:break;case 1:return e4(t[0],0,0,0);default:return e4(t.pop(),...t)}return e4(1,0,0,0)},e9=[[0,1,3,4,9,10],[0,1,2,3,4,5,6,7,8,9,10,11],[0,1,2,void 0,3,4,5,void 0,6,7,8,void 0,9,10,11]];[11,7,3].forEach(e=>delete e9[2][e]);let e7=e=>{let t;return e9[t=e<8?0:e<13?1:2]},te=function(){let e=B(arguments),t=[...eI];return e7(e.length).forEach((r,n)=>{null!=e[n]&&(t[r]=e[n])}),t};var tt=Object.freeze({__proto__:null,getVector:e0,getVectorOfVectors:e1,getSegment:e2,getLine:e3,getRay:e3,getRectParams:e8,getRect:e5,getCircle:e6,getMatrix3x4:te});let tr=({vector:e,origin:t})=>{let r=eu(e),n=e$(e),i=eE(t,n)/r;return{normal:em(n,1/r),distance:i}},tn=({normal:e,distance:t})=>({vector:eC(e),origin:em(e,t)});var ti=Object.freeze({__proto__:null,rayLineToUniqueLine:tr,uniqueLineToRayLine:tn});let to=(e,t,r)=>{let n;let i=t.map((t,n)=>({o:t,i:n,d:r(e,t)})),o=1/0;for(let e=0;e<i.length;e+=1)i[e].d<o&&(n=e,o=i[e].d);return n},ta=(e,t=Q,r=R)=>{let n=[0];for(let i=1;i<e.length;i+=1)switch(t(e[i][0],e[n[0]][0],r)){case 0:n.push(i);break;case 1:n=[i]}return n},ts=(e,t=R)=>{let r=ta(e,Q,t),n=0;for(let t=1;t<r.length;t+=1)e[r[t]][1]<e[r[n]][1]&&(n=t);return r[n]},tc=(e,t,r,n,i=R)=>{t=L(e.length,t),r=L(e.length,r);let o=ep(e),a=eE(e,ey(r,t));return ev(t,em(e,n(a/o,i)))},tl=(e,t)=>{let r=e.map((e,t,r)=>ey(r[(t+1)%r.length],e));return e.map((e,n)=>tc(r[n],e,t,ec)).map((e,r)=>({point:e,i:r,distance:eP(e,t)})).sort((e,t)=>e.distance-t.distance).shift()},tu=(e,t,r)=>ev(t,em(eh(ey(r,t)),e));var tf=Object.freeze({__proto__:null,smallestComparisonSearch:to,minimum2DPointIndex:ts,nearestPoint2:(e,t)=>{let r=to(e,t,ew);return void 0===r?void 0:t[r]},nearestPoint:(e,t)=>{let r=to(e,t,eP);return void 0===r?void 0:t[r]},nearestPointOnLine:tc,nearestPointOnPolygon:tl,nearestPointOnCircle:tu});let tp=(e,t=R)=>{let r=[[0]],n=0;for(let i=1;i<e.length;i+=1)K(e[i],e[i-1],t)?r[n].push(i):(n=r.length,r.push([i]));return r},th=(e=[],t=R)=>{let r=ts(e,t),n=e.map(t=>eb(t,e[r])).map(e=>ed(e)).map(e=>ex([0,1],e)),i=n.map((e,t)=>({a:e,i:t})).sort((e,t)=>e.a-t.a).map(e=>e.i).filter(e=>e!==r);return[[r]].concat(tp(i.map(e=>n[e]),t).map(e=>e.map(e=>i[e])).map(t=>1===t.length?t:t.map(t=>({i:t,len:ew(e[t],e[r])})).sort((e,t)=>e.len-t.len).map(e=>e.i)))};var td=Object.freeze({__proto__:null,sortPointsAlongVector2:(e,t)=>e.map(e=>({point:e,d:e[0]*t[0]+e[1]*t[1]})).sort((e,t)=>e.d-t.d).map(e=>e.point),clusterIndicesOfSortedNumbers:tp,radialSortPointIndices:th});let tm=[1,0,0,1],tg=tm.concat(0,0),tv=e=>e[0]*e[3]-e[1]*e[2],t_=(e,t=[0,0])=>{let r=Math.cos(e),n=Math.sin(e);return[r,n,-n,r,t[0],t[1]]};var ty=Object.freeze({__proto__:null,identity2x2:tm,identity2x3:tg,multiplyMatrix2Vector2:(e,t)=>[e[0]*t[0]+e[2]*t[1]+e[4],e[1]*t[0]+e[3]*t[1]+e[5]],multiplyMatrix2Line2:(e,t,r)=>({vector:[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1]],origin:[e[0]*r[0]+e[2]*r[1]+e[4],e[1]*r[0]+e[3]*r[1]+e[5]]}),multiplyMatrices2:(e,t)=>[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]],determinant2:tv,invertMatrix2:e=>{let t=tv(e);if(!(1e-6>Math.abs(t)||Number.isNaN(t))&&!!Number.isFinite(e[4])&&!!Number.isFinite(e[5]))return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[3]*e[4])/t,(e[1]*e[4]-e[0]*e[5])/t]},makeMatrix2Translate:(e=0,t=0)=>tm.concat(e,t),makeMatrix2Scale:(e,t,r=[0,0])=>[e,0,0,t,-(e*r[0])+r[0],-(t*r[1])+r[1]],makeMatrix2Rotate:t_,makeMatrix2Reflect:(e,t=[0,0])=>{let r=Math.atan2(e[1],e[0]),n=Math.cos(r),i=Math.sin(r),o=Math.cos(-r),a=Math.sin(-r),s=n*o+i*a,c=-(n*a)+i*o,l=i*o+-n*a,u=-(i*a)+-n*o,f=t[0]+-(s*t[0])+-t[1]*l,p=t[1]+-(c*t[0])+-t[1]*u;return[s,c,l,u,f,p]}});let tb=(e,t,r=er,n=R)=>e.map((e,t,r)=>[e,r[(t+1)%r.length]]).map(e=>eA(eh(ey(e[1],e[0])),ey(t,e[0]))).map(e=>r(e,n)).map((e,t,r)=>e===r[0]).reduce((e,t)=>e&&t,!0),tE=(e,t,r,n,i=eo,o=R)=>{if(Math.abs(eA(eh(e),eh(r)))<o)return;let a=eA(e,r),s=ey(n,t),c=eS(s),l=eA(s,r)/a;if(i(-(eA(c,e)/a),o/eu(r)))return l},tx=(e,t,r)=>ev(t,em(e,r)),tO=(e,t,r,n,i)=>e.map((e,t,r)=>[ey(r[(t+1)%r.length],e),e]).map(e=>tE(t,r,e[0],e[1],n,i)).filter(H).sort((e,t)=>e-t),tk=(e,t,r)=>{let n=0,i=e.length-1;for(;n<i&&!t(e[n+1]-e[n],r);){;n+=1}for(;i>n&&!t(e[i]-e[i-1],r);){;i-=1}if(!(n>=i))return[e[n],e[i]]},tM=(e,t,r,n=et,i=en,o=R)=>{let a=tO(e,t,r,eo,o);if(a.length<2)return;let s=tk(a,n,2*o/eu(t));if(void 0===s)return;let c=s.map(e=>i(e)?e:e<.5?0:1);if(!(Math.abs(c[0]-c[1])<2*o/eu(t)))return tb(e,tx(t,r,(c[0]+c[1])/2),n,o)?c.map(e=>tx(t,r,e)):void 0},tA=(e,t)=>{for(;e<0;)e+=D;for(;t<0;)t+=D;for(;e>D;)e-=D;for(;t>D;)t-=D;let r=e-t;return r>=0?r:D-(t-e)},tj=(e,t)=>{for(;e<0;)e+=D;for(;t<0;)t+=D;for(;e>D;)e-=D;for(;t>D;)t-=D;let r=t-e;return r>=0?r:D-(e-t)},tP=(e,t)=>{let r=t[0]*e[0]+t[1]*e[1],n=Math.atan2(t[0]*e[1]-t[1]*e[0],r);return n<0&&(n+=D),n},tw=(e,t)=>{let r=e[0]*t[0]+e[1]*t[1],n=Math.atan2(e[0]*t[1]-e[1]*t[0],r);return n<0&&(n+=D),n},tS=(e,t)=>X(Y(e)-tP(e,t)/2),t$=(e,t)=>X(Y(e)+tw(e,t)/2),tC=(e,t,r)=>{let n=tA(t,r)/e;return Array.from(Array(e-1)).map((e,r)=>t+n*(r+1))},tL=(e,t,r)=>{let n=tj(t,r)/e;return Array.from(Array(e-1)).map((e,r)=>t+n*(r+1))},tN=(e,t,r)=>{let n=Math.atan2(t[1],t[0]);return tC(e,n,Math.atan2(r[1],r[0])).map(X)},tz=(e,t,r)=>{let n=Math.atan2(t[1],t[0]);return tL(e,n,Math.atan2(r[1],r[0])).map(X)},tF=(e,t,r,n,i=R)=>{let o=eA(e,r),a=eE(e,r),s=o>-i?[t$(e,r)]:[tS(e,r)];s[1]=o>-i?e$(s[0]):eC(s[0]);let c=((n[0]-t[0])*r[1]-r[0]*(n[1]-t[1]))/o,l=Math.abs(eA(...[e,r].map(e=>eh(e))))<i,u=l?eO(t,n):[t[0]+e[0]*c,t[1]+e[1]*c],f=s.map(e=>({vector:e,origin:u}));return l&&delete f[a>-i?1:0],f},tI=function(){let e=Array.from(arguments).flat(),t=e.map((e,t)=>t).sort((t,r)=>e[t]-e[r]);return t.slice(t.indexOf(0),t.length).concat(t.slice(0,t.indexOf(0)))},tV=function(){let e=Array.from(arguments).flat();return tI(e).map(t=>e[t]).map((e,t,r)=>[e,r[(t+1)%r.length]]).map(e=>tj(e[0],e[1]))},tB=(e,t,r,n=R)=>{let i=ed(eb(t,e)),o=eA(i,ed(eb(r,e)));return K(o,0,n)?K(ew(e,t)+ew(t,r),ew(e,r))?0:void 0:Math.sign(o)};var tq=Object.freeze({__proto__:null,isCounterClockwiseBetween:(e,t,r)=>{for(;r<t;)r+=D;for(;e>t;)e-=D;for(;e<t;)e+=D;return e<r},clockwiseAngleRadians:tA,counterClockwiseAngleRadians:tj,clockwiseAngle2:tP,counterClockwiseAngle2:tw,clockwiseBisect2:tS,counterClockwiseBisect2:t$,clockwiseSubsectRadians:tC,counterClockwiseSubsectRadians:tL,clockwiseSubsect2:tN,counterClockwiseSubsect2:tz,bisectLines2:tF,counterClockwiseOrderRadians:tI,counterClockwiseOrder2:function(){return tI(V(arguments).map(Y))},counterClockwiseSectorsRadians:tV,counterClockwiseSectors2:function(){return tV(e1(arguments).map(Y))},threePointTurnDirection:tB});let tT=e=>e.concat(e.slice(0,-1).reverse()),tR=(e=[],t=!1,r=R)=>{if(e.length<2)return[];let n=th(e,r).map(e=>1===e.length?e:tT(e)).flat();n.push(n[0]);let i=[n[0]],o=1,a={"-1":()=>i.pop(),1:e=>{i.push(e),o+=1},undefined:()=>{o+=1}};for(a[0]=t?a["1"]:a["-1"];o<n.length;){if(i.length<2){i.push(n[o]),o+=1;continue}let t=i[i.length-2],s=i[i.length-1],c=n[o];a[tB(...[t,s,c].map(t=>e[t]),r)](c)}return i.pop(),i},tU=(e=[],t=!1,r=R)=>tR(e,t,r).map(t=>e[t]);var tD=Object.freeze({__proto__:null,convexHullIndices:tR,convexHull:tU});let tG=(e,t,r,n,i=en,o=en,a=R)=>{if(Math.abs(eA(eh(e),eh(r)))<a)return;let s=eA(e,r),c=[n[0]-t[0],n[1]-t[1]],l=[-c[0],-c[1]],u=eA(c,r)/s,f=-(eA(l,e)/s);if(i(u,a/eu(e))&&o(f,a/eu(r)))return ev(t,em(e,u))},tW=(e,t,r)=>{let n=Array.from(Array(e-1)).map((t,r)=>(r+1)/e).map(e=>eM(t.origin,r.origin,e)),i=[...t.vector];return n.map(e=>({origin:e,vector:i}))},tZ=(e,t,r)=>{let n=tG(t.vector,t.origin,r.vector,r.origin);return(tP(t.vector,r.vector)<tw(t.vector,r.vector)?tN(e,t.vector,r.vector):tz(e,t.vector,r.vector)).map(e=>({origin:n,vector:e}))};var tJ=Object.freeze({__proto__:null,pleat:(e,t,r)=>{let n=e3(t),i=e3(r);return eN(n.vector,i.vector)?tW(e,n,i):tZ(e,n,i)}});let tH=e=>Array.from(Array(Math.floor(e))).map((t,r)=>r/e*D),tY=(e,t)=>e.map(e=>[t*Math.cos(e),t*Math.sin(e)]).map(e=>e.map(e=>F(e,14))),tX=(e=3,t=1)=>tY(tH(e),t),tK=(e=3,t=1)=>{let r=Math.PI/e;return tY(tH(e).map(e=>e+r),t)},tQ=function(e,t,r){let n=t[0]-e[0],i=t[1]-e[1],o=r[0]-e[0],a=r[1]-e[1],s=n*(e[0]+t[0])+i*(e[1]+t[1]),c=o*(e[0]+r[0])+a*(e[1]+r[1]),l=2*(n*(r[1]-t[1])-i*(r[0]-t[0]));if(Math.abs(l)<R){let n=Math.min(e[0],t[0],r[0]),i=Math.min(e[1],t[1],r[1]),o=(Math.max(e[0],t[0],r[0])-n)*.5,a=(Math.max(e[1],t[1],r[1])-i)*.5;return{origin:[n+o,i+a],radius:Math.sqrt(o*o+a*a)}}let u=[(a*s-i*c)/l,(n*c-o*s)/l],f=u[0]-e[0],p=u[1]-e[1];return{origin:u,radius:Math.sqrt(f*f+p*p)}},t0=e=>.5*e.map((e,t,r)=>{let n=r[(t+1)%r.length];return e[0]*n[1]-n[0]*e[1]}).reduce(J,0),t1=e=>{let t=1/(6*t0(e));return e.map((e,t,r)=>{let n=r[(t+1)%r.length],i=e[0]*n[1]-n[0]*e[1];return[(e[0]+n[0])*i,(e[1]+n[1])*i]}).reduce((e,t)=>[e[0]+t[0],e[1]+t[1]],[0,0]).map(e=>e*t)},t2=(e,t=0)=>{let r=Array(e[0].length).fill(1/0),n=Array(e[0].length).fill(-1/0);e.forEach(e=>e.forEach((e,i)=>{e<r[i]&&(r[i]=e-t),e>n[i]&&(n[i]=e+t)}));let i=n.map((e,t)=>e-r[t]);return{min:r,max:n,span:i}};var t3=Object.freeze({__proto__:null,makePolygonCircumradius:tX,makePolygonCircumradiusSide:tK,makePolygonInradius:(e=3,t=1)=>tX(e,t/Math.cos(Math.PI/e)),makePolygonInradiusSide:(e=3,t=1)=>tK(e,t/Math.cos(Math.PI/e)),makePolygonSideLength:(e=3,t=1)=>tX(e,t/2/Math.sin(Math.PI/e)),makePolygonSideLengthSide:(e=3,t=1)=>tK(e,t/2/Math.sin(Math.PI/e)),makePolygonNonCollinear:(e,t=R)=>{let r=e.map((e,t,r)=>[e,r[(t+1)%r.length]]).map(e=>ey(e[1],e[0])).map((e,t,r)=>[e,r[(t+r.length-1)%r.length]]).map(e=>!eN(e[1],e[0],t));return e.filter((e,t)=>r[t])},circumcircle:tQ,signedArea:t0,centroid:t1,boundingBox:t2});let t8=(e,t,r,n=ei,i=R)=>{let o=ey(r,t),a=ep(e),s=Math.sqrt(a);if(s<i)return!1;let c=eA(o,e.map(e=>e/s)),l=eE(o,e)/a;return Math.abs(c)<i&&n(l,i/s)},t5=(e,t,r)=>{let n=e.map((e,n)=>({point:t8(t,r,e,en)?e:null,at_index:n})).filter(e=>null!=e.point),i=e.map((e,n,i)=>({point:tG(t,r,ey(e,i[(n+1)%i.length]),i[(n+1)%i.length],ei,ea),at_index:n})).filter(e=>null!=e.point);if(2===i.length){let t=i.slice().sort((e,t)=>e.at_index-t.at_index),r=e.slice(t[1].at_index+1).concat(e.slice(0,t[0].at_index+1));r.push(t[0].point),r.push(t[1].point);let n=e.slice(t[0].at_index+1,t[1].at_index+1);return n.push(t[1].point),n.push(t[0].point),[r,n]}if(1===i.length&&1===n.length){n[0].type="v",i[0].type="e";let t=n.concat(i).sort((e,t)=>e.at_index-t.at_index),r=e.slice(t[1].at_index+1).concat(e.slice(0,t[0].at_index+1));"e"===t[0].type&&r.push(t[0].point),r.push(t[1].point);let o=e.slice(t[0].at_index+1,t[1].at_index+1);return"e"===t[1].type&&o.push(t[1].point),o.push(t[0].point),[r,o]}if(2===n.length){let t=n.slice().sort((e,t)=>e.at_index-t.at_index),r=e.slice(t[1].at_index).concat(e.slice(0,t[0].at_index+1));return[r,e.slice(t[0].at_index,t[1].at_index+1)]}return[e.slice()]},t4=(e,t,r)=>{let n=e.map((e,t)=>({vector:r[t],origin:e})).map((e,t,r)=>tG(e.vector,e.origin,r[(t+1)%r.length].vector,r[(t+1)%r.length].origin,er,er)),i=t.map((e,t)=>tc(e.vector,e.origin,n[t],e=>e));if(3===e.length)return e.map(e=>({type:"skeleton",points:[e,n[0]]})).concat([{type:"perpendicular",points:[i[0],n[0]]}]);let o=n.map((e,t)=>eP(e,i[t])),a=0;o.forEach((e,t)=>{e<o[a]&&(a=t)});let s=[{type:"skeleton",points:[e[a],n[a]]},{type:"skeleton",points:[e[(a+1)%e.length],n[a]]},{type:"perpendicular",points:[i[a],n[a]]}],c=tS(eS(t[(a+t.length-1)%t.length].vector),t[(a+1)%t.length].vector),l=a===e.length-1;return e.splice(a,2,n[a]),t.splice(a,1),r.splice(a,2,c),l&&(e.splice(0,1),r.splice(0,1),t.push(t.shift())),s.concat(t4(e,t,r))},t6=e=>{let t=e.map((e,t,r)=>[e,r[(t+1)%r.length]]).map(e=>({vector:ey(e[1],e[0]),origin:e[0]})),r=e.map((e,t,r)=>[(t-1+r.length)%r.length,t,(t+1)%r.length].map(e=>r[e])).map(e=>[ey(e[0],e[1]),ey(e[2],e[1])]).map(e=>tS(...e));return t4([...e],t,r)};var t9=Object.freeze({__proto__:null,collinearBetween:(e,t,r,n=!1,i=R)=>[e,r].map(e=>ee(t,e)).reduce((e,t)=>e||t,!1)?n:K(1,eE(...[[e,t],[t,r]].map(e=>ey(e[1],e[0])).map(e=>eh(e))),i)}),t7=Object.freeze({__proto__:null,enclosingBoundingBoxes:(e,t)=>{let r=Math.min(e.min.length,t.min.length);for(let n=0;n<r;n+=1)if(t.min[n]<e.min[n]||t.max[n]>e.max[n])return!1;return!0},enclosingPolygonPolygon:(e,t,r=et)=>{let n=e.map(e=>tb(t,e,r)).reduce((e,t)=>e||t,!1),i=t.map(e=>tb(t,e,r)).reduce((e,t)=>e&&t,!0);return!n&&i}});let re=e=>e>=1?0:e<=-1?Math.PI:Math.acos(e),rt=(e,t,r)=>{let n=t[0]-e[0],i=t[1]-e[1],o=n*Math.cos(r)+i*Math.sin(r),a=i*Math.cos(r)-n*Math.sin(r);return[e[0]+o,e[1]+a]},rr=(e,t,r,n,i=R)=>{let o=e<r?e:r,a=e<r?r:e,s=e<r?t:n,c=e<r?n:t,l=[s[0]-c[0],s[1]-c[1]],u=Math.sqrt(l[0]**2+l[1]**2);if(u<i)return;let f=l.map((e,t)=>e/u*a+c[t]);if(Math.abs(a+o-u)<i||Math.abs(a-(o+u))<i)return[f];if(u+o<a||a+o<u)return;let p=re((o*o-u*u-a*a)/(-2*u*a)),h=rt(c,f,+p);return[h,rt(c,f,-p)]},rn=(e,t,r,n,i=en,o=R)=>{let a=r[0]**2+r[1]**2,s=Math.sqrt(a),c=0===s?r:r.map(e=>e/s),l=e$(c),u=eA(ey(n,t),c);if(Math.abs(u)>e+o)return;let f=Math.sqrt(e**2-u**2),p=(e,r)=>t[r]-l[r]*u+c[r]*e,h=Math.abs(e-Math.abs(u))<o?[f].map(e=>[e,e].map(p)):[-f,f].map(e=>[e,e].map(p)),d=h.map(e=>e.map((e,t)=>e-n[t])).map(e=>e[0]*r[0]+r[1]*e[1]).map(e=>e/a);return h.filter((e,t)=>i(d[t],o))},ri=e=>{for(let t=1;t<e.length;t+=1)if(!ee(e[0],e[t]))return[e[0],e[t]]},ro=(e,t,r,n=eo,i=en,o=R)=>{let a=e.map((e,t,r)=>[e,r[(t+1)%r.length]]).map(e=>tG(ey(e[1],e[0]),e[0],t,r,n,i,o)).filter(e=>void 0!==e);switch(a.length){case 0:return;case 1:return[a];default:return ri(a)||[a[0]]}},ra=(e,t,r,n=eo,i=ei,o=R)=>{let a;let s=ro(e,t,r,n,i,o);switch(i){case er:a=et;break;case ea:a=eo;break;default:return s}let c=ro(e,t,r,eo,a,o);if(void 0===c)return;let l=ri(c);if(void 0===l)switch(i){case er:return tb(e,r,er,o)?c:void 0;case ea:return tb(e,ev(r,t),er,o)||tb(e,r,er,o)?c:void 0;default:return}return tb(e,eO(...l),er,o)?l:s},rs={polygon:e=>[e],rect:e=>[e],circle:e=>[e.radius,e.origin],line:e=>[e.vector,e.origin],ray:e=>[e.vector,e.origin],segment:e=>[e.vector,e.origin]},rc={polygon:{line:(e,t,r,n,i)=>ra(...e,...t,eo,n,i),ray:(e,t,r,n,i)=>ra(...e,...t,eo,n,i),segment:(e,t,r,n,i)=>ra(...e,...t,eo,n,i)},circle:{circle:(e,t,r,n,i)=>rr(...e,...t,i),line:(e,t,r,n,i)=>rn(...e,...t,n,i),ray:(e,t,r,n,i)=>rn(...e,...t,n,i),segment:(e,t,r,n,i)=>rn(...e,...t,n,i)},line:{polygon:(e,t,r,n,i)=>ra(...t,...e,eo,r,i),circle:(e,t,r,n,i)=>rn(...t,...e,r,i),line:(e,t,r,n,i)=>tG(...e,...t,r,n,i),ray:(e,t,r,n,i)=>tG(...e,...t,r,n,i),segment:(e,t,r,n,i)=>tG(...e,...t,r,n,i)},ray:{polygon:(e,t,r,n,i)=>ra(...t,...e,eo,r,i),circle:(e,t,r,n,i)=>rn(...t,...e,r,i),line:(e,t,r,n,i)=>tG(...t,...e,n,r,i),ray:(e,t,r,n,i)=>tG(...e,...t,r,n,i),segment:(e,t,r,n,i)=>tG(...e,...t,r,n,i)},segment:{polygon:(e,t,r,n,i)=>ra(...t,...e,eo,r,i),circle:(e,t,r,n,i)=>rn(...t,...e,r,i),line:(e,t,r,n,i)=>tG(...t,...e,n,r,i),ray:(e,t,r,n,i)=>tG(...t,...e,n,r,i),segment:(e,t,r,n,i)=>tG(...e,...t,r,n,i)}},rl={polygon:"polygon",rect:"polygon",circle:"circle",line:"line",ray:"ray",segment:"segment"},ru={polygon:er,rect:er,circle:er,line:ei,ray:er,segment:ea},rf=function(e,t,r){let n=C(e),i=C(t),o=rl[n],a=rl[i],s=rs[n](e),c=rs[i](t),l=e.domain_function||ru[n],u=t.domain_function||ru[i];return rc[o][a](s,c,l,u,r)},rp=(e,t,r=R)=>{for(let n=0;n<2;n+=1){let i=0===n?e:t,o=0===n?t:e;for(let e=0;e<i.length;e+=1){let t=i[e],n=e$(ey(i[(e+1)%i.length],i[e])),a=o.map(e=>ey(e,t)).map(e=>eE(n,e)),s=eE(n,ey(i[(e+2)%i.length],t))>0;if(a.map(e=>s?e<r:e>-r).reduce((e,t)=>e&&t,!0))return!1}}return!0},rh=(e,t,r,n=er,i=R)=>n(e-ew(t,r),i),rd=(e,t,r,n,i=ei,o=ei,a=R)=>{let s=eA(e,r),c=[n[0]-t[0],n[1]-t[1]];if(Math.abs(s)<a){if(Math.abs(eA(c,e))>a)return!1;let t=ev(c,r),n=eE(e,e),i=eE(c,e)/n,o=eE(t,e)/n;return!((i<o?i:o)>1-a)&&!((i<o?o:i)<a)&&!0}let l=[-c[0],-c[1]],u=eA(c,r)/s,f=-(eA(l,e)/s);return i(u,a/eu(e))&&o(f,a/eu(r))},rm={polygon:e=>[e],rect:e=>[e],circle:e=>[e.radius,e.origin],line:e=>[e.vector,e.origin],ray:e=>[e.vector,e.origin],segment:e=>[e.vector,e.origin],vector:e=>[e]},rg={polygon:{polygon:(e,t,r,n,i)=>rp(...e,...t,i),vector:(e,t,r,n,i)=>tb(...e,...t,r,i)},circle:{vector:(e,t,r,n,i)=>rh(...e,...t,er,i)},line:{line:(e,t,r,n,i)=>rd(...e,...t,r,n,i),ray:(e,t,r,n,i)=>rd(...e,...t,r,n,i),segment:(e,t,r,n,i)=>rd(...e,...t,r,n,i),vector:(e,t,r,n,i)=>t8(...e,...t,r,i)},ray:{line:(e,t,r,n,i)=>rd(...t,...e,n,r,i),ray:(e,t,r,n,i)=>rd(...e,...t,r,n,i),segment:(e,t,r,n,i)=>rd(...e,...t,r,n,i),vector:(e,t,r,n,i)=>t8(...e,...t,r,i)},segment:{line:(e,t,r,n,i)=>rd(...t,...e,n,r,i),ray:(e,t,r,n,i)=>rd(...t,...e,n,r,i),segment:(e,t,r,n,i)=>rd(...e,...t,r,n,i),vector:(e,t,r,n,i)=>t8(...e,...t,r,i)},vector:{polygon:(e,t,r,n,i)=>tb(...t,...e,n,i),circle:(e,t,r,n,i)=>rh(...t,...e,er,i),line:(e,t,r,n,i)=>t8(...t,...e,n,i),ray:(e,t,r,n,i)=>t8(...t,...e,n,i),segment:(e,t,r,n,i)=>t8(...t,...e,n,i),vector:(e,t,r,n,i)=>ee(...e,...t,i)}},rv={polygon:"polygon",rect:"polygon",circle:"circle",line:"line",ray:"ray",segment:"segment",vector:"vector"},r_={polygon:er,rect:er,circle:er,line:ei,ray:er,segment:ea,vector:ei},ry=function(e,t,r){let n=C(e),i=C(t),o=rv[n],a=rv[i],s=rm[n](e),c=rm[i](t),l=e.domain_function||r_[n],u=t.domain_function||r_[i];return rg[o][a](s,c,l,u,r)},rb={preserve:{magnitude:function(){return eu(this)},isEquivalent:function(){return ee(this,e0(arguments))},isParallel:function(){return eN(...N(this,e0(arguments)))},isCollinear:function(e){return ry(this,e)},dot:function(){return eE(...N(this,e0(arguments)))},distanceTo:function(){return eP(...N(this,e0(arguments)))},overlap:function(e){return ry(this,e)}},vector:{copy:function(){return[...this]},normalize:function(){return eh(this)},scale:function(){return em(this,arguments[0])},flip:function(){return eS(this)},rotate90:function(){return e$(this)},rotate270:function(){return eC(this)},cross:function(){return ej(L(3,this),L(3,e0(arguments)))},transform:function(){return eB(te(arguments),L(3,this))},add:function(){return ev(this,L(this.length,e0(arguments)))},subtract:function(){return ey(this,L(this.length,e0(arguments)))},rotateZ:function(e,t){return eB(te(t_(e,t)),L(3,this))},lerp:function(e,t){return eM(this,L(this.length,e0(e)),t)},midpoint:function(){return eO(...N(this,e0(arguments)))},bisect:function(){return t$(this,e0(arguments))}}},rE={};Object.keys(rb.preserve).forEach(e=>{rE[e]=rb.preserve[e]}),Object.keys(rb.vector).forEach(e=>{rE[e]=function(){return T.vector(...rb.vector[e].apply(this,arguments))}});var rx={vector:{P:Array.prototype,A:function(){this.push(...e0(arguments))},G:{x:function(){return this[0]},y:function(){return this[1]},z:function(){return this[2]}},M:rE,S:{fromAngle:function(e){return T.vector(Math.cos(e),Math.sin(e))},fromAngleDegrees:function(e){return T.vector.fromAngle(e*U)}}}},rO={fromPoints:function(){let e=e1(arguments);return this.constructor({vector:ey(e[1],e[0]),origin:e[0]})},fromAngle:function(){let e=arguments[0]||0;return this.constructor({vector:[Math.cos(e),Math.sin(e)],origin:[0,0]})},perpendicularBisector:function(){let e=e1(arguments);return this.constructor({vector:e$(ey(e[1],e[0])),origin:ek(e[0],e[1])})}};let rk={isParallel:function(){let e=N(this.vector,e3(arguments).vector);return eN(...e)},isCollinear:function(){let e=e3(arguments);return t8(this.vector,this.origin,e.origin)&&eN(...N(this.vector,e.vector))},isDegenerate:function(e=R){return eL(this.vector,e)},reflectionMatrix:function(){return T.matrix(eX(this.vector,this.origin))},nearestPoint:function(){let e=e0(arguments);return T.vector(tc(this.vector,this.origin,e,this.clip_function))},transform:function(){let e=this.dimension,t=eq(te(arguments),L(3,this.vector),L(3,this.origin));return this.constructor(L(e,t.vector),L(e,t.origin))},translate:function(){let e=ev(...N(this.origin,e0(arguments)));return this.constructor(this.vector,e)},intersect:function(){return rf(this,...arguments)},overlap:function(){return ry(this,...arguments)},bisect:function(e,t){let r=e3(e);return tF(this.vector,this.origin,r.vector,r.origin,t).map(e=>this.constructor(e))}};var rM={line:{P:Object.prototype,A:function(){let e=e3(...arguments);this.vector=T.vector(e.vector),this.origin=T.vector(L(this.vector.length,e.origin));let t=tr({vector:this.vector,origin:this.origin});this.normal=t.normal,this.distance=t.distance,Object.defineProperty(this,"domain_function",{writable:!0,value:en})},G:{dimension:function(){return[this.vector,this.origin].map(e=>e.length).reduce((e,t)=>Math.max(e,t),0)}},M:Object.assign({},rk,{inclusive:function(){return this.domain_function=en,this},exclusive:function(){return this.domain_function=ei,this},clip_function:e=>e,svgPath:function(e=2e4){let t=ev(this.origin,em(this.vector,-e/2)),r=em(this.vector,e);return`M${t[0]} ${t[1]}l${r[0]} ${r[1]}`}}),S:Object.assign({fromNormalDistance:function(){return this.constructor(tn(arguments[0]))}},rO)}},rA={ray:{P:Object.prototype,A:function(){let e=e3(...arguments);this.vector=T.vector(e.vector),this.origin=T.vector(L(this.vector.length,e.origin)),Object.defineProperty(this,"domain_function",{writable:!0,value:et})},G:{dimension:function(){return[this.vector,this.origin].map(e=>e.length).reduce((e,t)=>Math.max(e,t),0)}},M:Object.assign({},rk,{inclusive:function(){return this.domain_function=et,this},exclusive:function(){return this.domain_function=er,this},flip:function(){return T.ray(eS(this.vector),this.origin)},scale:function(e){return T.ray(this.vector.scale(e),this.origin)},normalize:function(){return T.ray(this.vector.normalize(),this.origin)},clip_function:es,svgPath:function(e=1e4){let t=this.vector.scale(e);return`M${this.origin[0]} ${this.origin[1]}l${t[0]} ${t[1]}`}}),S:rO}},rj={segment:{P:Array.prototype,A:function(){let e=e2(...arguments);this.push(...[e[0],e[1]].map(e=>T.vector(e))),this.vector=T.vector(ey(this[1],this[0])),this.origin=this[0],Object.defineProperty(this,"domain_function",{writable:!0,value:eo})},G:{points:function(){return this},magnitude:function(){return eu(this.vector)},dimension:function(){return[this.vector,this.origin].map(e=>e.length).reduce((e,t)=>Math.max(e,t),0)}},M:Object.assign({},rk,{inclusive:function(){return this.domain_function=eo,this},exclusive:function(){return this.domain_function=ea,this},clip_function:ec,transform:function(...e){let t=this.points[0].length,r=te(e),n=this.points.map(e=>L(3,e)).map(e=>eB(r,e)).map(e=>L(t,e));return T.segment(n)},translate:function(){let e=e0(arguments),t=this.points.map(t=>ev(...N(t,e)));return T.segment(t)},midpoint:function(){return T.vector(ek(this.points[0],this.points[1]))},svgPath:function(){let e=this.points.map(e=>`${e[0]} ${e[1]}`);return["M","L"].map((t,r)=>`${t}${e[r]}`).join("")}}),S:{fromPoints:function(){return this.constructor(...arguments)}}}};let rP=function(e,t,r,n,i,o){let a=Math.cos(i),s=Math.sin(i),c=Math.cos(o),l=Math.sin(o);return[e+a*r*c+-s*n*l,t+s*r*c+a*n*l]},rw=function(e,t,r,n,i,o,a){let s=o;if(s<0&&!Number.isNaN(s))for(;s<0;)s+=2*Math.PI;let c=a>2*Math.PI?2*Math.PI:a,l=rP(e,t,r,n,i,s),u=rP(e,t,r,n,i,s+c/2),f=rP(e,t,r,n,i,s+c),p=c/2>Math.PI?1:0;return{x1:l[0],y1:l[1],x2:u[0],y2:u[1],x3:f[0],y3:f[1],fa:p,fs:c/2>0?1:0}},rS=e=>F(e,4),r$=(e,t,r,n,i,o,a)=>`A${rS(e)} ${rS(t)} ${rS(r)} ${rS(n)} ${rS(i)} ${rS(o)} ${rS(a)}`,rC=function(e,t,r,n){let i=t>r,o=Math.sqrt(i?t**2-r**2:r**2-t**2),a=i?Math.cos(n):Math.sin(n),s=i?Math.sin(n):Math.cos(n);return[T.vector(e[0]+o*a,e[1]+o*s),T.vector(e[0]-o*a,e[1]-o*s)]},rL={area:function(){return t0(this)},centroid:function(){return T.vector(t1(this))},boundingBox:function(){return t2(this)},straightSkeleton:function(){return t6(this)},scale:function(e,t=t1(this)){let r=this.map(e=>[0,1].map((r,n)=>e[n]-t[n])).map(r=>r.map((n,i)=>t[i]+r[i]*e));return this.constructor.fromPoints(r)},rotate:function(e,t=t1(this)){let r=this.map(r=>{let n=[r[0]-t[0],r[1]-t[1]],i=Math.sqrt(n[0]**2+n[1]**2),o=Math.atan2(n[1],n[0]);return[t[0]+Math.cos(o+e)*i,t[1]+Math.sin(o+e)*i]});return T.polygon(r)},translate:function(){let e=e0(...arguments),t=this.map(t=>t.map((t,r)=>t+e[r]));return this.constructor.fromPoints(t)},transform:function(){let e=te(...arguments),t=this.map(t=>eB(e,L(3,t)));return T.polygon(t)},nearest:function(){let e=e0(...arguments),t=tl(this,e);return void 0===t?void 0:Object.assign(t,{edge:this.sides[t.i]})},split:function(){let e=e3(...arguments);return t5(this,e.vector,e.origin).map(e=>T.polygon(e))},overlap:function(){return ry(this,...arguments)},intersect:function(){return rf(this,...arguments)},clip:function(e,t){let r=e.domain_function?e.domain_function:en,n=tM(this,e.vector,e.origin,this.domain_function,r,t);return n?T.segment(n):void 0},svgPath:function(){let e=Array(this.length).fill("L");return e[0]="M",`${this.map((t,r)=>`${e[r]}${t[0]} ${t[1]}`).join("")}z`}},rN=e=>[[e.x,e.y],[e.x+e.width,e.y],[e.x+e.width,e.y+e.height],[e.x,e.y+e.height]],rz=e=>[[[e.x,e.y],[e.x+e.width,e.y]],[[e.x+e.width,e.y],[e.x+e.width,e.y+e.height]],[[e.x+e.width,e.y+e.height],[e.x,e.y+e.height]],[[e.x,e.y+e.height],[e.x,e.y]]];var rF={rect:{P:Array.prototype,A:function(){let e=e5(...arguments);this.width=e.width,this.height=e.height,this.origin=T.vector(e.x,e.y),this.push(...rN(this)),Object.defineProperty(this,"domain_function",{writable:!0,value:et})},G:{x:function(){return this.origin[0]},y:function(){return this.origin[1]},center:function(){return T.vector(this.origin[0]+this.width/2,this.origin[1]+this.height/2)}},M:Object.assign({},rL,{inclusive:function(){return this.domain_function=et,this},exclusive:function(){return this.domain_function=er,this},area:function(){return this.width*this.height},segments:function(){return rz(this)},svgPath:function(){return`M${this.origin.join(" ")}h${this.width}v${this.height}h${-this.width}Z`}}),S:{fromPoints:function(){let e=t2(e1(arguments));return T.rect(e.min[0],e.min[1],e.span[0],e.span[1])}}}},rI={polygon:{P:Array.prototype,A:function(){this.push(...V(arguments)),this.sides=this.map((e,t,r)=>[e,r[(t+1)%r.length]]),this.vectors=this.sides.map(e=>ey(e[1],e[0])),Object.defineProperty(this,"domain_function",{writable:!0,value:et})},G:{isConvex:function(){},points:function(){return this}},M:Object.assign({},rL,{inclusive:function(){return this.domain_function=et,this},exclusive:function(){return this.domain_function=er,this},segments:function(){return this.sides}}),S:{fromPoints:function(){return this.constructor(...arguments)},regularPolygon:function(){return this.constructor(tX(...arguments))},convexHull:function(){return this.constructor(tU(...arguments))}}}};let rV=(e,t)=>{for(let r=0;r<12;r+=1)e[r]=t[r];return e},rB=Object.assign({},rx,rM,rA,rj,{circle:{A:function(){let e=e6(...arguments);this.radius=e.radius,this.origin=T.vector(...e.origin)},G:{x:function(){return this.origin[0]},y:function(){return this.origin[1]},z:function(){return this.origin[2]}},M:{nearestPoint:function(){return T.vector(tu(this.radius,this.origin,e0(arguments)))},intersect:function(e){return rf(this,e)},overlap:function(e){return ry(this,e)},svgPath:function(e=0,t=2*Math.PI){let r=rw(this.origin[0],this.origin[1],this.radius,this.radius,0,e,t),n=r$(this.radius,this.radius,0,r.fa,r.fs,r.x2,r.y2),i=r$(this.radius,this.radius,0,r.fa,r.fs,r.x3,r.y3);return`M${r.x1} ${r.y1}${n}${i}`},points:function(e=128){return Array.from(Array(e)).map((t,r)=>2*Math.PI/e*r).map(e=>[this.origin[0]+this.radius*Math.cos(e),this.origin[1]+this.radius*Math.sin(e)])},polygon:function(){return T.polygon(this.points(arguments[0]))},segments:function(){let e=this.points(arguments[0]);return e.map((t,r)=>{let n=(r+1)%e.length;return[t,e[n]]})}},S:{fromPoints:function(){if(3==arguments.length){let e=tQ(...arguments);return this.constructor(e.radius,e.origin)}return this.constructor(...arguments)},fromThreePoints:function(){let e=tQ(...arguments);return this.constructor(e.radius,e.origin)}}}},{ellipse:{A:function(){let e=B(arguments).filter(e=>!Number.isNaN(e)),t=L(5,e);this.rx=t[0],this.ry=t[1],this.origin=T.vector(t[2],t[3]),this.spin=t[4],this.foci=rC(this.origin,this.rx,this.ry,this.spin)},G:{x:function(){return this.origin[0]},y:function(){return this.origin[1]}},M:{svgPath:function(e=0,t=2*Math.PI){let r=rw(this.origin[0],this.origin[1],this.rx,this.ry,this.spin,e,t),n=r$(this.rx,this.ry,this.spin/Math.PI*180,r.fa,r.fs,r.x2,r.y2),i=r$(this.rx,this.ry,this.spin/Math.PI*180,r.fa,r.fs,r.x3,r.y3);return`M${r.x1} ${r.y1}${n}${i}`},points:function(e=128){return Array.from(Array(e)).map((t,r)=>2*Math.PI/e*r).map(e=>rP(this.origin.x,this.origin.y,this.rx,this.ry,this.spin,e))},polygon:function(){return T.polygon(this.points(arguments[0]))},segments:function(){let e=this.points(arguments[0]);return e.map((t,r)=>{let n=(r+1)%e.length;return[t,e[n]]})}},S:{}}},rF,rI,{polyline:{P:Array.prototype,A:function(){this.push(...V(arguments))},G:{points:function(){return this}},M:{svgPath:function(){let e=Array(this.length).fill("L");return e[0]="M",`${this.map((t,r)=>`${e[r]}${t[0]} ${t[1]}`).join("")}`}},S:{fromPoints:function(){return this.constructor(...arguments)}}}},{matrix:{P:Array.prototype,A:function(){te(arguments).forEach(e=>this.push(e))},G:{},M:{copy:function(){return T.matrix(...Array.from(this))},set:function(){return rV(this,te(arguments))},isIdentity:function(){return eV(this)},multiply:function(e){return rV(this,eT(this,e))},determinant:function(){return eR(this)},inverse:function(){return rV(this,eU(this))},translate:function(e,t,r){return rV(this,eT(this,eD(e,t,r)))},rotateX:function(e){return rV(this,eT(this,eW(e)))},rotateY:function(e){return rV(this,eT(this,eZ(e)))},rotateZ:function(e){return rV(this,eT(this,eJ(e)))},rotate:function(e,t,r){return rV(this,eT(this,eH(e,t,r)))},scale:function(e){return rV(this,eT(this,eY(e)))},reflectZ:function(e,t){return rV(this,eT(this,eX(e,t)))},transform:function(...e){return T.vector(eB(this,L(3,e0(e))))},transformVector:function(e){return T.vector(eB(this,L(3,e0(e))))},transformLine:function(...e){let t=e3(e);return T.line(eq(this,t.vector,t.origin))}},S:{}}}),rq=function(e,t){let r=Object.create(rB[e].proto);return rB[e].A.apply(r,t),r};Object.assign(T,{vector:function(){return rq("vector",arguments)},line:function(){return rq("line",arguments)},ray:function(){return rq("ray",arguments)},segment:function(){return rq("segment",arguments)},circle:function(){return rq("circle",arguments)},ellipse:function(){return rq("ellipse",arguments)},rect:function(){return rq("rect",arguments)},polygon:function(){return rq("polygon",arguments)},polyline:function(){return rq("polyline",arguments)},matrix:function(){return rq("matrix",arguments)}}),Object.keys(rB).forEach(e=>{let t={};t.prototype=null!=rB[e].P?Object.create(rB[e].P):Object.create(Object.prototype),t.prototype.constructor=t,T[e].prototype=t.prototype,T[e].prototype.constructor=T[e],Object.keys(rB[e].G).forEach(r=>Object.defineProperty(t.prototype,r,{get:rB[e].G[r]})),Object.keys(rB[e].M).forEach(r=>Object.defineProperty(t.prototype,r,{value:rB[e].M[r]})),Object.keys(rB[e].S).forEach(t=>Object.defineProperty(T[e],t,{value:rB[e].S[t].bind(T[e].prototype)})),rB[e].proto=t.prototype});let rT=T;rT.core=Object.assign(Object.create(null),G,q,tt,el,ez,td,tq,tD,tJ,t3,tq,ty,eK,tf,ti,t9,t7,{intersectConvexPolygonLine:ra,intersectCircleCircle:rr,intersectCircleLine:rn,intersectLineLine:tG,overlapConvexPolygons:rp,overlapConvexPolygonPoint:tb,overlapBoundingBoxes:(e,t)=>{let r=Math.min(e.min.length,t.min.length);for(let n=0;n<r;n+=1)if(e.min[n]>t.max[n]||e.max[n]<t.min[n])return!1;return!0},overlapLineLine:rd,overlapLinePoint:t8,clipLineConvexPolygon:tM,clipPolygonPolygon:(e,t,r=R)=>{let n,i,o,a;let s=e=>(i[0]-n[0])*(e[1]-n[1])>(i[1]-n[1])*(e[0]-n[0])+r,c=()=>{let e=[n[0]-i[0],n[1]-i[1]],t=[o[0]-a[0],o[1]-a[1]],r=n[0]*i[1]-n[1]*i[0],s=o[0]*a[1]-o[1]*a[0],c=1/(e[0]*t[1]-e[1]*t[0]);return[(r*t[0]-s*e[0])*c,(r*t[1]-s*e[1])*c]},l=e;for(let e in n=t[t.length-1],t){i=t[e];let r=l;for(let e in l=[],o=r[r.length-1],r)s(a=r[e])?(!s(o)&&l.push(c()),l.push(a)):s(o)&&l.push(c()),o=a;n=i}return 0===l.length?void 0:l},splitConvexPolygon:t5,straightSkeleton:t6}),rT.typeof=C,rT.intersect=rf,rT.overlap=ry;let rR=function(e,t){let r=this;Object.defineProperty(e,"degree",{get:()=>r.vertices_vertices&&r.vertices_vertices[t]?r.vertices_vertices[t].length:null})},rU=function(e,t){let r=this;Object.defineProperty(e,"coords",{get:()=>{if(!!r.edges_vertices&&!!r.edges_vertices[t]&&!!r.vertices_coords)return r.edges_vertices[t].map(e=>r.vertices_coords[e])}})},rD=function(e,t){let r=this;Object.defineProperty(e,"simple",{get:()=>{if(!r.faces_vertices||!r.faces_vertices[t])return null;for(let n=0;n<e.length-1;n+=1)for(let i=n+1;i<e.length;i+=1)if(r.faces_vertices[t][n]===r.faces_vertices[t][i])return!1;return!0}})},rG=function(e,t){let r=this;Object.defineProperty(e,"coords",{get:()=>{if(!!r.faces_vertices&&!!r.faces_vertices[t]&&!!r.vertices_coords)return r.faces_vertices[t].map(e=>r.vertices_coords[e])}})};var rW={vertices:function(e,t){return rR.call(this,e,t),e},edges:function(e,t){return rU.call(this,e,t),e},faces:function(e,t){return rD.call(this,e,t),rG.call(this,e,t),e}};let rZ="Rabbit Ear",rJ=["file_spec","file_creator","file_author","file_title","file_description","file_classes","file_frames"],rH=["frame_author","frame_title","frame_description","frame_attributes","frame_classes","frame_unit","frame_parent","frame_inherit"],rY=["vertices_coords","vertices_vertices","vertices_faces","edges_vertices","edges_faces","edges_assignment","edges_foldAngle","edges_length","faces_vertices","faces_edges","vertices_edges","edges_edges","faces_faces"],rX=["edgeOrders","faceOrders"],rK=Object.freeze([].concat(rJ).concat(rH).concat(rY).concat(rX)),rQ=Object.freeze(["edges_vector","vertices_sectors","faces_sectors","faces_matrix"]),r0=Array.from("MmVvBbFfUu"),r1={vertices:"vertex",edges:"edge",faces:"face"},r2={b:"boundary",m:"mountain",v:"valley",f:"flat",u:"unassigned"};r0.forEach(e=>{r2[e.toUpperCase()]=r2[e]});let r3={M:-180,m:-180,V:180,v:180,B:0,b:0,F:0,f:0,U:0,u:0},r8=e=>r3[e]||0,r5=e=>e>rT.core.EPSILON?"V":e<-rT.core.EPSILON?"M":"U",r4=e=>rT.core.fnEpsilonEqual(0,e)||rT.core.fnEpsilonEqual(-180,e)||rT.core.fnEpsilonEqual(180,e),r6=({edges_foldAngle:e})=>{if(!e)return!0;for(let t=0;t<e.length;t+=1)if(!r4(e[t]))return!1;return!0},r9=(e,t)=>Object.keys(e).map(e=>e.substring(e.length-t.length,e.length)===t?e:void 0).filter(e=>void 0!==e),r7=(e,t)=>Object.keys(e).map(e=>e.substring(0,t.length)===t?e:void 0).filter(e=>void 0!==e),ne=(e,t)=>r7(e,`${t}_`),nt=(e,t)=>r9(e,`_${t}`),nr=(e,t)=>{let r=ne(e,t);if(0===r.length)return[];let n=Array.from(Array(Math.max(...r.map(t=>e[t].length)))).map(()=>({}));return r.forEach(t=>n.forEach((r,i)=>{n[i][t]=e[t][i]})),n},nn=(e={})=>0===Object.keys(e).length?0:[].concat(rK,rQ).filter(t=>e[t]).length/Object.keys(e).length;var ni=Object.freeze({__proto__:null,singularize:r1,pluralize:{vertex:"vertices",edge:"edges",face:"faces"},edgesAssignmentNames:r2,edgesAssignmentDegrees:r3,edgeAssignmentToFoldAngle:r8,edgeFoldAngleToAssignment:r5,edgeFoldAngleIsFlat:r4,edgesFoldAngleAreAllFlat:r6,filterKeysWithSuffix:r9,filterKeysWithPrefix:r7,getGraphKeysWithPrefix:ne,getGraphKeysWithSuffix:nt,transposeGraphArrays:nr,transposeGraphArrayAtIndex:function(e,t,r){let n=ne(e,t);if(0===n.length)return;let i={};return n.forEach(t=>{i[t]=e[t][r]}),i},isFoldObject:nn});let no=(e,t,r=rT.core.EPSILON)=>{let n=e.length;for(let i=0;i<n;i+=1)if(Math.abs(e[i]-t[i])>r)return!1;return!0},na=({vertices_coords:e},t=rT.core.EPSILON)=>{if(!e)return[];let r=e.map(()=>[]);for(let n=0;n<e.length-1;n+=1)for(let i=n+1;i<e.length;i+=1)r[n][i]=no(e[n],e[i],t);let n=r.map(e=>e.map((e,t)=>e?t:void 0).filter(e=>void 0!==e)),i=[],o=Array(e.length).fill(!1),a=0,s=(t,r)=>{if(!o[r]&&a!==e.length)for(o[r]=!0,a+=1,!i[t]&&(i[t]=[]),i[t].push(r);n[r].length>0;)s(t,n[r][0]),n[r].splice(0,1)};for(let t=0;t<e.length&&(s(t,t),a!==e.length);t+=1);return i.filter(e=>e.length)},ns=(...e)=>Math.max(0,...e.filter(e=>void 0!==e).map(e=>e.length)),nc=(e,t)=>ns(...ne(e,t).map(t=>e[t]));nc.vertices=({vertices_coords:e,vertices_faces:t,vertices_vertices:r})=>ns(e,t,r),nc.edges=({edges_vertices:e,edges_edges:t,edges_faces:r})=>ns(e,t,r),nc.faces=({faces_vertices:e,faces_edges:t,faces_faces:r})=>ns(e,t,r);let nl=e=>{let t={};return e.forEach(e=>{t[e]=!0}),Object.keys(t).map(e=>parseInt(e,10))},nu=e=>nl(e).sort((e,t)=>e-t),nf=(e,t)=>(t.sort((e,t)=>e-t),[e.slice(t[1]).concat(e.slice(0,t[0]+1)),e.slice(t[0],t[1]+1)]),np=e=>{let t={};return e.forEach(e=>{void 0===t[e]&&(t[e]=0),t[e]+=1}),e.filter(e=>t[e]>1)},nh=e=>e.map(e=>e.map((e,t)=>!0===e?t:void 0).filter(e=>void 0!==e)),nd=e=>{let t=[];for(let r=0;r<e.length-1;r+=1)for(let n=r+1;n<e.length;n+=1)e[r][n]&&t.push([r,n]);return t};var nm=Object.freeze({__proto__:null,uniqueIntegers:nl,uniqueSortedIntegers:nu,splitCircularArray:nf,getLongestArray:e=>{if(1===e.length)return e[0];let t=e.map(e=>e.length),r=0;for(let n=0;n<e.length;n+=1)t[n]>t[r]&&(r=n);return e[r]},removeSingleInstances:np,booleanMatrixToIndexedArray:nh,booleanMatrixToUniqueIndexPairs:nd,makeSelfRelationalArrayClusters:e=>{let t=[],r=(n,i)=>void 0!==t[n]?0:(t[n]=i,e[n].forEach(e=>r(e,i)),1);for(let t=0,n=0;t<e.length;t+=1){if(t in e)n+=r(t,n)}return t},circularArrayValidRanges:e=>{let t=e.map(e=>void 0!==e);if(t.reduce((e,t)=>e&&t,!0))return[[0,e.length-1]];let r=t.map((e,t,r)=>e&&!r[(t-1+r.length)%r.length]),n=r.reduce((e,t)=>e+(t?1:0),0),i=Array(n),o=Array(n).fill(0),a=t[0]&&t[e.length-1]?0:n-1;return t.forEach((e,n)=>{a=(a+(r[n]?1:0))%o.length,o[a]+=t[n]?1:0,r[n]&&(i[a]=n)}),i.map((t,r)=>[t,(t+o[r]-1)%e.length])}});let ng=(e,t,r)=>{let n,i,o;let a=nc(e,t),s=nu(r),c=[];for(n=0,i=0,o=0;n<a;n+=1,i+=1){for(;n===s[o];)c[n]=void 0,n+=1,o+=1;n<a&&(c[n]=i)}return nt(e,t).forEach(t=>e[t].forEach((r,n)=>e[t][n].forEach((r,i)=>{e[t][n][i]=c[r]}))),s.reverse(),ne(e,t).forEach(t=>s.forEach(r=>e[t].splice(r,1))),c},nv=(e,t,r)=>{let n,i,o;let a=nc(e,t),s=nu(Object.keys(r).map(e=>parseInt(e,10))),c=[];for(n=0,i=0,o=0;n<a;n+=1,i+=1){for(;n===s[o];)c[n]=c[r[s[o]]],void 0===c[n]&&console.log("replace() found an undefined",c),n+=1,o+=1;n<a&&(c[n]=i)}return nt(e,t).forEach(t=>e[t].forEach((r,n)=>e[t][n].forEach((r,i)=>{e[t][n][i]=c[r]}))),s.reverse(),ne(e,t).forEach(t=>s.forEach(r=>e[t].splice(r,1))),c},n_=(e,t)=>na(e,t).filter(e=>e.length>1),ny=({vertices_coords:e,edges_vertices:t,faces_vertices:r})=>{if(!e)return[];let n=e.length,i=Array(n).fill(!1);return t&&t.forEach(e=>{e.filter(e=>!i[e]).forEach(e=>{i[e]=!0,n-=1})}),r&&r.forEach(e=>{e.filter(e=>!i[e]).forEach(e=>{i[e]=!0,n-=1})}),i.map((e,t)=>e?void 0:t).filter(e=>void 0!==e)},nb=(e,t)=>(!t&&(t=ny(e)),{map:ng(e,s,t),remove:t}),nE=(e,t=rT.core.EPSILON)=>{let r=[],n=[],i=na(e,t).filter(e=>e.length>1);return i.forEach(e=>{for(let t=1;t<e.length;t+=1)r[e[t]]=e[0],n.push(e[t])}),i.map(t=>t.map(t=>e.vertices_coords[t])).map(e=>rT.core.average(...e)).forEach((t,r)=>{e.vertices_coords[i[r][0]]=t}),{map:nv(e,s,r),remove:n}};var nx=Object.freeze({__proto__:null,getDuplicateVertices:n_,getEdgeIsolatedVertices:({vertices_coords:e,edges_vertices:t})=>{if(!e||!t)return[];let r=e.length,n=Array(r).fill(!1);return t.forEach(e=>{e.filter(e=>!n[e]).forEach(e=>{n[e]=!0,r-=1})}),n.map((e,t)=>e?void 0:t).filter(e=>void 0!==e)},getFaceIsolatedVertices:({vertices_coords:e,faces_vertices:t})=>{if(!e||!t)return[];let r=e.length,n=Array(r).fill(!1);return t.forEach(e=>{e.filter(e=>!n[e]).forEach(e=>{n[e]=!0,r-=1})}),n.map((e,t)=>e?void 0:t).filter(e=>void 0!==e)},getIsolatedVertices:ny,removeIsolatedVertices:nb,removeDuplicateVertices:nE});let nO=e=>{let t=-1;return e.filter(e=>void 0!==e).forEach(e=>e.forEach(e=>e.forEach(e=>{e>t&&(t=e)}))),t},nk=e=>{let t=-1;return e.forEach(e=>{e[0]>t&&(t=e[0]),e[1]>t&&(t=e[1])}),t},nM={edges:"edgeOrders",faces:"faceOrders"},nA=(e,t)=>Math.max(nO(nt(e,t).map(t=>e[t])),e[nM[t]]?nk(e[nM[t]]):-1)+1;nA.vertices=e=>nA(e,s),nA.edges=e=>nA(e,c),nA.faces=e=>nA(e,l);let nj=({vertices_vertices:e,vertices_sectors:t},r,n,i={})=>{let o={},a={vertices:[r],edges:[],angles:[]},s=r,c=n;for(;;){let r=e[c],n=(r.indexOf(s)+r.length-1)%r.length,l=r[n],u=`${c} ${l}`;if(o[u])return Object.assign(i,o),a.vertices.pop(),a;if(o[u]=!0,i[u])return;a.vertices.push(c),a.edges.push(u),t&&a.angles.push(t[c][n]),s=c,c=l}},nP=({vertices_vertices:e,vertices_sectors:t})=>{let r={vertices_vertices:e,vertices_sectors:t},n={};return e.map((e,t)=>e.map(e=>nj(r,t,e,n)).filter(e=>void 0!==e)).flat()},nw=e=>e.filter(e=>e.angles.map(e=>Math.PI-e).reduce((e,t)=>e+t,0)>0);var nS=Object.freeze({__proto__:null,counterClockwiseWalk:nj,planarVertexWalk:nP,filterWalkedBoundaryFace:nw});let n$=({vertices_coords:e},t,r)=>t.map(t=>e[t]).map(t=>rT.core.subtract(t,e[r])).map(e=>Math.atan2(e[1],e[0])).map(e=>e>-rT.core.EPSILON?e:e+2*Math.PI).map((e,t)=>({a:e,i:t})).sort((e,t)=>e.a-t.a).map(e=>e.i).map(e=>t[e]),nC=({vertices_coords:e},t,r)=>t.map(t=>({i:t,d:rT.core.dot(e[t],r)})).sort((e,t)=>e.d-t.d).map(e=>e.i);var nL=Object.freeze({__proto__:null,sortVerticesCounterClockwise:n$,sortVerticesAlongVector:nC});let nN=({edges_vertices:e})=>{let t=[];return e.forEach((e,r)=>e.forEach(e=>{void 0===t[e]&&(t[e]=[]),t[e].push(r)})),t},nz=({edges_vertices:e,vertices_vertices:t})=>{let r=nB({edges_vertices:e});return t.map((e,t)=>e.map(e=>r[`${t} ${e}`]))},nF=({vertices_coords:e,vertices_edges:t,edges_vertices:r})=>{!t&&(t=nN({edges_vertices:r}));let n=t.map((e,t)=>e.map(e=>r[e].filter(e=>e!==t)).reduce((e,t)=>e.concat(t),[]));return void 0===e?n:n.map((t,r)=>n$({vertices_coords:e},t,r))},nI=({vertices_coords:e,faces_vertices:t})=>{if(!t)return e.map(()=>[]);let r=void 0!==e?e.map(()=>[]):Array.from(Array(nA.vertices({faces_vertices:t}))).map(()=>[]);return t.forEach((e,t)=>{let n=[];e.forEach(e=>{n[e]=t}),n.forEach((e,t)=>r[t].push(e))}),r},nV=({vertices_coords:e,vertices_vertices:t,faces_vertices:r})=>{if(!r)return e.map(()=>[]);if(!t)return nI({vertices_coords:e,faces_vertices:r});let n=nT({faces_vertices:r});return t.map((e,t)=>e.map((e,r,n)=>[n[(r+1)%n.length],t,e].join(" "))).map(e=>e.map(e=>n[e]))},nB=({edges_vertices:e})=>{let t={};return e.map(e=>e.join(" ")).forEach((e,r)=>{t[e]=r}),e.map(e=>`${e[1]} ${e[0]}`).forEach((e,r)=>{t[e]=r}),t},nq=({edges_vertices:e})=>{let t={};return e.map(e=>e.join(" ")).forEach((e,r)=>{t[e]=r}),t},nT=({faces_vertices:e})=>{let t={};return e.forEach((e,r)=>e.map((t,r)=>[0,1,2].map(t=>(r+t)%e.length).map(t=>e[t]).join(" ")).forEach(e=>{t[e]=r})),t},nR=({vertices_coords:e,vertices_vertices:t,edges_vertices:r,edges_vector:n})=>{!n&&(n=nY({vertices_coords:e,edges_vertices:r}));let i=nq({edges_vertices:r});return t.map((e,r)=>t[r].map(e=>{let t=i[`${r} ${e}`],o=i[`${e} ${r}`];return void 0!==t?n[t]:void 0!==o?rT.core.flip(n[o]):void 0}))},nU=({vertices_coords:e,vertices_vertices:t,edges_vertices:r,edges_vector:n})=>nR({vertices_coords:e,vertices_vertices:t,edges_vertices:r,edges_vector:n}).map(e=>1===e.length?[rT.core.TWO_PI]:rT.core.counterClockwiseSectors2(e)),nD=({edges_vertices:e,faces_edges:t})=>{let r=void 0!==e?e.map(()=>[]):Array.from(Array(nA.edges({faces_edges:t}))).map(()=>[]);return t.forEach((e,t)=>{let n=[];e.forEach(e=>{n[e]=t}),n.forEach((e,t)=>r[t].push(e))}),r},nG=({vertices_coords:e,edges_vertices:t,edges_vector:r,faces_vertices:n,faces_edges:i,faces_center:o})=>{if(!t)return nD({faces_edges:i});!r&&(r=nY({vertices_coords:e,edges_vertices:t}));let a=t.map(t=>e[t[0]]);!o&&(o=n3({vertices_coords:e,faces_vertices:n}));let s=t.map(()=>[]);return i.forEach((e,t)=>{let r=[];e.forEach(e=>{r[e]=t}),r.forEach((e,t)=>s[t].push(e))}),s.forEach((e,t)=>{let n=e.map(e=>o[e]).map(e=>rT.core.subtract2(e,a[t])).map(e=>rT.core.cross2(e,r[t]));e.sort((e,t)=>n[e]-n[t])}),s},nW={M:-180,m:-180,V:180,v:180},nZ=({edges_assignment:e})=>e.map(e=>nW[e]||0),nJ=({edges_foldAngle:e})=>e.map(e=>0===e?"F":e<0?"M":"V"),nH=({vertices_coords:e,edges_vertices:t})=>t.map(t=>t.map(t=>e[t])),nY=({vertices_coords:e,edges_vertices:t})=>nH({vertices_coords:e,edges_vertices:t}).map(e=>rT.core.subtract(e[1],e[0])),nX=({vertices_coords:e,edges_vertices:t,edges_coords:r},n=0)=>(!r&&(r=nH({vertices_coords:e,edges_vertices:t})),r.map(e=>rT.core.boundingBox(e,n))),nK=({vertices_coords:e,vertices_vertices:t,vertices_edges:r,vertices_sectors:n,edges_vertices:i,edges_vector:o})=>{!t&&(t=nF({vertices_coords:e,edges_vertices:i,vertices_edges:r})),!n&&(n=nU({vertices_coords:e,vertices_vertices:t,edges_vertices:i,edges_vector:o}));let a=nB({edges_vertices:i});return nw(nP({vertices_vertices:t,vertices_sectors:n})).map(e=>({...e,edges:e.edges.map(e=>a[e])}))},nQ=e=>e.faces_edges.map(t=>t.map(t=>e.edges_vertices[t]).map((e,t,r)=>{let n=r[(t+1)%r.length];return e[0]===n[0]||e[0]===n[1]?e[1]:e[0]})),n0=e=>{let t=nB(e);return e.faces_vertices.map(e=>e.map((e,t,r)=>[e,r[(t+1)%r.length]].join(" "))).map(e=>e.map(e=>t[e]))},n1=({faces_vertices:e})=>{let t=e.map(()=>[]),r={};return e.map((e,t)=>e.map((n,i,o)=>{let a=o[(i+1)%e.length];a<n&&([n,a]=[a,n]);let s=`${n} ${a}`;void 0===r[s]&&(r[s]={}),r[s][t]=!0})),Object.values(r).map(e=>Object.keys(e)).filter(e=>e.length>1).forEach(e=>{t[e[0]].push(parseInt(e[1],10)),t[e[1]].push(parseInt(e[0],10))}),t},n2=({vertices_coords:e,faces_vertices:t},r)=>t.map(t=>t.map(t=>e[t])).map(e=>rT.core.makePolygonNonCollinear(e,r)),n3=({vertices_coords:e,faces_vertices:t})=>t.map(t=>t.map(t=>e[t])).map(e=>rT.core.centroid(e)),n8=({vertices_coords:e,faces_vertices:t})=>t.map(t=>t.map(t=>e[t]).reduce((e,t)=>[e[0]+t[0],e[1]+t[1]],[0,0]).map(e=>e/t.length));var n5=Object.freeze({__proto__:null,makeVerticesEdgesUnsorted:nN,makeVerticesEdges:nz,makeVerticesVertices:nF,makeVerticesFacesUnsorted:nI,makeVerticesFaces:nV,makeVerticesToEdgeBidirectional:nB,makeVerticesToEdge:nq,makeVerticesToFace:nT,makeVerticesVerticesVector:nR,makeVerticesSectors:nU,makeEdgesEdges:({edges_vertices:e,vertices_edges:t})=>e.map((e,r)=>{let n=t[e[0]].filter(e=>e!==r),i=t[e[1]].filter(e=>e!==r);return n.concat(i)}),makeEdgesFacesUnsorted:nD,makeEdgesFaces:nG,makeEdgesFoldAngle:nZ,makeEdgesAssignment:nJ,makeEdgesCoords:nH,makeEdgesVector:nY,makeEdgesLength:({vertices_coords:e,edges_vertices:t})=>nY({vertices_coords:e,edges_vertices:t}).map(e=>rT.core.magnitude(e)),makeEdgesBoundingBox:nX,makePlanarFaces:nK,makeFacesVerticesFromEdges:nQ,makeFacesEdgesFromVertices:n0,makeFacesFaces:n1,makeFacesPolygon:n2,makeFacesPolygonQuick:({vertices_coords:e,faces_vertices:t})=>t.map(t=>t.map(t=>e[t])),makeFacesCenter:n3,makeFacesCenterQuick:n8});let n4=({edges_vertices:e})=>{let t=[];for(let r=0;r<e.length;r+=1)e[r][0]===e[r][1]&&t.push(r);return t},n6=({edges_vertices:e})=>{if(!e)return[];let t=[],r={};for(let n=0;n<e.length;n+=1){let i=`${e[n][0]} ${e[n][1]}`,o=`${e[n][1]} ${e[n][0]}`;void 0!==r[i]?t[n]=r[i]:(r[i]=n,r[o]=n)}return t},n9=(e,t,r)=>{let n={};r.forEach(e=>{n[e]=!0}),nt(e,t).forEach(t=>e[t].forEach((r,i)=>{for(let o=r.length-1;o>=0;o-=1)!0===n[r[o]]&&e[t][i].splice(o,1)}))},n7=(e,t)=>(!t&&(t=n4(e)),t.length&&n9(e,c,t),{map:ng(e,c,t),remove:t}),ie=(e,t)=>{!t&&(t=n6(e));let r=Object.keys(t).map(e=>parseInt(e,10)),n=nv(e,c,t);return r.length&&(e.vertices_edges||e.vertices_vertices||e.vertices_faces)&&(e.vertices_edges=nN(e),e.vertices_vertices=nF(e),e.vertices_edges=nz(e),e.vertices_faces=nV(e)),{map:n,remove:r}};var it=Object.freeze({__proto__:null,getCircularEdges:n4,getDuplicateEdges:n6,removeCircularEdges:n7,removeDuplicateEdges:ie});let ir=(...e)=>{if(0===e.length)return[];let t=e[0].map((e,t)=>t);return e.forEach(e=>t.forEach((r,n)=>{t[n]=e[r]})),t},ii=(...e)=>{if(0===e.length)return[];let t=e[0].map((e,t)=>[t]);return e.forEach(e=>{t.forEach((r,n)=>r.forEach((r,i)=>{t[n][i]=e[r]})),t.forEach((e,r)=>{t[r]=e.reduce((e,t)=>e.concat(t),[]).filter(e=>void 0!==e)})}),t},io=(...e)=>{if(0===e.length)return[];let t=e[0].reduce((e,t)=>e.concat(t),[]).map((e,t)=>[t]);return e.forEach(e=>{let r=[];e.forEach((e,n)=>{typeof e===i?r[n]=t[e]:r[n]=e.map(e=>t[e]).reduce((e,t)=>e.concat(t),[])}),t=r}),t},ia=e=>{let t=[];return e.forEach((e,r)=>{if(null!=e)typeof e===i&&(void 0!==t[e]?typeof t[e]===i?t[e]=[t[e],r]:t[e].push(r):t[e]=r),e.constructor===Array&&e.forEach(e=>{t[e]=r})}),t},is=e=>{let t=[];return e.forEach((e,r)=>{t[e]=r}),t};var ic=Object.freeze({__proto__:null,mergeSimpleNextmaps:ir,mergeNextmaps:ii,mergeSimpleBackmaps:(...e)=>{if(0===e.length)return[];let t=e[0].map((e,t)=>t);return e.forEach(e=>{t=e.map(e=>t[e])}),t},mergeBackmaps:io,invertMap:ia,invertSimpleMap:is});let il=(e,t)=>{let r=nE(e,t),n=n7(e),i=ie(e),o=nb(e),a=is(r.map),s=o.remove.map(e=>a[e]),c=is(n.map),l=i.remove.map(e=>c[e]);return{vertices:{map:ir(r.map,o.map),remove:r.remove.concat(s)},edges:{map:ir(n.map,i.map),remove:n.remove.concat(l)}}},iu=e=>{let t={vertices:nc.vertices(e),edges:nc.edges(e),faces:nc.faces(e)},r={vertices:nA.vertices(e),edges:nA.edges(e),faces:nA.faces(e)};return{vertices:t.vertices>=r.vertices,edges:t.edges>=r.edges,faces:t.faces>=r.faces}},ip=(e,t)=>{let r=n6(e),n=n4(e),i=ny(e),o=n_(e,t),a=iu(e),s=0===r.length&&0===n.length&&0===i.length&&a.vertices&&a.edges&&a.faces;return{summary:s?"valid":"problematic",vertices:{isolated:i,duplicate:o,references:a.vertices},edges:{circular:n,duplicate:r,references:a.edges},faces:{references:a.faces}}},ih=e=>{let t=e.edges_vertices.length;if(!e.edges_assignment&&(e.edges_assignment=[]),!e.edges_foldAngle&&(e.edges_foldAngle=[]),e.edges_assignment.length>e.edges_foldAngle.length)for(let t=e.edges_foldAngle.length;t<e.edges_assignment.length;t+=1)e.edges_foldAngle[t]=r8(e.edges_assignment[t]);if(e.edges_foldAngle.length>e.edges_assignment.length)for(let t=e.edges_assignment.length;t<e.edges_foldAngle.length;t+=1)e.edges_assignment[t]=r5(e.edges_foldAngle[t]);for(let r=e.edges_assignment.length;r<t;r+=1)e.edges_assignment[r]="U",e.edges_foldAngle[r]=0},id=(e,t)=>{if(void 0===t&&!e.faces_vertices&&!e.faces_edges&&(t=!0),t&&e.vertices_coords){let t=nK(e);e.faces_vertices=t.map(e=>e.vertices),e.faces_edges=t.map(e=>e.edges);return}if(!e.faces_vertices||!e.faces_edges)e.faces_vertices&&!e.faces_edges?e.faces_edges=n0(e):e.faces_edges&&!e.faces_vertices?e.faces_vertices=nQ(e):(e.faces_vertices=[],e.faces_edges=[])},im=(e,t)=>"object"==typeof e&&e.edges_vertices?(e.vertices_edges=nN(e),e.vertices_vertices=nF(e),e.vertices_edges=nz(e),ih(e),id(e,t),e.vertices_faces=nV(e),e.edges_faces=nD(e),e.faces_faces=n1(e),e):e,ig=(e,t=rT.core.EPSILON)=>nX(e,t).map(t=>e.vertices_coords.map(e=>e[0]>t.min[0]&&e[1]>t.min[1]&&e[0]<t.max[0]&&e[1]<t.max[1])),iv=({vertices_coords:e,edges_vertices:t,edges_coords:r},n=rT.core.EPSILON)=>{let i=nX({vertices_coords:e,edges_vertices:t,edges_coords:r},n),o=t.map(()=>[]);for(let e=0;e<t.length-1;e+=1)for(let r=e+1;r<t.length;r+=1){let t=(i[e].max[0]<i[r].min[0]||i[r].max[0]<i[e].min[0])&&(i[e].max[1]<i[r].min[1]||i[r].max[1]<i[e].min[1]);o[e][r]=!t,o[r][e]=!t}for(let e=0;e<t.length;e+=1)o[e][e]=!0;return o};var i_=Object.freeze({__proto__:null,getEdgesVerticesOverlappingSpan:ig,getEdgesEdgesOverlapingSpans:iv});let iy=({edges_vertices:e},t,r)=>(r.forEach(r=>{e[r][0]===t&&e[r][1]===t&&console.warn("removePlanarVertex circular edge")}),r.map(r=>e[r][0]===t?e[r][1]:e[r][0])),ib=({vertices_coords:e,vertices_edges:t,edges_vertices:r},n,i=rT.core.EPSILON)=>{if(!e||!r)return!1;!t&&(t=nN({edges_vertices:r}));let o=t[n];if(void 0===o||2!==o.length)return!1;let a=iy({edges_vertices:r},n,o),s=[a[0],n,a[1]].map(t=>e[t]);return rT.core.collinearBetween(...s,!1,i)},iE=({vertices_coords:e,edges_vertices:t,edges_coords:r},n=rT.core.EPSILON)=>{!r&&(r=t.map(t=>t.map(t=>e[t])));let i=ig({vertices_coords:e,edges_vertices:t,edges_coords:r},n);for(let t=0;t<r.length;t+=1)for(let o=0;o<e.length;o+=1){if(!!i[t][o])i[t][o]=rT.core.overlapLinePoint(rT.core.subtract(r[t][1],r[t][0]),r[t][0],e[o],rT.core.excludeS,n)}return i.map(e=>e.map((e,t)=>e?t:void 0).filter(e=>void 0!==e))};var ix=Object.freeze({__proto__:null,isVertexCollinear:ib,getVerticesEdgesOverlap:iE});let iO=({vertices_coords:e,edges_vertices:t},r,n,i=rT.core.EPSILON)=>{let o=rT.core.normalize2(r),a=t.map(t=>e[t[0]]),s=t.map(t=>t.map(t=>e[t])).map(e=>rT.core.subtract2(e[1],e[0])).map(e=>rT.core.parallel2(e,r,i));for(let e=0;e<t.length;e+=1){if(!s[e])continue;if(rT.core.fnEpsilonEqualVectors(a[e],n)){s[e]=!0;continue}let t=rT.core.normalize2(rT.core.subtract2(a[e],n)),r=Math.abs(rT.core.dot2(t,o));s[e]=Math.abs(1-r)<i}return s},ik=({vertices_coords:e,edges_vertices:t,edges_coords:r},n,i,o=rT.core.EPSILON)=>{!r&&(r=nH({vertices_coords:e,edges_vertices:t}));let a=rT.core.boundingBox([n,i],o),s=rT.core.subtract2(i,n);return nX({vertices_coords:e,edges_vertices:t,edges_coords:r},o).map(e=>rT.core.overlapBoundingBoxes(a,e)).map((e,t)=>e?rT.core.intersectLineLine(s,n,rT.core.subtract2(r[t][1],r[t][0]),r[t][0],rT.core.includeS,rT.core.includeS,o):void 0)},iM=function({vertices_coords:e,edges_vertices:t,edges_vector:r,edges_origin:n},i=rT.core.EPSILON){!r&&(r=nY({vertices_coords:e,edges_vertices:t})),!n&&(n=t.map(t=>e[t[0]]));let o=r.map(()=>[]),a=iv({vertices_coords:e,edges_vertices:t},i);for(let e=0;e<r.length-1;e+=1)for(let t=e+1;t<r.length;t+=1){if(!0!==a[e][t]){o[e][t]=void 0;continue}o[e][t]=rT.core.intersectLineLine(r[e],n[e],r[t],n[t],rT.core.excludeS,rT.core.excludeS,i),o[t][e]=o[e][t]}return o},iA=({vertices_coords:e,edges_vertices:t,faces_vertices:r,faces_edges:n},i,o,a,s=rT.core.EPSILON)=>{let c=r[i].map(t=>e[t]).map(e=>rT.core.overlapLinePoint(o,a,e,()=>!0,s)).map((e,t)=>e?t:void 0).filter(e=>void 0!==e),l=c.map(e=>r[i][e]);if(c.concat(c.map(e=>e+r[i].length)).map((e,t,r)=>r[t+1]-e==1).reduce((e,t)=>e||t,!1))return;if(l.length>1)return{vertices:l,edges:[]};let u=n[i].map(r=>t[r].map(t=>e[t])).map(e=>rT.core.intersectLineLine(o,a,rT.core.subtract(e[1],e[0]),e[0],rT.core.includeL,rT.core.excludeS,s)).map((e,t)=>({coords:e,edge:n[i][t]})).filter(e=>void 0!==e.coords).filter(e=>!l.map(r=>t[e.edge].includes(r)).reduce((e,t)=>e||t,!1));return u.length+l.length===2?{vertices:l,edges:u}:void 0};var ij=Object.freeze({__proto__:null,makeEdgesLineParallelOverlap:iO,makeEdgesSegmentIntersection:ik,makeEdgesEdgesIntersection:iM,intersectConvexFaceLine:iA});let iP=(e,t=rT.core.EPSILON)=>{let r=e.edges_vertices.map(t=>t.map(t=>e.vertices_coords[t])),n=r.map(e=>rT.core.subtract(e[1],e[0])),i=r.map(e=>e[0]),o=iM({vertices_coords:e.vertices_coords,edges_vertices:e.edges_vertices,edges_vector:n,edges_origin:i},1e-6),a=iE({vertices_coords:e.vertices_coords,edges_vertices:e.edges_vertices,edges_coords:r},t);if(0===o.flat().filter(e=>void 0!==e).length&&0===a.flat().filter(e=>void 0!==e).length)return;let s={vertices:e.vertices_coords.length};o.forEach(t=>t.filter(e=>void 0!==e).filter(e=>2===e.length).forEach(t=>{let r=e.vertices_coords.length;e.vertices_coords.push([...t]),t.splice(0,2),t.push(r)})),o.forEach((e,t)=>{e.forEach((e,r)=>{e&&(o[t][r]=e[0])})});let c=o.map(e=>e.filter(e=>void 0!==e));e.edges_vertices.forEach((e,t)=>e.push(...c[t],...a[t])),e.edges_vertices.forEach((t,r)=>{e.edges_vertices[r]=nC({vertices_coords:e.vertices_coords},t,n[r])});let l=e.edges_vertices.map((e,t)=>Array(e.length-1).fill(t)).flat();if(e.edges_vertices=e.edges_vertices.map(e=>Array.from(Array(e.length-1)).map((t,r,n)=>[e[r],e[r+1]])).flat(),e.edges_assignment&&e.edges_foldAngle&&e.edges_foldAngle.length>e.edges_assignment.length)for(let t=e.edges_assignment.length;t<e.edges_foldAngle.length;t+=1)e.edges_assignment[t]=r5(e.edges_foldAngle[t]);return e.edges_assignment&&(e.edges_assignment=l.map(t=>e.edges_assignment[t]||"U")),e.edges_foldAngle&&(e.edges_foldAngle=l.map(t=>e.edges_foldAngle[t]).map((t,r)=>void 0===t?r8(e.edges_assignment[r]):t)),{vertices:{new:Array.from(Array(e.vertices_coords.length-s.vertices)).map((e,t)=>s.vertices+t)},edges:{backmap:l}}},iw=[f,p,d,m],iS=(e,t=rT.core.EPSILON)=>{let r;e.vertices_coords=e.vertices_coords.map(e=>e.slice(0,2)),[s,c,l].map(t=>ne(e,t)).flat().filter(e=>!iw.includes(e)).forEach(t=>delete e[t]);let n={vertices:{},edges:{}};for(r=0;r<20;r+=1){let r=nE(e,t/2),i=ie(e),o=n7(e),a=iP(e,t);if(void 0===a){n.vertices.map=void 0===n.vertices.map?r.map:ii(n.vertices.map,r.map),n.edges.map=void 0===n.edges.map?ii(i.map,o.map):ii(n.edges.map,i.map,o.map);break}let s=ia(a.edges.backmap),c=ii(i.map,o.map,s);n.vertices.map=void 0===n.vertices.map?r.map:ii(n.vertices.map,r.map),n.edges.map=void 0===n.edges.map?c:ii(n.edges.map,c)}return 20===r&&console.warn("fragment reached max iterations"),n},i$=({edges_vertices:e,edges_assignment:t})=>nl(e.filter((e,r)=>"B"===t[r]||"b"===t[r]).flat()),iC=()=>({vertices:[],edges:[]}),iL=({vertices_edges:e,edges_vertices:t,edges_assignment:r})=>{if(void 0===r)return iC();!e&&(e=nN({edges_vertices:t}));let n=r.map(e=>"B"===e||"b"===e),i=[],o=[],a=-1;for(let e=0;e<n.length;e+=1)if(n[e]){a=e;break}if(-1===a)return iC();n[a]=!1,i.push(a),o.push(t[a][0]);let s=t[a][1];for(;o[0]!==s;){if(o.push(s),void 0===(a=e[s].filter(e=>n[e]).shift()))return iC();t[a][0]===s?[,s]=t[a]:[s]=t[a],n[a]=!1,i.push(a)}return{vertices:o,edges:i}};var iN=Object.freeze({__proto__:null,getBoundingBox:({vertices_coords:e},t)=>rT.core.boundingBox(e,t),getBoundaryVertices:i$,getBoundary:iL,getPlanarBoundary:({vertices_coords:e,vertices_edges:t,vertices_vertices:r,edges_vertices:n})=>{!r&&(r=nF({vertices_coords:e,vertices_edges:t,edges_vertices:n}));let i=nB({edges_vertices:n}),o=[],a=[],s={vertices:a,edges:o},c=-1/0,l=-1;if(e.forEach((e,t)=>{e[0]>c&&(c=e[0],l=t)}),-1===l)return s;a.push(l);let u=e[l],f=r[l],p=f.map(t=>e[t]).map(e=>[e[0]-u[0],e[1]-u[1]]).map(e=>Math.atan2(e[1],e[0])).map(e=>e<0?e+2*Math.PI:e).map((e,t)=>({a:e,i:t})).sort((e,t)=>e.a-t.a).shift().i,h=f[p],d=i[l<h?`${l} ${h}`:`${h} ${l}`];o.push(d);let m=l,g=h,v=0;for(;v<1e4;){let e=r[g],t=(e.indexOf(m)+1)%e.length,n=e[t],c=i[g<n?`${g} ${n}`:`${n} ${g}`];if(c===o[0])return s;a.push(g),o.push(c),m=g,g=n,v+=1}return console.warn("calculate boundary potentially entered infinite loop"),s}});let iz=function(e,t){return r9(e,"coords").forEach(r=>{e[r]=e[r].map(e=>rT.core.resize(3,e)).map(e=>rT.core.multiplyMatrix3Vector3(t,e))}),r9(e,"matrix").forEach(r=>{e[r]=e[r].map(e=>rT.core.multiplyMatrices3(e,t))}),e};var iF={scale:(e,t,...r)=>{let n=rT.core.getVector(...r),i=rT.core.resize(3,n);return iz(e,rT.core.makeMatrix3Scale(t,i))},translate:(e,...t)=>{let r=rT.core.getVector(...t),n=rT.core.resize(3,r);return iz(e,rT.core.makeMatrix3Translate(...n))},rotateZ:(e,t,...r)=>{let n=rT.core.getVector(...r),i=rT.core.resize(3,n);return iz(e,rT.core.makeMatrix3RotateZ(t,...i))},transform:iz};let iI=(e,t)=>{let r={};t.forEach(e=>{r[e]=!0});let n=e.map(e=>!!r[e]),i=[],o=n.indexOf(!1),a={};for(let t=o+1;t<n.length;t+=1)n[t]&&!a[e[t]]&&(i.push(e[t]),a[e[t]]=!0);for(let t=0;t<o;t+=1)n[t]&&!a[e[t]]&&(i.push(e[t]),a[e[t]]=!0);return i},iV=({faces_vertices:e,faces_faces:t},r=0)=>{if(!t&&(t=n1({faces_vertices:e})),0===t.length)return[];let n=[[{face:r}]],i={};i[r]=!0;do{let r=n[n.length-1].map(e=>t[e.face].map(t=>({face:t,parent:e.face}))).reduce((e,t)=>e.concat(t),[]),o={};r.forEach((e,t)=>{i[e.face]&&(o[t]=!0),i[e.face]=!0});let a=r.filter((e,t)=>!o[t]);a.map(t=>iI(e[t.face],e[t.parent])).forEach((e,t)=>{let r=e.slice(0,2);a[t].edge_vertices=r}),n[n.length]=a}while(n[n.length-1].length>0);return n.length>0&&0===n[n.length-1].length&&n.pop(),n};var iB=Object.freeze({__proto__:null,getFaceFaceSharedVertices:iI,makeFaceSpanningTree:iV});let iq=({vertices_coords:e,vertices_faces:t,faces_vertices:r},n)=>{!t&&(t=nV({faces_vertices:r}));let i=t.map(e=>e.filter(e=>null!=e).shift()).map(e=>void 0===e?rT.core.identity2x3:n[e]);return e.map((e,t)=>rT.core.multiplyMatrix2Vector2(i[t],e))},iT={U:!0,u:!0},iR=({vertices_coords:e,edges_vertices:t,edges_foldAngle:r,edges_assignment:n,faces_vertices:i,faces_faces:o},a=0)=>{!n&&r&&(n=nJ({edges_foldAngle:r})),!r&&(r=n?nZ({edges_assignment:n}):Array(t.length).fill(0));let s=nB({edges_vertices:t}),c=i.map(()=>rT.core.identity3x4);return iV({faces_vertices:i,faces_faces:o},a).slice(1).forEach(t=>t.forEach(t=>{let i=t.edge_vertices.map(t=>e[t]),o=s[t.edge_vertices.join(" ")],a=iT[n[o]]?Math.PI:r[o]*Math.PI/180,l=rT.core.makeMatrix3Rotate(a,rT.core.subtract(...rT.core.resizeUp(i[1],i[0])),i[0]);c[t.face]=rT.core.multiplyMatrices3(c[t.parent],l)})),c},iU={M:!0,m:!0,V:!0,v:!0,U:!0,u:!0,F:!1,f:!1,B:!1,b:!1},iD=({edges_vertices:e,edges_foldAngle:t,edges_assignment:r})=>void 0===r?void 0===t?e.map(()=>!0):t.map(e=>e<-rT.core.EPSILON||e>rT.core.EPSILON):r.map(e=>iU[e]),iG=({vertices_coords:e,edges_vertices:t,edges_foldAngle:r,edges_assignment:n,faces_vertices:i,faces_faces:o},a=0)=>{!r&&(r=n?nZ({edges_assignment:n}):Array(t.length).fill(0));let s=iD({edges_vertices:t,edges_foldAngle:r,edges_assignment:n}),c=nB({edges_vertices:t}),l=i.map(()=>rT.core.identity2x3);return iV({faces_vertices:i,faces_faces:o},a).slice(1).forEach(t=>t.forEach(t=>{let r=t.edge_vertices.map(t=>e[t]),n=c[t.edge_vertices.join(" ")],i=rT.core.subtract2(r[1],r[0]),o=r[0],a=s[n]?rT.core.makeMatrix2Reflect(i,o):rT.core.identity2x3;l[t.face]=rT.core.multiplyMatrices2(l[t.parent],a)})),l};var iW=Object.freeze({__proto__:null,multiplyVerticesFacesMatrix2:iq,makeFacesMatrix:iR,makeEdgesIsFolded:iD,makeFacesMatrix2:iG});let iZ=({vertices_coords:e,vertices_faces:t,edges_vertices:r,edges_foldAngle:n,edges_assignment:i,faces_vertices:o,faces_faces:a,faces_matrix:s},c)=>{s=iR({vertices_coords:e,edges_vertices:r,edges_foldAngle:n,edges_assignment:i,faces_vertices:o,faces_faces:a},c),!t&&(t=nV({faces_vertices:o}));let l=t.map(e=>e.filter(e=>null!=e).shift()).map(e=>void 0===e?rT.core.identity3x4:s[e]);return e.map(e=>rT.core.resize(3,e)).map((e,t)=>rT.core.multiplyMatrix3Vector3(l[t],e))},iJ=({vertices_coords:e,edges_vertices:t,edges_foldAngle:r,edges_assignment:n,faces_vertices:i,faces_faces:o},a=0)=>{let s=iD({edges_vertices:t,edges_foldAngle:r,edges_assignment:n}),c=[];i[a].forEach(t=>{c[t]=[...e[t]]});let l=[];l[a]=!1;let u=nB({edges_vertices:t});return iV({faces_vertices:i,faces_faces:o},a).slice(1).forEach(r=>r.forEach(r=>{let n=u[r.edge_vertices.join(" ")],o=t[n].map(e=>c[e]);if(void 0===o[0]||void 0===o[1])return;let a=t[n].map(t=>e[t]),f=a[0],p=rT.core.normalize2(rT.core.subtract2(a[1],a[0])),h=rT.core.rotate90(p);l[r.face]=s[n]?!l[r.parent]:l[r.parent];let d=rT.core.normalize2(rT.core.subtract2(o[1],o[0])),m=o[0],g=l[r.face]?rT.core.rotate270(d):rT.core.rotate90(d);i[r.face].filter(e=>void 0===c[e]).forEach(t=>{let r=rT.core.subtract2(e[t],f),n=rT.core.dot(r,h),i=rT.core.dot(r,p),o=rT.core.scale2(d,i),a=rT.core.scale2(g,n),s=rT.core.add2(rT.core.add2(m,o),a);c[t]=s})})),c};var iH=Object.freeze({__proto__:null,makeVerticesCoordsFolded:iZ,makeVerticesCoordsFlatFolded:iJ});let iY=e=>e.map(e=>e[0]*e[3]-e[1]*e[2]).map(e=>e>=0),iX=({vertices_coords:e,faces_vertices:t})=>t.map(t=>t.map(t=>e[t]).map((e,t,r)=>[e,r[(t+1)%r.length]]).map(e=>(e[1][0]-e[0][0])*(e[1][1]+e[0][1])).reduce((e,t)=>e+t,0)).map(e=>e<0);var iK=Object.freeze({__proto__:null,makeFacesWindingFromMatrix:e=>e.map(e=>e[0]*e[4]-e[1]*e[3]).map(e=>e>=0),makeFacesWindingFromMatrix2:iY,makeFacesWinding:iX});let iQ=e=>{let t=e.faces_vertices.map(t=>t.map(t=>e.vertices_coords[t])).reduce((e,t)=>e.concat(t),[]),r=0,n=e.faces_vertices.map(e=>e.map(e=>r++));return{vertices_coords:JSON.parse(JSON.stringify(t)),faces_vertices:n}},i0=({vertices_coords:e,faces_vertices:t},r=.333)=>{let n=iQ({vertices_coords:e,faces_vertices:t}),i=iX(n),o=n.faces_vertices.map(e=>e.map(e=>n.vertices_coords[e])).map(e=>e.map((e,t,r)=>rT.core.subtract2(e,r[(t+1)%r.length]))),a=n8({vertices_coords:e,faces_vertices:t}),s=t.map(t=>t.map(t=>e[t])).map((e,t)=>e.map(e=>rT.core.distance2(e,a[t])));console.log("faces_point_distances",s);let c=o.map((e,t)=>e.map((e,t,r)=>[e,rT.core.flip(r[(t-1+r.length)%r.length])]).map(e=>i[t]?rT.core.counterClockwiseBisect2(...e):rT.core.clockwiseBisect2(...e))).map((e,t)=>e.map((e,r)=>rT.core.scale(e,s[t][r])));return n.faces_vertices.forEach((e,t)=>e.forEach((e,i)=>{n.vertices_coords[e]=rT.core.add2(n.vertices_coords[e],rT.core.scale2(c[t][i],-r))})),n};var i1=Object.freeze({__proto__:null,explodeFaces:iQ,explodeShrinkFaces:i0});let i2=({vertices_coords:e},t)=>{if(!e)return;let r=rT.core.resize(e[0].length,t),n=e.map((e,t)=>({d:rT.core.distance(r,e),i:t})).sort((e,t)=>e.d-t.d).shift();return n?n.i:void 0},i3=({vertices_coords:e,edges_vertices:t},r)=>{if(!e||!t)return;let n=t.map(t=>t.map(t=>e[t])).map(e=>rT.core.nearestPointOnLine(rT.core.subtract(e[1],e[0]),e[0],r,rT.core.segmentLimiter));return rT.core.smallestComparisonSearch(r,n,rT.core.distance)},i8=({vertices_coords:e,faces_vertices:t},r)=>{if(!e||!t)return;let n=t.map((t,r)=>({face:t.map(t=>e[t]),i:r})).filter(e=>rT.core.overlapConvexPolygonPoint(e.face,r)).shift();return void 0===n?void 0:n.i},i5=(e,t)=>{let r=i8(e,t);if(void 0!==r)return r;if(e.edges_faces){let r=i3(e,t),n=e.edges_faces[r];if(1===n.length)return n[0];if(n.length>1){let r=n8({vertices_coords:e.vertices_coords,faces_vertices:n.map(t=>e.faces_vertices[t])}).map(e=>rT.core.distance(e,t)),i=0;for(let e=0;e<r.length;e+=1)r[e]<r[i]&&(i=e);return n[i]}}};var i4=Object.freeze({__proto__:null,nearestVertex:i2,nearestEdge:i3,faceContainingPoint:i8,nearestFace:i5});let i6=function(e){let t,r;if(typeof e!==o||!e)return e;if("[object Array]"===Object.prototype.toString.apply(e)){for(r=0,t=[];r<e.length;r+=1)t[r]=i6(e[r]);return t}for(r in t={},e)e.hasOwnProperty(r)&&(t[r]=i6(e[r]));return t},i9=(e,t,r=rT.core.EPSILON)=>{!e.vertices_coords&&(e.vertices_coords=[]),"number"==typeof t[0]&&(t=[t]);let n=t.map(t=>e.vertices_coords.map(e=>rT.core.distance(e,t)<r).map((e,t)=>e?t:void 0).filter(e=>void 0!==e).shift()),i=e.vertices_coords.length,o=t.filter((e,t)=>void 0===n[t]);return e.vertices_coords.push(...o),n.map(e=>void 0===e?i++:e)},i7=({vertices_faces:e,edges_vertices:t,edges_faces:r,faces_edges:n,faces_vertices:i},o)=>{if(r&&r[o])return r[o];let a=t[o];if(void 0!==e){let t=[];for(let r=0;r<e[a[0]].length;r+=1)for(let n=0;n<e[a[1]].length;n+=1)if(e[a[0]][r]===e[a[1]][n]){if(void 0===e[a[0]][r])continue;t.push(e[a[0]][r])}return t}if(n){let e=[];for(let t=0;t<n.length;t+=1)for(let r=0;r<n[t].length;r+=1)n[t][r]===o&&e.push(t);return e}i&&console.warn("todo: findAdjacentFacesToEdge")},oe=(e,t,r)=>{let n=e.edges_vertices[t],i=[{edges_vertices:[n[0],r]},{edges_vertices:[r,n[1]]}];if(i.forEach(r=>[d,m].filter(r=>e[r]&&void 0!==e[r][t]).forEach(n=>{r[n]=e[n][t]})),e.vertices_coords&&(e.edges_length||e.edges_vector)){let t=i.map(t=>t.edges_vertices.map(t=>e.vertices_coords[t]));e.edges_vector&&i.forEach((e,r)=>{e.edges_vector=rT.core.subtract(t[r][1],t[r][0])}),e.edges_length&&i.forEach((e,r)=>{e.edges_length=rT.core.distance2(...t[r])})}return i},ot=({vertices_vertices:e},t,r)=>{if(!!e)e[t]=[...r],r.forEach((r,n,i)=>{let o=i[(n+1)%i.length],a=e[r].indexOf(o);e[r][a]=t})},or=({vertices_coords:e,vertices_vertices:t,vertices_sectors:r},n)=>{if(!!r)r[n]=1===t[n].length?[rT.core.TWO_PI]:rT.core.counterClockwiseSectors2(t[n].map(t=>rT.core.subtract2(e[t],e[n])))},on=({vertices_edges:e},t,r,n,i)=>{if(!!e)e[r]=[...i],n.map(r=>e[r].indexOf(t)).forEach((t,r)=>{e[n[r]][t]=i[r]})},oi=({vertices_faces:e},t,r)=>{if(!!e)e[t]=[...r]},oo=({edges_faces:e},t,r)=>{if(!!e)t.forEach(t=>{e[t]=[...r]})},oa=({faces_vertices:e},t,r,n)=>{if(!!e)n.map(t=>e[t]).forEach(e=>e.map((e,t,n)=>{let i=(t+1)%n.length;return e===r[0]&&n[i]===r[1]||e===r[1]&&n[i]===r[0]?i:void 0}).filter(e=>void 0!==e).sort((e,t)=>t-e).forEach(r=>e.splice(r,0,t)))},os=({edges_vertices:e,faces_vertices:t,faces_edges:r},n)=>{let i=nB({edges_vertices:e});n.map(e=>t[e].map((e,t,r)=>[e,r[(t+1)%r.length]]).map(e=>i[e.join(" ")])).forEach((e,t)=>{r[n[t]]=e})},oc=(e,t,r,n=rT.core.EPSILON)=>{if(e.edges_vertices.length<t)return{};let i=e.edges_vertices[t];!r&&(r=rT.core.midpoint(...i));let o=i.map(t=>e.vertices_coords[t]).map(e=>rT.core.distance(e,r)<n);if(o[0])return{vertex:i[0],edges:{}};if(o[1])return{vertex:i[1],edges:{}};let a=e.vertices_coords.length;e.vertices_coords[a]=r;let s=[0,1].map(t=>t+e.edges_vertices.length);oe(e,t,a).forEach((t,r)=>Object.keys(t).forEach(n=>{e[n][s[r]]=t[n]})),ot(e,a,i),or(e,a),on(e,t,a,i,s);let l=i7(e,t);l&&(oi(e,a,l),oo(e,s,l),oa(e,a,i,l),os(e,l));let u=ng(e,c,[t]);return s.forEach((e,t)=>{s[t]=u[s[t]]}),u.splice(-2),u[t]=s,{vertex:a,edges:{map:u,new:s,remove:t}}},ol=({vertices_coords:e},t,r)=>{let n=t.map(t=>e[t]).reverse();return{edges_vertices:[...t],edges_foldAngle:0,edges_assignment:"U",edges_length:rT.core.distance2(...n),edges_vector:rT.core.subtract(...n),edges_faces:[r,r]}},ou=(e,t,r)=>{let n=e.edges_vertices.length,i=ol(e,r,t);return Object.keys(i).filter(t=>void 0!==e[t]).forEach(t=>{e[t][n]=i[t]}),n},of=({edges_vertices:e,faces_vertices:t,faces_edges:r},n,i)=>{let o=i.map(e=>t[n].indexOf(e)),a=nf(t[n],o).map(e=>({faces_vertices:e}));if(r){let t=nB({edges_vertices:e});a.map(e=>e.faces_vertices.map((e,t,r)=>`${e} ${r[(t+1)%r.length]}`).map(e=>t[e])).forEach((e,t)=>{a[t].faces_edges=e})}return a},op=(e,t,r)=>{let n=[0,1].map(t=>e.faces_vertices.length+t);return of(e,t,r).forEach((t,r)=>Object.keys(t).forEach(i=>{e[i][n[r]]=t[i]})),n},oh=(e,{vertices:t,edges:r})=>{let n,i;let o=r.map(t=>{let r=oc(e,n?n[t.edge]:t.edge,t.coords);return n=n?ii(n,r.edges.map):r.edges.map,r});return t.push(...o.map(e=>e.vertex)),o.forEach(e=>{e.edges.remove=i?i[e.edges.remove]:e.edges.remove;let t=is(e.edges.map);i=i?io(i,t):t}),{vertices:t,edges:{map:n,remove:o.map(e=>e.edges.remove)}}},od="splitFace potentially given a non-convex face",om=({vertices_coords:e,vertices_vertices:t,edges_vertices:r},n)=>{let i=r[n][0],o=r[n][1];t[i]=n$({vertices_coords:e},t[i].concat(o),i),t[o]=n$({vertices_coords:e},t[o].concat(i),o)},og=({edges_vertices:e,vertices_edges:t,vertices_vertices:r},n)=>{if(!t||!r)return;let i=e[n];i.map(e=>r[e]).map((e,t)=>e.indexOf(i[(t+1)%i.length])).forEach((e,r)=>t[i[r]].splice(e,0,n))},ov=(e,t,r)=>{let n={};r.forEach(t=>e.faces_vertices[t].forEach(e=>{!n[e]&&(n[e]=[]),n[e].push(t)})),e.faces_vertices[t].forEach(r=>{let i=e.vertices_faces[r].indexOf(t),o=n[r];if(-1===i||!o){console.warn(od);return}e.vertices_faces[r].splice(i,1,...o)})},o_=(e,t,r,n)=>{let i={};n.forEach(t=>e.faces_edges[t].forEach(e=>{!i[e]&&(i[e]=[]),i[e].push(t)})),[...e.faces_edges[t],r].forEach(r=>{let n=i[r],o=[];for(let n=0;n<e.edges_faces[r].length;n+=1)e.edges_faces[r][n]===t&&o.push(n);if(0===o.length||!n){console.warn(od);return}o.reverse().forEach(t=>e.edges_faces[r].splice(t,1));let a=o[o.length-1];e.edges_faces[r].splice(a,0,...n)})},oy=({faces_vertices:e,faces_faces:t},r,n)=>{let i=t[r],o=n.map(t=>e[t]),a=i.map(t=>{let r=e[t],i=[0,0];for(let e=0;e<o.length;e+=1){let t=0;for(let n=0;n<r.length;n+=1)-1!==o[e].indexOf(r[n])&&(t+=1);i[e]=t}return i[0]>=2?n[0]:i[1]>=2?n[1]:void 0});n.forEach((e,r,i)=>{t[e]=[i[(r+1)%n.length]]}),i.forEach((e,n)=>{for(let i=0;i<t[e].length;i+=1)t[e][i]===r&&(t[e][i]=a[n],t[a[n]].push(e))})},ob=(e,t,r,n,i)=>{let o=iA(e,t,r,n,i);if(void 0===o)return;let a=oh(e,o);a.edges.new=ou(e,t,a.vertices),om(e,a.edges.new),og(e,a.edges.new);let s=op(e,t,a.vertices);ov(e,t,s),o_(e,t,a.edges.new,s),oy(e,t,s);let c=ng(e,l,[t]);return s.forEach((e,t)=>{s[t]=c[s[t]]}),c.splice(-2),c[t]=s,a.faces={map:c,new:s,remove:t},a},oE={};oE.prototype=Object.create(Object.prototype),oE.prototype.constructor=oE;let ox=Object.assign({clean:il,validate:ip,populate:im,fragment:iS,addVertices:i9,splitEdge:oc,faceSpanningTree:iV,explodeFaces:iQ,explodeShrinkFaces:i0},iF);Object.keys(ox).forEach(e=>{oE.prototype[e]=function(){return ox[e](this,...arguments)}}),oE.prototype.splitFace=function(e,...t){let r=rT.core.getLine(...t);return ob(this,e,r.vector,r.origin)},oE.prototype.copy=function(){return Object.assign(Object.create(Object.getPrototypeOf(this)),i6(this))},oE.prototype.clear=function(){return rY.forEach(e=>delete this[e]),rX.forEach(e=>delete this[e]),delete this.file_frames,this},oE.prototype.boundingBox=function(){return rT.rect.fromPoints(this.vertices_coords)},oE.prototype.unitize=function(){if(!this.vertices_coords)return this;let e=rT.core.bounding_box(this.vertices_coords),t=Math.max(...e.span),r=0===t?1:1/t,n=e.min;return this.vertices_coords=this.vertices_coords.map(e=>rT.core.subtract(e,n)).map(e=>e.map(e=>e*r)),this},oE.prototype.folded=function(){let e=this.faces_matrix2?iq(this,this.faces_matrix2):iZ(this,...arguments);return Object.assign(Object.create(Object.getPrototypeOf(this)),Object.assign(i6(this),{vertices_coords:e,frame_classes:[b]}))},oE.prototype.flatFolded=function(){let e=this.faces_matrix2?iq(this,this.faces_matrix2):iJ(this,...arguments);return Object.assign(Object.create(Object.getPrototypeOf(this)),Object.assign(i6(this),{vertices_coords:e,frame_classes:[b]}))};let oO=function(e){let t=Object.create(null);return Object.keys(e).forEach(r=>{t[r.substring(this.length+1)]=e[r]}),t},ok=function(e){return nr(this,e).map(oO.bind(e)).map(rW[e].bind(this))};[s,c,l].forEach(e=>Object.defineProperty(oE.prototype,e,{enumerable:!0,get:function(){return ok.call(this,e)}})),Object.defineProperty(oE.prototype,v,{enumerable:!0,get:function(){let e=iL(this),t=e.vertices.map(e=>this.vertices_coords[e]);return Object.keys(e).forEach(r=>{t[r]=e[r]}),Object.assign(t,e)}});let oM={vertices:i2,edges:i3,faces:i5};oE.prototype.nearest=function(){let e=rT.core.getVector(arguments),t=Object.create(null),r={};return[s,c,l].forEach(n=>{Object.defineProperty(t,r1[n],{enumerable:!0,get:()=>void 0!==r[n]?r[n]:(r[n]=oM[n](this,e),r[n])}),r7(this,n).forEach(e=>Object.defineProperty(t,e,{enumerable:!0,get:()=>this[e][t[r1[n]]]}))}),t};var oA=oE.prototype;let oj=function(e,t){let r=iL(e).vertices.map(t=>e.vertices_coords[t]),n=t.vector?t.vector:rT.core.subtract2(t[1],t[0]),i=t.origin?t.origin:t[0],o=t.domain_function?t.domain_function:rT.core.includeL;return rT.core.clipLineConvexPolygon(r,n,i,rT.core.include,o)},oP=(e,t)=>{!e.edges_vertices&&(e.edges_vertices=[]),"number"==typeof t[0]&&(t=[t]);let r=t.map((t,r)=>e.edges_vertices.length+r);e.edges_vertices.push(...t);let n=ie(e).map;return r.map(e=>n[e])},ow=(e,t,r)=>{let n=Array.from(Array(t.length-1)).map((e,r)=>[t[r],t[r+1]]),i=n.map(e=>e.join(" ")).map(e=>void 0===r[e]),o=n.filter((e,t)=>i[t]),a=Array.from(Array(o.length)).map((t,r)=>e.edges_vertices.length+r);a.forEach((t,r)=>{e.edges_vertices[t]=o[r]}),e.edges_assignment&&a.forEach(t=>{e.edges_assignment[t]="U"}),e.edges_foldAngle&&a.forEach(t=>{e.edges_foldAngle[t]=0});for(let r=0;r<t.length;r+=1){let n=t[r],o=i[r-1]?t[r-1]:void 0,a=[o,i[r]?t[r+1]:void 0].filter(e=>void 0!==e),s=(e.vertices_vertices[n]?e.vertices_vertices[n]:[]).concat(a);e.vertices_vertices[n]=n$(e,s,t[r])}let s=nB(e);for(let r=0;r<t.length;r+=1){let n=t[r];e.vertices_edges[n]=e.vertices_vertices[n].map(e=>s[`${n} ${e}`])}return t.map(t=>1===e.vertices_vertices[t].length?[rT.core.TWO_PI]:rT.core.counterClockwiseSectors2(e.vertices_vertices[t].map(r=>rT.core.subtract2(e.vertices_coords[r],e.vertices_coords[t])))).forEach((r,n)=>{e.vertices_sectors[t[n]]=r}),a},oS=(e,t,r,n=rT.core.EPSILON)=>{!e.vertices_sectors&&(e.vertices_sectors=nU(e));let i=[t,r].map(e=>[e[0],e[1]]),o=rT.core.subtract2(i[1],i[0]),a=ik(e,i[0],i[1],n),s=a.map((e,t)=>void 0===e?void 0:t).filter(e=>void 0!==e).sort((e,t)=>e-t),c={};s.forEach(t=>e.edges_faces[t].forEach(e=>{c[e]=!0}));let l=Object.keys(c).map(e=>parseInt(e,10)).sort((e,t)=>e-t),u=s.reverse().map(t=>oc(e,t,a[t],n)).map(e=>e.vertex),f=i9(e,i,n),p={};u.forEach(e=>{p[e]=!0}),f.forEach(e=>{p[e]=!0});let h=nC(e,Object.keys(p).map(e=>parseInt(e,10)),o),d=nB(e),m=ow(e,h,d);m.forEach(t=>{let r=e.edges_vertices[t];d[`${r[0]} ${r[1]}`]=t,d[`${r[1]} ${r[0]}`]=t});let g=h.map(t=>e.vertices_vertices[t].map(e=>[[e,t],[t,e]])).reduce((e,t)=>e.concat(t),[]).reduce((e,t)=>e.concat(t),[]),v={},_=nw(g.map(t=>nj(e,t[0],t[1],v)).filter(e=>void 0!==e));ng(e,"faces",l);let y=_.map((t,r)=>e.faces_vertices.length+r);return e.faces_vertices&&y.forEach((t,r)=>{e.faces_vertices[t]=_[r].vertices}),e.faces_edges&&y.forEach((t,r)=>{e.faces_edges[t]=_[r].edges.map(e=>d[e])}),e.faces_angles&&y.forEach((t,r)=>{e.faces_angles[t]=_[r].faces_angles}),e.vertices_faces&&(e.vertices_faces=nV(e)),e.edges_faces&&(e.edges_faces=nD(e)),e.faces_faces&&(e.faces_faces=n1(e)),(e.vertices_coords.length!==e.vertices_vertices.length||e.vertices_coords.length!==e.vertices_edges.length||e.vertices_coords.length!==e.vertices_faces.length)&&console.warn("vertices mismatch",JSON.parse(JSON.stringify(e))),(e.edges_vertices.length!==e.edges_faces.length||e.edges_vertices.length!==e.edges_assignment.length)&&console.warn("edges mismatch",JSON.parse(JSON.stringify(e))),(e.faces_vertices.length!==e.faces_edges.length||e.faces_vertices.length!==e.faces_faces.length)&&console.warn("faces mismatch",JSON.parse(JSON.stringify(e))),m},o$=({vertices_vertices:e},t)=>{let r=[t[1],t[0]];t.map((t,n)=>e[t].indexOf(r[n])).forEach((r,n)=>e[t[n]].splice(r,1))},oC=({vertices_edges:e},t,r)=>{r.map((r,n)=>e[r].indexOf(t)).forEach((t,n)=>e[r[n]].splice(t,1))},oL=(e,t,r,n)=>{let i=t.map(t=>e.faces_edges[t].indexOf(r)),o=[];t.forEach((t,r)=>e.faces_vertices[t].forEach((e,t,i)=>{let a=i[(t+1)%i.length];(e===n[0]&&a===n[1]||e===n[1]&&a===n[0])&&(o[r]=t)})),(void 0===o[0]||void 0===o[1])&&console.warn("removePlanarEdge error joining faces");let a=t.map(t=>e.faces_edges[t].length),s=t.map(t=>e.faces_vertices[t].length),c=a.map(e=>e-1),l=s.map(e=>e-1),u=i.map((e,t)=>(e+1)%a[t]),f=o.map((e,t)=>(e+1)%s[t]),p=t.map((t,r)=>Array.from(Array(c[r])).map((e,t)=>(u[r]+t)%a[r]).map(r=>e.faces_edges[t][r])),h=t.map((t,r)=>Array.from(Array(l[r])).map((e,t)=>(f[r]+t)%s[r]).map(r=>e.faces_vertices[t][r])),d=t.map(t=>e.faces_faces[t]).reduce((e,t)=>e.concat(t),[]).filter(e=>e!==t[0]&&e!==t[1]);return{vertices:h[0].concat(h[1]),edges:p[0].concat(p[1]),faces:d}},oN=(e,t)=>{let r=[...e.edges_vertices[t]].sort((e,t)=>t-e),n=[...e.edges_faces[t]];o$(e,r),oC(e,t,r);let i=r.map(t=>0===e.vertices_vertices[t].length),o=r.filter((e,t)=>i[t]);if(2===n.length&&n[0]!==n[1]){let i=e.faces_vertices.length,o=oL(e,n,t,r);e.faces_vertices.push(o.vertices),e.faces_edges.push(o.edges),e.faces_faces.push(o.faces),e.vertices_faces.forEach((t,r)=>{let o=!1;t.forEach((a,s)=>{if(a===n[0]||a===n[1]){e.vertices_faces[r][s]=i;let n=o?[r,1]:[r,1,i];t.splice(...n),o=!0}})}),e.edges_faces.forEach((t,r)=>t.forEach((t,o)=>{(t===n[0]||t===n[1])&&(e.edges_faces[r][o]=i)})),e.faces_faces.forEach((t,r)=>t.forEach((t,o)=>{(t===n[0]||t===n[1])&&(e.faces_faces[r][o]=i)})),e.faces_vertices.forEach(t=>t.forEach(t=>{void 0===t&&console.log("FOUND ONE before remove",e.faces_vertices)})),ng(e,"faces",n)}if(2===n.length&&n[0]===n[1]&&o.length){let r=n[0];e.faces_vertices[r]=e.faces_vertices[r].filter(e=>!o.includes(e)).filter((e,t,r)=>e!==r[(t+1)%r.length]),e.faces_edges[r]=e.faces_edges[r].filter(e=>e!==t)}ng(e,"edges",[t]),ng(e,"vertices",o)},oz=(e,t,r)=>(r.forEach(r=>{e.edges_vertices[r][0]===t&&e.edges_vertices[r][1]===t&&console.warn("removePlanarVertex circular edge")}),r.map(r=>e.edges_vertices[r][0]===t?e.edges_vertices[r][1]:e.edges_vertices[r][0])),oF=(e,t)=>{let r=e.vertices_edges[t],n=nu(e.vertices_faces[t].filter(e=>null!=e));if(2!==r.length||n.length>2){console.warn("cannot remove non 2-degree vertex yet (e,f)",r,n);return}let i=oz(e,t,r),o=i.slice().reverse();r.sort((e,t)=>e-t),i.forEach(t=>{let n=e.vertices_edges[t].indexOf(r[1]);if(-1!==n)e.vertices_edges[t][n]=r[0]}),i.forEach((r,n)=>{let i=e.vertices_vertices[r].indexOf(t);if(-1===i){console.warn("removePlanarVertex unknown vertex issue");return}e.vertices_vertices[r][i]=o[n]}),e.edges_vertices[r[0]]=[...i],n.forEach(r=>{let n=e.faces_vertices[r].indexOf(t);if(-1===n){console.warn("removePlanarVertex unknown face_vertex issue");return}e.faces_vertices[r].splice(n,1)}),n.forEach(t=>{let n=e.faces_edges[t].indexOf(r[1]);if(-1===n){console.warn("removePlanarVertex unknown face_edge issue");return}e.faces_edges[t].splice(n,1)}),ng(e,"vertices",[t]),ng(e,"edges",[r[1]])},oI=e=>[0,1].map(t=>e.filter((e,r)=>r%2===t).reduce((e,t)=>e+t,0)),oV=e=>e.map((e,t,r)=>[e,r[(t+1)%r.length]]).map(e=>rT.core.counterClockwiseAngleRadians(...e)).map((e,t,r)=>r.slice(t+1,r.length).concat(r.slice(0,t))).map(e=>oI(e).map(e=>Math.PI-e)).map((t,r)=>e[r]+t[0]).map((t,r)=>rT.core.isCounterClockwiseBetween(t,e[r],e[(r+1)%e.length])?t:void 0),oB=e=>oV(e.map(e=>Math.atan2(e[1],e[0]))).map(e=>void 0===e?void 0:[Math.cos(e),Math.sin(e)]);var oq=Object.freeze({__proto__:null,alternatingSum:oI,alternatingSumDifference:e=>{let t=e.reduce((e,t)=>e+t,0)/2;return oI(e).map(e=>e-t)},kawasakiSolutionsRadians:oV,kawasakiSolutionsVectors:oB});let oT={B:!0,b:!0,F:!0,f:!0,U:!0,u:!0},oR=({vertices_edges:e,edges_assignment:t})=>e.map(e=>e.map(e=>oT[t[e]]).reduce((e,t)=>e&&t,!0)).map((e,t)=>e?t:void 0).filter(e=>void 0!==e),oU={M:!0,m:!0,V:!0,v:!0},oD={M:-1,m:-1,V:1,v:1},oG=({edges_vertices:e,vertices_edges:t,edges_assignment:r})=>{!t&&(t=nN({edges_vertices:e}));let n=t.map(e=>e.map(e=>oD[r[e]]).filter(e=>void 0!==e).reduce((e,t)=>e+t,0)).map(e=>2===e||-2===e);return i$({edges_vertices:e,edges_assignment:r}).forEach(e=>{n[e]=!0}),oR({vertices_edges:t,edges_assignment:r}).forEach(e=>{n[e]=!0}),n.map((e,t)=>e?void 0:t).filter(e=>void 0!==e)},oW=({vertices_coords:e,vertices_vertices:t,vertices_edges:r,edges_vertices:n,edges_assignment:i,edges_vector:o},a=rT.core.EPSILON)=>{!t&&(t=nF({vertices_coords:e,vertices_edges:r,edges_vertices:n}));let s=nR({vertices_coords:e,vertices_vertices:t,edges_vertices:n,edges_vector:o}).map((e,t)=>e.filter((e,n)=>oU[i[r[t][n]]])).map(e=>e.length>1?rT.core.counterClockwiseSectors2(e):[0,0]).map(e=>oI(e)).map(e=>Math.abs(e[0]-e[1])<a);return i$({edges_vertices:n,edges_assignment:i}).forEach(e=>{s[e]=!0}),oR({vertices_edges:r,edges_assignment:i}).forEach(e=>{s[e]=!0}),s.map((e,t)=>e?void 0:t).filter(e=>void 0!==e)};var oZ=Object.freeze({__proto__:null,validateMaekawa:oG,validateKawasaki:oW});let oJ={};oJ.prototype=Object.create(oA),oJ.prototype.constructor=oJ;let oH=function(e){return e.mountain=(t=-180)=>(e.forEach(e=>{this.edges_assignment[e]="M",this.edges_foldAngle[e]=t}),e),e.valley=(t=180)=>(e.forEach(e=>{this.edges_assignment[e]="V",this.edges_foldAngle[e]=t}),e),e.flat=()=>(e.forEach(e=>{this.edges_assignment[e]="F",this.edges_foldAngle[e]=0}),e),e};["line","ray","segment"].forEach(e=>{oJ.prototype[e]=function(){let t=rT[e](...arguments);if(!t)return;let r=oj(this,t);if(!r)return;let n=oS(this,r[0],r[1]);return oH.call(this,n)}}),["circle","ellipse","rect","polygon"].forEach(e=>{oJ.prototype[e]=function(){let t=rT[e](...arguments);if(!t)return;let r=t.segments(96).map(e=>rT.segment(e)).map(e=>oj(this,e)).filter(e=>void 0!==e);if(!r)return;let n=[],i=[];r.forEach(e=>{let t=i9(this,e);n.push(...t),i.push(...oP(this,t))});let{map:o}=iS(this).edges;return im(this),oH.call(this,i.map(e=>o[e]).reduce((e,t)=>e.concat(t),[]))}}),oJ.prototype.removeEdge=function(e){let t=this.edges_vertices[e];return oN(this,e),t.map(e=>ib(this,e)).map((e,r)=>e?t[r]:void 0).filter(e=>void 0!==e).sort((e,t)=>t-e).forEach(e=>oF(this,e)),!0},oJ.prototype.validate=function(e){let t=ip(this,e);return t.vertices.kawasaki=oW(this,e),t.vertices.maekawa=oG(this),this.edges_foldAngle&&(t.edges.not_flat=this.edges_foldAngle.map((e,t)=>r4(e)?void 0:t).filter(e=>void 0!==e)),"valid"===t.summary&&(t.vertices.kawasaki.length||t.vertices.maekawa.length?t.summary="invalid":t.edges.not_flat.length&&(t.summary="not flat")),t};var oY=oJ.prototype;let oX=(e,t)=>{let r=[],n=e.map((e,t)=>t),i=n.filter(e=>t[e]),o=n.filter(e=>!t[e]);return o.sort((t,r)=>e[t]-e[r]).forEach((e,t)=>{r[e]=t}),i.sort((t,r)=>e[r]-e[t]).forEach((e,t)=>{r[e]=o.length+t}),r},oK=(e,t,r,n)=>{let i=rT.core.subtract2(r,t),o=rT.core.cross2(e,i);return n?o>0:o<0},oQ=(e,t)=>e.faces_vertices[t]?e.faces_vertices[t].map(t=>e.vertices_coords[t]).reduce((e,t)=>[e[0]+t[0],e[1]+t[1]],[0,0]).map(r=>r/e.faces_vertices[t].length):[0,0],o0={F:!0,f:!0,U:!0,u:!0},o1={M:"V",m:"V",V:"M",v:"M"},o2=e=>o1[e]||e,o3=(e,t)=>({center:e.faces_center[t],matrix:e.faces_matrix2[t],winding:e.faces_winding[t],crease:e.faces_crease[t],side:e.faces_side[t],layer:e.faces_layer[t]}),o8=(e,t,r,n="V",i=rT.core.EPSILON)=>{let o=o2(n);im(e),!e.faces_layer&&(e.faces_layer=Array(e.faces_vertices.length).fill(0)),e.faces_center=e.faces_vertices.map((t,r)=>oQ(e,r)),!e.faces_matrix2&&(e.faces_matrix2=iG(e,0)),e.faces_winding=iY(e.faces_matrix2),e.faces_crease=e.faces_matrix2.map(rT.core.invertMatrix2).map(e=>rT.core.multiplyMatrix2Line2(e,t,r)),e.faces_side=e.faces_vertices.map((t,r)=>oK(e.faces_crease[r].vector,e.faces_crease[r].origin,e.faces_center[r],e.faces_winding[r]));let a=iO({vertices_coords:iq(e,e.faces_matrix2),edges_vertices:e.edges_vertices},t,r,i).map((e,t)=>e?t:void 0).filter(e=>void 0!==e).filter(t=>o0[e.edges_assignment[t]]);a.map(t=>e.edges_faces[t].find(e=>null!=e)).map(t=>e.faces_winding[t]).map(e=>e?n:o).forEach((t,r)=>{e.edges_assignment[a[r]]=t,e.edges_foldAngle[a[r]]=r8(t)});let s=o3(e,0),c=e.faces_vertices.map((e,t)=>t).reverse().map(t=>{let r=o3(e,t),a=ob(e,t,r.crease.vector,r.crease.origin,i);if(void 0!==a)return e.edges_assignment[a.edges.new]=r.winding?n:o,e.edges_foldAngle[a.edges.new]=r8(e.edges_assignment[a.edges.new]),a.faces.map[a.faces.remove].forEach(t=>{e.faces_center[t]=oQ(e,t),e.faces_side[t]=oK(r.crease.vector,r.crease.origin,e.faces_center[t],r.winding),e.faces_layer[t]=r.layer}),a}).filter(e=>void 0!==e),l=ii(...c.map(e=>e.faces.map)),u=ii(...c.map(e=>e.edges.map).filter(e=>void 0!==e)),f=c.map(e=>e.faces.remove).reverse();e.faces_layer=oX(e.faces_layer,e.faces_side);let p=l&&l[0]&&2===l[0].length,h=p?l[0].filter(t=>e.faces_side[t]).shift():0,d=s.matrix;return n!==o&&(d=p||e.faces_side[0]?rT.core.multiplyMatrices2(s.matrix,rT.core.makeMatrix2Reflect(s.crease.vector,s.crease.origin)):s.matrix),e.faces_matrix2=iG(e,h).map(e=>rT.core.multiplyMatrices2(d,e)),delete e.faces_center,delete e.faces_winding,delete e.faces_crease,delete e.faces_side,{faces:{map:l,remove:f},edges:{map:u}}},o5={};o5.prototype=Object.create(oA),o5.prototype.constructor=o5,o5.prototype.flatFold=function(){let e=rT.core.getLine(arguments);return o8(this,e.vector,e.origin),this};var o4=o5.prototype;let o6=e=>e.frame_classes&&e.frame_classes.includes("foldedForm")||e.file_classes&&e.file_classes.includes("foldedForm");var o9=Object.freeze({__proto__:null,isFoldedForm:o6});let o7=({vertices_coords:e,edges_vertices:t,edges_coords:r},n=rT.core.EPSILON)=>{!r&&(r=nH({vertices_coords:e,edges_vertices:t}));let i=nX({vertices_coords:e,edges_vertices:t,edges_coords:r}),o=Array.from(Array(r.length)).map(()=>[]),a=i.length?i[0].min.length:0;for(let e=0;e<r.length-1;e+=1)for(let t=e+1;t<r.length;t+=1){let r=!0;for(let o=0;o<a;o+=1)(!rT.core.fnEpsilonEqual(i[e].min[o],i[t].min[o],n)||!rT.core.fnEpsilonEqual(i[e].max[o],i[t].max[o],n))&&(r=!1);o[e][t]=r,o[t][e]=r}for(let e=0;e<r.length-1;e+=1)for(let t=e+1;t<r.length;t+=1){if(!o[e][t])continue;let i=rT.core.fnEpsilonEqualVectors(r[e][0],r[t][0],n)&&rT.core.fnEpsilonEqualVectors(r[e][1],r[t][1],n),a=rT.core.fnEpsilonEqualVectors(r[e][0],r[t][1],n)&&rT.core.fnEpsilonEqualVectors(r[e][1],r[t][0],n),s=i||a;o[e][t]=s,o[t][e]=s}return nh(o)},ae=({vertices_coords:e,edges_vertices:t,edges_vector:r},n)=>{!r&&(r=nY({vertices_coords:e,edges_vertices:t}));let i=r.length,o=r.map(e=>rT.core.normalize(e)),a=Array.from(Array(i)).map(()=>Array.from(Array(i)));for(let e=0;e<i-1;e+=1)for(let t=e+1;t<i;t+=1){let r=1-Math.abs(rT.core.dot(o[e],o[t]))<n;a[e][t]=r,a[t][e]=r}return a},at=(e,t,r,n,i)=>{for(let o=0;o<e.length-1;o+=1)for(let a=o+1;a<e.length;a+=1){if(!!e[o][a])e[o][a]=rT.core.overlapLineLine(t[o],r[o],t[a],r[a],n,n,i),e[a][o]=e[o][a]}},ar=({vertices_coords:e,edges_vertices:t,edges_vector:r},n)=>{!r&&(r=nY({vertices_coords:e,edges_vertices:t}));let i=t.map(t=>e[t[0]]),o=ae({vertices_coords:e,edges_vertices:t,edges_vector:r},n);return at(o,r,i,rT.core.excludeS,n),o};var an=Object.freeze({__proto__:null,makeEdgesEdgesSimilar:o7,makeEdgesEdgesParallel:ae,makeEdgesEdgesCrossing:({vertices_coords:e,edges_vertices:t,edges_vector:r},n)=>{!r&&(r=nY({vertices_coords:e,edges_vertices:t}));let i=t.map(t=>e[t[0]]),o=ae({vertices_coords:e,edges_vertices:t,edges_vector:r},n).map(e=>e.map(e=>!e));for(let e=0;e<o.length;e+=1)o[e][e]=void 0;return at(o,r,i,rT.core.excludeS,n),o},makeEdgesEdgesParallelOverlap:ar});let ai=({vertices_coords:e,edges_vertices:t,edges_vector:r,edges_faces:n,faces_vertices:i},o)=>{!r&&(r=nY({vertices_coords:e,edges_vertices:t}));let a=iX({vertices_coords:e,faces_vertices:i}),s=t.map(t=>e[t[0]]),c=t.map(()=>Array.from(Array(i.length)));n.forEach((e,t)=>e.forEach(e=>{c[t][e]=!1}));let l=o7({vertices_coords:e,edges_vertices:t}),u=t.map(t=>t.map(t=>e[t])),f=i.map(t=>t.map(t=>e[t]));for(let e=0;e<a.length;e+=1)!a[e]&&f[e].reverse();let p=nX({edges_coords:u}),h=f.map(e=>rT.core.boundingBox(e));for(let e=0;e<c.length;e+=1)for(let t=0;t<c[e].length;t+=1){if(!1!==c[e][t]){if(!rT.core.overlapBoundingBoxes(h[t],p[e])){c[e][t]=!1;continue}}}let d={};for(let e=0;e<c.length;e+=1){if(!d[e]){for(let t=0;t<c[e].length;t+=1){if(void 0===c[e][t]){if(u[e].map(e=>rT.core.overlapConvexPolygonPoint(f[t],e,rT.core.exclude,o)).reduce((e,t)=>e||t,!1)||rT.core.intersectConvexPolygonLine(f[t],r[e],s[e],rT.core.excludeS,rT.core.excludeS,o)){c[e][t]=!0;continue}c[e][t]=!1}}l[e].forEach(t=>{c[t]=c[e].slice(),d[t]=!0})}}return c},ao=({vertices_coords:e,faces_vertices:t},r=rT.core.EPSILON)=>{let n=Array.from(Array(t.length)).map(()=>Array.from(Array(t.length))),i=t.map(t=>t.map(t=>e[t])),o=i.map(e=>rT.core.boundingBox(e));for(let e=0;e<o.length-1;e+=1)for(let t=e+1;t<o.length;t+=1)!rT.core.overlapBoundingBoxes(o[e],o[t])&&(n[e][t]=!1,n[t][e]=!1);let a=i.map(e=>rT.core.makePolygonNonCollinear(e,r));for(let e=0;e<t.length-1;e+=1)for(let i=e+1;i<t.length;i+=1){if(!1===n[e][i])continue;let t=rT.core.overlapConvexPolygons(a[e],a[i],r);n[e][i]=t,n[i][e]=t}return n};var aa=Object.freeze({__proto__:null,makeEdgesFacesOverlap:ai,makeFacesFacesOverlap:ao}),as=Object.assign(Object.create(null),{count:nc,countImplied:nA,validate:ip,clean:il,populate:im,remove:ng,replace:nv,removePlanarVertex:oF,removePlanarEdge:oN,addVertices:i9,addEdges:oP,splitEdge:oc,splitFace:ob,flatFold:o8,addPlanarSegment:oS,subgraph:(e,t)=>{let r={},n={};[l,c,s].forEach(i=>{r[i]=Array.from(Array(nc[i](e))).map((e,t)=>t),n[i]=nu(t[i]||[]).reverse()}),Object.keys(n).forEach(e=>n[e].forEach(t=>r[e].splice(t,1)));let i=JSON.parse(JSON.stringify(e));return Object.keys(r).forEach(e=>ng(i,e,r[e])),i},clip:oj,fragment:iS,getVerticesClusters:na,clone:i6},n5,iN,nS,i4,ni,nL,i_,ic,o9,ij,aa,iF,nx,it,ix,an,iH,iB,iW,iK,i1,nm);let ac={},al=(e,t)=>[[0,0],[e,0],[e,t],[0,t]],au=e=>im({vertices_coords:e,edges_vertices:e.map((e,t,r)=>[t,(t+1)%r.length]),edges_assignment:Array(e.length).fill("B")});ac.square=(e=1)=>au(al(e,e)),ac.rectangle=(e=1,t=1)=>au(al(e,t)),ac.polygon=(e=3,t=1)=>au(rT.core.makePolygonCircumradius(e,t)),ac.kite=()=>im({vertices_coords:[[0,0],[Math.sqrt(2)-1,0],[1,0],[1,1-(Math.sqrt(2)-1)],[1,1],[0,1]],edges_vertices:[[0,1],[1,2],[2,3],[3,4],[4,5],[5,0],[5,1],[3,5],[5,2]],edges_assignment:Array.from("BBBBBBVVF")});let af=Object.create(null),ap={graph:oA,cp:oY,origami:o4},ah={graph:()=>{},cp:ac.square,origami:ac.square},ad={graph:()=>({file_spec:1.1,file_creator:rZ}),cp:()=>({file_spec:1.1,file_creator:rZ,frame_classes:["creasePattern"]}),origami:()=>({file_spec:1.1,file_creator:rZ,frame_classes:["foldedForm"]})};Object.keys(ap).forEach(e=>{af[e]=function(){let t=Array.from(arguments).filter(e=>nn(e)).map(e=>JSON.parse(JSON.stringify(e)));return im(Object.assign(Object.create(ap[e]),t.length?{}:ah[e](),...t,ad[e]()))},af[e].prototype=ap[e],af[e].prototype.constructor=af[e],Object.keys(ac).forEach(t=>{af[e][t]=function(){return af[e](ac[t](...arguments))}})}),Object.assign(af.graph,as);let am=(e,t)=>{let r=rT.core.cross2(e.normal,t.normal);if(Math.abs(r)<rT.core.EPSILON)return;let n=e.distance*t.normal[1]-t.distance*e.normal[1];return[n/r,(t.distance*e.normal[0]-e.distance*t.normal[0])/r]},ag=e=>e<0?-Math.pow(-e,1/3):Math.pow(e,1/3),av=(e,t,r,n,i)=>{switch(e){case 1:return[-i/n];case 2:{let e=Math.pow(n,2)-4*r*i;if(e<-rT.core.EPSILON)return[];let t=-n/(2*r);if(e<rT.core.EPSILON)return[t];let o=Math.sqrt(e)/(2*r);return[t+o,t-o]}case 3:{let e=r/t,o=n/t,a=(3*o-Math.pow(e,2))/9,s=(9*e*o-i/t*27-2*Math.pow(e,3))/54,c=Math.pow(a,3)+Math.pow(s,2),l=-e/3;if(c>0){let e=Math.sqrt(c),t=ag(s+e);return[l+t+ag(s-e)]}if(Math.abs(c)<rT.core.EPSILON){let e=Math.pow(s,1/3);if(s<0)return[];return[l+2*e,l-e]}let u=Math.atan2(Math.sqrt(-c),s)/3,f=Math.pow(Math.pow(s,2)-c,1/6),p=f*Math.cos(u),h=f*Math.sin(u);return[l+2*p,l-p-Math.sqrt(3)*h,l-p+Math.sqrt(3)*h]}default:return[]}},a_=(e,t,r,n)=>{if(.02>Math.abs(1-rT.core.dot2(e.normal,r)/e.distance))return[];let i=rT.core.rotate90(e.normal),o=rT.core.subtract2(rT.core.add2(r,rT.core.scale2(e.normal,e.distance)),rT.core.scale2(n,2)),a=rT.core.subtract2(rT.core.scale2(e.normal,e.distance),r),s=rT.core.dot2(n,t.normal)-t.distance,c=2*rT.core.dot2(a,i),l=rT.core.dot2(a,a),u=rT.core.dot2(rT.core.add2(o,a),i),f=rT.core.dot2(o,a),p=rT.core.dot2(i,t.normal),h=rT.core.dot2(a,t.normal),d=s+u*p+h,m=s*c+f*p+u*h,g=0;return Math.abs(m)>rT.core.EPSILON&&(g=1),Math.abs(d)>rT.core.EPSILON&&(g=2),Math.abs(p)>rT.core.EPSILON&&(g=3),av(g,p,d,m,s*l+f*h).map(t=>rT.core.add2(rT.core.scale2(e.normal,e.distance),rT.core.scale2(i,t))).map(e=>({p:e,normal:rT.core.normalize2(rT.core.subtract2(e,r))})).map(e=>({normal:e.normal,distance:rT.core.dot2(e.normal,rT.core.midpoint2(e.p,r))}))};var ay=Object.freeze({__proto__:null,normalAxiom1:(e,t)=>{let r=rT.core.normalize2(rT.core.rotate90(rT.core.subtract2(t,e)));return{normal:r,distance:rT.core.dot2(rT.core.add2(e,t),r)/2}},normalAxiom2:(e,t)=>{let r=rT.core.normalize2(rT.core.subtract2(t,e));return{normal:r,distance:rT.core.dot2(rT.core.add2(e,t),r)/2}},normalAxiom3:(e,t)=>{let r=am(e,t);return void 0===r?[{normal:e.normal,distance:(e.distance+t.distance*rT.core.dot2(e.normal,t.normal))/2}]:[rT.core.add2,rT.core.subtract2].map(r=>rT.core.normalize2(r(e.normal,t.normal))).map(e=>({normal:e,distance:rT.core.dot2(r,e)}))},normalAxiom4:(e,t)=>{let r=rT.core.rotate90(e.normal),n=rT.core.dot2(t,r);return{normal:r,distance:n}},normalAxiom5:(e,t,r)=>{let n=rT.core.dot2(t,e.normal),i=e.distance-n,o=rT.core.distance2(t,r);if(i>o)return[];let a=Math.sqrt(o*o-i*i),s=rT.core.scale2(e.normal,i),c=rT.core.add2(t,s),l=rT.core.scale2(rT.core.rotate90(e.normal),a);return(a<rT.core.EPSILON?[c]:[rT.core.add2(c,l),rT.core.subtract2(c,l)]).map(e=>rT.core.normalize2(rT.core.subtract2(r,e))).map(e=>({normal:e,distance:rT.core.dot2(t,e)}))},normalAxiom6:a_,normalAxiom7:(e,t,r)=>{let n=rT.core.rotate90(e.normal),i=rT.core.dot2(n,t.normal);if(Math.abs(i)<rT.core.EPSILON)return;let o=rT.core.dot2(r,n),a=rT.core.dot2(r,t.normal);return{normal:n,distance:(t.distance+2*o*i-a)/(2*i)}}}),ab=Object.freeze({__proto__:null,axiom1:(e,t)=>({vector:rT.core.normalize2(rT.core.subtract2(...rT.core.resizeUp(t,e))),origin:e}),axiom2:(e,t)=>({vector:rT.core.normalize2(rT.core.rotate90(rT.core.subtract2(...rT.core.resizeUp(t,e)))),origin:rT.core.midpoint2(e,t)}),axiom3:(e,t)=>rT.core.bisectLines2(e.vector,e.origin,t.vector,t.origin),axiom4:(e,t)=>({vector:rT.core.rotate90(rT.core.normalize2(e.vector)),origin:t}),axiom5:(e,t,r)=>(rT.core.intersectCircleLine(rT.core.distance2(t,r),t,e.vector,e.origin,rT.core.include_l)||[]).map(e=>({vector:rT.core.normalize2(rT.core.rotate90(rT.core.subtract2(...rT.core.resizeUp(e,r)))),origin:rT.core.midpoint2(r,e)})),axiom6:(e,t,r,n)=>a_(rT.core.rayLineToUniqueLine(e),rT.core.rayLineToUniqueLine(t),r,n).map(rT.core.uniqueLineToRayLine),axiom7:(e,t,r)=>{let n=rT.core.intersectLineLine(e.vector,e.origin,t.vector,r,rT.core.include_l,rT.core.include_l);return void 0===n?void 0:{vector:rT.core.normalize2(rT.core.rotate90(rT.core.subtract2(...rT.core.resizeUp(n,r)))),origin:rT.core.midpoint2(r,n)}}});let aE=(e,t)=>{switch(e){case 3:case"3":case 5:case"5":case 6:case"6":return t;case 7:case"7":return void 0===t?[]:[t];default:return[t]}},ax=(e,t)=>{switch(e){case 3:case"3":case 5:case"5":case 6:case"6":return t;default:return t?t[0]:void 0}},aO=(e,t)=>{let r=rT.core.makeMatrix2Reflect(e.vector,e.origin);return rT.core.multiplyMatrix2Vector2(r,t)},ak=(e,t)=>e.points.map(e=>rT.core.overlapConvexPolygonPoint(t,e,rT.core.include)).reduce((e,t)=>e&&t,!0),aM=(e,t,r)=>{let n=e.lines.map(e=>rT.core.clipLineConvexPolygon(t,e.vector,e.origin,rT.core.include,rT.core.includeL));if(void 0===n[0]||void 0===n[1])return[!1,!1];let i=r.map(e=>void 0===e?void 0:rT.core.clipLineConvexPolygon(t,e.vector,e.origin,rT.core.include,rT.core.includeL)),o=[0,1].map(e=>void 0!==i[e]),a=r.map(e=>void 0===e?void 0:[aO(e,n[0][0]),aO(e,n[0][1])]).map(e=>void 0!==e&&(rT.core.overlapLinePoint(rT.core.subtract(n[1][1],n[1][0]),n[1][0],e[0],rT.core.includeS)||rT.core.overlapLinePoint(rT.core.subtract(n[1][1],n[1][0]),n[1][0],e[1],rT.core.includeS)||rT.core.overlapLinePoint(rT.core.subtract(e[1],e[0]),e[0],n[1][0],rT.core.includeS)||rT.core.overlapLinePoint(rT.core.subtract(e[1],e[0]),e[0],n[1][1],rT.core.includeS)));return[0,1].map(e=>!0===a[e]&&!0===o[e])},aA=(e,t)=>{let r=rT.core.intersectLineLine(e.lines[0].vector,e.lines[0].origin,rT.core.rotate90(e.lines[0].vector),e.points[0],rT.core.includeL,rT.core.includeL);return[e.points[0],r].filter(e=>void 0!==e).map(e=>rT.core.overlapConvexPolygonPoint(t,e,rT.core.include)).reduce((e,t)=>e&&t,!0)},aj=(e,t,r)=>{if(0===r.length)return[];let n=e.points.map(e=>rT.core.overlapConvexPolygonPoint(t,e,rT.core.include)).reduce((e,t)=>e&&t,!0);return r.map(t=>aO(t,e.points[1])).map(e=>rT.core.overlapConvexPolygonPoint(t,e,rT.core.include)).map(e=>e&&n)},aP=function(e,t,r){if(0===r.length)return[];if(!e.points.map(e=>rT.core.overlapConvexPolygonPoint(t,e,rT.core.include)).reduce((e,t)=>e&&t,!0))return r.map(()=>!1);let n=r.map(t=>aO(t,e.points[0])).map(e=>rT.core.overlapConvexPolygonPoint(t,e,rT.core.include)),i=r.map(t=>aO(t,e.points[1])).map(e=>rT.core.overlapConvexPolygonPoint(t,e,rT.core.include));return r.map((e,t)=>n[t]&&i[t])},aw=(e,t,r)=>{let n=rT.core.overlapConvexPolygonPoint(t,e.points[0],rT.core.include);if(void 0===r)return[!1];let i=aO(r,e.points[0]),o=rT.core.overlapConvexPolygonPoint(t,i,rT.core.include),a=void 0!==rT.core.intersectConvexPolygonLine(t,e.lines[1].vector,e.lines[1].origin,rT.core.includeS,rT.core.includeL),s=rT.core.intersectLineLine(e.lines[1].vector,e.lines[1].origin,r.vector,r.origin,rT.core.includeL,rT.core.includeL),c=!!s&&rT.core.overlapConvexPolygonPoint(t,s,rT.core.include);return n&&o&&a&&c};var aS=Object.freeze({__proto__:null,validateAxiom1:ak,validateAxiom2:ak,validateAxiom3:aM,validateAxiom4:aA,validateAxiom5:aj,validateAxiom6:aP,validateAxiom7:aw,validate:(e,t,r,n)=>aE(e,[null,ak,ak,aM,aA,aj,aP,aw][e](t,r,ax(e,n)))});let a$=e=>({points:e.points,lines:e.lines.map(rT.core.uniqueLineToRayLine)}),aC=e=>{let t=e.lines?e.lines:[];return[...t,...e.points?e.points:[]]},aL=(e,t={},r)=>{let n=aE(e,ab[`axiom${e}`](...aC(t))).map(e=>rT.line(e));return r&&aE(e,aS[`validateAxiom${e}`](t,r,n)).forEach((e,t)=>e?t:void 0).filter(e=>void 0!==e).forEach(e=>delete n[e]),n};var aN=Object.freeze({__proto__:null,axiomInBoundary:aL,normalAxiomInBoundary:(e,t={},r)=>{let n=aE(e,ay[`normalAxiom${e}`](...aC(t))).map(e=>rT.line.fromNormalDistance(e));return r&&aE(e,aS[`validateAxiom${e}`](a$(t),r,n)).forEach((e,t)=>e?t:void 0).filter(e=>void 0!==e).forEach(e=>delete n[e]),n}});let az=(e,t={},r)=>aL(e,t,r);Object.keys(ab).forEach(e=>{az[e]=ab[e]}),Object.keys(ay).forEach(e=>{az[e]=ay[e]}),Object.keys(aN).forEach(e=>{az[e]=aN[e]}),Object.keys(aS).forEach(e=>{az[e]=aS[e]});let aF=(e,t)=>rT.core.intersectLineLine(e.vector,e.origin,t.vector,t.origin,rT.core.includeL,rT.core.includeL),aI=(e,t)=>{let r=rT.core.makeMatrix2Reflect(e.vector,e.origin);return rT.core.multiplyMatrix2Vector2(r,t)},aV=({vertices_coords:e})=>rT.core.convexHull(e),aB=(e,t,r)=>{let n=aV(e);if(void 0===r){let e=rT.core.clipLineConvexPolygon(n,t.vector,t.origin,rT.core.exclude,rT.core.includeL);r=rT.core.midpoint(...e)}let i=rT.core.rotate270(t.vector),o=rT.core.clipLineConvexPolygon(n,i,r,rT.core.exclude,rT.core.includeL).map(e=>rT.core.distance(r,e)).sort((e,t)=>e-t).shift(),a=rT.core.scale(rT.core.normalize(i),o);return rT.segment(rT.core.add(r,rT.core.flip(a)),rT.core.add(r,a))},aq=(e,t,r)=>{let n=t.map(e=>rT.core.midpoint(e[0],e[1])),i=rT.line.fromPoints(...n),o=rT.intersect(r,i),a=rT.line(r.vector.rotate90(),o);return rT.segment(e.lines.map(e=>rT.intersect(e,a)))},aT=(e,t,r,n)=>{let i=e.lines.map(e=>e.vector),o=i.map(rT.core.flip),a=i.concat(o).map(e=>rT.ray(e,t)),s=a.filter(e=>rT.core.dot(e.vector,r.vector)>0&&rT.core.cross2(e.vector,r.vector)>0).shift(),c=a.filter(e=>rT.core.dot(e.vector,r.vector)>0&&0>rT.core.cross2(e.vector,r.vector)).shift(),l=a.filter(e=>0>rT.core.dot(e.vector,r.vector)&&rT.core.cross2(e.vector,r.vector)>0).shift(),u=a.filter(e=>0>rT.core.dot(e.vector,r.vector)&&0>rT.core.cross2(e.vector,r.vector)).shift(),f=[s,c,l,u].map(e=>rT.core.intersectConvexPolygonLine(n,e.vector,e.origin,rT.core.excludeS,rT.core.excludeR).shift().shift()),p=f.map(e=>rT.core.distance(e,t)),h=p[0]<p[1]?f[0]:f[1],d=p[0]<p[1]?rT.core.add(c.origin,c.vector.normalize().scale(p[0])):rT.core.add(s.origin,s.vector.normalize().scale(p[1])),m=p[2]<p[3]?f[2]:f[3],g=p[2]<p[3]?rT.core.add(u.origin,u.vector.normalize().scale(p[2])):rT.core.add(l.origin,l.vector.normalize().scale(p[3]));return[rT.segment(h,d),rT.segment(m,g)]},aR=[null,(e,t)=>az(1,e).map(e=>[aB(t,e)]),e=>[[rT.segment(e.points)]],(e,t)=>{let r=aV(t),n=e.lines.map(e=>rT.core.clipLineConvexPolygon(r,e.vector,e.origin,rT.core.exclude,rT.core.includeL)),i=n.map(e=>rT.core.subtract(e[1],e[0])),o=rT.core.intersectLineLine(i[0],n[0][0],i[1],n[1][0],rT.core.excludeS,rT.core.excludeS);return o?az(3,e).map(t=>aT(e,o,t,r)):[aq(e,n,az(3,e).filter(e=>void 0!==e).shift())]},(e,t)=>az(4,e).map(r=>[aB(t,r,aF(r,e.lines[0]))]),e=>az(5,e).map(t=>[rT.segment(e.points[1],aI(t,e.points[1]))]),e=>az(6,e).map(t=>e.points.map(e=>rT.segment(e,aI(t,e)))),(e,t)=>az(7,e).map(r=>[rT.segment(e.points[0],aI(r,e.points[0])),aB(t,r,aF(r,e.lines[1]))])];delete aR[0];let aU=(e,t={},...r)=>{let n=t.points?t.points.map(e=>rT.core.getVector(e)):void 0,i=t.lines?t.lines.map(e=>rT.core.getLine(e)):void 0;return aR[e]({points:n,lines:i},...r)};Object.keys(aR).forEach(e=>{aU[e]=(...t)=>aU(e,...t)});let aD=({vertices_coords:e})=>rT.core.convexHull(e),aG=(e,t,r)=>{if(void 0===r){let n=rT.core.clipLineConvexPolygon(e,t.vector,t.origin,rT.core.exclude,rT.core.includeL);if(void 0===n)return;r=rT.core.midpoint(...n)}let n=rT.core.rotate90(t.vector),i=rT.core.clipLineConvexPolygon(e,n,r,rT.core.exclude,rT.core.includeL).map(e=>rT.core.distance(r,e)).sort((e,t)=>e-t).shift(),o=rT.core.scale(rT.core.normalize(n),i);return rT.segment(rT.core.add(r,rT.core.flip(o)),rT.core.add(r,o))};var aW=Object.assign(Object.create(null),{axiom_arrows:aU,simple_arrow:(e,t)=>{let r=aD(e),n=rT.core.boundingBox(r),i=aG(r,t);if(void 0===i)return;let o=rT.core.subtract(i[1],i[0]),a=rT.core.magnitude(o),s=rT.core.dot(o,[1,0]),c=n.span[0]<n.span[1]?n.span[0]:n.span[1];return i.head={width:.1*c,height:.15*c},i.bend=s>0?.3:-.3,i.padding=.05*a,i}}),aZ=Object.freeze({__proto__:null,flipFacesLayer:e=>ia(ia(e).reverse()),facesLayerToEdgesAssignments:(e,t)=>{let r=[],n=iX(e);return(e.edges_faces?e.edges_faces:nG(e)).forEach((e,i)=>{if(1===e.length&&(r[i]="B"),2===e.length){let o=e.map(e=>n[e]);if(o[0]===o[1]){r[i]="F";return}let a=e.map(e=>t[e]),s=a[0]<a[1],c=o[0]?s:!s;r[i]=c?"V":"M"}}),r},ordersToMatrix:e=>{let t=Object.keys(e).map(e=>e.split(" ").map(e=>parseInt(e,10))),r=[];t.reduce((e,t)=>e.concat(t),[]).forEach(e=>{r[e]=void 0});let n=r.map(()=>[]);return t.forEach(([t,r])=>{n[t][r]=e[`${t} ${r}`],n[r][t]=-e[`${t} ${r}`]}),n}});let aJ=(e,t,r)=>{let n=e.map(e=>e?(e[0]+e[1])/2:void 0),i=[];return e.forEach((o,a)=>{if(!o||!t&&a===e.length-1)return;let s=o[1],c=[a,(a+1)%e.length],l=c.map(e=>n[e]).map(e=>e>s),u=1*(!l[0]&&!l[1])+2*(l[0]&&l[1]),f=i.filter(e=>e.min<s&&e.max>s).shift(),p={faces:c,taco_type:u};f?f.pairs.push(p):i.push({min:s-2*r,max:s+2*r,pairs:[p]})}),i.map(e=>e.pairs).filter(e=>e.length>1).map(e=>({both:e.filter(e=>0===e.taco_type).map(e=>e.faces),left:e.filter(e=>1===e.taco_type).map(e=>e.faces),right:e.filter(e=>2===e.taco_type).map(e=>e.faces)}))},aH=(e,t,r)=>t<r?e.slice(t+1,r):e.slice(r+1,t),aY=(e,t,r=!0,n=rT.core.EPSILON)=>{let i=ia(t),o=e.map(e=>e?e[1]:void 0),a=e.map(e=>e?Math.min(...e):void 0).map(e=>e+n),s=e.map(e=>e?Math.max(...e):void 0).map(e=>e-n),c=i.length+(r?0:-1);for(let e=0;e<c;e+=1){let r=(e+1)%i.length;if(i[e]===i[r])continue;let n=aH(t,i[e],i[r]).flat(),c=n.map(t=>o[e]<a[t]).reduce((e,t)=>e&&t,!0),l=n.map(t=>o[e]>s[t]).reduce((e,t)=>e&&t,!0);if(!c&&!l)return!1}return!0},aX=e=>{let t=np(e),r={},n=0;for(let e=0;e<t.length;e+=1)if(void 0===r[t[e]])n+=1,r[t[e]]=n;else if(void 0!==r[t[e]]){if(r[t[e]]!==n)return!1;n-=1,r[t[e]]=void 0}return!0},aK=(e,t)=>e.map(e=>t[e]).filter(e=>void 0!==e),aQ=(e,t,r,n,i)=>{let o=rT.core.flattenArrays(t);if(!aY(e,t,n,i))return!1;for(let e=0;e<r.length;e+=1)if(!aX(aK(o,r[e])))return!1;return!0},a0={V:!0,v:!0,M:!0,m:!0},a1=e=>{let t=0;return[!1].concat(e.slice(1).map(e=>a0[e]?++t:t).map(e=>e%2==1))},a2={V:1,v:1,M:-1,m:-1},a3=(e,t)=>t%2==0?a2[e]||0:-(a2[e]||0),a8=e=>{let t=0;return e.slice(1).concat([e[0]]).map(e=>{let r=a3(e,t);return t+=void 0===a2[e]?0:1,r})},a5=(e,t)=>{let r=a1(t).map((t,r)=>e[r]*(t?-1:1)),n=e.map(()=>void 0);n[0]=[0,r[0]];for(let i=1;i<e.length&&"B"!==t[i]&&"b"!==t[i];i+=1){;let t=n[(i-1+e.length)%e.length][1];n[i]=[t,t+r[i]]}return n},a4={B:!0,b:!0},a6=(e,t,r=rT.core.EPSILON)=>{let n=a5(e,t),i=a8(t),o=t.map(e=>!a4[e]).reduce((e,t)=>e&&t,!0);if(o){let e=n[0][0];if(Math.abs(e-n[n.length-1][1])>r)return[]}let a=aJ(n,o,r).map(e=>[e.left,e.right].map(ia).filter(e=>e.length>1)).reduce((e,t)=>e.concat(t),[]),s=(t=[0],c=0,l=0)=>{let u=c+1,f=i[c],p=c>=e.length-1,h=o&&p;if(!aQ(n,t,a,h,r))return[];if(h){let e=ia(t),r=e[0],n=e[c];if(f>0&&n>r||f<0&&n<r)return[]}if(p)return[t];if(0===f)return t[l]=[u].concat(t[l]),s(t,u,l);let d=1===f?Array.from(Array(t.length-l)).map((e,t)=>l+t+1):Array.from(Array(l+1)).map((e,t)=>t),m=d.map(()=>i6(t));return m.forEach((e,t)=>e.splice(d[t],0,u)),m.map((e,t)=>s(e,u,d[t])).reduce((e,t)=>e.concat(t),[])};return s().map(ia)},a9=e=>e.map((e,t)=>t).filter(t=>"U"===e[t]||"u"===e[t]),a7=e=>{let t=a9(e),r=Array.from(Array(2**t.length)).map((e,t)=>t.toString(2)).map(e=>Array(t.length-e.length+1).join("0")+e).map(e=>Array.from(e).map(e=>"0"===e?"V":"M")).map(r=>{let n=e.slice();return t.forEach((e,t)=>{n[e]=r[t]}),n});if(e.includes("B")||e.includes("b"))return r;let n=r.map(e=>e.filter(e=>"M"===e||"m"===e).length),i=r.map(e=>e.filter(e=>"V"===e||"v"===e).length);return r.filter((e,t)=>2===Math.abs(n[t]-i[t]))},se=(e,t,r)=>{let n=Array.from(r).map(e=>parseInt(e,10));if(n.filter(e=>0===e).length!==t)return;e[t][r]=!1;let i=!1;for(let r=0;r<n.length;r+=1){let o=[];if(0===n[r]){for(let i=1;i<=2;i+=1)n[r]=i,!1!==e[t-1][n.join("")]&&o.push([r,i]);n[r]=0,o.length>0&&!1===i&&(i=[]),1===o.length&&i.push(o[0])}}!1!==i&&0===i.length&&(i=!0),e[t][r]=i},st=e=>{let t=e[0].length,r=Array.from(Array(t+1)).map(()=>({}));Array.from(Array(Math.pow(2,t))).map((e,t)=>t.toString(2)).map(e=>Array.from(e).map(e=>parseInt(e,10)+1).join("")).map(e=>`11111${e}`.slice(-t)).forEach(e=>{r[0][e]=!1}),e.forEach(e=>{r[0][e]=!0}),Array.from(Array(t)).map((e,t)=>t+1).map(e=>Array.from(Array(Math.pow(3,t))).map((e,t)=>t.toString(3)).map(e=>`000000${e}`.slice(-t)).forEach(t=>se(r,e,t)));let n=[];Array.from(Array(t+1)).map((e,r)=>t-r).forEach(e=>{let t=[];Object.keys(r[e]).forEach(n=>{let i=r[e][n];i.constructor===Array&&(i=i[0]),t.push([n,i])}),n=n.concat(t)}),n.sort((e,t)=>parseInt(e[0],10)-parseInt(t[0],10));let i={};return n.forEach(e=>{i[e[0]]=Object.freeze(e[1])}),Object.freeze(i)},sr={taco_taco:st(["111112","111121","111222","112111","121112","121222","122111","122212","211121","211222","212111","212221","221222","222111","222212","222221"]),taco_tortilla:st(["112","121","212","221"]),tortilla_tortilla:st(["11","22"]),transitivity:st(["112","121","122","211","212","221"])},sn={taco_taco:e=>[[e[0],e[2]],[e[1],e[3]],[e[1],e[2]],[e[0],e[3]],[e[0],e[1]],[e[2],e[3]]],taco_tortilla:e=>[[e[0],e[2]],[e[0],e[1]],[e[1],e[2]]],tortilla_tortilla:e=>[[e[0],e[2]],[e[1],e[3]]],transitivity:e=>[[e[0],e[1]],[e[1],e[2]],[e[2],e[0]]]},si=e=>e[0]<e[1]?`${e[0]} ${e[1]}`:`${e[1]} ${e[0]}`,so={taco_taco:e=>[si([e[0],e[2]]),si([e[1],e[3]]),si([e[1],e[2]]),si([e[0],e[3]]),si([e[0],e[1]]),si([e[2],e[3]])],taco_tortilla:e=>[si([e[0],e[2]]),si([e[0],e[1]]),si([e[1],e[2]])],tortilla_tortilla:e=>[si([e[0],e[2]]),si([e[1],e[3]])],transitivity:e=>[si([e[0],e[1]]),si([e[1],e[2]]),si([e[2],e[0]])]},sa={0:0,1:1,2:-1},ss=e=>(Object.keys(e).forEach(t=>{e[t]=sa[e[t]]}),e),sc=Object.freeze(Object.keys(sr)),sl={0:0,1:2,2:1},su=(e,t,...r)=>{let n=sn[e](t),i=n.map(e=>e[1]<e[0]),o=n.map((e,t)=>i[t]?`${e[1]} ${e[0]}`:`${e[0]} ${e[1]}`),a=o.map((e,t)=>{for(let n=0;n<r.length;n+=1)if(r[n][e])return i[t]?sl[r[n][e]]:r[n][e];return 0}).join("");if(!0===sr[e][a])return!0;if(!1===sr[e][a])return!1;let s=sr[e][a],c=o[s[0]];return[c,i[s[0]]?sl[s[1]]:s[1]]},sf=(e,t,r)=>{let n={};return sc.forEach(i=>{let o=r.flatMap(e=>t[i][e]);n[i]=nl(o).filter(t=>e[i][t])}),n},sp=(e,t,r,...n)=>{let i=r,o={};do{let r=sf(e,t,i),a={};for(let t=0;t<sc.length;t+=1){let i=sc[t],s=r[i];for(let t=0;t<s.length;t+=1){let r=su(i,e[i][s[t]],...n,o);if(!0!==r){if(!1===r)return console.warn("invalid state found",i,e[i][s[t]]),!1;if(o[r[0]]){if(o[r[0]]!==r[1])return console.warn("order conflict",i,e[i][s[t]]),!1}else{let[e,t]=r;a[e]=!0,o[r[0]]=t}}}}i=Object.keys(a)}while(i.length);return o},sh=(e,t,r)=>{let n=Object.keys(t),i={};e.forEach(e=>{i[e]=!0});let o=0,a=[];for(;o<e.length;){if(!i[e[o]]){o+=1;continue}let s=[],c=[e[o]],l={[e[o]]:!0};do{let e=c.shift();delete i[e],s.push(e);let o={};n.forEach(n=>{let i=r[n][e];if(!!i)i.map(e=>t[n][e]).map(e=>so[n](e).forEach(e=>{o[e]=!0}))});let a=Object.keys(o).filter(e=>i[e]).filter(e=>!l[e]);c.push(...a),a.forEach(e=>{l[e]=!0})}while(c.length);o+=1,a.push(s)}return a},sd=(e,t,r)=>{let n=iX(e),i=n2(e,r);for(let e=0;e<i.length;e+=1)!n[e]&&i[e].reverse();let o=t.map(e=>2===e.length&&e[0]!==e[1]).map((e,t)=>e?t:void 0).filter(e=>void 0!==e),a=o.map(t=>e.edges_vertices[t]).map(t=>t.map(t=>e.vertices_coords[t])),s=a.map(e=>rT.core.subtract2(e[1],e[0])),c=[];return o.forEach(e=>{c[e]=[]}),o.map((e,t)=>i.map(e=>rT.core.clipLineConvexPolygon(e,s[t],a[t][0],rT.core.exclude,rT.core.excludeS,r)).map(e=>void 0!==e)).forEach((e,t)=>e.forEach((e,r)=>{e&&c[o[t]].push(r)})),c},sm=(e,t,r)=>sd(e,t,r).map((t,r)=>t.map(t=>[e.edges_faces[r],[t,t]])).reduce((e,t)=>e.concat(t),[]),sg=(e,t)=>{let r=e.edges_vertices.map(t=>e.vertices_coords[t[0]]),n=e.edges_vertices.map(t=>rT.core.subtract2(e.vertices_coords[t[1]],e.vertices_coords[t[0]]));return e.edges_faces.map((e,i)=>e.map(e=>rT.core.cross2(rT.core.subtract2(t[e],r[i]),n[i])).map(e=>Math.sign(e)))},sv=(e,t,r,n)=>{let i=r.map(t=>e.edges_vertices[t[0]].map(t=>e.vertices_coords[t])),o=i.map(e=>e[0]),a=i.map(e=>rT.core.subtract2(e[1],e[0]));return n.map(e=>e.map(e=>e.map(e=>t[e]))).map((e,t)=>e.map(e=>e.map(e=>rT.core.cross2(rT.core.subtract2(e,o[t]),a[t])).map(e=>Math.sign(e))))},s_=e=>1===e[0]&&-1===e[1]||-1===e[0]&&1===e[1]?"both":1===e[0]&&1===e[1]?"right":-1===e[0]&&-1===e[1]?"left":void 0,sy=e=>e[0]===e[1]&&"both"!==e[0],sb=e=>e[0]===e[1]&&"both"===e[0],sE=e=>e[0]!==e[1]&&("both"===e[0]||"both"===e[1]),sx=(e,t,r)=>{let n="left"===t[0]||"left"===t[1]?-1:1,i="both"===t[0]?[...e[1]]:[...e[0]],o="both"===t[0]?0:1;return{taco:i,tortilla:r[o][0]===n?e[o][0]:e[o][1]}},sO=(e,t)=>{if(void 0!==e)return t[0][0]===t[1][0]?e:[e[0],[e[1][1],e[1][0]]]},sk=(e,t=rT.core.EPSILON)=>{let r=n3(e),n=sg(e,r),i=nd(ar(e,t)).filter(t=>t.map(t=>e.edges_faces[t].length>1).reduce((e,t)=>e&&t,!0)),o=i.map(t=>t.map(t=>e.edges_faces[t])),a=sv(e,r,i,o),s=a.map(e=>e.map(s_)),c=s.map((e,t)=>sy(e)?o[t]:void 0).filter(e=>void 0!==e),l=s.map((e,t)=>sb(e)?o[t]:void 0).map((e,t)=>sO(e,a[t])).filter(e=>void 0!==e),u=sm(e,n,t),f=l.concat(u),p=s.map((e,t)=>sE(e)?sx(o[t],s[t],a[t]):void 0).filter(e=>void 0!==e),h=nh(ai(e,t)).map((e,t)=>n[t].length>1&&n[t][0]===n[t][1]?e:[]).map((t,r)=>({taco:e.edges_faces[r],tortillas:t})).filter(e=>e.tortillas.length).flatMap(e=>e.tortillas.map(t=>({taco:[...e.taco],tortilla:t})));return{taco_taco:c,tortilla_tortilla:f,taco_tortilla:p.concat(h)}},sM=(e,t,r,n=rT.core.EPSILON)=>{!t&&(t=ao(e,n)),!r&&(r=iX(e));let i=e.faces_vertices.map(t=>t.map(t=>e.vertices_coords[t]));i.forEach((e,t)=>{!r[t]&&e.reverse()});let o=e.faces_vertices.map(()=>[]);for(let e=0;e<o.length-1;e+=1)for(let r=e+1;r<o.length;r+=1){if(!t[e][r])continue;let a=rT.core.clipPolygonPolygon(i[e],i[r],n);a&&(o[e][r]=a)}let a=[];for(let e=0;e<o.length-1;e+=1)for(let r=e+1;r<o.length;r+=1){if(!!o[e][r])for(let s=r+1;s<o.length;s+=1){if(e!==s&&r!==s&&!!t[e][s]&&!!t[r][s])rT.core.clipPolygonPolygon(o[e][r],i[s],n)&&a.push([e,r,s].sort((e,t)=>e-t))}}return a},sA=(e,t)=>{let r={};return t.taco_taco.map(e=>[e[0][0],e[0][1],e[1][0],e[1][1]].sort((e,t)=>e-t)).forEach(e=>[`${e[0]} ${e[1]} ${e[2]}`,`${e[0]} ${e[1]} ${e[3]}`,`${e[0]} ${e[2]} ${e[3]}`,`${e[1]} ${e[2]} ${e[3]}`].forEach(e=>{r[e]=!0})),t.taco_tortilla.map(e=>[e.taco[0],e.taco[1],e.tortilla].sort((e,t)=>e-t).join(" ")).forEach(e=>{r[e]=!0}),e.filter(e=>void 0===r[e.join(" ")])},sj=(e,t)=>{let r={};return r.taco_taco=e.taco_taco.map(e=>[e[0][0],e[1][0],e[0][1],e[1][1]]),r.taco_tortilla=e.taco_tortilla.map(e=>[e.taco[0],e.tortilla,e.taco[1]]),r.tortilla_tortilla=e.tortilla_tortilla.map(e=>[e[0][0],e[0][1],e[1][0],e[1][1]]),r.transitivity=t.map(e=>[e[0],e[1],e[2]]),r},sP=e=>{let t={};return Object.keys(e).forEach(e=>{t[e]={}}),Object.keys(e).forEach(r=>{e[r].forEach((e,n)=>so[r](e).forEach(e=>{void 0===t[r][e]&&(t[r][e]=[]),t[r][e].push(n)}))}),t},sw={0:0,1:2,2:1},sS={M:1,m:1,V:2,v:2},s$=(e,t)=>(!t&&(t=ao(e)),nd(t).map(e=>e.join(" "))),sC=(e,t,r)=>{!r&&(r=iX(e));let n={};t.forEach(e=>{n[e]=!0});let i={};return e.edges_faces.forEach((t,o)=>{let a=sS[e.edges_assignment[o]];if(t.length<2||void 0===a)return;let s=r[t[0]]?a:sw[a],c=`${t[0]} ${t[1]}`,l=`${t[1]} ${t[0]}`;c in n&&(i[c]=s),l in n&&(i[l]=sw[s])}),i};var sL=Object.freeze({__proto__:null,makeFacePairs:s$,solveEdgeAdjacentFacePairs:sC});let sN=(e,t=1e-6)=>{let r=ao(e,t),n=iX(e),i=sk(e,t),o=sA(sM(e,r,n,t),i),a=sj(i,o),s=sP(a),c=s$(e,r),l=sC(e,c,n);return{constraints:a,constraintsLookup:s,facePairs:c,edgeAdjacentOrders:l}},sz=(e,t)=>{if(!e)return[];let r=[];Object.keys(e).forEach(t=>{let n=t.split(" ").map(e=>parseInt(e,10));-1===e[t]&&n.reverse(),void 0===r[n[0]]&&(r[n[0]]=[]),r[n[0]].push(n[1])}),t&&t.faces_vertices&&t.faces_vertices.forEach((e,t)=>{void 0===r[t]&&(r[t]=[])});let n=[],i=[],o=0;for(let e=0;e<r.length;e+=1){if(i[e])continue;let t=[e];for(;t.length&&o<2*r.length;){let e=t[t.length-1];if(r[e]&&r[e].length){let n=r[e].pop();!i[n]&&t.push(n);continue}n.push(e),i[e]=!0,t.pop();o+=1}}return o>=2*r.length&&console.warn("fix protection in topological order"),n},sF=e=>{let t=Object.keys(e),r=t.map(e=>e.split(" ").map(e=>parseInt(e,10)));return r.map((r,n)=>r.push(e[t[n]])),r},sI=e=>{let t=e.reduce((e,t)=>e*t,1),r=e.slice();for(let e=r.length-2;e>=0;e-=1)r[e]*=r[e+1];return r.push(1),r.shift(),Array.from(Array(t)).map((t,n)=>e.map((e,t)=>Math.floor(n/r[t])%e))},sV={count:function(){return this.branches.map(e=>e.length)},solution:function(...e){let t=Array(this.branches.length).fill(0).map((t,r)=>null!=e[r]?e[r]:t),r=this.branches?this.branches.map((e,r)=>e[t[r]]):[];return Object.assign({},this.root,...r)},allSolutions:function(){return sI(this.count()).map(e=>this.solution(...e))},facesLayer:function(...e){return ia(sz(this.solution(...e)))},allFacesLayers:function(){return sI(this.count()).map(e=>this.facesLayer(...e))},faceOrders:function(...e){return sF(this.solution(...e))},allFaceOrders:function(){return sI(this.count()).map(e=>this.faceOrders(...e))}},sB=(e,t,r,...n)=>{if(!r.length)return[];let i=r[0],o=[],a=[];[1,2].forEach(s=>{let c=sp(e,t,[i],...n,{[i]:s});if(!1!==c)c[i]=s,Object.keys(c).length===r.length?o.push(c):a.push(c)});let s=a.map(i=>sB(e,t,r.filter(e=>!(e in i)),...n,i));return o.map(e=>[...n,e]).concat(...s)};var sq=Object.assign(Object.create(null),{solver:(e,t=1e-6)=>{let r=new Date,{constraints:n,constraintsLookup:i,facePairs:o,edgeAdjacentOrders:a}=sN(e,t),s=Date.now()-r,c=new Date,l=sp(n,i,Object.keys(a),a);if(!l)return;let u=sh(o.filter(e=>!(e in a)).filter(e=>!(e in l)),n,i).map(e=>sB(n,i,e,a,l)).map(e=>e.map(e=>Object.assign({},...e))),f={...a,...l};ss(f),u.forEach(e=>e.forEach(e=>ss(e)));let p=Date.now()-c;return p>50&&console.log(`prep ${s}ms solver ${p}ms`),Object.assign(Object.create(sV),{root:f,branches:u})},table:sr,topologicalOrder:sz,makeTacosTortillas:sk,makeFoldedStripTacos:aJ,makeTransitivityTrios:sM,singleVertexSolver:a6,singleVertexAssignmentSolver:(e,t,r)=>{null==t&&(t=e.map(()=>"U"));let n=a7(t),i=n.map(t=>a6(e,t,r));return n.map((e,t)=>t).filter(e=>i[e].length>0).map(e=>({assignment:n[e],layer:i[e]}))},validateLayerSolver:aQ,validateTacoTacoFacePairs:aX,validateTacoTortillaStrip:aY,foldStripWithAssignments:a5},aZ,sL);let sT=e=>{let t=0,r=0;for(let n=0;n<e.length;n+=1)("M"===e[n]||"m"===e[n])&&(t+=1),("V"===e[n]||"v"===e[n])&&(r+=1);for(let n=0;n<e.length;n+=1)if(t>r&&("V"===e[n]||"v"===e[n])||r>t&&("M"===e[n]||"m"===e[n]))return n};var sR=Object.freeze({__proto__:null,kawasakiSolutions:({vertices_coords:e,vertices_edges:t,edges_vertices:r,edges_vectors:n},i)=>{!n&&(n=nY({vertices_coords:e,edges_vertices:r})),!t&&(t=nN({edges_vertices:r}));let o=t[i].map(e=>n[e]);return oB(rT.core.counterClockwiseOrder2(o).map(e=>o[e]))}}),sU=Object.assign(Object.create(null),{maekawaAssignments:a7,foldAngles4:(e,t,r=0)=>{let n=sT(t);if(void 0===n)return;let i=e[(n+1)%e.length],o=e[(n+2)%e.length],a=Math.PI*r,s=-Math.cos(i)*Math.cos(o)+Math.sin(i)*Math.sin(o)*Math.cos(Math.PI-a),c=-Math.acos(Math.cos(Math.PI-a)-Math.sin(Math.PI-a)**2*Math.sin(i)*Math.sin(o)/(1-s))+Math.PI;return n%2==0?[c,a,c,a].map((e,t)=>n===t?-e:e):[a,c,a,c].map((e,t)=>n===t?-e:e)}},oq,sR,oZ);let sD=(e,...t)=>{if(!e)return;let r={},n=e.getAttribute("class"),i=n?n.split(" "):[];i.push(...t),i.forEach(e=>{r[e]=!0});let o=Object.keys(r).join(" ");e.setAttribute("class",o)},sG={},sW={stroke:E},sZ={},sJ={M:{stroke:"red"},m:{stroke:"red"},V:{stroke:"blue"},v:{stroke:"blue"},F:{stroke:"lightgray"},f:{stroke:"lightgray"}},sH=e=>{let t={u:[],f:[],v:[],m:[],b:[]},r=e[d].map(e=>e.toLowerCase());return e[p].map((e,t)=>r[t]||"u").forEach((e,r)=>t[e].push(r)),t},sY=({vertices_coords:e,edges_vertices:t})=>e&&t?t.map(t=>t.map(t=>e[t])):[],sX=e=>`M${e[0][0]} ${e[0][1]}L${e[1][0]} ${e[1][1]}`,sK=e=>sY(e).map(e=>sX(e)).join(""),sQ=({vertices_coords:e,edges_vertices:t,edges_assignment:r})=>{if(!e||!t)return{};if(!r)return{u:sK({vertices_coords:e,edges_vertices:t})};let n=sH({vertices_coords:e,edges_vertices:t,edges_assignment:r});return Object.keys(n).forEach(r=>{n[r]=sK({vertices_coords:e,edges_vertices:n[r].map(e=>t[e])})}),Object.keys(n).forEach(e=>{""===n[e]&&delete n[e]}),n},s0=({vertices_coords:e,edges_vertices:t,edges_assignment:r})=>{let n=sQ({vertices_coords:e,edges_vertices:t,edges_assignment:r});return Object.keys(n).forEach(e=>{let t=$.svg.path(n[e]);sD(t,r2[e]),n[e]=t}),n},s1=(e,t={})=>Object.keys(t).forEach(r=>e.setAttributeNS(null,r,t[r])),s2=(e,t={})=>{let r=$.svg.g();if(!e)return r;let n=o6(e),i=s0(e);return Object.keys(i).forEach(e=>{sD(i[e],r2[e]),s1(i[e],n?sZ[e]:sJ[e]),s1(i[e],t[e]),s1(i[e],t[r2[e]]),r.appendChild(i[e]),Object.defineProperty(r,r2[e],{get:()=>i[e]})}),s1(r,n?sG:sW),s1(r,t.stroke?{stroke:t.stroke}:{}),r},s3=e=>Math.abs(e)/180,s8=(e,t={})=>{let r=$.svg.g();if(!e)return r;let n=o6(e),i=(e.edges_assignment?e.edges_assignment:nJ(e)).map(e=>e.toLowerCase()),o={};["b","m","v","f","u"].forEach(e=>{let i=$.svg.g();r.appendChild(i),sD(i,r2[e]),s1(i,n?sZ[e]:sJ[e]),s1(i,t[r2[e]]),Object.defineProperty(r,r2[e],{get:()=>i}),o[e]=i});let a=e.edges_vertices.map(t=>t.map(t=>e.vertices_coords[t])).map(e=>$.svg.line(e[0][0],e[0][1],e[1][0],e[1][1]));return e.edges_foldAngle&&a.forEach((t,r)=>{let n=e.edges_foldAngle[r];if(0!==n&&180!==n&&-180!==n)t.setAttributeNS(null,"opacity",s3(n))}),a.forEach((e,t)=>o[i[t]].appendChild(e)),s1(r,n?sG:sW),s1(r,t.stroke?{stroke:t.stroke}:{}),r},s5={back:{fill:x},front:{fill:"#ddd"}},s4={back:{opacity:.1},front:{opacity:.1}},s6={},s9={stroke:E,"stroke-linejoin":"bevel"},s7={stroke:O,fill:E,"stroke-linejoin":"bevel"},ce={fill:O},ct=(e,t={})=>Object.keys(t).forEach(r=>e.setAttributeNS(null,r,t[r])),cr=(e,t,r,n)=>{var i,o;let a=o6(e),s=null!=e[g],c=[[_],[y]],l=iX(e);return l.map(e=>e?c[0]:c[1]).forEach((e,r)=>{sD(t[r],e),ct(t[r],a?s?s5[e]:s4[e]:s6[e]),ct(t[r],n[e])}),(s?(i=e[g],Array.from(Array((o=e).faces_vertices.length||o.faces_edges.length)).map((e,t)=>t).filter(e=>null==i[e]).concat(ia(i))).map(e=>t[e]):t).forEach(e=>r.appendChild(e)),Object.defineProperty(r,_,{get:()=>t.filter((e,t)=>l[t])}),Object.defineProperty(r,y,{get:()=>t.filter((e,t)=>!l[t])}),ct(r,a?s?s9:s7:ce),r},cn=(e,t={})=>{let r=$.svg.g();if(!e||!e.vertices_coords||!e.faces_vertices)return r;let n=e.faces_vertices.map(t=>t.map(t=>[0,1].map(r=>e.vertices_coords[t][r]))).map(e=>$.svg.polygon(e));return n.forEach((e,t)=>e.setAttributeNS(null,a,t)),r.setAttributeNS(null,"fill",x),cr(e,n,r,t)},ci=function(e,t={}){let r=$.svg.g();if(!e||h in e==!1||p in e==!1||f in e==!1)return r;let n=e[h].map(t=>t.map(t=>e[p][t]).map((e,t,r)=>{let n=r[(t+1)%r.length];return e[1]===n[0]||e[1]===n[1]?e[0]:e[1]}).map(t=>[0,1].map(r=>e[f][t][r]))).map(e=>$.svg.polygon(e));return n.forEach((e,t)=>e.setAttributeNS(null,a,t)),r.setAttributeNS(null,"fill","white"),cr(e,n,r,t)},co={fill:O},ca={stroke:E,fill:x},cs=(e,t={})=>Object.keys(t).forEach(r=>e.setAttributeNS(null,r,t[r])),cc={vertices:(e,t={})=>{let r=$.svg.g();return e&&e.vertices_coords?(e.vertices_coords.map(e=>$.svg.circle(e[0],e[1],.01)).forEach(e=>r.appendChild(e)),r.setAttributeNS(null,"fill",O),Object.keys(t).forEach(e=>r.setAttributeNS(null,e,t[e])),r):r},edges:(e,t)=>r6(e)?s2(e,t):s8(e,t),faces:(e,t)=>null!=e&&null!=e.faces_vertices?cn(e,t):ci(e,t),boundaries:(e,t={})=>{let r=$.svg.g();if(!e||!e.vertices_coords||!e.edges_vertices||!e.edges_assignment)return r;let n=iL(e).vertices.map(t=>[0,1].map(r=>e.vertices_coords[t][r]));if(0===n.length)return r;let i=$.svg.polygon(n);return sD(i,v),r.appendChild(i),cs(r,o6(e)?co:ca),Object.keys(t).forEach(e=>r.setAttributeNS(null,e,t[e])),r}},cl=(e,t,r)=>{let n=!1===r?$.svg.g():cc[e](t,r);return sD(n,e),n},cu=(e,t={})=>[u,l,c,s].map(r=>cl(r,e,t[r]));[u,l,c,s].forEach(e=>{cu[e]=function(t,r={}){return cl(e,t,r[e])}});let cf=({vertices_coords:e})=>{if(null==e||0===e.length)return;let t=[,,].fill(1/0),r=[,,].fill(-1/0);return e.forEach(e=>{e[0]<t[0]&&(t[0]=e[0]),e[0]>r[0]&&(r[0]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>r[1]&&(r[1]=e[1])}),Number.isNaN(t[0])||Number.isNaN(t[1])||Number.isNaN(r[0])||Number.isNaN(r[1])?void 0:[t[0],t[1],r[0]-t[0],r[1]-t[1]]},cp=(e,t)=>{for(let r=0;r<e.childNodes.length;r+=1)e.childNodes[r].setAttributeNS(null,"r",t)},ch=e=>"SVG"===(e.nodeName||"").toUpperCase()?e:e.parentNode?ch(e.parentNode):void 0,cd=(e,t,r,n)=>{let i=t[3]&&t[3].childNodes.length;if(!(n.strokeWidth||n.viewBox||i))return;let o=cf(r),a=o?Math.max(o[2],o[3]):1,s=ch(e);if(s&&n.viewBox){let e=o?o.join(" "):"0 0 1 1";s.setAttributeNS(null,"viewBox",e)}if(n.strokeWidth||n["stroke-width"]){let t=n.strokeWidth?n.strokeWidth:n["stroke-width"];e.setAttributeNS(null,"stroke-width","number"==typeof t?a*t:.01*a)}if(i){let e=n.vertices&&null!=n.vertices.radius?n.vertices.radius:n.radius,r="string"==typeof e?parseFloat(e):e,i="number"!=typeof r||Number.isNaN(r)?.02*a:a*r;cp(t[3],i)}},cm=(e,t)=>{let r=[t.file_classes||[],t.frame_classes||[]].flat();r.length&&sD(e,...r)},cg=(e,t,r={})=>{let n=cu(t,r);return n.filter(e=>e.childNodes.length>0).forEach(t=>e.appendChild(t)),cd(e,n,t,r),cm(e,t),Object.keys(cu).filter(t=>null==e[t]).forEach((t,r)=>Object.defineProperty(e,t,{get:()=>n[r]})),e},cv=(e,t)=>cg($.svg(),e,t);Object.keys(cu).forEach(e=>{cv[e]=cu[e]}),cv.drawInto=cg,cv.getViewBox=e=>{let t=cf(e);return void 0===t?"":t.join(" ")},Object.defineProperty(cv,"linker",{enumerable:!1,value:(function(e){e.graph.svg=this;let t={svg:this};Object.keys(t).forEach(r=>{e.graph.prototype[r]=function(){return t[r](this,...arguments)}})}).bind(cv)});let c_={init:()=>{}};function cy(){return c_.init(...arguments)}let cb="class",cE="function",cx="undefined",cO="number",ck="string",cM="object",cA="path",cj="style",cP="viewBox",cw="transform",cS="points",c$="stroke",cC="none",cL="arrow",cN="head",cz="tail",cF=typeof window!==cx&&typeof window.document!==cx,cI=typeof process!==cx&&null!=process.versions&&null!=process.versions.node,cV=[];cV[10]='"error 010: window" not set. if using node/deno, include package @xmldom/xmldom, set to the main export ( ear.window = xmldom; )';let cB={window:void 0},cq=e=>new e.DOMParser().parseFromString("<!DOCTYPE html><title>.</title>","text/html"),cT=e=>(!e.document&&(e.document=cq(e)),cB.window=e,cB.window);cF&&(cB.window=window);let cR=()=>{if(void 0===cB.window)throw cV[10];return cB.window};var cU="http://www.w3.org/2000/svg",cD={s:["svg"],d:["defs"],h:["desc","filter","metadata","style","script","title","view"],c:["cdata"],g:["g"],v:["circle","ellipse","line","path","polygon","polyline","rect"],t:["text"],i:["marker","symbol","clipPath","mask"],p:["linearGradient","radialGradient","pattern"],cT:["textPath","tspan"],cG:["stop"],cF:["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]};let cG=(e,t)=>[e[0]+t[0],e[1]+t[1]],cW=(e,t)=>[e[0]-t[0],e[1]-t[1]],cZ=(e,t)=>[e[0]*t,e[1]*t],cJ=e=>e[0]**2+e[1]**2,cH=e=>Math.sqrt(cJ(e)),cY=(e,t)=>cJ(cW(e,t)),cX=(e,t)=>Math.sqrt(cY(e,t)),cK=(e,t)=>[Math.cos(e)*t,Math.sin(e)*t];var cQ=Object.freeze({__proto__:null,svg_add2:cG,svg_sub2:cW,svg_scale2:cZ,svg_magnitudeSq2:cJ,svg_magnitude2:cH,svg_distanceSq2:cY,svg_distance2:cX,svg_polar_to_cart:cK});let c0=(e,t,r,n,i,o=!1)=>{if(null==i)return"";let a=cK(n,r),s=cK(i,r),c=[s[0]-a[0],s[1]-a[1]],l=a[0]*s[1]-a[1]*s[0],u=Math.atan2(l,a[0]*s[0]+a[1]*s[1])>0?0:1,f=o?`M ${e},${t} l ${a[0]},${a[1]} `:`M ${e+a[0]},${t+a[1]} `;return f+=["a ",r,r,0,u,1,c[0],c[1]].join(" "),o&&(f+=" Z"),f},c1=(e,t,r,n,i)=>[c0(e,t,r,n,i,!1)],c2=(e,t,r,n,i)=>[c0(e,t,r,n,i,!0)],c3=(e=-1,t=0,r=2,n=1)=>Array.from(Array(129)).map((e,t)=>(t-128)/128*2+1).map(i=>[e+(i+1)*r*.5,t+i**2*n]),c8=(e,t,r,n)=>{let i=[t,r];return Array.from(Array(e)).map((t,r)=>2*Math.PI*(r/e)).map(e=>[Math.cos(e),Math.sin(e)]).map(e=>i.map((t,r)=>t+n*e[r]))};var c5={roundRect:{nodeName:cA,attributes:["d"],args:(e,t,r,n,i=0)=>{i>r/2&&(i=r/2),i>n/2&&(i=n/2);let o=r-2*i,a=n-2*i,s=`A${i} ${i} 0 0 1`;return[[`M${e+(r-o)/2},${t}`,`h${o}`,s,`${e+r},${t+(n-a)/2}`,`v${a}`,s,`${e+r-i},${t+n}`,`h${-o}`,s,`${e},${t+n-i}`,`v${-a}`,s,`${e+i},${t}`].join(" ")]}}},c4={toCamel:e=>e.replace(/([-_][a-z])/ig,e=>e.toUpperCase().replace("-","").replace("_","")),toKebab:e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").replace(/([A-Z])([A-Z])(?=[a-z])/g,"$1-$2").toLowerCase(),capitalized:e=>e.charAt(0).toUpperCase()+e.slice(1)};let c6=e=>null!=e&&typeof e[Symbol.iterator]===cE,c9=function(){switch(arguments.length){case void 0:case 0:return Array.from(arguments);case 1:return c6(arguments[0])&&typeof arguments[0]!==ck?c9(...arguments[0]):[arguments[0]];default:return Array.from(arguments).map(e=>c6(e)?[...c9(e)]:e)}};var c7=(...e)=>e.filter(e=>typeof e===cO).concat(e.filter(e=>typeof e===cM&&null!==e).map(e=>typeof e.x===cO?[e.x,e.y]:typeof e[0]===cO?[e[0],e[1]]:void 0).filter(e=>void 0!==e).reduce((e,t)=>e.concat(t),[]));let le=[cz,cN],lt=e=>e.join(","),lr=e=>"M"+e.map(e=>e.join(",")).join("L")+"Z",ln=function(e){let t=[[0,1],[2,3]].map(t=>t.map(t=>e.points[t]||0)),r=cW(t[1],t[0]),n=cG(t[0],cZ(r,.5)),i=cH(r),o=le.map(t=>e[t].visible?(1+e[t].padding)*e[t].height*2.5:0).reduce((e,t)=>e+t,0);if(i<o){let e=0===i?[o,0]:cZ(r,o/i);t=[cW,cG].map(t=>t(n,cZ(e,.5))),r=cW(t[1],t[0])}let a=[r[1],-r[0]],s=cG(n,cZ(a,e.bend)),c=t.map(e=>cW(s,e)),l=c.map(e=>cH(e)),u=c.map((e,t)=>0===l[t]?e:cZ(e,1/l[t])),f=u.map(e=>cZ(e,-1)),p=f.map(e=>[e[1],-e[0]]),h=le.map((t,r)=>e[t].padding?e[t].padding:e.padding?e.padding:0),d=le.map((t,r)=>e[t].height*(e[t].visible?1:0)).map((e,t)=>e+h[t]),m=t.map((e,t)=>cG(e,cZ(u[t],d[t])));a=[(r=cW(m[1],m[0]))[1],-r[0]],n=cG(m[0],cZ(r,.5)),s=cG(n,cZ(a,e.bend));let g=m.map((t,r)=>cG(t,cZ(cW(s,t),e.pinch))),v=le.map((t,r)=>[cG(m[r],cZ(f[r],e[t].height)),cG(m[r],cZ(p[r],e[t].width/2)),cG(m[r],cZ(p[r],-e[t].width/2))]);return{line:`M${lt(m[0])}C${lt(g[0])},${lt(g[1])},${lt(m[1])}`,tail:lr(v[0]),head:lr(v[1])}},li=(e,t,r)=>{"boolean"==typeof t?e.options[r].visible=t:typeof t===cM?(Object.assign(e.options[r],t),null==t.visible&&(e.options[r].visible=!0)):null==t&&(e.options[r].visible=!0)},lo=(e,t={},r=cN)=>{let n=e.getElementsByClassName(`${cL}-${r}`)[0];Object.keys(t).map(e=>({key:e,fn:n[c4.toCamel(e)]})).filter(e=>typeof e.fn===cE&&"class"!==e.key).forEach(e=>e.fn(t[e.key])),Object.keys(t).filter(e=>"class"===e).forEach(e=>n.classList.add(t[e]))},la=e=>{let t=ln(e.options);return Object.keys(t).map(t=>({path:t,element:e.getElementsByClassName(`${cL}-${t}`)[0]})).filter(e=>e.element).map(e=>(e.element.setAttribute("d",t[e.path]),e)).filter(t=>e.options[t.path]).forEach(t=>t.element.setAttribute("visibility",e.options[t.path].visible?"visible":"hidden")),e},ls=(e,...t)=>(e.options.points=c7(...c9(...t)).slice(0,4),la(e));var lc={setPoints:ls,points:ls,bend:(e,t)=>(e.options.bend=t,la(e)),pinch:(e,t)=>(e.options.pinch=t,la(e)),padding:(e,t)=>(e.options.padding=t,la(e)),head:(e,t)=>(li(e,t,cN),lo(e,t,cN),la(e)),tail:(e,t)=>(li(e,t,cz),lo(e,t,cz),la(e)),getLine:e=>e.getElementsByClassName(`${cL}-line`)[0],getHead:e=>e.getElementsByClassName(`${cL}-${cN}`)[0],getTail:e=>e.getElementsByClassName(`${cL}-${cz}`)[0]};let ll=()=>({visible:!1,width:8,height:10,padding:0}),lu=()=>({head:ll(),tail:ll(),bend:0,padding:0,pinch:.618,points:[]}),lf=Object.keys(lu()),lp=(...e)=>{for(let t=0;t<e.length;t+=1){if(typeof e[t]!==cM)continue;let r=Object.keys(e[t]);for(let n=0;n<r.length;n+=1)if(lf.includes(r[n]))return e[t]}},lh=function(){return c9(arguments).reduce((e,t)=>e.concat(t),[])},ld=(e=[],t=0,r=.5)=>{let n=[e[0]||0,e[1]||0],i=[e[2]||0,e[3]||0],o=cW(i,n),a=cG(n,cZ(o,.5)),s=cG(a,cZ([o[1],-o[0]],t)),c=cG(n,cZ(cW(s,n),r)),l=cG(i,cZ(cW(s,i),r));return`M${n[0]},${n[1]}C${c[0]},${c[1]} ${l[0]},${l[1]} ${i[0]},${i[1]}`},lm=e=>e.slice(1).split(/[, ]+/).map(e=>parseFloat(e)),lg=e=>e.match(/[Cc][(0-9), .-]+/).map(e=>lm(e)),lv=e=>e.match(/[Mm][(0-9), .-]+/).map(e=>lm(e)),l_=e=>{let t=lv(e).shift(),r=lg(e).shift(),n=t?[t[t.length-2],t[t.length-1]]:[0,0];return[...n,...r?[r[r.length-2],r[r.length-1]]:[0,0]]},ly=(e,...t)=>{let r=c7(...lh(...t)).slice(0,4);return e.setAttribute("d",ld(r,e._bend,e._pinch)),e},lb={};Object.assign(lb,{arc:{nodeName:cA,attributes:["d"],args:c1,methods:{setArc:(e,...t)=>e.setAttribute("d",c1(...t))}}},{wedge:{nodeName:cA,args:c2,attributes:["d"],methods:{setArc:(e,...t)=>e.setAttribute("d",c2(...t))}}},{parabola:{nodeName:"polyline",attributes:[cS],args:(e,t,r,n)=>[c3(e,t,r,n).map(e=>`${e[0]},${e[1]}`).join(" ")]}},{regularPolygon:{nodeName:"polygon",attributes:[cS],args:(e,t=0,r=0,n=1)=>[c8(e,t,r,n).map(e=>`${e[0]},${e[1]}`).join(" ")]}},c5,{arrow:{nodeName:"g",attributes:[],args:()=>[],methods:lc,init:function(e,...t){e.classList.add(cL);let r=["line",cz,cN].map(t=>cy.path().addClass(`${cL}-${t}`).appendTo(e));r[0].setAttribute(cj,"fill:none;"),r[1].setAttribute(c$,cC),r[2].setAttribute(c$,cC),e.options=lu(),lc.setPoints(e,...t);let n=lp(...t);return n&&Object.keys(n).filter(e=>lc[e]).forEach(t=>lc[t](e,n[t])),e}}},{curve:{nodeName:cA,attributes:["d"],args:(...e)=>[ld(c7(...lh(...e)))],methods:{setPoints:ly,bend:(e,t)=>(e._bend=t,ly(e,...l_(e.getAttribute("d")))),pinch:(e,t)=>(e._pinch=t,ly(e,...l_(e.getAttribute("d"))))}}});let lE=Object.keys(lb),lx=[cD.h,cD.p,cD.i],lO=[cD.g,cD.v,cD.t,lE],lk={svg:[cD.s,cD.d].concat(lx).concat(lO),g:lO,text:[cD.cT],linearGradient:[cD.cG],radialGradient:[cD.cG],defs:lx,filter:[cD.cF],marker:lO,symbol:lO,clipPath:lO,mask:lO},lM=Object.create(null);Object.keys(lk).forEach(e=>{lM[e]=lk[e].reduce((e,t)=>e.concat(t),[])});let lA=function(e,t,r,n,i=0){let o=r/1-r;return[e-o-i,t-o-i,r+2*o+2*i,n+2*o+2*i].join(" ")};function lj(){let e=c7(...lh(arguments));return 2===e.length&&e.unshift(0,0),4===e.length?lA(...e):void 0}let lP=e=>new(cR()).DOMParser().parseFromString("<root></root>","text/xml").createCDATASection(`${e}`),lw=e=>{for(;e.lastChild;)e.removeChild(e.lastChild);return e},lS=(e,t)=>{for(;t.childNodes.length>0;){let r=t.childNodes[0];t.removeChild(r),e.appendChild(r)}return e},l$=(e,t)=>(Array.from(t.attributes).forEach(t=>e.setAttribute(t.name,t.value)),lS(e,t));var lC={removeChildren:lw,appendTo:(e,t)=>(null!=t&&t.appendChild(e),e),setAttributes:(e,t)=>Object.keys(t).forEach(r=>e.setAttribute(c4.toKebab(r),t[r]))};let lL=e=>{if(null===e)return e;for(let t=e.childNodes.length-1;t>=0;t-=1){let r=e.childNodes[t];3===r.nodeType&&r.data.match(/^\s*$/)&&e.removeChild(r),1===r.nodeType&&lL(r)}return e},lN=e=>new(cR()).DOMParser().parseFromString(e,"text/xml"),lz=e=>{let t=e.getElementsByTagName("parsererror");if(t.length>0)throw Error(t[0]);return lL(e.documentElement)},lF=function(e){if(typeof e===ck||e instanceof String)try{return lz(lN(e))}catch(e){return e}if(null!=e.childNodes)return e},lI=e=>typeof e===ck&&/^[\w,\s-]+\.[A-Za-z]{3}$/.test(e)&&e.length<1e4,lV=e=>{var t;return lI(e)&&cF&&typeof cR().fetch===cE?(t=e,new Promise((e,r)=>{if(typeof t===ck||t instanceof String)fetch(t).then(e=>e.text()).then(e=>lz(lN(e))).then(e=>"svg"===e.nodeName?e:e.getElementsByTagName("svg")[0]).then(t=>null==t?r(Error("valid XML found, but no SVG element")):e(t)).catch(e=>r(e));else if(t instanceof cR().Document)return asyncDone(t)})):lF(e)},lB=()=>({download:!1,output:ck,windowStyle:!1,filename:"image.svg"}),lq=function(){let e=[];if(cR().document.styleSheets)for(let t=0;t<cR().document.styleSheets.length;t+=1){let r=cR().document.styleSheets[t];try{let t="cssRules"in r?r.cssRules:r.rules;for(let r=0;r<t.length;r+=1){let n=t[r];"cssText"in n?e.push(n.cssText):e.push(`${n.selectorText} {
${n.style.cssText}
}
`)}}catch(e){console.warn(e)}}return e.join("\n")},lT=function(e,t){let r=new(cR()).Blob([t],{type:"text/plain"}),n=cR().document.createElement("a");n.setAttribute("href",cR().URL.createObjectURL(r)),n.setAttribute("download",e),cR().document.body.appendChild(n),n.click(),cR().document.body.removeChild(n)},lR=function(e,t){if((t=Object.assign(lB(),t)).windowStyle){let t=cR().document.createElementNS(cU,cj);t.setAttribute("type","text/css"),t.innerHTML=lq(),e.appendChild(t)}let r=function(e,t){let r=e.replace(/>\s{0,}</g,"><").replace(/</g,"~::~<").replace(/\s*xmlns\:/g,"~::~xmlns:").split("~::~"),n=r.length,i=!1,o=0,a="",s="	",c=["\n"];for(let e=0;e<100;e+=1)c.push(c[e]+s);for(let e=0;e<n;e+=1)r[e].search(/<!/)>-1?(a+=c[o]+r[e],i=!0,(r[e].search(/-->/)>-1||r[e].search(/\]>/)>-1||r[e].search(/!DOCTYPE/)>-1)&&(i=!1)):r[e].search(/-->/)>-1||r[e].search(/\]>/)>-1?(a+=r[e],i=!1):/^<\w/.exec(r[e-1])&&/^<\/\w/.exec(r[e])&&/^<[\w:\-\.\,]+/.exec(r[e-1])==/^<\/[\w:\-\.\,]+/.exec(r[e])[0].replace("/","")?(a+=r[e],!i&&(o-=1)):r[e].search(/<\w/)>-1&&-1===r[e].search(/<\//)&&-1===r[e].search(/\/>/)?a=i?a+=r[e]:a+=c[o++]+r[e]:r[e].search(/<\w/)>-1&&r[e].search(/<\//)>-1?a=i?a+=r[e]:a+=c[o]+r[e]:r[e].search(/<\//)>-1?a=i?a+=r[e]:a+=c[--o]+r[e]:r[e].search(/\/>/)>-1?a=i?a+=r[e]:a+=c[o]+r[e]:r[e].search(/<\?/)>-1?a+=c[o]+r[e]:r[e].search(/xmlns\:/)>-1||r[e].search(/xmlns\=/)>-1?a+=c[o]+r[e]:a+=r[e];return"\n"===a[0]?a.slice(1):a}(new(cR()).XMLSerializer().serializeToString(e));return t.download&&cF&&!cI&&lT(t.filename,r),"svg"===t.output?e:r},lU=(e,...t)=>{let r=1===t.length&&typeof t[0]===ck?t[0]:lj(...t);return r&&e.setAttribute(cP,r),e},lD=function(e){let t=e.getAttribute(cP);return null==t?void 0:t.split(" ").map(e=>parseFloat(e))},lG=function(e,t,r){let n=e.createSVGPoint();n.x=t,n.y=r;let i=n.matrixTransform(e.getScreenCTM().inverse());return[i.x,i.y]};var lW=Object.freeze({__proto__:null,setViewBox:lU,getViewBox:lD,convertToViewBox:lG});let lZ=(e,t)=>{let r=lV(t);if(null!=r)return typeof r.then===cE?r.then(t=>l$(e,t)):l$(e,r)},lJ=function(e){let t=lD(e);if(void 0!==t)return t;if(typeof e.getBoundingClientRect===cE){let t=e.getBoundingClientRect();return[t.x,t.y,t.width,t.height]}return[]},lH="svg-background-rectangle",lY=function(e){let t=e.getElementsByTagName(cj);return 0===t.length?void 0:t[0]},lX=function(e,t){let r=lY(e);return null==r&&(r=this.Constructor(cj),e.insertBefore(r,e.firstChild)),r.textContent="",r.appendChild(lP(t)),r},lK={math:{vector:(...e)=>[...e]}},lQ={move:["mousemove","touchmove"],press:["mousedown","touchstart"],release:["mouseup","touchend"],leave:["mouseleave","touchcancel"]},l0=Object.values(lQ).reduce((e,t)=>e.concat(t),[]),l1=(e,t)=>l0.forEach(r=>{t[r].forEach(t=>e.removeEventListener(r,t)),t[r]=[]}),l2=(e,t,r)=>Object.defineProperty(e,t,{get:()=>r,enumerable:!0,configurable:!0}),l3=(e,t)=>{["pressX","pressY"].filter(t=>!Object.prototype.hasOwnProperty.call(e,t)).forEach((r,n)=>l2(e,r,t[n])),!Object.prototype.hasOwnProperty.call(e,"press")&&l2(e,"press",lK.math.vector(...t))},l8=function(e){let t=[],r=[];Object.keys(lQ).forEach(e=>{lQ[e].forEach(e=>{r[e]=[]})});let n=t=>lQ[t].forEach(t=>r[t].forEach(r=>e.removeEventListener(t,r))),i={press:(e,r)=>{l3(e,t=r)},release:()=>{},leave:()=>{},move:(e,r)=>{e.buttons>0&&void 0===t[0]?t=r:0===e.buttons&&void 0!==t[0]&&(t=[]),l3(e,t)}};Object.keys(lQ).forEach(t=>{Object.defineProperty(e,`on${c4.capitalized(t)}`,{set:o=>{if(null==o){n(t);return}lQ[t].forEach(n=>{let a=r=>{let n=null!=r.touches?r.touches[0]:r;if(void 0!==n){let o=lG(e,n.clientX,n.clientY).map(e=>Number.isNaN(e)?void 0:e);["x","y"].filter(e=>!Object.prototype.hasOwnProperty.call(r,e)).forEach((e,t)=>l2(r,e,o[t])),!Object.prototype.hasOwnProperty.call(r,"position")&&l2(r,"position",lK.math.vector(...o)),i[t](r,o)}o(r)};e.addEventListener&&(r[n].push(a),e.addEventListener(n,a))})},enumerable:!0})}),Object.defineProperty(e,"off",{value:()=>l1(e,r)})};var l5=()=>Math.random().toString(36).replace(/[^a-z]+/g,"").concat("aaaaa").substr(0,5);let l4=function(e){let t,r;let n={},i=0,o=()=>{cR().cancelAnimationFrame&&cR().cancelAnimationFrame(r),Object.keys(n).forEach(e=>delete n[e]),t=void 0,i=0};Object.defineProperty(e,"play",{set:e=>{if(o(),null==e)return;let a=l5();n[a]=o=>{!t&&(t=o,i=0),e({time:(o-t)*.001,frame:i}),i+=1,n[a]&&(r=cR().requestAnimationFrame(n[a]))},cR().requestAnimationFrame&&(r=cR().requestAnimationFrame(n[a]))},enumerable:!0}),Object.defineProperty(e,"stop",{value:o,enumerable:!0})},l6=e=>e&&e.parentNode?e.parentNode.removeChild(e):void 0,l9=[["cx","cy"],["x","y"]],l7=function(e,t={}){let r=[0,0],n={selected:!1,svg:void 0,updatePosition:e=>e},i=()=>{if(!!n.svg)!n.svg.parentNode&&e.appendChild(n.svg),l9.filter(e=>null!=n.svg[e[0]]).forEach(e=>e.forEach((e,t)=>{n.svg.setAttribute(e,r[t])}))},o=new Proxy(r,{set:(e,t,r)=>(e[t]=r,i(),!0)}),a=function(...e){c7(...lh(...e)).forEach((e,t)=>{r[t]=e}),i(),typeof r.delegate===cE&&r.delegate.apply(r.pointsContainer,[o,r.pointsContainer])};return r.delegate=void 0,r.setPosition=a,r.onMouseMove=e=>n.selected?a(n.updatePosition(e)):void 0,r.onMouseUp=()=>{n.selected=!1},r.distance=e=>Math.sqrt(cY(e,r)),["x","y"].forEach((e,t)=>Object.defineProperty(r,e,{get:()=>r[t],set:e=>{r[t]=e}})),["svg","updatePosition","selected"].forEach(e=>Object.defineProperty(r,e,{get:()=>n[e],set:t=>{n[e]=t}})),Object.defineProperty(r,"remove",{value:()=>{l6(n.svg),r.delegate=void 0}}),o},ue=function(e,t,r){let n,i;let o=Array.from(Array(t)).map(()=>l7(e,r)),a=e=>typeof i===cE?i.call(o,e,n,o):void 0;o.forEach(e=>{e.delegate=a,e.pointsContainer=o});e.onPress=function(e){if(!!(o.length>0))n=o.map((t,r)=>({i:r,d:cY(t,[e.x,e.y])})).sort((e,t)=>e.d-t.d).shift().i,o[n].selected=!0},e.onMove=function(e){o.forEach(t=>t.onMouseMove(e))},e.onRelease=function(){o.forEach(e=>e.onMouseUp()),n=void 0},Object.defineProperty(o,"selectedIndex",{get:()=>n}),Object.defineProperty(o,"selected",{get:()=>o[n]}),Object.defineProperty(o,"add",{value:t=>{o.push(l7(e,t))}}),o.removeAll=()=>{for(;o.length>0;)o.pop().remove()};let s={onChange:(e,t)=>{if(i=e,!0===t){let t=o.length-1;e.call(o,o[t],t,o)}},position:e=>o.forEach((t,r)=>t.setPosition(e.call(o,t,r,o))),svg:e=>o.forEach((t,r)=>{t.svg=e.call(o,t,r,o)})};return Object.keys(s).forEach(e=>{o[e]=function(){return typeof arguments[0]===cE&&s[e](...arguments),o}}),o.parent=function(e){return null!=e&&null!=e.appendChild&&o.forEach(t=>{e.appendChild(t.svg)}),o},o},ut=e=>{e.controls=(...t)=>ue.call(e,e,...t)},ur=(e,...t)=>{let r=t.map(e=>lF(e)).filter(e=>void 0!==e);return r.filter(e=>"svg"===e.tagName).forEach(t=>lS(e,t)),r.filter(e=>"svg"!==e.tagName).forEach(t=>e.appendChild(t)),e};var un=Object.assign(Object.create(null),{svg:[cP],line:["x1","y1","x2","y2"],rect:["x","y","width","height"],circle:["cx","cy","r"],ellipse:["cx","cy","rx","ry"],polygon:[cS],polyline:[cS],path:["d"],text:["x","y"],mask:["id"],symbol:["id"],clipPath:["id","clip-rule"],marker:["id","markerHeight","markerUnits","markerWidth","orient","refX","refY"],linearGradient:["x1","x2","y1","y2"],radialGradient:["cx","cy","r","fr","fx","fy"],stop:["offset","stop-color","stop-opacity"],pattern:["patternContentUnits","patternTransform","patternUnits"]});let ui=(e,t)=>(e.setAttribute(un.circle[2],t),e),uo=(e,t,r)=>([...c7(...lh(t,r)).slice(0,2)].forEach((t,r)=>e.setAttribute(un.circle[r],t)),e),ua=(e,t,r,n)=>[e,t,cX([e,t],[r,n])],us=(e,t,r)=>([,,t,r].forEach((t,r)=>e.setAttribute(un.ellipse[r],t)),e),uc=(e,t,r)=>([...c7(...lh(t,r)).slice(0,2)].forEach((t,r)=>e.setAttribute(un.ellipse[r],t)),e),ul=(...e)=>c7(...c9(...e)).slice(0,4),uu=/[MmLlSsQqLlHhVvCcSsQqTtAaZz]/g,uf=/-?[0-9]*\.?\d+/g,up={m:"move",l:"line",v:"vertical",h:"horizontal",a:"ellipse",c:"curve",s:"smoothCurve",q:"quadCurve",t:"smoothQuadCurve",z:"close"};Object.keys(up).forEach(e=>{let t=up[e];up[e.toUpperCase()]=t.charAt(0).toUpperCase()+t.slice(1)});let uh=function(e){let t;let r=[];for(;null!==(t=uu.exec(e));)r.push(t);return r.map(t=>({command:e[t.index],index:t.index})).reduceRight((t,r)=>{let n=e.substring(r.index,t.length?t[t.length-1].index:e.length);return t.concat([{command:r.command,index:r.index,chunk:n.length>0?n.substr(1,n.length-1):n}])},[]).reverse().map(e=>{let t=e.chunk.match(uf);return e.en=up[e.command],e.values=t?t.map(parseFloat):[],delete e.chunk,e})},ud=e=>{let t=e.getAttribute("d");return null==t?"":t},um=(e,t,...r)=>(e.setAttribute("d",`${ud(e)}${t}${lh(...r).join(" ")}`),e),ug=e=>uh(ud(e)),uv={addCommand:um,appendCommand:um,clear:e=>(e.removeAttribute("d"),e),getCommands:ug,get:ug,getD:e=>e.getAttribute("d")};Object.keys(up).forEach(e=>{uv[up[e]]=(t,...r)=>um(t,e,...r)});let u_=(e,t,r)=>([,,t,r].forEach((t,r)=>e.setAttribute(un.rect[r],t)),e),uy=(e,t,r)=>([...c7(...lh(t,r)).slice(0,2)].forEach((t,r)=>e.setAttribute(un.rect[r],t)),e),ub=function(e){return[0,1].forEach(t=>{e[2+t]<0&&(void 0===e[0+t]&&(e[0+t]=0),e[0+t]+=e[2+t],e[2+t]=-e[2+t])}),e},uE=(...e)=>[function(){return Array.from(arguments).filter(e=>typeof e===ck||e instanceof String).shift()||l5()}(...e)],ux=e=>{let t=e.getAttribute(cS);return null==t?"":t},uO=(...e)=>[function(){return Array.from(Array(Math.floor(arguments.length/2))).map((e,t)=>`${arguments[2*t+0]},${arguments[2*t+1]}`).join(" ")}(...c7(...c9(...e)))],uk=(e,...t)=>(e.setAttribute(cS,uO(...t)[0]),e),uM=(e,...t)=>(e.setAttribute(cS,[ux(e),uO(...t)[0]].filter(e=>""!==e).join(" ")),e),uA=function(...e){return 1===e.length&&typeof e[0]===ck?[e[0]]:uO(...e)};var uj=Object.assign({},{svg:{args:(...e)=>[lj(c7(...e))].filter(e=>null!=e),methods:{clear:e=>(Array.from(e.attributes).filter(e=>"xmlns"!==e).forEach(t=>e.removeAttribute(t.name)),lw(e)),size:lU,setViewBox:lU,getViewBox:lD,padding:function(e,t){let r=lD(e);return void 0!==r&&lU(e,...[-t,-t,2*t,2*t].map((e,t)=>r[t]+e)),e},background:function(e,t){let r=Array.from(e.childNodes).filter(e=>e.getAttribute(cb)===lH).shift();return null==r&&((r=this.Constructor("rect",null,...lJ(e))).setAttribute(cb,lH),r.setAttribute(c$,cC),e.insertBefore(r,e.firstChild)),r.setAttribute("fill",t),e},getWidth:e=>lJ(e)[2],getHeight:e=>lJ(e)[3],stylesheet:function(e,t){return lX.call(this,e,t)},load:lZ,save:lR},init:(e,...t)=>{t.filter(e=>typeof e===ck).forEach(t=>lZ(e,t)),t.filter(e=>null!=e).filter(e=>typeof e.appendChild===cE).forEach(t=>t.appendChild(e)),l8(e),l4(e),ut(e)}}},{g:{init:ur,methods:{load:ur}}},{circle:{args:(e,t,r,n)=>{let i=c7(...lh(e,t,r,n));switch(i.length){case 0:case 1:return[,,...i];case 2:case 3:return i;default:return ua(...i)}},methods:{radius:ui,setRadius:ui,origin:uo,setOrigin:uo,center:uo,setCenter:uo,position:uo,setPosition:uo}}},{ellipse:{args:(e,t,r,n)=>{let i=c7(...lh(e,t,r,n)).slice(0,4);switch(i.length){case 0:case 1:case 2:return[,,...i];default:return i}},methods:{radius:us,setRadius:us,origin:uc,setOrigin:uc,center:uc,setCenter:uc,position:uc,setPosition:uc}}},{line:{args:ul,methods:{setPoints:(e,...t)=>(ul(...t).forEach((t,r)=>e.setAttribute(un.line[r],t)),e)}}},{path:{methods:uv}},{rect:{args:(e,t,r,n)=>{let i=c7(...lh(e,t,r,n)).slice(0,4);switch(i.length){case 0:case 1:case 2:case 3:return ub([,,...i]);default:return ub(i)}},methods:{origin:uy,setOrigin:uy,center:uy,setCenter:uy,size:u_,setSize:u_}}},{style:{init:(e,t)=>{e.textContent="",e.appendChild(lP(t))},methods:{setTextContent:(e,t)=>(e.textContent="",e.appendChild(lP(t)),e)}}},{text:{args:(e,t,r)=>c7(...lh(e,t,r)).slice(0,2),init:(e,t,r,n,i)=>{let o=[t,r,n,i].filter(e=>typeof e===ck).shift();o&&e.appendChild(cR().document.createTextNode(o))}}},{mask:{args:uE},clipPath:{args:uE},symbol:{args:uE},marker:{args:uE,methods:{size:lU,setViewBox:lU}}},{polyline:{args:uA,methods:{setPoints:uk,addPoint:uM}},polygon:{args:uA,methods:{setPoints:uk,addPoint:uM}}}),uP={presentation:["color","color-interpolation","cursor","direction","display","fill","fill-opacity","fill-rule","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","image-rendering","letter-spacing","opacity","overflow","paint-order","pointer-events","preserveAspectRatio","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tabindex","transform-origin","user-select","vector-effect","visibility"],effects:["azimuth","baseFrequency","bias","color-interpolation-filters","diffuseConstant","divisor","edgeMode","elevation","exponent","filter","filterRes","filterUnits","flood-color","flood-opacity","in","in2","intercept","k1","k2","k3","k4","kernelMatrix","lighting-color","limitingConeAngle","mode","numOctaves","operator","order","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","primitiveUnits","radius","result","seed","specularConstant","specularExponent","stdDeviation","stitchTiles","surfaceScale","targetX","targetY","type","xChannelSelector","yChannelSelector"],text:["dx","dy","alignment-baseline","baseline-shift","dominant-baseline","lengthAdjust","method","overline-position","overline-thickness","rotate","spacing","startOffset","strikethrough-position","strikethrough-thickness","text-anchor","text-decoration","text-rendering","textLength","underline-position","underline-thickness","word-spacing","writing-mode"],gradient:["gradientTransform","gradientUnits","spreadMethod"]};Object.values(cD).reduce((e,t)=>e.concat(t),[]).filter(e=>void 0===un[e]).forEach(e=>{un[e]=[]}),[[["svg","defs","g"].concat(cD.v,cD.t),uP.presentation],[["filter"],uP.effects],[cD.cT.concat("text"),uP.text],[cD.cF,uP.effects],[cD.cG,uP.gradient]].forEach(e=>e[0].forEach(t=>{un[t]=un[t].concat(e[1])}));let uw=e=>{if(null==e)return[];let t=e.getAttribute(cb);return null==t?[]:t.split(" ").filter(e=>""!==e)};var uS={addClass:(e,t)=>{let r=uw(e).filter(e=>e!==t);r.push(t),e.setAttributeNS(null,cb,r.join(" "))},removeClass:(e,t)=>{let r=uw(e).filter(e=>e!==t);e.setAttributeNS(null,cb,r.join(" "))},setClass:(e,t)=>{e.setAttributeNS(null,cb,t)},setId:(e,t)=>{e.setAttributeNS(null,"id",t)}};let u$=e=>{let t=e.getAttribute(cw);return null==t||""===t?void 0:t},uC={clearTransform:e=>(e.removeAttribute(cw),e)};["translate","rotate","scale","matrix"].forEach(e=>{uC[e]=(t,...r)=>t.setAttribute(cw,[u$(t),`${e}(${r.join(" ")})`].filter(e=>void 0!==e).join(" "))});let uL=function(e){if(null==e)return"";if(typeof e===ck)return"url"===e.slice(0,3)?e:`url(#${e})`;if(null!=e.getAttribute){let t=e.getAttribute("id");return`url(#${t})`}return""},uN={};["clip-path","mask","symbol","marker-end","marker-mid","marker-start"].forEach(e=>{uN[c4.toCamel(e)]=(t,r)=>t.setAttribute(e,uL(r))});let uz={};cD.v.push(...Object.keys(lb)),Object.keys(lb).forEach(e=>{lb[e].attributes=void 0===lb[e].attributes?[...uP.presentation]:lb[e].attributes.concat(uP.presentation)}),Object.assign(uz,uj,lb),Object.keys(cD).forEach(e=>cD[e].filter(e=>void 0===uz[e]).forEach(e=>{uz[e]={}}));let uF=function(){return Array.from(arguments)};Object.keys(uz).forEach(e=>{!uz[e].nodeName&&(uz[e].nodeName=e),!uz[e].init&&(uz[e].init=uF),!uz[e].args&&(uz[e].args=uF),!uz[e].methods&&(uz[e].methods={}),!uz[e].attributes&&(uz[e].attributes=un[e]||[])});let uI=(e,t)=>{e.forEach(e=>Object.keys(t).forEach(r=>{uz[e].methods[r]=function(){return t[r](...arguments),arguments[0]}}))};uI(lh(cD.t,cD.v,cD.g,cD.s,cD.p,cD.i,cD.h,cD.d),uS),uI(lh(cD.t,cD.v,cD.g,cD.s,cD.p,cD.i,cD.h,cD.d),lC),uI(lh(cD.v,cD.g,cD.s),uC),uI(lh(cD.t,cD.v,cD.g),uN);let uV={svg:{version:"1.1",xmlns:cU},style:{type:"text/css"}},uB=(e,t)=>{uV[t]&&Object.keys(uV[t]).forEach(r=>e.setAttribute(r,uV[t][r]))},uq={},uT=(e,t,...r)=>{let n=cR().document.createElementNS(cU,uz[e].nodeName);return t&&t.appendChild(n),uB(n,e),uz[e].init(n,...r),uz[e].args(...r).forEach((t,r)=>{null!=uz[e].attributes[r]&&n.setAttribute(uz[e].attributes[r],t)}),uz[e].attributes.forEach(e=>{Object.defineProperty(n,c4.toCamel(e),{value:function(){return n.setAttribute(e,...arguments),n}})}),Object.keys(uz[e].methods).forEach(t=>Object.defineProperty(n,t,{value:function(){return uz[e].methods[t].call(uq,n,...arguments)}})),lM[e]&&lM[e].forEach(e=>{let t=function(){return uT(e,n,...arguments)};uz[e].static&&Object.keys(uz[e].static).forEach(r=>{t[r]=function(){return uz[e].static[r](n,...arguments)}}),Object.defineProperty(n,e,{value:t})}),n};uq.Constructor=uT;let uR={};Object.keys(cD).forEach(e=>cD[e].forEach(e=>{uR[e]=(...t)=>uT(e,null,...t)}));let uU=(e,t)=>{["segment","circle","ellipse","rect","polygon"].filter(e=>t[e]&&t[e].prototype).forEach(r=>{t[r].prototype.svg=function(){return e.path(this.svgPath())}}),lK.math.vector=t.vector},uD=(e,t)=>{let r="origami";uz[r]={nodeName:"g",init:function(e,...r){return t.graph.svg.drawInto(e,...r)},args:()=>[],methods:uz.g.methods,attributes:uz.g.attributes,static:{}},Object.keys(t.graph.svg).forEach(e=>{uz[r].static[e]=(r,...n)=>{let i=t.graph.svg[e](...n);return r.appendChild(i),i}}),lM[r]=[...lM.g],lM.svg.push(r),lM.g.push(r),e[r]=(...e)=>uT(r,null,...e),Object.keys(t.graph.svg).forEach(n=>{e[r][n]=t.graph.svg[n]})},uG=function(e,...t){t.filter(e=>typeof e===cE).forEach(t=>t.call(e,e))};c_.init=function(){let e=uT("svg",null,...arguments);return"loading"===cR().document.readyState?cR().document.addEventListener("DOMContentLoaded",()=>uG(e,...arguments)):uG(e,...arguments),e},cy.NS=cU,cy.linker=(function(e){e.graph&&e.origami&&(e.svg=this,uU(this,e),uD(this,e))}).bind(cy),Object.assign(cy,uR),cy.core=Object.assign(Object.create(null),{load:lV,save:lR,coordinates:c7,flatten:lh,attributes:un,children:lM,cdata:lP},c4,uS,lC,cQ,uC,lW),Object.defineProperty(cy,"window",{enumerable:!1,set:e=>{cT(e)}});let uW=(e,t,r,n=0)=>{if(rT.core.magSquared(t)<rT.core.EPSILON)return[];let i=rT.core.normalize(t),o=[[1,0,0],[0,1,0],[0,0,1]].map(e=>rT.core.cross3(e,i)).sort((e,t)=>rT.core.magnitude(t)-rT.core.magnitude(e)).shift(),a=[rT.core.normalize(o)];for(let e=1;e<4;e+=1)a.push(rT.core.cross3(a[e-1],i));let s=a.map(e=>rT.core.scale(e,r)),c=[-n,n].map(e=>rT.core.scale(i,e));return(0===n?e:e.map((e,t)=>rT.core.add(e,c[t]))).map(e=>s.map(t=>rT.core.add(e,t))).flat()};var uZ=Object.freeze({__proto__:null,make_faces_geometry:e=>{let{THREE:t}=S(),r=e.vertices_coords.map(e=>[e[0],e[1],e[2]||0]).flat(),n=e.vertices_coords.map(()=>[0,0,1]).flat(),i=e.vertices_coords.map(()=>[1,1,1]).flat(),o=e.faces_vertices.map(e=>e.map((e,t,r)=>[r[0],r[t+1],r[t+2]]).slice(0,e.length-2)).flat(2),a=new t.BufferGeometry;return a.setAttribute("position",new t.Float32BufferAttribute(r,3)),a.setAttribute("normal",new t.Float32BufferAttribute(n,3)),a.setAttribute("color",new t.Float32BufferAttribute(i,3)),a.setIndex(o),a},make_edges_geometry:function({vertices_coords:e,edges_vertices:t,edges_assignment:r,edges_coords:n,edges_vector:i},o=.002,a=0){let{THREE:s}=S();!n&&(n=t.map(t=>t.map(t=>e[t]))),!i&&(i=n.map(e=>rT.core.subtract(e[1],e[0]))),n=n.map(e=>e.map(e=>rT.core.resize(3,e))),i=i.map(e=>rT.core.resize(3,e));let c={B:[0,0,0],M:[0,0,0],F:[0,0,0],V:[0,0,0]},l=r.map(e=>[c[e],c[e],c[e],c[e],c[e],c[e],c[e],c[e]]).flat(3),u=n.map((e,t)=>uW(e,i[t],o,a)).flat(2),f=i.map(e=>{if(rT.core.magSquared(e)<rT.core.EPSILON)throw Error("degenerate edge");rT.core.normalize(e);let t=rT.core.scale(rT.core.normalize(rT.core.cross3(e,[0,0,-1])),o),r=rT.core.scale(rT.core.normalize(rT.core.cross3(e,[0,0,1])),o);return[t,[-t[2],t[1],t[0]],r,[-r[2],r[1],r[0]],t,[-t[2],t[1],t[0]],r,[-r[2],r[1],r[0]]]}).flat(2),p=n.map((e,t)=>[8*t+0,8*t+4,8*t+1,8*t+1,8*t+4,8*t+5,8*t+1,8*t+5,8*t+2,8*t+2,8*t+5,8*t+6,8*t+2,8*t+6,8*t+3,8*t+3,8*t+6,8*t+7,8*t+3,8*t+7,8*t+0,8*t+0,8*t+7,8*t+4,8*t+0,8*t+1,8*t+3,8*t+1,8*t+2,8*t+3,8*t+5,8*t+4,8*t+7,8*t+7,8*t+6,8*t+5]).flat(),h=new s.BufferGeometry;return h.setAttribute("position",new s.Float32BufferAttribute(u,3)),h.setAttribute("normal",new s.Float32BufferAttribute(f,3)),h.setAttribute("color",new s.Float32BufferAttribute(l,3)),h.setIndex(p),h.computeVertexNormals(),h}});let uJ=Object.assign($,af,{math:rT.core,axiom:az,diagram:aW,layer:sq,singleVertex:sU,text:{axioms:{ar:[null,"اصنع خطاً يمر بنقطتين","اصنع خطاً عن طريق طي نقطة واحدة إلى أخرى","اصنع خطاً عن طريق طي خط واحد على آخر","اصنع خطاً يمر عبر نقطة واحدة ويجعل خطاً واحداً فوق نفسه","اصنع خطاً يمر بالنقطة الأولى ويجعل النقطة الثانية على الخط","اصنع خطاً يجلب النقطة الأولى إلى الخط الأول والنقطة الثانية إلى الخط الثاني","اصنع خطاً يجلب نقطة إلى خط ويجعل خط ثاني فوق نفسه"],de:[null,"Falte eine Linie durch zwei Punkte","Falte zwei Punkte aufeinander","Falte zwei Linien aufeinander","Falte eine Linie auf sich selbst, falte dabei durch einen Punkt","Falte einen Punkt auf eine Linie, falte dabei durch einen anderen Punkt","Falte einen Punkt auf eine Linie und einen weiteren Punkt auf eine weitere Linie","Falte einen Punkt auf eine Linie und eine weitere Linie in sich selbst zusammen"],en:[null,"fold a line through two points","fold two points together","fold two lines together","fold a line on top of itself, creasing through a point","fold a point to a line, creasing through another point","fold a point to a line and another point to another line","fold a point to a line and another line onto itself"],es:[null,"dobla una l\xednea entre dos puntos","dobla dos puntos juntos","dobla y une dos l\xedneas","dobla una l\xednea sobre s\xed misma, dobl\xe1ndola hacia un punto","dobla un punto hasta una l\xednea, dobl\xe1ndola a trav\xe9s de otro punto","dobla un punto hacia una l\xednea y otro punto hacia otra l\xednea","dobla un punto hacia una l\xednea y otra l\xednea sobre s\xed misma"],fr:[null,"cr\xe9ez un pli passant par deux points","pliez pour superposer deux points","pliez pour superposer deux lignes","rabattez une ligne sur elle-m\xeame \xe0 l'aide d'un pli qui passe par un point","rabattez un point sur une ligne \xe0 l'aide d'un pli qui passe par un autre point","rabattez un point sur une ligne et un autre point sur une autre ligne","rabattez un point sur une ligne et une autre ligne sur elle-m\xeame"],hi:[null,"एक क्रीज़ बनाएँ जो दो स्थानों से गुजरता है","एक स्थान को दूसरे स्थान पर मोड़कर एक क्रीज़ बनाएँ","एक रेखा पर दूसरी रेखा को मोड़कर क्रीज़ बनाएँ","एक क्रीज़ बनाएँ जो एक स्थान से गुजरता है और एक रेखा को स्वयं के ऊपर ले आता है","एक क्रीज़ बनाएँ जो पहले स्थान से गुजरता है और दूसरे स्थान को रेखा पर ले आता है","एक क्रीज़ बनाएँ जो पहले स्थान को पहली रेखा पर और दूसरे स्थान को दूसरी रेखा पर ले आता है","एक क्रीज़ बनाएँ जो एक स्थान को एक रेखा पर ले आता है और दूसरी रेखा को स्वयं के ऊपर ले आता है"],jp:[null,"2点に沿って折り目を付けます","2点を合わせて折ります","2つの線を合わせて折ります","点を通過させ、既にある線に沿って折ります","点を線沿いに合わせ別の点を通過させ折ります","線に向かって点を折り、同時にもう一方の線に向かってもう一方の点を折ります","線に向かって点を折り、同時に別の線をその上に折ります"],ko:[null,"두 점을 통과하는 선으로 접으세요","두 점을 함께 접으세요","두 선을 함께 접으세요","그 위에 선을 접으면서 점을 통과하게 접으세요","점을 선으로 접으면서, 다른 점을 지나게 접으세요","점을 선으로 접고 다른 점을 다른 선으로 접으세요","점을 선으로 접고 다른 선을 그 위에 접으세요"],ms:[null,"lipat garisan melalui dua titik","lipat dua titik bersama","lipat dua garisan bersama","lipat satu garisan di atasnya sendiri, melipat melalui satu titik","lipat satu titik ke garisan, melipat melalui titik lain","lipat satu titik ke garisan dan satu lagi titik ke garisan lain","lipat satu titik ke garisan dan satu lagi garisan di atasnya sendiri"],pt:[null,"dobre uma linha entre dois pontos","dobre os dois pontos para uni-los","dobre as duas linhas para uni-las","dobre uma linha sobre si mesma, criando uma dobra ao longo de um ponto","dobre um ponto at\xe9 uma linha, criando uma dobra ao longo de outro ponto","dobre um ponto at\xe9 uma linha e outro ponto at\xe9 outra linha","dobre um ponto at\xe9 uma linha e outra linha sobre si mesma"],ru:[null,"сложите линию через две точки","сложите две точки вместе","сложите две линии вместе","сверните линию сверху себя, сгибая через точку","сложите точку в линию, сгибая через другую точку","сложите точку в линию и другую точку в другую линию","сложите точку в линию и другую линию на себя"],tr:[null,"iki noktadan ge\xe7en bir \xe7izgi boyunca katla","iki noktayı birbirine katla","iki \xe7izgiyi birbirine katla","bir noktadan kıvırarak kendi \xfczerindeki bir \xe7izgi boyunca katla","başka bir noktadan kıvırarak bir noktayı bir \xe7izgiye katla","bir noktayı bir \xe7izgiye ve başka bir noktayı başka bir \xe7izgiye katla","bir noktayı bir \xe7izgiye ve başka bir \xe7izgiyi kendi \xfczerine katla"],vi:[null,"tạo một nếp gấp đi qua hai điểm","tạo nếp gấp bằng c\xe1ch gấp một điểm n\xe0y sang điểm kh\xe1c","tạo nếp gấp bằng c\xe1ch gấp một đường l\xean một đường kh\xe1c","tạo một nếp gấp đi qua một điểm v\xe0 đưa một đường l\xean tr\xean ch\xednh n\xf3","tạo một nếp gấp đi qua điểm đầu ti\xean v\xe0 đưa điểm thứ hai l\xean đường thẳng","tạo một nếp gấp mang điểm đầu ti\xean đến đường đầu ti\xean v\xe0 điểm thứ hai cho đường thứ hai","tạo một nếp gấp mang lại một điểm cho một đường v\xe0 đưa một đường thứ hai l\xean tr\xean ch\xednh n\xf3"],zh:[null,"通過兩點折一條線","將兩點折疊起來","將兩條線折疊在一起","通過一個點折疊一條線在自身上面","將一個點，通過另一個點折疊成一條線，","將一個點折疊為一條線，再將另一個點折疊到另一條線","將一個點折疊成一條線，另一條線折疊到它自身上"]},instructions:{fold:{es:"doblez"},"valley fold":{es:"doblez de valle",zh:"谷摺"},"mountain fold":{es:"doblez de monta\xf1a",zh:"山摺"},"inside reverse fold":{zh:"內中割摺"},"outside reverse fold":{zh:"外中割摺"},sink:{},"open sink":{zh:"開放式沉壓摺"},"closed sink":{zh:"封閉式沉壓摺"},"rabbit ear":{zh:"兔耳摺"},"double rabbit ear":{zh:"雙兔耳摺"},"petal fold":{zh:"花瓣摺"},blintz:{zh:"坐墊基"},squash:{zh:"壓摺"},"flip over":{es:"dale la vuelta a tu papel"}}},webgl:uZ});Object.keys(rT).filter(e=>"core"!==e).forEach(e=>{uJ[e]=rT[e]}),Object.defineProperty(uJ,"use",{enumerable:!1,value:(function(e){if(null!=e&&"function"==typeof e.linker)e.linker(this)}).bind(uJ)}),!M&&(uJ.use(cv),uJ.use(cy)),Object.defineProperty(uJ,"window",{enumerable:!1,set:e=>{w(e),cy.window=e}})}}]);