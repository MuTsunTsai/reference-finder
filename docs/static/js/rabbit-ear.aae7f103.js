"use strict";(self.webpackChunkreference_finder=self.webpackChunkreference_finder||[]).push([["369"],{292:function(e,t,r){r.d(t,{A:()=>lt});let n="undefined",i="number",o="object",a="index",s="vertices",c="edges",l="faces",u="boundaries",f="vertices_coords",p="edges_vertices",h="faces_edges",d="edges_assignment",m="edges_foldAngle",g="faces_layer",v="boundary",_="front",y="back",b="foldedForm",E="black",x="white",O="none",k=typeof window!==n&&typeof window.document!==n;typeof process!==n&&null!=process.versions&&process.versions.node;let M=typeof self===o&&self.constructor&&"DedicatedWorkerGlobalScope"===self.constructor.name,A=[];A[10]='"error 010: window" not set. if using node/deno, include package @xmldom/xmldom, set to the main export ( ear.window = xmldom; )';let j={window:void 0};k&&(j.window=window);let P=()=>{if(void 0===j.window)throw A[10];return j.window};var w=Object.create(null);let S=function(e){switch(e.constructor.name){case"vector":case"matrix":case"segment":case"ray":case"line":case"circle":case"ellipse":case"rect":case"polygon":return e.constructor.name}if("object"==typeof e){if(null!=e.radius)return"circle";if(null!=e.width)return"rect";if(null!=e.x||"number"==typeof e[0])return"vector";if(null!=e[0]&&e[0].length&&("number"==typeof e[0].x||"number"==typeof e[0][0]))return"segment";if(null!=e.vector&&null!=e.origin)return"line"}},$=(e,t)=>t.length===e?t:Array(e).fill(0).map((e,r)=>t[r]?t[r]:e),C=(e,t)=>{let r=e.length>t.length?e.length:t.length;return[e,t].map(e=>$(r,e))},L=function(e){let t=`${e}`.match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return t?Math.max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0},N=function(e,t=15){if("number"!=typeof e)return e;let r=parseFloat(e.toFixed(t));return L(r)===Math.min(t,L(e))?e:r},z=e=>null!=e&&"function"==typeof e[Symbol.iterator],F=function(){switch(arguments.length){case void 0:case 0:return Array.from(arguments);case 1:return z(arguments[0])&&"string"!=typeof arguments[0]?F(...arguments[0]):[arguments[0]];default:return Array.from(arguments).map(e=>z(e)?[...F(e)]:e)}},I=function(){switch(arguments.length){case void 0:case 0:return Array.from(arguments);case 1:return z(arguments[0])&&"string"!=typeof arguments[0]?I(...arguments[0]):[arguments[0]];default:return Array.from(arguments).map(e=>z(e)?[...I(e)]:e).reduce((e,t)=>e.concat(t),[])}};var V=Object.freeze({__proto__:null,resize:$,resizeUp:C,resizeDown:(e,t)=>{let r=e.length>t.length?t.length:e.length;return[e,t].map(e=>$(r,e))},cleanNumber:N,semiFlattenArrays:F,flattenArrays:I}),B=Object.create(null);let q=1e-6,T=Math.PI/180,R=2*Math.PI;var U=Object.freeze({__proto__:null,EPSILON:q,R2D:180/Math.PI,D2R:T,TWO_PI:R});let D=()=>!0,G=e=>e*e,W=(e,t)=>e+(t||0),Z=e=>void 0!==e,J=e=>Math.atan2(e[1],e[0]),H=e=>[Math.cos(e),Math.sin(e)],Y=(e,t,r=q)=>Math.abs(e-t)<r,X=(e,t,r=q)=>Y(e,t,r)?0:Math.sign(t-e),K=(e,t,r=q)=>{for(let n=0;n<Math.max(e.length,t.length);n+=1)if(!Y(e[n]||0,t[n]||0,r))return!1;return!0},Q=(e,t=q)=>e>-t,ee=(e,t=q)=>e>t,et=D,er=D,en=(e,t=q)=>e>-t&&e<1+t,ei=(e,t=q)=>e>t&&e<1-t,eo=e=>e<-q?0:e,ea=e=>e<-q?0:e>1+q?1:e;var es=Object.freeze({__proto__:null,fnTrue:D,fnSquare:G,fnAdd:W,fnNotUndefined:Z,fnAnd:(e,t)=>e&&t,fnCat:(e,t)=>e.concat(t),fnVec2Angle:J,fnToVec2:H,fnEqual:(e,t)=>e===t,fnEpsilonEqual:Y,fnEpsilonSort:X,fnEpsilonEqualVectors:K,include:Q,exclude:ee,includeL:et,excludeL:er,includeR:Q,excludeR:ee,includeS:en,excludeS:ei,lineLimiter:e=>e,rayLimiter:eo,segmentLimiter:ea});let ec=e=>Math.sqrt(e.map(G).reduce(W,0)),el=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),eu=e=>e.map(G).reduce(W,0),ef=e=>{let t=ec(e);return 0===t?e:e.map(e=>e/t)},ep=e=>{let t=el(e);return 0===t?e:[e[0]/t,e[1]/t]},eh=(e,t)=>e.map(e=>e*t),ed=(e,t)=>[e[0]*t,e[1]*t],em=(e,t)=>e.map((e,r)=>e+(t[r]||0)),eg=(e,t)=>[e[0]+t[0],e[1]+t[1]],ev=(e,t)=>e.map((e,r)=>e-(t[r]||0)),e_=(e,t)=>[e[0]-t[0],e[1]-t[1]],ey=(e,t)=>e.map((r,n)=>e[n]*t[n]).reduce(W,0),eb=(e,t)=>e[0]*t[0]+e[1]*t[1],eE=(e,t)=>e.map((e,r)=>(e+t[r])/2),ex=function(){if(0==arguments.length)return[];let e=arguments[0].length>0?arguments[0].length:0,t=Array(e).fill(0);return Array.from(arguments).forEach(e=>t.forEach((r,n)=>{t[n]+=e[n]||0})),t.map(e=>e/arguments.length)},eO=(e,t,r)=>{let n=1-r;return e.map((e,i)=>e*n+(t[i]||0)*r)},ek=(e,t)=>e[0]*t[1]-e[1]*t[0],eM=(e,t)=>[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]],eA=(e,t)=>Math.sqrt(e.map((r,n)=>(e[n]-t[n])**2).reduce(W,0)),ej=(e,t)=>{let r=e[0]-t[0],n=e[1]-t[1];return Math.sqrt(r*r+n*n)},eP=e=>e.map(e=>-e),ew=e=>[-e[1],e[0]],eS=e=>[e[1],-e[0]],e$=(e,t=q)=>e.map(e=>Math.abs(e)).reduce(W,0)<t,eC=(e,t,r=q)=>1-Math.abs(ey(ef(e),ef(t)))<r;var eL=Object.freeze({__proto__:null,magnitude:ec,magnitude2:el,magSquared:eu,normalize:ef,normalize2:ep,scale:eh,scale2:ed,add:em,add2:eg,subtract:ev,subtract2:e_,dot:ey,dot2:eb,midpoint:eE,midpoint2:(e,t)=>ed(eg(e,t),.5),average:ex,lerp:eO,cross2:ek,cross3:eM,distance:eA,distance2:ej,distance3:(e,t)=>{let r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2];return Math.sqrt(r*r+n*n+i*i)},flip:eP,rotate90:ew,rotate270:eS,degenerate:e$,parallel:eC,parallel2:(e,t,r=q)=>Math.abs(ek(e,t))<r});let eN=Object.freeze([1,0,0,0,1,0,0,0,1]),ez=Object.freeze(eN.concat(0,0,0)),eF=e=>ez.map((t,r)=>Math.abs(t-e[r])<q).reduce((e,t)=>e&&t,!0),eI=(e,t)=>[e[0]*t[0]+e[3]*t[1]+e[6]*t[2]+e[9],e[1]*t[0]+e[4]*t[1]+e[7]*t[2]+e[10],e[2]*t[0]+e[5]*t[1]+e[8]*t[2]+e[11]],eV=(e,t,r)=>({vector:[e[0]*t[0]+e[3]*t[1]+e[6]*t[2],e[1]*t[0]+e[4]*t[1]+e[7]*t[2],e[2]*t[0]+e[5]*t[1]+e[8]*t[2]],origin:[e[0]*r[0]+e[3]*r[1]+e[6]*r[2]+e[9],e[1]*r[0]+e[4]*r[1]+e[7]*r[2]+e[10],e[2]*r[0]+e[5]*r[1]+e[8]*r[2]+e[11]]}),eB=(e,t)=>[e[0]*t[0]+e[3]*t[1]+e[6]*t[2],e[1]*t[0]+e[4]*t[1]+e[7]*t[2],e[2]*t[0]+e[5]*t[1]+e[8]*t[2],e[0]*t[3]+e[3]*t[4]+e[6]*t[5],e[1]*t[3]+e[4]*t[4]+e[7]*t[5],e[2]*t[3]+e[5]*t[4]+e[8]*t[5],e[0]*t[6]+e[3]*t[7]+e[6]*t[8],e[1]*t[6]+e[4]*t[7]+e[7]*t[8],e[2]*t[6]+e[5]*t[7]+e[8]*t[8],e[0]*t[9]+e[3]*t[10]+e[6]*t[11]+e[9],e[1]*t[9]+e[4]*t[10]+e[7]*t[11]+e[10],e[2]*t[9]+e[5]*t[10]+e[8]*t[11]+e[11]],eq=e=>e[0]*e[4]*e[8]-e[0]*e[7]*e[5]-e[3]*e[1]*e[8]+e[3]*e[7]*e[2]+e[6]*e[1]*e[5]-e[6]*e[4]*e[2],eT=e=>{let t=eq(e);if(1e-6>Math.abs(t)||Number.isNaN(t)||!Number.isFinite(e[9])||!Number.isFinite(e[10])||!Number.isFinite(e[11]))return;let r=[e[4]*e[8]-e[7]*e[5],-e[1]*e[8]+e[7]*e[2],e[1]*e[5]-e[4]*e[2],-e[3]*e[8]+e[6]*e[5],e[0]*e[8]-e[6]*e[2],-e[0]*e[5]+e[3]*e[2],e[3]*e[7]-e[6]*e[4],-e[0]*e[7]+e[6]*e[1],e[0]*e[4]-e[3]*e[1],-e[3]*e[7]*e[11]+e[3]*e[8]*e[10]+e[6]*e[4]*e[11]-e[6]*e[5]*e[10]-e[9]*e[4]*e[8]+e[9]*e[5]*e[7],e[0]*e[7]*e[11]-e[0]*e[8]*e[10]-e[6]*e[1]*e[11]+e[6]*e[2]*e[10]+e[9]*e[1]*e[8]-e[9]*e[2]*e[7],-e[0]*e[4]*e[11]+e[0]*e[5]*e[10]+e[3]*e[1]*e[11]-e[3]*e[2]*e[10]-e[9]*e[1]*e[5]+e[9]*e[2]*e[4]],n=1/t;return r.map(e=>e*n)},eR=(e=0,t=0,r=0)=>eN.concat(e,t,r),eU=(e,t,r,n,i)=>{let o=eN.concat([0,1,2].map(e=>t[e]||0)),a=Math.cos(e),s=Math.sin(e);return o[3*r+r]=a,o[3*r+n]=(i?1:-1)*s,o[3*n+r]=(i?-1:1)*s,o[3*n+n]=a,o},eD=(e,t=[0,0,0])=>eU(e,t,1,2,!0),eG=(e,t=[0,0,0])=>eU(e,t,0,2,!1),eW=(e,t=[0,0,0])=>eU(e,t,0,1,!0),eZ=(e,t=[0,0,1],r=[0,0,0])=>{let n=[0,1,2].map(e=>r[e]||0),[i,o,a]=$(3,ef(t)),s=Math.cos(e),c=Math.sin(e),l=1-s,u=eN.concat(-n[0],-n[1],-n[2]);return eB(eN.concat(n[0],n[1],n[2]),eB([l*i*i+s,l*o*i+a*c,l*a*i-o*c,l*i*o-a*c,l*o*o+s,l*a*o+i*c,l*i*a+o*c,l*o*a-i*c,l*a*a+s,0,0,0],u))},eJ=(e=1,t=[0,0,0])=>[e,0,0,0,e,0,0,0,e,-(e*t[0])+t[0],-(e*t[1])+t[1],-(e*t[2])+t[2]],eH=(e,t=[0,0])=>{let r=Math.atan2(e[1],e[0]),n=Math.cos(r),i=Math.sin(r),o=Math.cos(-r),a=Math.sin(-r),s=n*o+i*a,c=-(n*a)+i*o,l=i*o+-n*a,u=-(i*a)+-n*o,f=t[0]+-(s*t[0])+-t[1]*l,p=t[1]+-(c*t[0])+-t[1]*u;return[s,c,0,l,u,0,0,0,1,f,p,0]};var eY=Object.freeze({__proto__:null,identity3x3:eN,identity3x4:ez,isIdentity3x4:eF,multiplyMatrix3Vector3:eI,multiplyMatrix3Line3:eV,multiplyMatrices3:eB,determinant3:eq,invertMatrix3:eT,makeMatrix3Translate:eR,makeMatrix3RotateX:eD,makeMatrix3RotateY:eG,makeMatrix3RotateZ:eW,makeMatrix3Rotate:eZ,makeMatrix3Scale:eJ,makeMatrix3ReflectZ:eH});let eX=(e,t)=>({vector:e||[],origin:t||[]}),eK=function(){if(arguments[0]instanceof B.vector)return arguments[0];let e=I(arguments);return e.length>0&&"object"==typeof e[0]&&null!==e[0]&&!Number.isNaN(e[0].x)&&(e=["x","y","z"].map(t=>e[0][t]).filter(Z)),e.filter(e=>"number"==typeof e)},eQ=function(){return F(arguments).map(e=>eK(e))},e0=function(){if(arguments[0]instanceof B.segment)return arguments[0];let e=F(arguments);return 4===e.length?[[e[0],e[1]],[e[2],e[3]]]:e.map(e=>eK(e))},e1=function(){let e=F(arguments);return 0===e.length?eX([],[]):e[0]instanceof B.line||e[0]instanceof B.ray||e[0]instanceof B.segment?e[0]:e[0].constructor===Object&&void 0!==e[0].vector?eX(e[0].vector||[],e[0].origin||[]):"number"==typeof e[0]?eX(eK(e)):eX(...e.map(e=>eK(e)))},e2=(e=0,t=0,r=0,n=0)=>({x:e,y:t,width:r,height:n}),e3=function(){if(arguments[0]instanceof B.rect)return arguments[0];let e=I(arguments);if(e.length>0&&"object"==typeof e[0]&&null!==e[0]&&!Number.isNaN(e[0].width))return e2(...["x","y","width","height"].map(t=>e[0][t]).filter(Z));let t=e.filter(e=>"number"==typeof e);return e2(...t.length<4?[,,...t]:t)},e8=(e=1,...t)=>({radius:e,origin:[...t]}),e4=function(){if(arguments[0]instanceof B.circle)return arguments[0];let e=eQ(arguments),t=I(arguments).filter(e=>"number"==typeof e);if(2==arguments.length){if(1===e[1].length)return e8(e[1][0],...e[0]);if(1===e[0].length)return e8(e[0][0],...e[1]);if(e[0].length>1&&e[1].length>1)return e8(ej(...e),...e[0])}else switch(t.length){case 0:break;case 1:return e8(t[0],0,0,0);default:return e8(t.pop(),...t)}return e8(1,0,0,0)},e5=[[0,1,3,4,9,10],[0,1,2,3,4,5,6,7,8,9,10,11],[0,1,2,void 0,3,4,5,void 0,6,7,8,void 0,9,10,11]];[11,7,3].forEach(e=>delete e5[2][e]);let e6=function(){var e;let t=I(arguments),r=[...ez];return e5[(e=t.length)<8?0:e<13?1:2].forEach((e,n)=>{null!=t[n]&&(r[e]=t[n])}),r};var e9=Object.freeze({__proto__:null,getVector:eK,getVectorOfVectors:eQ,getSegment:e0,getLine:e1,getRay:e1,getRectParams:e2,getRect:e3,getCircle:e4,getMatrix3x4:e6});let e7=({vector:e,origin:t})=>{let r=ec(e),n=ew(e),i=ey(t,n)/r;return{normal:eh(n,1/r),distance:i}},te=({normal:e,distance:t})=>({vector:eS(e),origin:eh(e,t)});var tt=Object.freeze({__proto__:null,rayLineToUniqueLine:e7,uniqueLineToRayLine:te});let tr=(e,t,r)=>{let n,i=t.map((t,n)=>({o:t,i:n,d:r(e,t)})),o=1/0;for(let e=0;e<i.length;e+=1)i[e].d<o&&(n=e,o=i[e].d);return n},tn=(e,t=q)=>{let r=((e,t=X,r=q)=>{let n=[0];for(let i=1;i<e.length;i+=1)switch(t(e[i][0],e[n[0]][0],r)){case 0:n.push(i);break;case 1:n=[i]}return n})(e,X,t),n=0;for(let t=1;t<r.length;t+=1)e[r[t]][1]<e[r[n]][1]&&(n=t);return r[n]},ti=(e,t,r,n,i=q)=>{t=$(e.length,t),r=$(e.length,r);let o=eu(e),a=ey(e,ev(r,t));return em(t,eh(e,n(a/o,i)))},to=(e,t)=>{let r=e.map((e,t,r)=>ev(r[(t+1)%r.length],e));return e.map((e,n)=>ti(r[n],e,t,ea)).map((e,r)=>({point:e,i:r,distance:eA(e,t)})).sort((e,t)=>e.distance-t.distance).shift()},ta=(e,t,r)=>em(t,eh(ef(ev(r,t)),e));var ts=Object.freeze({__proto__:null,smallestComparisonSearch:tr,minimum2DPointIndex:tn,nearestPoint2:(e,t)=>{let r=tr(e,t,ej);return void 0===r?void 0:t[r]},nearestPoint:(e,t)=>{let r=tr(e,t,eA);return void 0===r?void 0:t[r]},nearestPointOnLine:ti,nearestPointOnPolygon:to,nearestPointOnCircle:ta});let tc=(e,t=q)=>{let r=[[0]],n=0;for(let i=1;i<e.length;i+=1)Y(e[i],e[i-1],t)?r[n].push(i):(n=r.length,r.push([i]));return r},tl=(e=[],t=q)=>{let r=tn(e,t),n=e.map(t=>e_(t,e[r])).map(e=>ep(e)).map(e=>eb([0,1],e)),i=n.map((e,t)=>({a:e,i:t})).sort((e,t)=>e.a-t.a).map(e=>e.i).filter(e=>e!==r);return[[r]].concat(tc(i.map(e=>n[e]),t).map(e=>e.map(e=>i[e])).map(t=>1===t.length?t:t.map(t=>({i:t,len:ej(e[t],e[r])})).sort((e,t)=>e.len-t.len).map(e=>e.i)))};var tu=Object.freeze({__proto__:null,sortPointsAlongVector2:(e,t)=>e.map(e=>({point:e,d:e[0]*t[0]+e[1]*t[1]})).sort((e,t)=>e.d-t.d).map(e=>e.point),clusterIndicesOfSortedNumbers:tc,radialSortPointIndices:tl});let tf=[1,0,0,1],tp=tf.concat(0,0),th=e=>e[0]*e[3]-e[1]*e[2],td=(e,t=[0,0])=>{let r=Math.cos(e),n=Math.sin(e);return[r,n,-n,r,t[0],t[1]]};var tm=Object.freeze({__proto__:null,identity2x2:tf,identity2x3:tp,multiplyMatrix2Vector2:(e,t)=>[e[0]*t[0]+e[2]*t[1]+e[4],e[1]*t[0]+e[3]*t[1]+e[5]],multiplyMatrix2Line2:(e,t,r)=>({vector:[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1]],origin:[e[0]*r[0]+e[2]*r[1]+e[4],e[1]*r[0]+e[3]*r[1]+e[5]]}),multiplyMatrices2:(e,t)=>[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]],determinant2:th,invertMatrix2:e=>{let t=th(e);if(!(1e-6>Math.abs(t)||Number.isNaN(t))&&Number.isFinite(e[4])&&Number.isFinite(e[5]))return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[3]*e[4])/t,(e[1]*e[4]-e[0]*e[5])/t]},makeMatrix2Translate:(e=0,t=0)=>tf.concat(e,t),makeMatrix2Scale:(e,t,r=[0,0])=>[e,0,0,t,-(e*r[0])+r[0],-(t*r[1])+r[1]],makeMatrix2Rotate:td,makeMatrix2Reflect:(e,t=[0,0])=>{let r=Math.atan2(e[1],e[0]),n=Math.cos(r),i=Math.sin(r),o=Math.cos(-r),a=Math.sin(-r),s=n*o+i*a,c=-(n*a)+i*o,l=i*o+-n*a,u=-(i*a)+-n*o,f=t[0]+-(s*t[0])+-t[1]*l,p=t[1]+-(c*t[0])+-t[1]*u;return[s,c,l,u,f,p]}});let tg=(e,t,r=ee,n=q)=>e.map((e,t,r)=>[e,r[(t+1)%r.length]]).map(e=>ek(ef(ev(e[1],e[0])),ev(t,e[0]))).map(e=>r(e,n)).map((e,t,r)=>e===r[0]).reduce((e,t)=>e&&t,!0),tv=(e,t,r)=>em(t,eh(e,r)),t_=(e,t,r,n=Q,i=et,o=q)=>{let a=e.map((e,t,r)=>[ev(r[(t+1)%r.length],e),e]).map(e=>((e,t,r,n,i=en,o=q)=>{if(Math.abs(ek(ef(e),ef(r)))<o)return;let a=ek(e,r),s=ev(n,t),c=eP(s),l=ek(s,r)/a;if(i(-(ek(c,e)/a),o/ec(r)))return l})(t,r,e[0],e[1],en,o)).filter(Z).sort((e,t)=>e-t);if(a.length<2)return;let s=((e,t,r)=>{let n=0,i=e.length-1;for(;n<i&&!t(e[n+1]-e[n],r);)n+=1;for(;i>n&&!t(e[i]-e[i-1],r);)i-=1;if(!(n>=i))return[e[n],e[i]]})(a,n,2*o/ec(t));if(void 0===s)return;let c=s.map(e=>i(e)?e:e<.5?0:1);if(!(Math.abs(c[0]-c[1])<2*o/ec(t)))return tg(e,tv(t,r,(c[0]+c[1])/2),n,o)?c.map(e=>tv(t,r,e)):void 0},ty=(e,t)=>{for(;e<0;)e+=R;for(;t<0;)t+=R;for(;e>R;)e-=R;for(;t>R;)t-=R;let r=e-t;return r>=0?r:R-(t-e)},tb=(e,t)=>{for(;e<0;)e+=R;for(;t<0;)t+=R;for(;e>R;)e-=R;for(;t>R;)t-=R;let r=t-e;return r>=0?r:R-(e-t)},tE=(e,t)=>{let r=t[0]*e[0]+t[1]*e[1],n=Math.atan2(t[0]*e[1]-t[1]*e[0],r);return n<0&&(n+=R),n},tx=(e,t)=>{let r=e[0]*t[0]+e[1]*t[1],n=Math.atan2(e[0]*t[1]-e[1]*t[0],r);return n<0&&(n+=R),n},tO=(e,t)=>H(J(e)-tE(e,t)/2),tk=(e,t)=>H(J(e)+tx(e,t)/2),tM=(e,t,r)=>{let n=ty(t,r)/e;return Array.from(Array(e-1)).map((e,r)=>t+n*(r+1))},tA=(e,t,r)=>{let n=tb(t,r)/e;return Array.from(Array(e-1)).map((e,r)=>t+n*(r+1))},tj=(e,t,r)=>tM(e,Math.atan2(t[1],t[0]),Math.atan2(r[1],r[0])).map(H),tP=(e,t,r)=>tA(e,Math.atan2(t[1],t[0]),Math.atan2(r[1],r[0])).map(H),tw=(e,t,r,n,i=q)=>{let o=ek(e,r),a=ey(e,r),s=o>-i?[tk(e,r)]:[tO(e,r)];s[1]=o>-i?ew(s[0]):eS(s[0]);let c=((n[0]-t[0])*r[1]-r[0]*(n[1]-t[1]))/o,l=Math.abs(ek(...[e,r].map(e=>ef(e))))<i,u=l?eE(t,n):[t[0]+e[0]*c,t[1]+e[1]*c],f=s.map(e=>({vector:e,origin:u}));return l&&delete f[+(a>-i)],f},tS=function(){let e=Array.from(arguments).flat(),t=e.map((e,t)=>t).sort((t,r)=>e[t]-e[r]);return t.slice(t.indexOf(0),t.length).concat(t.slice(0,t.indexOf(0)))},t$=function(){let e=Array.from(arguments).flat();return tS(e).map(t=>e[t]).map((e,t,r)=>[e,r[(t+1)%r.length]]).map(e=>tb(e[0],e[1]))},tC=(e,t,r,n=q)=>{let i=ek(ep(e_(t,e)),ep(e_(r,e)));return Y(i,0,n)?Y(ej(e,t)+ej(t,r),ej(e,r))?0:void 0:Math.sign(i)};var tL=Object.freeze({__proto__:null,isCounterClockwiseBetween:(e,t,r)=>{for(;r<t;)r+=R;for(;e>t;)e-=R;for(;e<t;)e+=R;return e<r},clockwiseAngleRadians:ty,counterClockwiseAngleRadians:tb,clockwiseAngle2:tE,counterClockwiseAngle2:tx,clockwiseBisect2:tO,counterClockwiseBisect2:tk,clockwiseSubsectRadians:tM,counterClockwiseSubsectRadians:tA,clockwiseSubsect2:tj,counterClockwiseSubsect2:tP,bisectLines2:tw,counterClockwiseOrderRadians:tS,counterClockwiseOrder2:function(){return tS(F(arguments).map(J))},counterClockwiseSectorsRadians:t$,counterClockwiseSectors2:function(){return t$(eQ(arguments).map(J))},threePointTurnDirection:tC});let tN=(e=[],t=!1,r=q)=>{if(e.length<2)return[];let n=tl(e,r).map(e=>1===e.length?e:e.concat(e.slice(0,-1).reverse())).flat();n.push(n[0]);let i=[n[0]],o=1,a={"-1":()=>i.pop(),1:e=>{i.push(e),o+=1},undefined:()=>{o+=1}};for(a[0]=t?a["1"]:a["-1"];o<n.length;){if(i.length<2){i.push(n[o]),o+=1;continue}let t=i[i.length-2],s=i[i.length-1],c=n[o];a[tC(...[t,s,c].map(t=>e[t]),r)](c)}return i.pop(),i},tz=(e=[],t=!1,r=q)=>tN(e,t,r).map(t=>e[t]);var tF=Object.freeze({__proto__:null,convexHullIndices:tN,convexHull:tz});let tI=(e,t,r,n,i=et,o=et,a=q)=>{if(Math.abs(ek(ef(e),ef(r)))<a)return;let s=ek(e,r),c=[n[0]-t[0],n[1]-t[1]],l=[-c[0],-c[1]],u=ek(c,r)/s,f=-(ek(l,e)/s);if(i(u,a/ec(e))&&o(f,a/ec(r)))return em(t,eh(e,u))};var tV=Object.freeze({__proto__:null,pleat:(e,t,r)=>{let n,i,o,a=e1(t),s=e1(r);return eC(a.vector,s.vector)?(n=Array.from(Array(e-1)).map((t,r)=>(r+1)/e).map(e=>eO(a.origin,s.origin,e)),i=[...a.vector],n.map(e=>({origin:e,vector:i}))):(o=tI(a.vector,a.origin,s.vector,s.origin),(tE(a.vector,s.vector)<tx(a.vector,s.vector)?tj(e,a.vector,s.vector):tP(e,a.vector,s.vector)).map(e=>({origin:o,vector:e})))}});let tB=e=>Array.from(Array(Math.floor(e))).map((t,r)=>r/e*R),tq=(e,t)=>e.map(e=>[t*Math.cos(e),t*Math.sin(e)]).map(e=>e.map(e=>N(e,14))),tT=(e=3,t=1)=>tq(tB(e),t),tR=(e=3,t=1)=>{let r=Math.PI/e;return tq(tB(e).map(e=>e+r),t)},tU=function(e,t,r){let n=t[0]-e[0],i=t[1]-e[1],o=r[0]-e[0],a=r[1]-e[1],s=n*(e[0]+t[0])+i*(e[1]+t[1]),c=o*(e[0]+r[0])+a*(e[1]+r[1]),l=2*(n*(r[1]-t[1])-i*(r[0]-t[0]));if(Math.abs(l)<q){let n=Math.min(e[0],t[0],r[0]),i=Math.min(e[1],t[1],r[1]),o=(Math.max(e[0],t[0],r[0])-n)*.5,a=(Math.max(e[1],t[1],r[1])-i)*.5;return{origin:[n+o,i+a],radius:Math.sqrt(o*o+a*a)}}let u=[(a*s-i*c)/l,(n*c-o*s)/l],f=u[0]-e[0],p=u[1]-e[1];return{origin:u,radius:Math.sqrt(f*f+p*p)}},tD=e=>.5*e.map((e,t,r)=>{let n=r[(t+1)%r.length];return e[0]*n[1]-n[0]*e[1]}).reduce(W,0),tG=e=>{let t=1/(6*tD(e));return e.map((e,t,r)=>{let n=r[(t+1)%r.length],i=e[0]*n[1]-n[0]*e[1];return[(e[0]+n[0])*i,(e[1]+n[1])*i]}).reduce((e,t)=>[e[0]+t[0],e[1]+t[1]],[0,0]).map(e=>e*t)},tW=(e,t=0)=>{let r=Array(e[0].length).fill(1/0),n=Array(e[0].length).fill(-1/0);e.forEach(e=>e.forEach((e,i)=>{e<r[i]&&(r[i]=e-t),e>n[i]&&(n[i]=e+t)}));let i=n.map((e,t)=>e-r[t]);return{min:r,max:n,span:i}};var tZ=Object.freeze({__proto__:null,makePolygonCircumradius:tT,makePolygonCircumradiusSide:tR,makePolygonInradius:(e=3,t=1)=>tT(e,t/Math.cos(Math.PI/e)),makePolygonInradiusSide:(e=3,t=1)=>tR(e,t/Math.cos(Math.PI/e)),makePolygonSideLength:(e=3,t=1)=>tT(e,t/2/Math.sin(Math.PI/e)),makePolygonSideLengthSide:(e=3,t=1)=>tR(e,t/2/Math.sin(Math.PI/e)),makePolygonNonCollinear:(e,t=q)=>{let r=e.map((e,t,r)=>[e,r[(t+1)%r.length]]).map(e=>ev(e[1],e[0])).map((e,t,r)=>[e,r[(t+r.length-1)%r.length]]).map(e=>!eC(e[1],e[0],t));return e.filter((e,t)=>r[t])},circumcircle:tU,signedArea:tD,centroid:tG,boundingBox:tW});let tJ=(e,t,r,n=er,i=q)=>{let o=ev(r,t),a=eu(e),s=Math.sqrt(a);if(s<i)return!1;let c=ek(o,e.map(e=>e/s)),l=ey(o,e)/a;return Math.abs(c)<i&&n(l,i/s)},tH=(e,t,r)=>{let n=e.map((e,n)=>({point:tJ(t,r,e,et)?e:null,at_index:n})).filter(e=>null!=e.point),i=e.map((e,n,i)=>({point:tI(t,r,ev(e,i[(n+1)%i.length]),i[(n+1)%i.length],er,ei),at_index:n})).filter(e=>null!=e.point);if(2===i.length){let t=i.slice().sort((e,t)=>e.at_index-t.at_index),r=e.slice(t[1].at_index+1).concat(e.slice(0,t[0].at_index+1));r.push(t[0].point),r.push(t[1].point);let n=e.slice(t[0].at_index+1,t[1].at_index+1);return n.push(t[1].point),n.push(t[0].point),[r,n]}if(1===i.length&&1===n.length){n[0].type="v",i[0].type="e";let t=n.concat(i).sort((e,t)=>e.at_index-t.at_index),r=e.slice(t[1].at_index+1).concat(e.slice(0,t[0].at_index+1));"e"===t[0].type&&r.push(t[0].point),r.push(t[1].point);let o=e.slice(t[0].at_index+1,t[1].at_index+1);return"e"===t[1].type&&o.push(t[1].point),o.push(t[0].point),[r,o]}if(2===n.length){let t=n.slice().sort((e,t)=>e.at_index-t.at_index);return[e.slice(t[1].at_index).concat(e.slice(0,t[0].at_index+1)),e.slice(t[0].at_index,t[1].at_index+1)]}return[e.slice()]},tY=(e,t,r)=>{let n=e.map((e,t)=>({vector:r[t],origin:e})).map((e,t,r)=>tI(e.vector,e.origin,r[(t+1)%r.length].vector,r[(t+1)%r.length].origin,ee,ee)),i=t.map((e,t)=>ti(e.vector,e.origin,n[t],e=>e));if(3===e.length)return e.map(e=>({type:"skeleton",points:[e,n[0]]})).concat([{type:"perpendicular",points:[i[0],n[0]]}]);let o=n.map((e,t)=>eA(e,i[t])),a=0;o.forEach((e,t)=>{e<o[a]&&(a=t)});let s=[{type:"skeleton",points:[e[a],n[a]]},{type:"skeleton",points:[e[(a+1)%e.length],n[a]]},{type:"perpendicular",points:[i[a],n[a]]}],c=tO(eP(t[(a+t.length-1)%t.length].vector),t[(a+1)%t.length].vector),l=a===e.length-1;return e.splice(a,2,n[a]),t.splice(a,1),r.splice(a,2,c),l&&(e.splice(0,1),r.splice(0,1),t.push(t.shift())),s.concat(tY(e,t,r))},tX=e=>{let t=e.map((e,t,r)=>[e,r[(t+1)%r.length]]).map(e=>({vector:ev(e[1],e[0]),origin:e[0]})),r=e.map((e,t,r)=>[(t-1+r.length)%r.length,t,(t+1)%r.length].map(e=>r[e])).map(e=>[ev(e[0],e[1]),ev(e[2],e[1])]).map(e=>tO(...e));return tY([...e],t,r)};var tK=Object.freeze({__proto__:null,collinearBetween:(e,t,r,n=!1,i=q)=>[e,r].map(e=>K(t,e)).reduce((e,t)=>e||t,!1)?n:Y(1,ey(...[[e,t],[t,r]].map(e=>ev(e[1],e[0])).map(e=>ef(e))),i)}),tQ=Object.freeze({__proto__:null,enclosingBoundingBoxes:(e,t)=>{let r=Math.min(e.min.length,t.min.length);for(let n=0;n<r;n+=1)if(t.min[n]<e.min[n]||t.max[n]>e.max[n])return!1;return!0},enclosingPolygonPolygon:(e,t,r=Q)=>{let n=e.map(e=>tg(t,e,r)).reduce((e,t)=>e||t,!1),i=t.map(e=>tg(t,e,r)).reduce((e,t)=>e&&t,!0);return!n&&i}});let t0=(e,t,r)=>{let n=t[0]-e[0],i=t[1]-e[1],o=n*Math.cos(r)+i*Math.sin(r),a=i*Math.cos(r)-n*Math.sin(r);return[e[0]+o,e[1]+a]},t1=(e,t,r,n,i=q)=>{var o;let a=e<r?e:r,s=e<r?r:e,c=e<r?t:n,l=e<r?n:t,u=[c[0]-l[0],c[1]-l[1]],f=Math.sqrt(u[0]**2+u[1]**2);if(f<i)return;let p=u.map((e,t)=>e/f*s+l[t]);if(Math.abs(s+a-f)<i||Math.abs(s-(a+f))<i)return[p];if(f+a<s||s+a<f)return;let h=(o=(a*a-f*f-s*s)/(-2*f*s))>=1?0:o<=-1?Math.PI:Math.acos(o);return[t0(l,p,+h),t0(l,p,-h)]},t2=(e,t,r,n,i=et,o=q)=>{let a=r[0]**2+r[1]**2,s=Math.sqrt(a),c=0===s?r:r.map(e=>e/s),l=ew(c),u=ek(ev(n,t),c);if(Math.abs(u)>e+o)return;let f=Math.sqrt(e**2-u**2),p=(e,r)=>t[r]-l[r]*u+c[r]*e,h=Math.abs(e-Math.abs(u))<o?[f].map(e=>[e,e].map(p)):[-f,f].map(e=>[e,e].map(p)),d=h.map(e=>e.map((e,t)=>e-n[t])).map(e=>e[0]*r[0]+r[1]*e[1]).map(e=>e/a);return h.filter((e,t)=>i(d[t],o))},t3=e=>{for(let t=1;t<e.length;t+=1)if(!K(e[0],e[t]))return[e[0],e[t]]},t8=(e,t,r,n=en,i=et,o=q)=>{let a=e.map((e,t,r)=>[e,r[(t+1)%r.length]]).map(e=>tI(ev(e[1],e[0]),e[0],t,r,n,i,o)).filter(e=>void 0!==e);switch(a.length){case 0:return;case 1:return[a];default:return t3(a)||[a[0]]}},t4=(e,t,r,n=en,i=er,o=q)=>{let a,s=t8(e,t,r,n,i,o);switch(i){case ee:a=Q;break;case ei:a=en;break;default:return s}let c=t8(e,t,r,en,a,o);if(void 0===c)return;let l=t3(c);if(void 0===l)switch(i){case ee:return tg(e,r,ee,o)?c:void 0;case ei:return tg(e,em(r,t),ee,o)||tg(e,r,ee,o)?c:void 0;default:return}return tg(e,eE(...l),ee,o)?l:s},t5={polygon:e=>[e],rect:e=>[e],circle:e=>[e.radius,e.origin],line:e=>[e.vector,e.origin],ray:e=>[e.vector,e.origin],segment:e=>[e.vector,e.origin]},t6={polygon:{line:(e,t,r,n,i)=>t4(...e,...t,en,n,i),ray:(e,t,r,n,i)=>t4(...e,...t,en,n,i),segment:(e,t,r,n,i)=>t4(...e,...t,en,n,i)},circle:{circle:(e,t,r,n,i)=>t1(...e,...t,i),line:(e,t,r,n,i)=>t2(...e,...t,n,i),ray:(e,t,r,n,i)=>t2(...e,...t,n,i),segment:(e,t,r,n,i)=>t2(...e,...t,n,i)},line:{polygon:(e,t,r,n,i)=>t4(...t,...e,en,r,i),circle:(e,t,r,n,i)=>t2(...t,...e,r,i),line:(e,t,r,n,i)=>tI(...e,...t,r,n,i),ray:(e,t,r,n,i)=>tI(...e,...t,r,n,i),segment:(e,t,r,n,i)=>tI(...e,...t,r,n,i)},ray:{polygon:(e,t,r,n,i)=>t4(...t,...e,en,r,i),circle:(e,t,r,n,i)=>t2(...t,...e,r,i),line:(e,t,r,n,i)=>tI(...t,...e,n,r,i),ray:(e,t,r,n,i)=>tI(...e,...t,r,n,i),segment:(e,t,r,n,i)=>tI(...e,...t,r,n,i)},segment:{polygon:(e,t,r,n,i)=>t4(...t,...e,en,r,i),circle:(e,t,r,n,i)=>t2(...t,...e,r,i),line:(e,t,r,n,i)=>tI(...t,...e,n,r,i),ray:(e,t,r,n,i)=>tI(...t,...e,n,r,i),segment:(e,t,r,n,i)=>tI(...e,...t,r,n,i)}},t9={polygon:"polygon",rect:"polygon",circle:"circle",line:"line",ray:"ray",segment:"segment"},t7={polygon:ee,rect:ee,circle:ee,line:er,ray:ee,segment:ei},re=function(e,t,r){let n=S(e),i=S(t),o=t9[n],a=t9[i],s=t5[n](e),c=t5[i](t),l=e.domain_function||t7[n],u=t.domain_function||t7[i];return t6[o][a](s,c,l,u,r)},rt=(e,t,r=q)=>{for(let n=0;n<2;n+=1){let i=0===n?e:t,o=0===n?t:e;for(let e=0;e<i.length;e+=1){let t=i[e],n=ew(ev(i[(e+1)%i.length],i[e])),a=o.map(e=>ev(e,t)).map(e=>ey(n,e)),s=ey(n,ev(i[(e+2)%i.length],t))>0;if(a.map(e=>s?e<r:e>-r).reduce((e,t)=>e&&t,!0))return!1}}return!0},rr=(e,t,r,n=ee,i=q)=>n(e-ej(t,r),i),rn=(e,t,r,n,i=er,o=er,a=q)=>{let s=ek(e,r),c=[n[0]-t[0],n[1]-t[1]];if(Math.abs(s)<a){if(Math.abs(ek(c,e))>a)return!1;let t=em(c,r),n=ey(e,e),i=ey(c,e)/n,o=ey(t,e)/n;return!((i<o?i:o)>1-a)&&!((i<o?o:i)<a)}let l=[-c[0],-c[1]],u=ek(c,r)/s,f=-(ek(l,e)/s);return i(u,a/ec(e))&&o(f,a/ec(r))},ri={polygon:e=>[e],rect:e=>[e],circle:e=>[e.radius,e.origin],line:e=>[e.vector,e.origin],ray:e=>[e.vector,e.origin],segment:e=>[e.vector,e.origin],vector:e=>[e]},ro={polygon:{polygon:(e,t,r,n,i)=>rt(...e,...t,i),vector:(e,t,r,n,i)=>tg(...e,...t,r,i)},circle:{vector:(e,t,r,n,i)=>rr(...e,...t,ee,i)},line:{line:(e,t,r,n,i)=>rn(...e,...t,r,n,i),ray:(e,t,r,n,i)=>rn(...e,...t,r,n,i),segment:(e,t,r,n,i)=>rn(...e,...t,r,n,i),vector:(e,t,r,n,i)=>tJ(...e,...t,r,i)},ray:{line:(e,t,r,n,i)=>rn(...t,...e,n,r,i),ray:(e,t,r,n,i)=>rn(...e,...t,r,n,i),segment:(e,t,r,n,i)=>rn(...e,...t,r,n,i),vector:(e,t,r,n,i)=>tJ(...e,...t,r,i)},segment:{line:(e,t,r,n,i)=>rn(...t,...e,n,r,i),ray:(e,t,r,n,i)=>rn(...t,...e,n,r,i),segment:(e,t,r,n,i)=>rn(...e,...t,r,n,i),vector:(e,t,r,n,i)=>tJ(...e,...t,r,i)},vector:{polygon:(e,t,r,n,i)=>tg(...t,...e,n,i),circle:(e,t,r,n,i)=>rr(...t,...e,ee,i),line:(e,t,r,n,i)=>tJ(...t,...e,n,i),ray:(e,t,r,n,i)=>tJ(...t,...e,n,i),segment:(e,t,r,n,i)=>tJ(...t,...e,n,i),vector:(e,t,r,n,i)=>K(...e,...t,i)}},ra={polygon:"polygon",rect:"polygon",circle:"circle",line:"line",ray:"ray",segment:"segment",vector:"vector"},rs={polygon:ee,rect:ee,circle:ee,line:er,ray:ee,segment:ei,vector:er},rc=function(e,t,r){let n=S(e),i=S(t),o=ra[n],a=ra[i],s=ri[n](e),c=ri[i](t),l=e.domain_function||rs[n],u=t.domain_function||rs[i];return ro[o][a](s,c,l,u,r)},rl={preserve:{magnitude:function(){return ec(this)},isEquivalent:function(){return K(this,eK(arguments))},isParallel:function(){return eC(...C(this,eK(arguments)))},isCollinear:function(e){return rc(this,e)},dot:function(){return ey(...C(this,eK(arguments)))},distanceTo:function(){return eA(...C(this,eK(arguments)))},overlap:function(e){return rc(this,e)}},vector:{copy:function(){return[...this]},normalize:function(){return ef(this)},scale:function(){return eh(this,arguments[0])},flip:function(){return eP(this)},rotate90:function(){return ew(this)},rotate270:function(){return eS(this)},cross:function(){return eM($(3,this),$(3,eK(arguments)))},transform:function(){return eI(e6(arguments),$(3,this))},add:function(){return em(this,$(this.length,eK(arguments)))},subtract:function(){return ev(this,$(this.length,eK(arguments)))},rotateZ:function(e,t){return eI(e6(td(e,t)),$(3,this))},lerp:function(e,t){return eO(this,$(this.length,eK(e)),t)},midpoint:function(){return eE(...C(this,eK(arguments)))},bisect:function(){return tk(this,eK(arguments))}}},ru={};Object.keys(rl.preserve).forEach(e=>{ru[e]=rl.preserve[e]}),Object.keys(rl.vector).forEach(e=>{ru[e]=function(){return B.vector(...rl.vector[e].apply(this,arguments))}});var rf={vector:{P:Array.prototype,A:function(){this.push(...eK(arguments))},G:{x:function(){return this[0]},y:function(){return this[1]},z:function(){return this[2]}},M:ru,S:{fromAngle:function(e){return B.vector(Math.cos(e),Math.sin(e))},fromAngleDegrees:function(e){return B.vector.fromAngle(e*T)}}}},rp={fromPoints:function(){let e=eQ(arguments);return this.constructor({vector:ev(e[1],e[0]),origin:e[0]})},fromAngle:function(){let e=arguments[0]||0;return this.constructor({vector:[Math.cos(e),Math.sin(e)],origin:[0,0]})},perpendicularBisector:function(){let e=eQ(arguments);return this.constructor({vector:ew(ev(e[1],e[0])),origin:ex(e[0],e[1])})}};let rh={isParallel:function(){let e=C(this.vector,e1(arguments).vector);return eC(...e)},isCollinear:function(){let e=e1(arguments);return tJ(this.vector,this.origin,e.origin)&&eC(...C(this.vector,e.vector))},isDegenerate:function(e=q){return e$(this.vector,e)},reflectionMatrix:function(){return B.matrix(eH(this.vector,this.origin))},nearestPoint:function(){let e=eK(arguments);return B.vector(ti(this.vector,this.origin,e,this.clip_function))},transform:function(){let e=this.dimension,t=eV(e6(arguments),$(3,this.vector),$(3,this.origin));return this.constructor($(e,t.vector),$(e,t.origin))},translate:function(){let e=em(...C(this.origin,eK(arguments)));return this.constructor(this.vector,e)},intersect:function(){return re(this,...arguments)},overlap:function(){return rc(this,...arguments)},bisect:function(e,t){let r=e1(e);return tw(this.vector,this.origin,r.vector,r.origin,t).map(e=>this.constructor(e))}};var rd={line:{P:Object.prototype,A:function(){let e=e1(...arguments);this.vector=B.vector(e.vector),this.origin=B.vector($(this.vector.length,e.origin));let t=e7({vector:this.vector,origin:this.origin});this.normal=t.normal,this.distance=t.distance,Object.defineProperty(this,"domain_function",{writable:!0,value:et})},G:{dimension:function(){return[this.vector,this.origin].map(e=>e.length).reduce((e,t)=>Math.max(e,t),0)}},M:Object.assign({},rh,{inclusive:function(){return this.domain_function=et,this},exclusive:function(){return this.domain_function=er,this},clip_function:e=>e,svgPath:function(e=2e4){let t=em(this.origin,eh(this.vector,-e/2)),r=eh(this.vector,e);return`M${t[0]} ${t[1]}l${r[0]} ${r[1]}`}}),S:Object.assign({fromNormalDistance:function(){return this.constructor(te(arguments[0]))}},rp)}},rm={ray:{P:Object.prototype,A:function(){let e=e1(...arguments);this.vector=B.vector(e.vector),this.origin=B.vector($(this.vector.length,e.origin)),Object.defineProperty(this,"domain_function",{writable:!0,value:Q})},G:{dimension:function(){return[this.vector,this.origin].map(e=>e.length).reduce((e,t)=>Math.max(e,t),0)}},M:Object.assign({},rh,{inclusive:function(){return this.domain_function=Q,this},exclusive:function(){return this.domain_function=ee,this},flip:function(){return B.ray(eP(this.vector),this.origin)},scale:function(e){return B.ray(this.vector.scale(e),this.origin)},normalize:function(){return B.ray(this.vector.normalize(),this.origin)},clip_function:eo,svgPath:function(e=1e4){let t=this.vector.scale(e);return`M${this.origin[0]} ${this.origin[1]}l${t[0]} ${t[1]}`}}),S:rp}},rg={segment:{P:Array.prototype,A:function(){let e=e0(...arguments);this.push(...[e[0],e[1]].map(e=>B.vector(e))),this.vector=B.vector(ev(this[1],this[0])),this.origin=this[0],Object.defineProperty(this,"domain_function",{writable:!0,value:en})},G:{points:function(){return this},magnitude:function(){return ec(this.vector)},dimension:function(){return[this.vector,this.origin].map(e=>e.length).reduce((e,t)=>Math.max(e,t),0)}},M:Object.assign({},rh,{inclusive:function(){return this.domain_function=en,this},exclusive:function(){return this.domain_function=ei,this},clip_function:ea,transform:function(...e){let t=this.points[0].length,r=e6(e),n=this.points.map(e=>$(3,e)).map(e=>eI(r,e)).map(e=>$(t,e));return B.segment(n)},translate:function(){let e=eK(arguments),t=this.points.map(t=>em(...C(t,e)));return B.segment(t)},midpoint:function(){return B.vector(ex(this.points[0],this.points[1]))},svgPath:function(){let e=this.points.map(e=>`${e[0]} ${e[1]}`);return["M","L"].map((t,r)=>`${t}${e[r]}`).join("")}}),S:{fromPoints:function(){return this.constructor(...arguments)}}}};let rv=function(e,t,r,n,i,o){let a=Math.cos(i),s=Math.sin(i),c=Math.cos(o),l=Math.sin(o);return[e+a*r*c+-s*n*l,t+s*r*c+a*n*l]},r_=function(e,t,r,n,i,o,a){let s=o;if(s<0&&!Number.isNaN(s))for(;s<0;)s+=2*Math.PI;let c=a>2*Math.PI?2*Math.PI:a,l=rv(e,t,r,n,i,s),u=rv(e,t,r,n,i,s+c/2),f=rv(e,t,r,n,i,s+c),p=+(c/2>Math.PI);return{x1:l[0],y1:l[1],x2:u[0],y2:u[1],x3:f[0],y3:f[1],fa:p,fs:+(c/2>0)}},ry=(e,t,r,n,i,o,a)=>`A${N(e,4)} ${N(t,4)} ${N(r,4)} ${N(n,4)} ${N(i,4)} ${N(o,4)} ${N(a,4)}`,rb=function(e,t,r,n){let i=t>r,o=Math.sqrt(i?t**2-r**2:r**2-t**2),a=i?Math.cos(n):Math.sin(n),s=i?Math.sin(n):Math.cos(n);return[B.vector(e[0]+o*a,e[1]+o*s),B.vector(e[0]-o*a,e[1]-o*s)]},rE={area:function(){return tD(this)},centroid:function(){return B.vector(tG(this))},boundingBox:function(){return tW(this)},straightSkeleton:function(){return tX(this)},scale:function(e,t=tG(this)){let r=this.map(e=>[0,1].map((r,n)=>e[n]-t[n])).map(r=>r.map((n,i)=>t[i]+r[i]*e));return this.constructor.fromPoints(r)},rotate:function(e,t=tG(this)){let r=this.map(r=>{let n=[r[0]-t[0],r[1]-t[1]],i=Math.sqrt(n[0]**2+n[1]**2),o=Math.atan2(n[1],n[0]);return[t[0]+Math.cos(o+e)*i,t[1]+Math.sin(o+e)*i]});return B.polygon(r)},translate:function(){let e=eK(...arguments),t=this.map(t=>t.map((t,r)=>t+e[r]));return this.constructor.fromPoints(t)},transform:function(){let e=e6(...arguments),t=this.map(t=>eI(e,$(3,t)));return B.polygon(t)},nearest:function(){let e=eK(...arguments),t=to(this,e);return void 0===t?void 0:Object.assign(t,{edge:this.sides[t.i]})},split:function(){let e=e1(...arguments);return tH(this,e.vector,e.origin).map(e=>B.polygon(e))},overlap:function(){return rc(this,...arguments)},intersect:function(){return re(this,...arguments)},clip:function(e,t){let r=e.domain_function?e.domain_function:et,n=t_(this,e.vector,e.origin,this.domain_function,r,t);return n?B.segment(n):void 0},svgPath:function(){let e=Array(this.length).fill("L");return e[0]="M",`${this.map((t,r)=>`${e[r]}${t[0]} ${t[1]}`).join("")}z`}};var rx={rect:{P:Array.prototype,A:function(){let e=e3(...arguments);this.width=e.width,this.height=e.height,this.origin=B.vector(e.x,e.y),this.push([this.x,this.y],[this.x+this.width,this.y],[this.x+this.width,this.y+this.height],[this.x,this.y+this.height]),Object.defineProperty(this,"domain_function",{writable:!0,value:Q})},G:{x:function(){return this.origin[0]},y:function(){return this.origin[1]},center:function(){return B.vector(this.origin[0]+this.width/2,this.origin[1]+this.height/2)}},M:Object.assign({},rE,{inclusive:function(){return this.domain_function=Q,this},exclusive:function(){return this.domain_function=ee,this},area:function(){return this.width*this.height},segments:function(){return[[[this.x,this.y],[this.x+this.width,this.y]],[[this.x+this.width,this.y],[this.x+this.width,this.y+this.height]],[[this.x+this.width,this.y+this.height],[this.x,this.y+this.height]],[[this.x,this.y+this.height],[this.x,this.y]]]},svgPath:function(){return`M${this.origin.join(" ")}h${this.width}v${this.height}h${-this.width}Z`}}),S:{fromPoints:function(){let e=tW(eQ(arguments));return B.rect(e.min[0],e.min[1],e.span[0],e.span[1])}}}},rO={polygon:{P:Array.prototype,A:function(){this.push(...F(arguments)),this.sides=this.map((e,t,r)=>[e,r[(t+1)%r.length]]),this.vectors=this.sides.map(e=>ev(e[1],e[0])),Object.defineProperty(this,"domain_function",{writable:!0,value:Q})},G:{isConvex:function(){},points:function(){return this}},M:Object.assign({},rE,{inclusive:function(){return this.domain_function=Q,this},exclusive:function(){return this.domain_function=ee,this},segments:function(){return this.sides}}),S:{fromPoints:function(){return this.constructor(...arguments)},regularPolygon:function(){return this.constructor(tT(...arguments))},convexHull:function(){return this.constructor(tz(...arguments))}}}};let rk=(e,t)=>{for(let r=0;r<12;r+=1)e[r]=t[r];return e},rM=Object.assign({},rf,rd,rm,rg,{circle:{A:function(){let e=e4(...arguments);this.radius=e.radius,this.origin=B.vector(...e.origin)},G:{x:function(){return this.origin[0]},y:function(){return this.origin[1]},z:function(){return this.origin[2]}},M:{nearestPoint:function(){return B.vector(ta(this.radius,this.origin,eK(arguments)))},intersect:function(e){return re(this,e)},overlap:function(e){return rc(this,e)},svgPath:function(e=0,t=2*Math.PI){let r=r_(this.origin[0],this.origin[1],this.radius,this.radius,0,e,t),n=ry(this.radius,this.radius,0,r.fa,r.fs,r.x2,r.y2),i=ry(this.radius,this.radius,0,r.fa,r.fs,r.x3,r.y3);return`M${r.x1} ${r.y1}${n}${i}`},points:function(e=128){return Array.from(Array(e)).map((t,r)=>2*Math.PI/e*r).map(e=>[this.origin[0]+this.radius*Math.cos(e),this.origin[1]+this.radius*Math.sin(e)])},polygon:function(){return B.polygon(this.points(arguments[0]))},segments:function(){let e=this.points(arguments[0]);return e.map((t,r)=>{let n=(r+1)%e.length;return[t,e[n]]})}},S:{fromPoints:function(){if(3==arguments.length){let e=tU(...arguments);return this.constructor(e.radius,e.origin)}return this.constructor(...arguments)},fromThreePoints:function(){let e=tU(...arguments);return this.constructor(e.radius,e.origin)}}}},{ellipse:{A:function(){let e=I(arguments).filter(e=>!Number.isNaN(e)),t=$(5,e);this.rx=t[0],this.ry=t[1],this.origin=B.vector(t[2],t[3]),this.spin=t[4],this.foci=rb(this.origin,this.rx,this.ry,this.spin)},G:{x:function(){return this.origin[0]},y:function(){return this.origin[1]}},M:{svgPath:function(e=0,t=2*Math.PI){let r=r_(this.origin[0],this.origin[1],this.rx,this.ry,this.spin,e,t),n=ry(this.rx,this.ry,this.spin/Math.PI*180,r.fa,r.fs,r.x2,r.y2),i=ry(this.rx,this.ry,this.spin/Math.PI*180,r.fa,r.fs,r.x3,r.y3);return`M${r.x1} ${r.y1}${n}${i}`},points:function(e=128){return Array.from(Array(e)).map((t,r)=>2*Math.PI/e*r).map(e=>rv(this.origin.x,this.origin.y,this.rx,this.ry,this.spin,e))},polygon:function(){return B.polygon(this.points(arguments[0]))},segments:function(){let e=this.points(arguments[0]);return e.map((t,r)=>{let n=(r+1)%e.length;return[t,e[n]]})}},S:{}}},rx,rO,{polyline:{P:Array.prototype,A:function(){this.push(...F(arguments))},G:{points:function(){return this}},M:{svgPath:function(){let e=Array(this.length).fill("L");return e[0]="M",`${this.map((t,r)=>`${e[r]}${t[0]} ${t[1]}`).join("")}`}},S:{fromPoints:function(){return this.constructor(...arguments)}}}},{matrix:{P:Array.prototype,A:function(){e6(arguments).forEach(e=>this.push(e))},G:{},M:{copy:function(){return B.matrix(...Array.from(this))},set:function(){return rk(this,e6(arguments))},isIdentity:function(){return eF(this)},multiply:function(e){return rk(this,eB(this,e))},determinant:function(){return eq(this)},inverse:function(){return rk(this,eT(this))},translate:function(e,t,r){return rk(this,eB(this,eR(e,t,r)))},rotateX:function(e){return rk(this,eB(this,eD(e)))},rotateY:function(e){return rk(this,eB(this,eG(e)))},rotateZ:function(e){return rk(this,eB(this,eW(e)))},rotate:function(e,t,r){return rk(this,eB(this,eZ(e,t,r)))},scale:function(e){return rk(this,eB(this,eJ(e)))},reflectZ:function(e,t){return rk(this,eB(this,eH(e,t)))},transform:function(...e){return B.vector(eI(this,$(3,eK(e))))},transformVector:function(e){return B.vector(eI(this,$(3,eK(e))))},transformLine:function(...e){let t=e1(e);return B.line(eV(this,t.vector,t.origin))}},S:{}}}),rA=function(e,t){let r=Object.create(rM[e].proto);return rM[e].A.apply(r,t),r};Object.assign(B,{vector:function(){return rA("vector",arguments)},line:function(){return rA("line",arguments)},ray:function(){return rA("ray",arguments)},segment:function(){return rA("segment",arguments)},circle:function(){return rA("circle",arguments)},ellipse:function(){return rA("ellipse",arguments)},rect:function(){return rA("rect",arguments)},polygon:function(){return rA("polygon",arguments)},polyline:function(){return rA("polyline",arguments)},matrix:function(){return rA("matrix",arguments)}}),Object.keys(rM).forEach(e=>{let t={};t.prototype=null!=rM[e].P?Object.create(rM[e].P):Object.create(Object.prototype),t.prototype.constructor=t,B[e].prototype=t.prototype,B[e].prototype.constructor=B[e],Object.keys(rM[e].G).forEach(r=>Object.defineProperty(t.prototype,r,{get:rM[e].G[r]})),Object.keys(rM[e].M).forEach(r=>Object.defineProperty(t.prototype,r,{value:rM[e].M[r]})),Object.keys(rM[e].S).forEach(t=>Object.defineProperty(B[e],t,{value:rM[e].S[t].bind(B[e].prototype)})),rM[e].proto=t.prototype});let rj=B;rj.core=Object.assign(Object.create(null),U,V,e9,es,eL,tu,tL,tF,tV,tZ,tL,tm,eY,ts,tt,tK,tQ,{intersectConvexPolygonLine:t4,intersectCircleCircle:t1,intersectCircleLine:t2,intersectLineLine:tI,overlapConvexPolygons:rt,overlapConvexPolygonPoint:tg,overlapBoundingBoxes:(e,t)=>{let r=Math.min(e.min.length,t.min.length);for(let n=0;n<r;n+=1)if(e.min[n]>t.max[n]||e.max[n]<t.min[n])return!1;return!0},overlapLineLine:rn,overlapLinePoint:tJ,clipLineConvexPolygon:t_,clipPolygonPolygon:(e,t,r=q)=>{let n,i,o,a,s=e=>(i[0]-n[0])*(e[1]-n[1])>(i[1]-n[1])*(e[0]-n[0])+r,c=()=>{let e=[n[0]-i[0],n[1]-i[1]],t=[o[0]-a[0],o[1]-a[1]],r=n[0]*i[1]-n[1]*i[0],s=o[0]*a[1]-o[1]*a[0],c=1/(e[0]*t[1]-e[1]*t[0]);return[(r*t[0]-s*e[0])*c,(r*t[1]-s*e[1])*c]},l=e;for(let e in n=t[t.length-1],t){i=t[e];let r=l;for(let e in l=[],o=r[r.length-1],r)s(a=r[e])?(s(o)||l.push(c()),l.push(a)):s(o)&&l.push(c()),o=a;n=i}return 0===l.length?void 0:l},splitConvexPolygon:tH,straightSkeleton:tX}),rj.typeof=S,rj.intersect=re,rj.overlap=rc;let rP=function(e,t){let r=this;Object.defineProperty(e,"degree",{get:()=>r.vertices_vertices&&r.vertices_vertices[t]?r.vertices_vertices[t].length:null})},rw=function(e,t){let r=this;Object.defineProperty(e,"coords",{get:()=>{if(r.edges_vertices&&r.edges_vertices[t]&&r.vertices_coords)return r.edges_vertices[t].map(e=>r.vertices_coords[e])}})},rS=function(e,t){let r=this;Object.defineProperty(e,"simple",{get:()=>{if(!r.faces_vertices||!r.faces_vertices[t])return null;for(let n=0;n<e.length-1;n+=1)for(let i=n+1;i<e.length;i+=1)if(r.faces_vertices[t][n]===r.faces_vertices[t][i])return!1;return!0}})},r$=function(e,t){let r=this;Object.defineProperty(e,"coords",{get:()=>{if(r.faces_vertices&&r.faces_vertices[t]&&r.vertices_coords)return r.faces_vertices[t].map(e=>r.vertices_coords[e])}})};var rC={vertices:function(e,t){return rP.call(this,e,t),e},edges:function(e,t){return rw.call(this,e,t),e},faces:function(e,t){return rS.call(this,e,t),r$.call(this,e,t),e}};let rL="Rabbit Ear",rN=["vertices_coords","vertices_vertices","vertices_faces","edges_vertices","edges_faces","edges_assignment","edges_foldAngle","edges_length","faces_vertices","faces_edges","vertices_edges","edges_edges","faces_faces"],rz=["edgeOrders","faceOrders"],rF=Object.freeze([].concat(["file_spec","file_creator","file_author","file_title","file_description","file_classes","file_frames"]).concat(["frame_author","frame_title","frame_description","frame_attributes","frame_classes","frame_unit","frame_parent","frame_inherit"]).concat(rN).concat(rz)),rI=Object.freeze(["edges_vector","vertices_sectors","faces_sectors","faces_matrix"]),rV=Array.from("MmVvBbFfUu"),rB={vertices:"vertex",edges:"edge",faces:"face"},rq={b:"boundary",m:"mountain",v:"valley",f:"flat",u:"unassigned"};rV.forEach(e=>{rq[e.toUpperCase()]=rq[e]});let rT={M:-180,m:-180,V:180,v:180,B:0,b:0,F:0,f:0,U:0,u:0},rR=e=>rT[e]||0,rU=e=>e>rj.core.EPSILON?"V":e<-rj.core.EPSILON?"M":"U",rD=e=>rj.core.fnEpsilonEqual(0,e)||rj.core.fnEpsilonEqual(-180,e)||rj.core.fnEpsilonEqual(180,e),rG=({edges_foldAngle:e})=>{if(!e)return!0;for(let t=0;t<e.length;t+=1)if(!rD(e[t]))return!1;return!0},rW=(e,t)=>Object.keys(e).map(e=>e.substring(e.length-t.length,e.length)===t?e:void 0).filter(e=>void 0!==e),rZ=(e,t)=>Object.keys(e).map(e=>e.substring(0,t.length)===t?e:void 0).filter(e=>void 0!==e),rJ=(e,t)=>rZ(e,`${t}_`),rH=(e,t)=>rW(e,`_${t}`),rY=(e,t)=>{let r=rJ(e,t);if(0===r.length)return[];let n=Array.from(Array(Math.max(...r.map(t=>e[t].length)))).map(()=>({}));return r.forEach(t=>n.forEach((r,i)=>{n[i][t]=e[t][i]})),n},rX=(e={})=>0===Object.keys(e).length?0:[].concat(rF,rI).filter(t=>e[t]).length/Object.keys(e).length;var rK=Object.freeze({__proto__:null,singularize:rB,pluralize:{vertex:"vertices",edge:"edges",face:"faces"},edgesAssignmentNames:rq,edgesAssignmentDegrees:rT,edgeAssignmentToFoldAngle:rR,edgeFoldAngleToAssignment:rU,edgeFoldAngleIsFlat:rD,edgesFoldAngleAreAllFlat:rG,filterKeysWithSuffix:rW,filterKeysWithPrefix:rZ,getGraphKeysWithPrefix:rJ,getGraphKeysWithSuffix:rH,transposeGraphArrays:rY,transposeGraphArrayAtIndex:function(e,t,r){let n=rJ(e,t);if(0===n.length)return;let i={};return n.forEach(t=>{i[t]=e[t][r]}),i},isFoldObject:rX});let rQ=(e,t,r=rj.core.EPSILON)=>{let n=e.length;for(let i=0;i<n;i+=1)if(Math.abs(e[i]-t[i])>r)return!1;return!0},r0=({vertices_coords:e},t=rj.core.EPSILON)=>{if(!e)return[];let r=e.map(()=>[]);for(let n=0;n<e.length-1;n+=1)for(let i=n+1;i<e.length;i+=1)r[n][i]=rQ(e[n],e[i],t);let n=r.map(e=>e.map((e,t)=>e?t:void 0).filter(e=>void 0!==e)),i=[],o=Array(e.length).fill(!1),a=0,s=(t,r)=>{if(!o[r]&&a!==e.length)for(o[r]=!0,a+=1,i[t]||(i[t]=[]),i[t].push(r);n[r].length>0;)s(t,n[r][0]),n[r].splice(0,1)};for(let t=0;t<e.length&&(s(t,t),a!==e.length);t+=1);return i.filter(e=>e.length)},r1=(...e)=>Math.max(0,...e.filter(e=>void 0!==e).map(e=>e.length)),r2=(e,t)=>r1(...rJ(e,t).map(t=>e[t]));r2.vertices=({vertices_coords:e,vertices_faces:t,vertices_vertices:r})=>r1(e,t,r),r2.edges=({edges_vertices:e,edges_edges:t,edges_faces:r})=>r1(e,t,r),r2.faces=({faces_vertices:e,faces_edges:t,faces_faces:r})=>r1(e,t,r);let r3=e=>{let t={};return e.forEach(e=>{t[e]=!0}),Object.keys(t).map(e=>parseInt(e,10))},r8=e=>r3(e).sort((e,t)=>e-t),r4=(e,t)=>(t.sort((e,t)=>e-t),[e.slice(t[1]).concat(e.slice(0,t[0]+1)),e.slice(t[0],t[1]+1)]),r5=e=>{let t={};return e.forEach(e=>{void 0===t[e]&&(t[e]=0),t[e]+=1}),e.filter(e=>t[e]>1)},r6=e=>e.map(e=>e.map((e,t)=>!0===e?t:void 0).filter(e=>void 0!==e)),r9=e=>{let t=[];for(let r=0;r<e.length-1;r+=1)for(let n=r+1;n<e.length;n+=1)e[r][n]&&t.push([r,n]);return t};var r7=Object.freeze({__proto__:null,uniqueIntegers:r3,uniqueSortedIntegers:r8,splitCircularArray:r4,getLongestArray:e=>{if(1===e.length)return e[0];let t=e.map(e=>e.length),r=0;for(let n=0;n<e.length;n+=1)t[n]>t[r]&&(r=n);return e[r]},removeSingleInstances:r5,booleanMatrixToIndexedArray:r6,booleanMatrixToUniqueIndexPairs:r9,makeSelfRelationalArrayClusters:e=>{let t=[],r=(n,i)=>void 0!==t[n]?0:(t[n]=i,e[n].forEach(e=>r(e,i)),1);for(let t=0,n=0;t<e.length;t+=1)t in e&&(n+=r(t,n));return t},circularArrayValidRanges:e=>{let t=e.map(e=>void 0!==e);if(t.reduce((e,t)=>e&&t,!0))return[[0,e.length-1]];let r=t.map((e,t,r)=>e&&!r[(t-1+r.length)%r.length]),n=r.reduce((e,t)=>e+ +!!t,0),i=Array(n),o=Array(n).fill(0),a=t[0]&&t[e.length-1]?0:n-1;return t.forEach((e,n)=>{a=(a+ +!!r[n])%o.length,o[a]+=+!!t[n],r[n]&&(i[a]=n)}),i.map((t,r)=>[t,(t+o[r]-1)%e.length])}});let ne=(e,t,r)=>{let n,i,o,a=r2(e,t),s=r8(r),c=[];for(n=0,i=0,o=0;n<a;n+=1,i+=1){for(;n===s[o];)c[n]=void 0,n+=1,o+=1;n<a&&(c[n]=i)}return rH(e,t).forEach(t=>e[t].forEach((r,n)=>e[t][n].forEach((r,i)=>{e[t][n][i]=c[r]}))),s.reverse(),rJ(e,t).forEach(t=>s.forEach(r=>e[t].splice(r,1))),c},nt=(e,t,r)=>{let n,i,o,a=r2(e,t),s=r8(Object.keys(r).map(e=>parseInt(e,10))),c=[];for(n=0,i=0,o=0;n<a;n+=1,i+=1){for(;n===s[o];)c[n]=c[r[s[o]]],void 0===c[n]&&console.log("replace() found an undefined",c),n+=1,o+=1;n<a&&(c[n]=i)}return rH(e,t).forEach(t=>e[t].forEach((r,n)=>e[t][n].forEach((r,i)=>{e[t][n][i]=c[r]}))),s.reverse(),rJ(e,t).forEach(t=>s.forEach(r=>e[t].splice(r,1))),c},nr=(e,t)=>r0(e,t).filter(e=>e.length>1),nn=({vertices_coords:e,edges_vertices:t,faces_vertices:r})=>{if(!e)return[];let n=e.length,i=Array(n).fill(!1);return t&&t.forEach(e=>{e.filter(e=>!i[e]).forEach(e=>{i[e]=!0,n-=1})}),r&&r.forEach(e=>{e.filter(e=>!i[e]).forEach(e=>{i[e]=!0,n-=1})}),i.map((e,t)=>e?void 0:t).filter(e=>void 0!==e)},ni=(e,t)=>(t||(t=nn(e)),{map:ne(e,s,t),remove:t}),no=(e,t=rj.core.EPSILON)=>{let r=[],n=[],i=r0(e,t).filter(e=>e.length>1);return i.forEach(e=>{for(let t=1;t<e.length;t+=1)r[e[t]]=e[0],n.push(e[t])}),i.map(t=>t.map(t=>e.vertices_coords[t])).map(e=>rj.core.average(...e)).forEach((t,r)=>{e.vertices_coords[i[r][0]]=t}),{map:nt(e,s,r),remove:n}};var na=Object.freeze({__proto__:null,getDuplicateVertices:nr,getEdgeIsolatedVertices:({vertices_coords:e,edges_vertices:t})=>{if(!e||!t)return[];let r=e.length,n=Array(r).fill(!1);return t.forEach(e=>{e.filter(e=>!n[e]).forEach(e=>{n[e]=!0,r-=1})}),n.map((e,t)=>e?void 0:t).filter(e=>void 0!==e)},getFaceIsolatedVertices:({vertices_coords:e,faces_vertices:t})=>{if(!e||!t)return[];let r=e.length,n=Array(r).fill(!1);return t.forEach(e=>{e.filter(e=>!n[e]).forEach(e=>{n[e]=!0,r-=1})}),n.map((e,t)=>e?void 0:t).filter(e=>void 0!==e)},getIsolatedVertices:nn,removeIsolatedVertices:ni,removeDuplicateVertices:no});let ns={edges:"edgeOrders",faces:"faceOrders"},nc=(e,t)=>{var r,n;let i,o;return Math.max((r=rH(e,t).map(t=>e[t]),i=-1,r.filter(e=>void 0!==e).forEach(e=>e.forEach(e=>e.forEach(e=>{e>i&&(i=e)}))),i),e[ns[t]]?(n=e[ns[t]],o=-1,n.forEach(e=>{e[0]>o&&(o=e[0]),e[1]>o&&(o=e[1])}),o):-1)+1};nc.vertices=e=>nc(e,s),nc.edges=e=>nc(e,c),nc.faces=e=>nc(e,l);let nl=({vertices_vertices:e,vertices_sectors:t},r,n,i={})=>{let o={},a={vertices:[r],edges:[],angles:[]},s=r,c=n;for(;;){let r=e[c],n=(r.indexOf(s)+r.length-1)%r.length,l=r[n],u=`${c} ${l}`;if(o[u])return Object.assign(i,o),a.vertices.pop(),a;if(o[u]=!0,i[u])return;a.vertices.push(c),a.edges.push(u),t&&a.angles.push(t[c][n]),s=c,c=l}},nu=({vertices_vertices:e,vertices_sectors:t})=>{let r={vertices_vertices:e,vertices_sectors:t},n={};return e.map((e,t)=>e.map(e=>nl(r,t,e,n)).filter(e=>void 0!==e)).flat()},nf=e=>e.filter(e=>e.angles.map(e=>Math.PI-e).reduce((e,t)=>e+t,0)>0);var np=Object.freeze({__proto__:null,counterClockwiseWalk:nl,planarVertexWalk:nu,filterWalkedBoundaryFace:nf});let nh=({vertices_coords:e},t,r)=>t.map(t=>e[t]).map(t=>rj.core.subtract(t,e[r])).map(e=>Math.atan2(e[1],e[0])).map(e=>e>-rj.core.EPSILON?e:e+2*Math.PI).map((e,t)=>({a:e,i:t})).sort((e,t)=>e.a-t.a).map(e=>e.i).map(e=>t[e]),nd=({vertices_coords:e},t,r)=>t.map(t=>({i:t,d:rj.core.dot(e[t],r)})).sort((e,t)=>e.d-t.d).map(e=>e.i);var nm=Object.freeze({__proto__:null,sortVerticesCounterClockwise:nh,sortVerticesAlongVector:nd});let ng=({edges_vertices:e})=>{let t=[];return e.forEach((e,r)=>e.forEach(e=>{void 0===t[e]&&(t[e]=[]),t[e].push(r)})),t},nv=({edges_vertices:e,vertices_vertices:t})=>{let r=nE({edges_vertices:e});return t.map((e,t)=>e.map(e=>r[`${t} ${e}`]))},n_=({vertices_coords:e,vertices_edges:t,edges_vertices:r})=>{t||(t=ng({edges_vertices:r}));let n=t.map((e,t)=>e.map(e=>r[e].filter(e=>e!==t)).reduce((e,t)=>e.concat(t),[]));return void 0===e?n:n.map((t,r)=>nh({vertices_coords:e},t,r))},ny=({vertices_coords:e,faces_vertices:t})=>{if(!t)return e.map(()=>[]);let r=void 0!==e?e.map(()=>[]):Array.from(Array(nc.vertices({faces_vertices:t}))).map(()=>[]);return t.forEach((e,t)=>{let n=[];e.forEach(e=>{n[e]=t}),n.forEach((e,t)=>r[t].push(e))}),r},nb=({vertices_coords:e,vertices_vertices:t,faces_vertices:r})=>{if(!r)return e.map(()=>[]);if(!t)return ny({vertices_coords:e,faces_vertices:r});let n=nO({faces_vertices:r});return t.map((e,t)=>e.map((e,r,n)=>[n[(r+1)%n.length],t,e].join(" "))).map(e=>e.map(e=>n[e]))},nE=({edges_vertices:e})=>{let t={};return e.map(e=>e.join(" ")).forEach((e,r)=>{t[e]=r}),e.map(e=>`${e[1]} ${e[0]}`).forEach((e,r)=>{t[e]=r}),t},nx=({edges_vertices:e})=>{let t={};return e.map(e=>e.join(" ")).forEach((e,r)=>{t[e]=r}),t},nO=({faces_vertices:e})=>{let t={};return e.forEach((e,r)=>e.map((t,r)=>[0,1,2].map(t=>(r+t)%e.length).map(t=>e[t]).join(" ")).forEach(e=>{t[e]=r})),t},nk=({vertices_coords:e,vertices_vertices:t,edges_vertices:r,edges_vector:n})=>{n||(n=nC({vertices_coords:e,edges_vertices:r}));let i=nx({edges_vertices:r});return t.map((e,r)=>t[r].map(e=>{let t=i[`${r} ${e}`],o=i[`${e} ${r}`];return void 0!==t?n[t]:void 0!==o?rj.core.flip(n[o]):void 0}))},nM=({vertices_coords:e,vertices_vertices:t,edges_vertices:r,edges_vector:n})=>nk({vertices_coords:e,vertices_vertices:t,edges_vertices:r,edges_vector:n}).map(e=>1===e.length?[rj.core.TWO_PI]:rj.core.counterClockwiseSectors2(e)),nA=({edges_vertices:e,faces_edges:t})=>{let r=void 0!==e?e.map(()=>[]):Array.from(Array(nc.edges({faces_edges:t}))).map(()=>[]);return t.forEach((e,t)=>{let n=[];e.forEach(e=>{n[e]=t}),n.forEach((e,t)=>r[t].push(e))}),r},nj=({vertices_coords:e,edges_vertices:t,edges_vector:r,faces_vertices:n,faces_edges:i,faces_center:o})=>{if(!t)return nA({faces_edges:i});r||(r=nC({vertices_coords:e,edges_vertices:t}));let a=t.map(t=>e[t[0]]);o||(o=nB({vertices_coords:e,faces_vertices:n}));let s=t.map(()=>[]);return i.forEach((e,t)=>{let r=[];e.forEach(e=>{r[e]=t}),r.forEach((e,t)=>s[t].push(e))}),s.forEach((e,t)=>{let n=e.map(e=>o[e]).map(e=>rj.core.subtract2(e,a[t])).map(e=>rj.core.cross2(e,r[t]));e.sort((e,t)=>n[e]-n[t])}),s},nP={M:-180,m:-180,V:180,v:180},nw=({edges_assignment:e})=>e.map(e=>nP[e]||0),nS=({edges_foldAngle:e})=>e.map(e=>0===e?"F":e<0?"M":"V"),n$=({vertices_coords:e,edges_vertices:t})=>t.map(t=>t.map(t=>e[t])),nC=({vertices_coords:e,edges_vertices:t})=>n$({vertices_coords:e,edges_vertices:t}).map(e=>rj.core.subtract(e[1],e[0])),nL=({vertices_coords:e,edges_vertices:t,edges_coords:r},n=0)=>(r||(r=n$({vertices_coords:e,edges_vertices:t})),r.map(e=>rj.core.boundingBox(e,n))),nN=({vertices_coords:e,vertices_vertices:t,vertices_edges:r,vertices_sectors:n,edges_vertices:i,edges_vector:o})=>{t||(t=n_({vertices_coords:e,edges_vertices:i,vertices_edges:r})),n||(n=nM({vertices_coords:e,vertices_vertices:t,edges_vertices:i,edges_vector:o}));let a=nE({edges_vertices:i});return nf(nu({vertices_vertices:t,vertices_sectors:n})).map(e=>({...e,edges:e.edges.map(e=>a[e])}))},nz=e=>e.faces_edges.map(t=>t.map(t=>e.edges_vertices[t]).map((e,t,r)=>{let n=r[(t+1)%r.length];return e[0]===n[0]||e[0]===n[1]?e[1]:e[0]})),nF=e=>{let t=nE(e);return e.faces_vertices.map(e=>e.map((e,t,r)=>[e,r[(t+1)%r.length]].join(" "))).map(e=>e.map(e=>t[e]))},nI=({faces_vertices:e})=>{let t=e.map(()=>[]),r={};return e.map((e,t)=>e.map((n,i,o)=>{let a=o[(i+1)%e.length];a<n&&([n,a]=[a,n]);let s=`${n} ${a}`;void 0===r[s]&&(r[s]={}),r[s][t]=!0})),Object.values(r).map(e=>Object.keys(e)).filter(e=>e.length>1).forEach(e=>{t[e[0]].push(parseInt(e[1],10)),t[e[1]].push(parseInt(e[0],10))}),t},nV=({vertices_coords:e,faces_vertices:t},r)=>t.map(t=>t.map(t=>e[t])).map(e=>rj.core.makePolygonNonCollinear(e,r)),nB=({vertices_coords:e,faces_vertices:t})=>t.map(t=>t.map(t=>e[t])).map(e=>rj.core.centroid(e)),nq=({vertices_coords:e,faces_vertices:t})=>t.map(t=>t.map(t=>e[t]).reduce((e,t)=>[e[0]+t[0],e[1]+t[1]],[0,0]).map(e=>e/t.length));var nT=Object.freeze({__proto__:null,makeVerticesEdgesUnsorted:ng,makeVerticesEdges:nv,makeVerticesVertices:n_,makeVerticesFacesUnsorted:ny,makeVerticesFaces:nb,makeVerticesToEdgeBidirectional:nE,makeVerticesToEdge:nx,makeVerticesToFace:nO,makeVerticesVerticesVector:nk,makeVerticesSectors:nM,makeEdgesEdges:({edges_vertices:e,vertices_edges:t})=>e.map((e,r)=>{let n=t[e[0]].filter(e=>e!==r),i=t[e[1]].filter(e=>e!==r);return n.concat(i)}),makeEdgesFacesUnsorted:nA,makeEdgesFaces:nj,makeEdgesFoldAngle:nw,makeEdgesAssignment:nS,makeEdgesCoords:n$,makeEdgesVector:nC,makeEdgesLength:({vertices_coords:e,edges_vertices:t})=>nC({vertices_coords:e,edges_vertices:t}).map(e=>rj.core.magnitude(e)),makeEdgesBoundingBox:nL,makePlanarFaces:nN,makeFacesVerticesFromEdges:nz,makeFacesEdgesFromVertices:nF,makeFacesFaces:nI,makeFacesPolygon:nV,makeFacesPolygonQuick:({vertices_coords:e,faces_vertices:t})=>t.map(t=>t.map(t=>e[t])),makeFacesCenter:nB,makeFacesCenterQuick:nq});let nR=({edges_vertices:e})=>{let t=[];for(let r=0;r<e.length;r+=1)e[r][0]===e[r][1]&&t.push(r);return t},nU=({edges_vertices:e})=>{if(!e)return[];let t=[],r={};for(let n=0;n<e.length;n+=1){let i=`${e[n][0]} ${e[n][1]}`,o=`${e[n][1]} ${e[n][0]}`;void 0!==r[i]?t[n]=r[i]:(r[i]=n,r[o]=n)}return t},nD=(e,t)=>{let r;return t||(t=nR(e)),t.length&&(r={},t.forEach(e=>{r[e]=!0}),rH(e,c).forEach(t=>e[t].forEach((n,i)=>{for(let o=n.length-1;o>=0;o-=1)!0===r[n[o]]&&e[t][i].splice(o,1)}))),{map:ne(e,c,t),remove:t}},nG=(e,t)=>{t||(t=nU(e));let r=Object.keys(t).map(e=>parseInt(e,10)),n=nt(e,c,t);return r.length&&(e.vertices_edges||e.vertices_vertices||e.vertices_faces)&&(e.vertices_edges=ng(e),e.vertices_vertices=n_(e),e.vertices_edges=nv(e),e.vertices_faces=nb(e)),{map:n,remove:r}};var nW=Object.freeze({__proto__:null,getCircularEdges:nR,getDuplicateEdges:nU,removeCircularEdges:nD,removeDuplicateEdges:nG});let nZ=(...e)=>{if(0===e.length)return[];let t=e[0].map((e,t)=>t);return e.forEach(e=>t.forEach((r,n)=>{t[n]=e[r]})),t},nJ=(...e)=>{if(0===e.length)return[];let t=e[0].map((e,t)=>[t]);return e.forEach(e=>{t.forEach((r,n)=>r.forEach((r,i)=>{t[n][i]=e[r]})),t.forEach((e,r)=>{t[r]=e.reduce((e,t)=>e.concat(t),[]).filter(e=>void 0!==e)})}),t},nH=(...e)=>{if(0===e.length)return[];let t=e[0].reduce((e,t)=>e.concat(t),[]).map((e,t)=>[t]);return e.forEach(e=>{let r=[];e.forEach((e,n)=>{typeof e===i?r[n]=t[e]:r[n]=e.map(e=>t[e]).reduce((e,t)=>e.concat(t),[])}),t=r}),t},nY=e=>{let t=[];return e.forEach((e,r)=>{null!=e&&(typeof e===i&&(void 0!==t[e]?typeof t[e]===i?t[e]=[t[e],r]:t[e].push(r):t[e]=r),e.constructor===Array&&e.forEach(e=>{t[e]=r}))}),t},nX=e=>{let t=[];return e.forEach((e,r)=>{t[e]=r}),t};var nK=Object.freeze({__proto__:null,mergeSimpleNextmaps:nZ,mergeNextmaps:nJ,mergeSimpleBackmaps:(...e)=>{if(0===e.length)return[];let t=e[0].map((e,t)=>t);return e.forEach(e=>{t=e.map(e=>t[e])}),t},mergeBackmaps:nH,invertMap:nY,invertSimpleMap:nX});let nQ=(e,t)=>{let r=no(e,t),n=nD(e),i=nG(e),o=ni(e),a=nX(r.map),s=o.remove.map(e=>a[e]),c=nX(n.map),l=i.remove.map(e=>c[e]);return{vertices:{map:nZ(r.map,o.map),remove:r.remove.concat(s)},edges:{map:nZ(n.map,i.map),remove:n.remove.concat(l)}}},n0=(e,t)=>{let r,n,i=nU(e),o=nR(e),a=nn(e),s=nr(e,t),c=(r={vertices:r2.vertices(e),edges:r2.edges(e),faces:r2.faces(e)},n={vertices:nc.vertices(e),edges:nc.edges(e),faces:nc.faces(e)},{vertices:r.vertices>=n.vertices,edges:r.edges>=n.edges,faces:r.faces>=n.faces});return{summary:0===i.length&&0===o.length&&0===a.length&&c.vertices&&c.edges&&c.faces?"valid":"problematic",vertices:{isolated:a,duplicate:s,references:c.vertices},edges:{circular:o,duplicate:i,references:c.edges},faces:{references:c.faces}}},n1=(e,t)=>{if("object"!=typeof e||!e.edges_vertices)return e;e.vertices_edges=ng(e),e.vertices_vertices=n_(e),e.vertices_edges=nv(e);let r=e.edges_vertices.length;if(e.edges_assignment||(e.edges_assignment=[]),e.edges_foldAngle||(e.edges_foldAngle=[]),e.edges_assignment.length>e.edges_foldAngle.length)for(let t=e.edges_foldAngle.length;t<e.edges_assignment.length;t+=1)e.edges_foldAngle[t]=rR(e.edges_assignment[t]);if(e.edges_foldAngle.length>e.edges_assignment.length)for(let t=e.edges_assignment.length;t<e.edges_foldAngle.length;t+=1)e.edges_assignment[t]=rU(e.edges_foldAngle[t]);for(let t=e.edges_assignment.length;t<r;t+=1)e.edges_assignment[t]="U",e.edges_foldAngle[t]=0;return((e,t)=>{if(void 0!==t||e.faces_vertices||e.faces_edges||(t=!0),t&&e.vertices_coords){let t=nN(e);e.faces_vertices=t.map(e=>e.vertices),e.faces_edges=t.map(e=>e.edges);return}e.faces_vertices&&e.faces_edges||(e.faces_vertices&&!e.faces_edges?e.faces_edges=nF(e):e.faces_edges&&!e.faces_vertices?e.faces_vertices=nz(e):(e.faces_vertices=[],e.faces_edges=[]))})(e,t),e.vertices_faces=nb(e),e.edges_faces=nA(e),e.faces_faces=nI(e),e},n2=(e,t=rj.core.EPSILON)=>nL(e,t).map(t=>e.vertices_coords.map(e=>e[0]>t.min[0]&&e[1]>t.min[1]&&e[0]<t.max[0]&&e[1]<t.max[1])),n3=({vertices_coords:e,edges_vertices:t,edges_coords:r},n=rj.core.EPSILON)=>{let i=nL({vertices_coords:e,edges_vertices:t,edges_coords:r},n),o=t.map(()=>[]);for(let e=0;e<t.length-1;e+=1)for(let r=e+1;r<t.length;r+=1){let t=(i[e].max[0]<i[r].min[0]||i[r].max[0]<i[e].min[0])&&(i[e].max[1]<i[r].min[1]||i[r].max[1]<i[e].min[1]);o[e][r]=!t,o[r][e]=!t}for(let e=0;e<t.length;e+=1)o[e][e]=!0;return o};var n8=Object.freeze({__proto__:null,getEdgesVerticesOverlappingSpan:n2,getEdgesEdgesOverlapingSpans:n3});let n4=({vertices_coords:e,vertices_edges:t,edges_vertices:r},n,i=rj.core.EPSILON)=>{if(!e||!r)return!1;t||(t=ng({edges_vertices:r}));let o=t[n];if(void 0===o||2!==o.length)return!1;let a=(({edges_vertices:e},t,r)=>(r.forEach(r=>{e[r][0]===t&&e[r][1]===t&&console.warn("removePlanarVertex circular edge")}),r.map(r=>e[r][0]===t?e[r][1]:e[r][0])))({edges_vertices:r},n,o),s=[a[0],n,a[1]].map(t=>e[t]);return rj.core.collinearBetween(...s,!1,i)},n5=({vertices_coords:e,edges_vertices:t,edges_coords:r},n=rj.core.EPSILON)=>{r||(r=t.map(t=>t.map(t=>e[t])));let i=n2({vertices_coords:e,edges_vertices:t,edges_coords:r},n);for(let t=0;t<r.length;t+=1)for(let o=0;o<e.length;o+=1)i[t][o]&&(i[t][o]=rj.core.overlapLinePoint(rj.core.subtract(r[t][1],r[t][0]),r[t][0],e[o],rj.core.excludeS,n));return i.map(e=>e.map((e,t)=>e?t:void 0).filter(e=>void 0!==e))};var n6=Object.freeze({__proto__:null,isVertexCollinear:n4,getVerticesEdgesOverlap:n5});let n9=({vertices_coords:e,edges_vertices:t},r,n,i=rj.core.EPSILON)=>{let o=rj.core.normalize2(r),a=t.map(t=>e[t[0]]),s=t.map(t=>t.map(t=>e[t])).map(e=>rj.core.subtract2(e[1],e[0])).map(e=>rj.core.parallel2(e,r,i));for(let e=0;e<t.length;e+=1){if(!s[e])continue;if(rj.core.fnEpsilonEqualVectors(a[e],n)){s[e]=!0;continue}let t=rj.core.normalize2(rj.core.subtract2(a[e],n)),r=Math.abs(rj.core.dot2(t,o));s[e]=Math.abs(1-r)<i}return s},n7=({vertices_coords:e,edges_vertices:t,edges_coords:r},n,i,o=rj.core.EPSILON)=>{r||(r=n$({vertices_coords:e,edges_vertices:t}));let a=rj.core.boundingBox([n,i],o),s=rj.core.subtract2(i,n);return nL({vertices_coords:e,edges_vertices:t,edges_coords:r},o).map(e=>rj.core.overlapBoundingBoxes(a,e)).map((e,t)=>e?rj.core.intersectLineLine(s,n,rj.core.subtract2(r[t][1],r[t][0]),r[t][0],rj.core.includeS,rj.core.includeS,o):void 0)},ie=function({vertices_coords:e,edges_vertices:t,edges_vector:r,edges_origin:n},i=rj.core.EPSILON){r||(r=nC({vertices_coords:e,edges_vertices:t})),n||(n=t.map(t=>e[t[0]]));let o=r.map(()=>[]),a=n3({vertices_coords:e,edges_vertices:t},i);for(let e=0;e<r.length-1;e+=1)for(let t=e+1;t<r.length;t+=1){if(!0!==a[e][t]){o[e][t]=void 0;continue}o[e][t]=rj.core.intersectLineLine(r[e],n[e],r[t],n[t],rj.core.excludeS,rj.core.excludeS,i),o[t][e]=o[e][t]}return o},it=({vertices_coords:e,edges_vertices:t,faces_vertices:r,faces_edges:n},i,o,a,s=rj.core.EPSILON)=>{let c=r[i].map(t=>e[t]).map(e=>rj.core.overlapLinePoint(o,a,e,()=>!0,s)).map((e,t)=>e?t:void 0).filter(e=>void 0!==e),l=c.map(e=>r[i][e]);if(c.concat(c.map(e=>e+r[i].length)).map((e,t,r)=>r[t+1]-e==1).reduce((e,t)=>e||t,!1))return;if(l.length>1)return{vertices:l,edges:[]};let u=n[i].map(r=>t[r].map(t=>e[t])).map(e=>rj.core.intersectLineLine(o,a,rj.core.subtract(e[1],e[0]),e[0],rj.core.includeL,rj.core.excludeS,s)).map((e,t)=>({coords:e,edge:n[i][t]})).filter(e=>void 0!==e.coords).filter(e=>!l.map(r=>t[e.edge].includes(r)).reduce((e,t)=>e||t,!1));return u.length+l.length===2?{vertices:l,edges:u}:void 0};var ir=Object.freeze({__proto__:null,makeEdgesLineParallelOverlap:n9,makeEdgesSegmentIntersection:n7,makeEdgesEdgesIntersection:ie,intersectConvexFaceLine:it});let ii=(e,t=rj.core.EPSILON)=>{let r=e.edges_vertices.map(t=>t.map(t=>e.vertices_coords[t])),n=r.map(e=>rj.core.subtract(e[1],e[0])),i=r.map(e=>e[0]),o=ie({vertices_coords:e.vertices_coords,edges_vertices:e.edges_vertices,edges_vector:n,edges_origin:i},1e-6),a=n5({vertices_coords:e.vertices_coords,edges_vertices:e.edges_vertices,edges_coords:r},t);if(0===o.flat().filter(e=>void 0!==e).length&&0===a.flat().filter(e=>void 0!==e).length)return;let s={vertices:e.vertices_coords.length};o.forEach(t=>t.filter(e=>void 0!==e).filter(e=>2===e.length).forEach(t=>{let r=e.vertices_coords.length;e.vertices_coords.push([...t]),t.splice(0,2),t.push(r)})),o.forEach((e,t)=>{e.forEach((e,r)=>{e&&(o[t][r]=e[0])})});let c=o.map(e=>e.filter(e=>void 0!==e));e.edges_vertices.forEach((e,t)=>e.push(...c[t],...a[t])),e.edges_vertices.forEach((t,r)=>{e.edges_vertices[r]=nd({vertices_coords:e.vertices_coords},t,n[r])});let l=e.edges_vertices.map((e,t)=>Array(e.length-1).fill(t)).flat();if(e.edges_vertices=e.edges_vertices.map(e=>Array.from(Array(e.length-1)).map((t,r,n)=>[e[r],e[r+1]])).flat(),e.edges_assignment&&e.edges_foldAngle&&e.edges_foldAngle.length>e.edges_assignment.length)for(let t=e.edges_assignment.length;t<e.edges_foldAngle.length;t+=1)e.edges_assignment[t]=rU(e.edges_foldAngle[t]);return e.edges_assignment&&(e.edges_assignment=l.map(t=>e.edges_assignment[t]||"U")),e.edges_foldAngle&&(e.edges_foldAngle=l.map(t=>e.edges_foldAngle[t]).map((t,r)=>void 0===t?rR(e.edges_assignment[r]):t)),{vertices:{new:Array.from(Array(e.vertices_coords.length-s.vertices)).map((e,t)=>s.vertices+t)},edges:{backmap:l}}},io=[f,p,d,m],ia=(e,t=rj.core.EPSILON)=>{let r;e.vertices_coords=e.vertices_coords.map(e=>e.slice(0,2)),[s,c,l].map(t=>rJ(e,t)).flat().filter(e=>!io.includes(e)).forEach(t=>delete e[t]);let n={vertices:{},edges:{}};for(r=0;r<20;r+=1){let r=no(e,t/2),i=nG(e),o=nD(e),a=ii(e,t);if(void 0===a){n.vertices.map=void 0===n.vertices.map?r.map:nJ(n.vertices.map,r.map),n.edges.map=void 0===n.edges.map?nJ(i.map,o.map):nJ(n.edges.map,i.map,o.map);break}let s=nY(a.edges.backmap),c=nJ(i.map,o.map,s);n.vertices.map=void 0===n.vertices.map?r.map:nJ(n.vertices.map,r.map),n.edges.map=void 0===n.edges.map?c:nJ(n.edges.map,c)}return 20===r&&console.warn("fragment reached max iterations"),n},is=({edges_vertices:e,edges_assignment:t})=>r3(e.filter((e,r)=>"B"===t[r]||"b"===t[r]).flat()),ic=()=>({vertices:[],edges:[]}),il=({vertices_edges:e,edges_vertices:t,edges_assignment:r})=>{if(void 0===r)return ic();e||(e=ng({edges_vertices:t}));let n=r.map(e=>"B"===e||"b"===e),i=[],o=[],a=-1;for(let e=0;e<n.length;e+=1)if(n[e]){a=e;break}if(-1===a)return ic();n[a]=!1,i.push(a),o.push(t[a][0]);let s=t[a][1];for(;o[0]!==s;){if(o.push(s),void 0===(a=e[s].filter(e=>n[e]).shift()))return ic();t[a][0]===s?[,s]=t[a]:[s]=t[a],n[a]=!1,i.push(a)}return{vertices:o,edges:i}};var iu=Object.freeze({__proto__:null,getBoundingBox:({vertices_coords:e},t)=>rj.core.boundingBox(e,t),getBoundaryVertices:is,getBoundary:il,getPlanarBoundary:({vertices_coords:e,vertices_edges:t,vertices_vertices:r,edges_vertices:n})=>{r||(r=n_({vertices_coords:e,vertices_edges:t,edges_vertices:n}));let i=nE({edges_vertices:n}),o=[],a=[],s={vertices:a,edges:o},c=-1/0,l=-1;if(e.forEach((e,t)=>{e[0]>c&&(c=e[0],l=t)}),-1===l)return s;a.push(l);let u=e[l],f=r[l],p=f.map(t=>e[t]).map(e=>[e[0]-u[0],e[1]-u[1]]).map(e=>Math.atan2(e[1],e[0])).map(e=>e<0?e+2*Math.PI:e).map((e,t)=>({a:e,i:t})).sort((e,t)=>e.a-t.a).shift().i,h=f[p],d=i[l<h?`${l} ${h}`:`${h} ${l}`];o.push(d);let m=l,g=h,v=0;for(;v<1e4;){let e=r[g],t=(e.indexOf(m)+1)%e.length,n=e[t],c=i[g<n?`${g} ${n}`:`${n} ${g}`];if(c===o[0])return s;a.push(g),o.push(c),m=g,g=n,v+=1}return console.warn("calculate boundary potentially entered infinite loop"),s}});let ip=function(e,t){return rW(e,"coords").forEach(r=>{e[r]=e[r].map(e=>rj.core.resize(3,e)).map(e=>rj.core.multiplyMatrix3Vector3(t,e))}),rW(e,"matrix").forEach(r=>{e[r]=e[r].map(e=>rj.core.multiplyMatrices3(e,t))}),e};var ih={scale:(e,t,...r)=>{let n=rj.core.getVector(...r),i=rj.core.resize(3,n);return ip(e,rj.core.makeMatrix3Scale(t,i))},translate:(e,...t)=>{let r=rj.core.getVector(...t),n=rj.core.resize(3,r);return ip(e,rj.core.makeMatrix3Translate(...n))},rotateZ:(e,t,...r)=>{let n=rj.core.getVector(...r),i=rj.core.resize(3,n);return ip(e,rj.core.makeMatrix3RotateZ(t,...i))},transform:ip};let id=(e,t)=>{let r={};t.forEach(e=>{r[e]=!0});let n=e.map(e=>!!r[e]),i=[],o=n.indexOf(!1),a={};for(let t=o+1;t<n.length;t+=1)n[t]&&!a[e[t]]&&(i.push(e[t]),a[e[t]]=!0);for(let t=0;t<o;t+=1)n[t]&&!a[e[t]]&&(i.push(e[t]),a[e[t]]=!0);return i},im=({faces_vertices:e,faces_faces:t},r=0)=>{if(t||(t=nI({faces_vertices:e})),0===t.length)return[];let n=[[{face:r}]],i={};i[r]=!0;do{let r=n[n.length-1].map(e=>t[e.face].map(t=>({face:t,parent:e.face}))).reduce((e,t)=>e.concat(t),[]),o={};r.forEach((e,t)=>{i[e.face]&&(o[t]=!0),i[e.face]=!0});let a=r.filter((e,t)=>!o[t]);a.map(t=>id(e[t.face],e[t.parent])).forEach((e,t)=>{let r=e.slice(0,2);a[t].edge_vertices=r}),n[n.length]=a}while(n[n.length-1].length>0);return n.length>0&&0===n[n.length-1].length&&n.pop(),n};var ig=Object.freeze({__proto__:null,getFaceFaceSharedVertices:id,makeFaceSpanningTree:im});let iv=({vertices_coords:e,vertices_faces:t,faces_vertices:r},n)=>{t||(t=nb({faces_vertices:r}));let i=t.map(e=>e.filter(e=>null!=e).shift()).map(e=>void 0===e?rj.core.identity2x3:n[e]);return e.map((e,t)=>rj.core.multiplyMatrix2Vector2(i[t],e))},i_={U:!0,u:!0},iy=({vertices_coords:e,edges_vertices:t,edges_foldAngle:r,edges_assignment:n,faces_vertices:i,faces_faces:o},a=0)=>{!n&&r&&(n=nS({edges_foldAngle:r})),r||(r=n?nw({edges_assignment:n}):Array(t.length).fill(0));let s=nE({edges_vertices:t}),c=i.map(()=>rj.core.identity3x4);return im({faces_vertices:i,faces_faces:o},a).slice(1).forEach(t=>t.forEach(t=>{let i=t.edge_vertices.map(t=>e[t]),o=s[t.edge_vertices.join(" ")],a=i_[n[o]]?Math.PI:r[o]*Math.PI/180,l=rj.core.makeMatrix3Rotate(a,rj.core.subtract(...rj.core.resizeUp(i[1],i[0])),i[0]);c[t.face]=rj.core.multiplyMatrices3(c[t.parent],l)})),c},ib={M:!0,m:!0,V:!0,v:!0,U:!0,u:!0,F:!1,f:!1,B:!1,b:!1},iE=({edges_vertices:e,edges_foldAngle:t,edges_assignment:r})=>void 0===r?void 0===t?e.map(()=>!0):t.map(e=>e<-rj.core.EPSILON||e>rj.core.EPSILON):r.map(e=>ib[e]),ix=({vertices_coords:e,edges_vertices:t,edges_foldAngle:r,edges_assignment:n,faces_vertices:i,faces_faces:o},a=0)=>{r||(r=n?nw({edges_assignment:n}):Array(t.length).fill(0));let s=iE({edges_vertices:t,edges_foldAngle:r,edges_assignment:n}),c=nE({edges_vertices:t}),l=i.map(()=>rj.core.identity2x3);return im({faces_vertices:i,faces_faces:o},a).slice(1).forEach(t=>t.forEach(t=>{let r=t.edge_vertices.map(t=>e[t]),n=c[t.edge_vertices.join(" ")],i=rj.core.subtract2(r[1],r[0]),o=r[0],a=s[n]?rj.core.makeMatrix2Reflect(i,o):rj.core.identity2x3;l[t.face]=rj.core.multiplyMatrices2(l[t.parent],a)})),l};var iO=Object.freeze({__proto__:null,multiplyVerticesFacesMatrix2:iv,makeFacesMatrix:iy,makeEdgesIsFolded:iE,makeFacesMatrix2:ix});let ik=({vertices_coords:e,vertices_faces:t,edges_vertices:r,edges_foldAngle:n,edges_assignment:i,faces_vertices:o,faces_faces:a,faces_matrix:s},c)=>{s=iy({vertices_coords:e,edges_vertices:r,edges_foldAngle:n,edges_assignment:i,faces_vertices:o,faces_faces:a},c),t||(t=nb({faces_vertices:o}));let l=t.map(e=>e.filter(e=>null!=e).shift()).map(e=>void 0===e?rj.core.identity3x4:s[e]);return e.map(e=>rj.core.resize(3,e)).map((e,t)=>rj.core.multiplyMatrix3Vector3(l[t],e))},iM=({vertices_coords:e,edges_vertices:t,edges_foldAngle:r,edges_assignment:n,faces_vertices:i,faces_faces:o},a=0)=>{let s=iE({edges_vertices:t,edges_foldAngle:r,edges_assignment:n}),c=[];i[a].forEach(t=>{c[t]=[...e[t]]});let l=[];l[a]=!1;let u=nE({edges_vertices:t});return im({faces_vertices:i,faces_faces:o},a).slice(1).forEach(r=>r.forEach(r=>{let n=u[r.edge_vertices.join(" ")],o=t[n].map(e=>c[e]);if(void 0===o[0]||void 0===o[1])return;let a=t[n].map(t=>e[t]),f=a[0],p=rj.core.normalize2(rj.core.subtract2(a[1],a[0])),h=rj.core.rotate90(p);l[r.face]=s[n]?!l[r.parent]:l[r.parent];let d=rj.core.normalize2(rj.core.subtract2(o[1],o[0])),m=o[0],g=l[r.face]?rj.core.rotate270(d):rj.core.rotate90(d);i[r.face].filter(e=>void 0===c[e]).forEach(t=>{let r=rj.core.subtract2(e[t],f),n=rj.core.dot(r,h),i=rj.core.dot(r,p),o=rj.core.scale2(d,i),a=rj.core.scale2(g,n),s=rj.core.add2(rj.core.add2(m,o),a);c[t]=s})})),c};var iA=Object.freeze({__proto__:null,makeVerticesCoordsFolded:ik,makeVerticesCoordsFlatFolded:iM});let ij=e=>e.map(e=>e[0]*e[3]-e[1]*e[2]).map(e=>e>=0),iP=({vertices_coords:e,faces_vertices:t})=>t.map(t=>t.map(t=>e[t]).map((e,t,r)=>[e,r[(t+1)%r.length]]).map(e=>(e[1][0]-e[0][0])*(e[1][1]+e[0][1])).reduce((e,t)=>e+t,0)).map(e=>e<0);var iw=Object.freeze({__proto__:null,makeFacesWindingFromMatrix:e=>e.map(e=>e[0]*e[4]-e[1]*e[3]).map(e=>e>=0),makeFacesWindingFromMatrix2:ij,makeFacesWinding:iP});let iS=e=>{let t=e.faces_vertices.map(t=>t.map(t=>e.vertices_coords[t])).reduce((e,t)=>e.concat(t),[]),r=0,n=e.faces_vertices.map(e=>e.map(e=>r++));return{vertices_coords:JSON.parse(JSON.stringify(t)),faces_vertices:n}},i$=({vertices_coords:e,faces_vertices:t},r=.333)=>{let n=iS({vertices_coords:e,faces_vertices:t}),i=iP(n),o=n.faces_vertices.map(e=>e.map(e=>n.vertices_coords[e])).map(e=>e.map((e,t,r)=>rj.core.subtract2(e,r[(t+1)%r.length]))),a=nq({vertices_coords:e,faces_vertices:t}),s=t.map(t=>t.map(t=>e[t])).map((e,t)=>e.map(e=>rj.core.distance2(e,a[t])));console.log("faces_point_distances",s);let c=o.map((e,t)=>e.map((e,t,r)=>[e,rj.core.flip(r[(t-1+r.length)%r.length])]).map(e=>i[t]?rj.core.counterClockwiseBisect2(...e):rj.core.clockwiseBisect2(...e))).map((e,t)=>e.map((e,r)=>rj.core.scale(e,s[t][r])));return n.faces_vertices.forEach((e,t)=>e.forEach((e,i)=>{n.vertices_coords[e]=rj.core.add2(n.vertices_coords[e],rj.core.scale2(c[t][i],-r))})),n};var iC=Object.freeze({__proto__:null,explodeFaces:iS,explodeShrinkFaces:i$});let iL=({vertices_coords:e},t)=>{if(!e)return;let r=rj.core.resize(e[0].length,t),n=e.map((e,t)=>({d:rj.core.distance(r,e),i:t})).sort((e,t)=>e.d-t.d).shift();return n?n.i:void 0},iN=({vertices_coords:e,edges_vertices:t},r)=>{if(!e||!t)return;let n=t.map(t=>t.map(t=>e[t])).map(e=>rj.core.nearestPointOnLine(rj.core.subtract(e[1],e[0]),e[0],r,rj.core.segmentLimiter));return rj.core.smallestComparisonSearch(r,n,rj.core.distance)},iz=({vertices_coords:e,faces_vertices:t},r)=>{if(!e||!t)return;let n=t.map((t,r)=>({face:t.map(t=>e[t]),i:r})).filter(e=>rj.core.overlapConvexPolygonPoint(e.face,r)).shift();return void 0===n?void 0:n.i},iF=(e,t)=>{let r=iz(e,t);if(void 0!==r)return r;if(e.edges_faces){let r=iN(e,t),n=e.edges_faces[r];if(1===n.length)return n[0];if(n.length>1){let r=nq({vertices_coords:e.vertices_coords,faces_vertices:n.map(t=>e.faces_vertices[t])}).map(e=>rj.core.distance(e,t)),i=0;for(let e=0;e<r.length;e+=1)r[e]<r[i]&&(i=e);return n[i]}}};var iI=Object.freeze({__proto__:null,nearestVertex:iL,nearestEdge:iN,faceContainingPoint:iz,nearestFace:iF});let iV=function(e){let t,r;if(typeof e!==o||!e)return e;if("[object Array]"===Object.prototype.toString.apply(e)){for(r=0,t=[];r<e.length;r+=1)t[r]=iV(e[r]);return t}for(r in t={},e)e.hasOwnProperty(r)&&(t[r]=iV(e[r]));return t},iB=(e,t,r=rj.core.EPSILON)=>{e.vertices_coords||(e.vertices_coords=[]),"number"==typeof t[0]&&(t=[t]);let n=t.map(t=>e.vertices_coords.map(e=>rj.core.distance(e,t)<r).map((e,t)=>e?t:void 0).filter(e=>void 0!==e).shift()),i=e.vertices_coords.length,o=t.filter((e,t)=>void 0===n[t]);return e.vertices_coords.push(...o),n.map(e=>void 0===e?i++:e)},iq=(e,t,r,n=rj.core.EPSILON)=>{if(e.edges_vertices.length<t)return{};let i=e.edges_vertices[t];r||(r=rj.core.midpoint(...i));let o=i.map(t=>e.vertices_coords[t]).map(e=>rj.core.distance(e,r)<n);if(o[0])return{vertex:i[0],edges:{}};if(o[1])return{vertex:i[1],edges:{}};let a=e.vertices_coords.length;e.vertices_coords[a]=r;let s=[0,1].map(t=>t+e.edges_vertices.length);((e,t,r)=>{let n=e.edges_vertices[t],i=[{edges_vertices:[n[0],r]},{edges_vertices:[r,n[1]]}];if(i.forEach(r=>[d,m].filter(r=>e[r]&&void 0!==e[r][t]).forEach(n=>{r[n]=e[n][t]})),e.vertices_coords&&(e.edges_length||e.edges_vector)){let t=i.map(t=>t.edges_vertices.map(t=>e.vertices_coords[t]));e.edges_vector&&i.forEach((e,r)=>{e.edges_vector=rj.core.subtract(t[r][1],t[r][0])}),e.edges_length&&i.forEach((e,r)=>{e.edges_length=rj.core.distance2(...t[r])})}return i})(e,t,a).forEach((t,r)=>Object.keys(t).forEach(n=>{e[n][s[r]]=t[n]})),(({vertices_vertices:e},t,r)=>{e&&(e[t]=[...r],r.forEach((r,n,i)=>{let o=i[(n+1)%i.length],a=e[r].indexOf(o);e[r][a]=t}))})(e,a,i),(({vertices_coords:e,vertices_vertices:t,vertices_sectors:r},n)=>{r&&(r[n]=1===t[n].length?[rj.core.TWO_PI]:rj.core.counterClockwiseSectors2(t[n].map(t=>rj.core.subtract2(e[t],e[n]))))})(e,a),(({vertices_edges:e},t,r,n,i)=>{e&&(e[r]=[...i],n.map(r=>e[r].indexOf(t)).forEach((t,r)=>{e[n[r]][t]=i[r]}))})(e,t,a,i,s);let l=(({vertices_faces:e,edges_vertices:t,edges_faces:r,faces_edges:n,faces_vertices:i},o)=>{if(r&&r[o])return r[o];let a=t[o];if(void 0!==e){let t=[];for(let r=0;r<e[a[0]].length;r+=1)for(let n=0;n<e[a[1]].length;n+=1)if(e[a[0]][r]===e[a[1]][n]){if(void 0===e[a[0]][r])continue;t.push(e[a[0]][r])}return t}if(n){let e=[];for(let t=0;t<n.length;t+=1)for(let r=0;r<n[t].length;r+=1)n[t][r]===o&&e.push(t);return e}i&&console.warn("todo: findAdjacentFacesToEdge")})(e,t);l&&((({vertices_faces:e},t,r)=>{e&&(e[t]=[...r])})(e,a,l),(({edges_faces:e},t,r)=>{e&&t.forEach(t=>{e[t]=[...r]})})(e,s,l),(({faces_vertices:e},t,r,n)=>{e&&n.map(t=>e[t]).forEach(e=>e.map((e,t,n)=>{let i=(t+1)%n.length;return e===r[0]&&n[i]===r[1]||e===r[1]&&n[i]===r[0]?i:void 0}).filter(e=>void 0!==e).sort((e,t)=>t-e).forEach(r=>e.splice(r,0,t)))})(e,a,i,l),(({edges_vertices:e,faces_vertices:t,faces_edges:r},n)=>{let i=nE({edges_vertices:e});n.map(e=>t[e].map((e,t,r)=>[e,r[(t+1)%r.length]]).map(e=>i[e.join(" ")])).forEach((e,t)=>{r[n[t]]=e})})(e,l));let u=ne(e,c,[t]);return s.forEach((e,t)=>{s[t]=u[s[t]]}),u.splice(-2),u[t]=s,{vertex:a,edges:{map:u,new:s,remove:t}}},iT="splitFace potentially given a non-convex face",iR=(e,t,r,n,i)=>{var o,a,s;let c,u,f,p,h,d=it(e,t,r,n,i);if(void 0===d)return;let m=((e,{vertices:t,edges:r})=>{let n,i,o=r.map(t=>{let r=iq(e,n?n[t.edge]:t.edge,t.coords);return n=n?nJ(n,r.edges.map):r.edges.map,r});return t.push(...o.map(e=>e.vertex)),o.forEach(e=>{e.edges.remove=i?i[e.edges.remove]:e.edges.remove;let t=nX(e.edges.map);i=i?nH(i,t):t}),{vertices:t,edges:{map:n,remove:o.map(e=>e.edges.remove)}}})(e,d);m.edges.new=(o=m.vertices,c=e.edges_vertices.length,Object.keys(u=(({vertices_coords:e},t,r)=>{let n=t.map(t=>e[t]).reverse();return{edges_vertices:[...t],edges_foldAngle:0,edges_assignment:"U",edges_length:rj.core.distance2(...n),edges_vector:rj.core.subtract(...n),edges_faces:[r,r]}})(e,o,t)).filter(t=>void 0!==e[t]).forEach(t=>{e[t][c]=u[t]}),c),(({vertices_coords:e,vertices_vertices:t,edges_vertices:r},n)=>{let i=r[n][0],o=r[n][1];t[i]=nh({vertices_coords:e},t[i].concat(o),i),t[o]=nh({vertices_coords:e},t[o].concat(i),o)})(e,m.edges.new),(({edges_vertices:e,vertices_edges:t,vertices_vertices:r},n)=>{if(!t||!r)return;let i=e[n];i.map(e=>r[e]).map((e,t)=>e.indexOf(i[(t+1)%i.length])).forEach((e,r)=>t[i[r]].splice(e,0,n))})(e,m.edges.new);let g=(a=m.vertices,f=[0,1].map(t=>e.faces_vertices.length+t),(({edges_vertices:e,faces_vertices:t,faces_edges:r},n,i)=>{let o=i.map(e=>t[n].indexOf(e)),a=r4(t[n],o).map(e=>({faces_vertices:e}));if(r){let t=nE({edges_vertices:e});a.map(e=>e.faces_vertices.map((e,t,r)=>`${e} ${r[(t+1)%r.length]}`).map(e=>t[e])).forEach((e,t)=>{a[t].faces_edges=e})}return a})(e,t,a).forEach((t,r)=>Object.keys(t).forEach(n=>{e[n][f[r]]=t[n]})),f);p={},g.forEach(t=>e.faces_vertices[t].forEach(e=>{p[e]||(p[e]=[]),p[e].push(t)})),e.faces_vertices[t].forEach(r=>{let n=e.vertices_faces[r].indexOf(t),i=p[r];-1!==n&&i?e.vertices_faces[r].splice(n,1,...i):console.warn(iT)}),s=m.edges.new,h={},g.forEach(t=>e.faces_edges[t].forEach(e=>{h[e]||(h[e]=[]),h[e].push(t)})),[...e.faces_edges[t],s].forEach(r=>{let n=h[r],i=[];for(let n=0;n<e.edges_faces[r].length;n+=1)e.edges_faces[r][n]===t&&i.push(n);if(0===i.length||!n)return void console.warn(iT);i.reverse().forEach(t=>e.edges_faces[r].splice(t,1));let o=i[i.length-1];e.edges_faces[r].splice(o,0,...n)}),(({faces_vertices:e,faces_faces:t},r,n)=>{let i=t[r],o=n.map(t=>e[t]),a=i.map(t=>{let r=e[t],i=[0,0];for(let e=0;e<o.length;e+=1){let t=0;for(let n=0;n<r.length;n+=1)-1!==o[e].indexOf(r[n])&&(t+=1);i[e]=t}return i[0]>=2?n[0]:i[1]>=2?n[1]:void 0});n.forEach((e,r,i)=>{t[e]=[i[(r+1)%n.length]]}),i.forEach((e,n)=>{for(let i=0;i<t[e].length;i+=1)t[e][i]===r&&(t[e][i]=a[n],t[a[n]].push(e))})})(e,t,g);let v=ne(e,l,[t]);return g.forEach((e,t)=>{g[t]=v[g[t]]}),v.splice(-2),v[t]=g,m.faces={map:v,new:g,remove:t},m},iU={};iU.prototype=Object.create(Object.prototype),iU.prototype.constructor=iU;let iD=Object.assign({clean:nQ,validate:n0,populate:n1,fragment:ia,addVertices:iB,splitEdge:iq,faceSpanningTree:im,explodeFaces:iS,explodeShrinkFaces:i$},ih);Object.keys(iD).forEach(e=>{iU.prototype[e]=function(){return iD[e](this,...arguments)}}),iU.prototype.splitFace=function(e,...t){let r=rj.core.getLine(...t);return iR(this,e,r.vector,r.origin)},iU.prototype.copy=function(){return Object.assign(Object.create(Object.getPrototypeOf(this)),iV(this))},iU.prototype.clear=function(){return rN.forEach(e=>delete this[e]),rz.forEach(e=>delete this[e]),delete this.file_frames,this},iU.prototype.boundingBox=function(){return rj.rect.fromPoints(this.vertices_coords)},iU.prototype.unitize=function(){if(!this.vertices_coords)return this;let e=rj.core.bounding_box(this.vertices_coords),t=Math.max(...e.span),r=0===t?1:1/t,n=e.min;return this.vertices_coords=this.vertices_coords.map(e=>rj.core.subtract(e,n)).map(e=>e.map(e=>e*r)),this},iU.prototype.folded=function(){let e=this.faces_matrix2?iv(this,this.faces_matrix2):ik(this,...arguments);return Object.assign(Object.create(Object.getPrototypeOf(this)),Object.assign(iV(this),{vertices_coords:e,frame_classes:[b]}))},iU.prototype.flatFolded=function(){let e=this.faces_matrix2?iv(this,this.faces_matrix2):iM(this,...arguments);return Object.assign(Object.create(Object.getPrototypeOf(this)),Object.assign(iV(this),{vertices_coords:e,frame_classes:[b]}))};let iG=function(e){let t=Object.create(null);return Object.keys(e).forEach(r=>{t[r.substring(this.length+1)]=e[r]}),t},iW=function(e){return rY(this,e).map(iG.bind(e)).map(rC[e].bind(this))};[s,c,l].forEach(e=>Object.defineProperty(iU.prototype,e,{enumerable:!0,get:function(){return iW.call(this,e)}})),Object.defineProperty(iU.prototype,v,{enumerable:!0,get:function(){let e=il(this),t=e.vertices.map(e=>this.vertices_coords[e]);return Object.keys(e).forEach(r=>{t[r]=e[r]}),Object.assign(t,e)}});let iZ={vertices:iL,edges:iN,faces:iF};iU.prototype.nearest=function(){let e=rj.core.getVector(arguments),t=Object.create(null),r={};return[s,c,l].forEach(n=>{Object.defineProperty(t,rB[n],{enumerable:!0,get:()=>(void 0!==r[n]||(r[n]=iZ[n](this,e)),r[n])}),rZ(this,n).forEach(e=>Object.defineProperty(t,e,{enumerable:!0,get:()=>this[e][t[rB[n]]]}))}),t};var iJ=iU.prototype;let iH=function(e,t){let r=il(e).vertices.map(t=>e.vertices_coords[t]),n=t.vector?t.vector:rj.core.subtract2(t[1],t[0]),i=t.origin?t.origin:t[0],o=t.domain_function?t.domain_function:rj.core.includeL;return rj.core.clipLineConvexPolygon(r,n,i,rj.core.include,o)},iY=(e,t)=>{e.edges_vertices||(e.edges_vertices=[]),"number"==typeof t[0]&&(t=[t]);let r=t.map((t,r)=>e.edges_vertices.length+r);e.edges_vertices.push(...t);let n=nG(e).map;return r.map(e=>n[e])},iX=(e,t,r,n=rj.core.EPSILON)=>{e.vertices_sectors||(e.vertices_sectors=nM(e));let i=[t,r].map(e=>[e[0],e[1]]),o=rj.core.subtract2(i[1],i[0]),a=n7(e,i[0],i[1],n),s=a.map((e,t)=>void 0===e?void 0:t).filter(e=>void 0!==e).sort((e,t)=>e-t),c={};s.forEach(t=>e.edges_faces[t].forEach(e=>{c[e]=!0}));let l=Object.keys(c).map(e=>parseInt(e,10)).sort((e,t)=>e-t),u=s.reverse().map(t=>iq(e,t,a[t],n)).map(e=>e.vertex),f=iB(e,i,n),p={};u.forEach(e=>{p[e]=!0}),f.forEach(e=>{p[e]=!0});let h=nd(e,Object.keys(p).map(e=>parseInt(e,10)),o),d=nE(e),m=((e,t,r)=>{let n=Array.from(Array(t.length-1)).map((e,r)=>[t[r],t[r+1]]),i=n.map(e=>e.join(" ")).map(e=>void 0===r[e]),o=n.filter((e,t)=>i[t]),a=Array.from(Array(o.length)).map((t,r)=>e.edges_vertices.length+r);a.forEach((t,r)=>{e.edges_vertices[t]=o[r]}),e.edges_assignment&&a.forEach(t=>{e.edges_assignment[t]="U"}),e.edges_foldAngle&&a.forEach(t=>{e.edges_foldAngle[t]=0});for(let r=0;r<t.length;r+=1){let n=t[r],o=[i[r-1]?t[r-1]:void 0,i[r]?t[r+1]:void 0].filter(e=>void 0!==e),a=(e.vertices_vertices[n]?e.vertices_vertices[n]:[]).concat(o);e.vertices_vertices[n]=nh(e,a,t[r])}let s=nE(e);for(let r=0;r<t.length;r+=1){let n=t[r];e.vertices_edges[n]=e.vertices_vertices[n].map(e=>s[`${n} ${e}`])}return t.map(t=>1===e.vertices_vertices[t].length?[rj.core.TWO_PI]:rj.core.counterClockwiseSectors2(e.vertices_vertices[t].map(r=>rj.core.subtract2(e.vertices_coords[r],e.vertices_coords[t])))).forEach((r,n)=>{e.vertices_sectors[t[n]]=r}),a})(e,h,d);m.forEach(t=>{let r=e.edges_vertices[t];d[`${r[0]} ${r[1]}`]=t,d[`${r[1]} ${r[0]}`]=t});let g=h.map(t=>e.vertices_vertices[t].map(e=>[[e,t],[t,e]])).reduce((e,t)=>e.concat(t),[]).reduce((e,t)=>e.concat(t),[]),v={},_=nf(g.map(t=>nl(e,t[0],t[1],v)).filter(e=>void 0!==e));ne(e,"faces",l);let y=_.map((t,r)=>e.faces_vertices.length+r);return e.faces_vertices&&y.forEach((t,r)=>{e.faces_vertices[t]=_[r].vertices}),e.faces_edges&&y.forEach((t,r)=>{e.faces_edges[t]=_[r].edges.map(e=>d[e])}),e.faces_angles&&y.forEach((t,r)=>{e.faces_angles[t]=_[r].faces_angles}),e.vertices_faces&&(e.vertices_faces=nb(e)),e.edges_faces&&(e.edges_faces=nA(e)),e.faces_faces&&(e.faces_faces=nI(e)),(e.vertices_coords.length!==e.vertices_vertices.length||e.vertices_coords.length!==e.vertices_edges.length||e.vertices_coords.length!==e.vertices_faces.length)&&console.warn("vertices mismatch",JSON.parse(JSON.stringify(e))),(e.edges_vertices.length!==e.edges_faces.length||e.edges_vertices.length!==e.edges_assignment.length)&&console.warn("edges mismatch",JSON.parse(JSON.stringify(e))),(e.faces_vertices.length!==e.faces_edges.length||e.faces_vertices.length!==e.faces_faces.length)&&console.warn("faces mismatch",JSON.parse(JSON.stringify(e))),m},iK=(e,t)=>{let r=[...e.edges_vertices[t]].sort((e,t)=>t-e),n=[...e.edges_faces[t]];(({vertices_vertices:e},t)=>{let r=[t[1],t[0]];t.map((t,n)=>e[t].indexOf(r[n])).forEach((r,n)=>e[t[n]].splice(r,1))})(e,r),(({vertices_edges:e},t,r)=>{r.map((r,n)=>e[r].indexOf(t)).forEach((t,n)=>e[r[n]].splice(t,1))})(e,t,r);let i=r.map(t=>0===e.vertices_vertices[t].length),o=r.filter((e,t)=>i[t]);if(2===n.length&&n[0]!==n[1]){let i,o,a,s,c,l,u,f,p,h,d,m=e.faces_vertices.length,g=(i=n.map(r=>e.faces_edges[r].indexOf(t)),o=[],n.forEach((t,n)=>e.faces_vertices[t].forEach((e,t,i)=>{let a=i[(t+1)%i.length];(e===r[0]&&a===r[1]||e===r[1]&&a===r[0])&&(o[n]=t)})),(void 0===o[0]||void 0===o[1])&&console.warn("removePlanarEdge error joining faces"),a=n.map(t=>e.faces_edges[t].length),s=n.map(t=>e.faces_vertices[t].length),c=a.map(e=>e-1),l=s.map(e=>e-1),u=i.map((e,t)=>(e+1)%a[t]),f=o.map((e,t)=>(e+1)%s[t]),p=n.map((t,r)=>Array.from(Array(c[r])).map((e,t)=>(u[r]+t)%a[r]).map(r=>e.faces_edges[t][r])),h=n.map((t,r)=>Array.from(Array(l[r])).map((e,t)=>(f[r]+t)%s[r]).map(r=>e.faces_vertices[t][r])),d=n.map(t=>e.faces_faces[t]).reduce((e,t)=>e.concat(t),[]).filter(e=>e!==n[0]&&e!==n[1]),{vertices:h[0].concat(h[1]),edges:p[0].concat(p[1]),faces:d});e.faces_vertices.push(g.vertices),e.faces_edges.push(g.edges),e.faces_faces.push(g.faces),e.vertices_faces.forEach((t,r)=>{let i=!1;t.forEach((o,a)=>{if(o===n[0]||o===n[1]){e.vertices_faces[r][a]=m;let n=i?[r,1]:[r,1,m];t.splice(...n),i=!0}})}),e.edges_faces.forEach((t,r)=>t.forEach((t,i)=>{(t===n[0]||t===n[1])&&(e.edges_faces[r][i]=m)})),e.faces_faces.forEach((t,r)=>t.forEach((t,i)=>{(t===n[0]||t===n[1])&&(e.faces_faces[r][i]=m)})),e.faces_vertices.forEach(t=>t.forEach(t=>{void 0===t&&console.log("FOUND ONE before remove",e.faces_vertices)})),ne(e,"faces",n)}if(2===n.length&&n[0]===n[1]&&o.length){let r=n[0];e.faces_vertices[r]=e.faces_vertices[r].filter(e=>!o.includes(e)).filter((e,t,r)=>e!==r[(t+1)%r.length]),e.faces_edges[r]=e.faces_edges[r].filter(e=>e!==t)}ne(e,"edges",[t]),ne(e,"vertices",o)},iQ=(e,t)=>{let r=e.vertices_edges[t],n=r8(e.vertices_faces[t].filter(e=>null!=e));if(2!==r.length||n.length>2)return void console.warn("cannot remove non 2-degree vertex yet (e,f)",r,n);let i=(r.forEach(r=>{e.edges_vertices[r][0]===t&&e.edges_vertices[r][1]===t&&console.warn("removePlanarVertex circular edge")}),r.map(r=>e.edges_vertices[r][0]===t?e.edges_vertices[r][1]:e.edges_vertices[r][0])),o=i.slice().reverse();r.sort((e,t)=>e-t),i.forEach(t=>{let n=e.vertices_edges[t].indexOf(r[1]);-1!==n&&(e.vertices_edges[t][n]=r[0])}),i.forEach((r,n)=>{let i=e.vertices_vertices[r].indexOf(t);-1===i?console.warn("removePlanarVertex unknown vertex issue"):e.vertices_vertices[r][i]=o[n]}),e.edges_vertices[r[0]]=[...i],n.forEach(r=>{let n=e.faces_vertices[r].indexOf(t);-1===n?console.warn("removePlanarVertex unknown face_vertex issue"):e.faces_vertices[r].splice(n,1)}),n.forEach(t=>{let n=e.faces_edges[t].indexOf(r[1]);-1===n?console.warn("removePlanarVertex unknown face_edge issue"):e.faces_edges[t].splice(n,1)}),ne(e,"vertices",[t]),ne(e,"edges",[r[1]])},i0=e=>[0,1].map(t=>e.filter((e,r)=>r%2===t).reduce((e,t)=>e+t,0)),i1=e=>e.map((e,t,r)=>[e,r[(t+1)%r.length]]).map(e=>rj.core.counterClockwiseAngleRadians(...e)).map((e,t,r)=>r.slice(t+1,r.length).concat(r.slice(0,t))).map(e=>i0(e).map(e=>Math.PI-e)).map((t,r)=>e[r]+t[0]).map((t,r)=>rj.core.isCounterClockwiseBetween(t,e[r],e[(r+1)%e.length])?t:void 0),i2=e=>i1(e.map(e=>Math.atan2(e[1],e[0]))).map(e=>void 0===e?void 0:[Math.cos(e),Math.sin(e)]);var i3=Object.freeze({__proto__:null,alternatingSum:i0,alternatingSumDifference:e=>{let t=e.reduce((e,t)=>e+t,0)/2;return i0(e).map(e=>e-t)},kawasakiSolutionsRadians:i1,kawasakiSolutionsVectors:i2});let i8={B:!0,b:!0,F:!0,f:!0,U:!0,u:!0},i4=({vertices_edges:e,edges_assignment:t})=>e.map(e=>e.map(e=>i8[t[e]]).reduce((e,t)=>e&&t,!0)).map((e,t)=>e?t:void 0).filter(e=>void 0!==e),i5={M:!0,m:!0,V:!0,v:!0},i6={M:-1,m:-1,V:1,v:1},i9=({edges_vertices:e,vertices_edges:t,edges_assignment:r})=>{t||(t=ng({edges_vertices:e}));let n=t.map(e=>e.map(e=>i6[r[e]]).filter(e=>void 0!==e).reduce((e,t)=>e+t,0)).map(e=>2===e||-2===e);return is({edges_vertices:e,edges_assignment:r}).forEach(e=>{n[e]=!0}),i4({vertices_edges:t,edges_assignment:r}).forEach(e=>{n[e]=!0}),n.map((e,t)=>e?void 0:t).filter(e=>void 0!==e)},i7=({vertices_coords:e,vertices_vertices:t,vertices_edges:r,edges_vertices:n,edges_assignment:i,edges_vector:o},a=rj.core.EPSILON)=>{t||(t=n_({vertices_coords:e,vertices_edges:r,edges_vertices:n}));let s=nk({vertices_coords:e,vertices_vertices:t,edges_vertices:n,edges_vector:o}).map((e,t)=>e.filter((e,n)=>i5[i[r[t][n]]])).map(e=>e.length>1?rj.core.counterClockwiseSectors2(e):[0,0]).map(e=>i0(e)).map(e=>Math.abs(e[0]-e[1])<a);return is({edges_vertices:n,edges_assignment:i}).forEach(e=>{s[e]=!0}),i4({vertices_edges:r,edges_assignment:i}).forEach(e=>{s[e]=!0}),s.map((e,t)=>e?void 0:t).filter(e=>void 0!==e)};var oe=Object.freeze({__proto__:null,validateMaekawa:i9,validateKawasaki:i7});let ot={};ot.prototype=Object.create(iJ),ot.prototype.constructor=ot;let or=function(e){return e.mountain=(t=-180)=>(e.forEach(e=>{this.edges_assignment[e]="M",this.edges_foldAngle[e]=t}),e),e.valley=(t=180)=>(e.forEach(e=>{this.edges_assignment[e]="V",this.edges_foldAngle[e]=t}),e),e.flat=()=>(e.forEach(e=>{this.edges_assignment[e]="F",this.edges_foldAngle[e]=0}),e),e};["line","ray","segment"].forEach(e=>{ot.prototype[e]=function(){let t=rj[e](...arguments);if(!t)return;let r=iH(this,t);if(!r)return;let n=iX(this,r[0],r[1]);return or.call(this,n)}}),["circle","ellipse","rect","polygon"].forEach(e=>{ot.prototype[e]=function(){let t=rj[e](...arguments);if(!t)return;let r=t.segments(96).map(e=>rj.segment(e)).map(e=>iH(this,e)).filter(e=>void 0!==e);if(!r)return;let n=[],i=[];r.forEach(e=>{let t=iB(this,e);n.push(...t),i.push(...iY(this,t))});let{map:o}=ia(this).edges;return n1(this),or.call(this,i.map(e=>o[e]).reduce((e,t)=>e.concat(t),[]))}}),ot.prototype.removeEdge=function(e){let t=this.edges_vertices[e];return iK(this,e),t.map(e=>n4(this,e)).map((e,r)=>e?t[r]:void 0).filter(e=>void 0!==e).sort((e,t)=>t-e).forEach(e=>iQ(this,e)),!0},ot.prototype.validate=function(e){let t=n0(this,e);return t.vertices.kawasaki=i7(this,e),t.vertices.maekawa=i9(this),this.edges_foldAngle&&(t.edges.not_flat=this.edges_foldAngle.map((e,t)=>rD(e)?void 0:t).filter(e=>void 0!==e)),"valid"===t.summary&&(t.vertices.kawasaki.length||t.vertices.maekawa.length?t.summary="invalid":t.edges.not_flat.length&&(t.summary="not flat")),t};var on=ot.prototype;let oi=(e,t,r,n)=>{let i=rj.core.subtract2(r,t),o=rj.core.cross2(e,i);return n?o>0:o<0},oo=(e,t)=>e.faces_vertices[t]?e.faces_vertices[t].map(t=>e.vertices_coords[t]).reduce((e,t)=>[e[0]+t[0],e[1]+t[1]],[0,0]).map(r=>r/e.faces_vertices[t].length):[0,0],oa={F:!0,f:!0,U:!0,u:!0},os={M:"V",m:"V",V:"M",v:"M"},oc=(e,t)=>({center:e.faces_center[t],matrix:e.faces_matrix2[t],winding:e.faces_winding[t],crease:e.faces_crease[t],side:e.faces_side[t],layer:e.faces_layer[t]}),ol=(e,t,r,n="V",i=rj.core.EPSILON)=>{var o,a;let s,c,l,u,f=os[n]||n;n1(e),e.faces_layer||(e.faces_layer=Array(e.faces_vertices.length).fill(0)),e.faces_center=e.faces_vertices.map((t,r)=>oo(e,r)),e.faces_matrix2||(e.faces_matrix2=ix(e,0)),e.faces_winding=ij(e.faces_matrix2),e.faces_crease=e.faces_matrix2.map(rj.core.invertMatrix2).map(e=>rj.core.multiplyMatrix2Line2(e,t,r)),e.faces_side=e.faces_vertices.map((t,r)=>oi(e.faces_crease[r].vector,e.faces_crease[r].origin,e.faces_center[r],e.faces_winding[r]));let p=n9({vertices_coords:iv(e,e.faces_matrix2),edges_vertices:e.edges_vertices},t,r,i).map((e,t)=>e?t:void 0).filter(e=>void 0!==e).filter(t=>oa[e.edges_assignment[t]]);p.map(t=>e.edges_faces[t].find(e=>null!=e)).map(t=>e.faces_winding[t]).map(e=>e?n:f).forEach((t,r)=>{e.edges_assignment[p[r]]=t,e.edges_foldAngle[p[r]]=rR(t)});let h=oc(e,0),d=e.faces_vertices.map((e,t)=>t).reverse().map(t=>{let r=oc(e,t),o=iR(e,t,r.crease.vector,r.crease.origin,i);if(void 0!==o)return e.edges_assignment[o.edges.new]=r.winding?n:f,e.edges_foldAngle[o.edges.new]=rR(e.edges_assignment[o.edges.new]),o.faces.map[o.faces.remove].forEach(t=>{e.faces_center[t]=oo(e,t),e.faces_side[t]=oi(r.crease.vector,r.crease.origin,e.faces_center[t],r.winding),e.faces_layer[t]=r.layer}),o}).filter(e=>void 0!==e),m=nJ(...d.map(e=>e.faces.map)),g=nJ(...d.map(e=>e.edges.map).filter(e=>void 0!==e)),v=d.map(e=>e.faces.remove).reverse();o=e.faces_layer,a=e.faces_side,s=[],l=(c=o.map((e,t)=>t)).filter(e=>a[e]),(u=c.filter(e=>!a[e])).sort((e,t)=>o[e]-o[t]).forEach((e,t)=>{s[e]=t}),l.sort((e,t)=>o[t]-o[e]).forEach((e,t)=>{s[e]=u.length+t}),e.faces_layer=s;let _=m&&m[0]&&2===m[0].length,y=_?m[0].filter(t=>e.faces_side[t]).shift():0,b=h.matrix;return n!==f&&(b=_||e.faces_side[0]?rj.core.multiplyMatrices2(h.matrix,rj.core.makeMatrix2Reflect(h.crease.vector,h.crease.origin)):h.matrix),e.faces_matrix2=ix(e,y).map(e=>rj.core.multiplyMatrices2(b,e)),delete e.faces_center,delete e.faces_winding,delete e.faces_crease,delete e.faces_side,{faces:{map:m,remove:v},edges:{map:g}}},ou={};ou.prototype=Object.create(iJ),ou.prototype.constructor=ou,ou.prototype.flatFold=function(){let e=rj.core.getLine(arguments);return ol(this,e.vector,e.origin),this};var of=ou.prototype;let op=e=>e.frame_classes&&e.frame_classes.includes("foldedForm")||e.file_classes&&e.file_classes.includes("foldedForm");var oh=Object.freeze({__proto__:null,isFoldedForm:op});let od=({vertices_coords:e,edges_vertices:t,edges_coords:r},n=rj.core.EPSILON)=>{r||(r=n$({vertices_coords:e,edges_vertices:t}));let i=nL({vertices_coords:e,edges_vertices:t,edges_coords:r}),o=Array.from(Array(r.length)).map(()=>[]),a=i.length?i[0].min.length:0;for(let e=0;e<r.length-1;e+=1)for(let t=e+1;t<r.length;t+=1){let r=!0;for(let o=0;o<a;o+=1)rj.core.fnEpsilonEqual(i[e].min[o],i[t].min[o],n)&&rj.core.fnEpsilonEqual(i[e].max[o],i[t].max[o],n)||(r=!1);o[e][t]=r,o[t][e]=r}for(let e=0;e<r.length-1;e+=1)for(let t=e+1;t<r.length;t+=1){if(!o[e][t])continue;let i=rj.core.fnEpsilonEqualVectors(r[e][0],r[t][0],n)&&rj.core.fnEpsilonEqualVectors(r[e][1],r[t][1],n),a=rj.core.fnEpsilonEqualVectors(r[e][0],r[t][1],n)&&rj.core.fnEpsilonEqualVectors(r[e][1],r[t][0],n),s=i||a;o[e][t]=s,o[t][e]=s}return r6(o)},om=({vertices_coords:e,edges_vertices:t,edges_vector:r},n)=>{r||(r=nC({vertices_coords:e,edges_vertices:t}));let i=r.length,o=r.map(e=>rj.core.normalize(e)),a=Array.from(Array(i)).map(()=>Array.from(Array(i)));for(let e=0;e<i-1;e+=1)for(let t=e+1;t<i;t+=1){let r=1-Math.abs(rj.core.dot(o[e],o[t]))<n;a[e][t]=r,a[t][e]=r}return a},og=(e,t,r,n,i)=>{for(let o=0;o<e.length-1;o+=1)for(let a=o+1;a<e.length;a+=1)e[o][a]&&(e[o][a]=rj.core.overlapLineLine(t[o],r[o],t[a],r[a],n,n,i),e[a][o]=e[o][a])},ov=({vertices_coords:e,edges_vertices:t,edges_vector:r},n)=>{r||(r=nC({vertices_coords:e,edges_vertices:t}));let i=t.map(t=>e[t[0]]),o=om({vertices_coords:e,edges_vertices:t,edges_vector:r},n);return og(o,r,i,rj.core.excludeS,n),o};var o_=Object.freeze({__proto__:null,makeEdgesEdgesSimilar:od,makeEdgesEdgesParallel:om,makeEdgesEdgesCrossing:({vertices_coords:e,edges_vertices:t,edges_vector:r},n)=>{r||(r=nC({vertices_coords:e,edges_vertices:t}));let i=t.map(t=>e[t[0]]),o=om({vertices_coords:e,edges_vertices:t,edges_vector:r},n).map(e=>e.map(e=>!e));for(let e=0;e<o.length;e+=1)o[e][e]=void 0;return og(o,r,i,rj.core.excludeS,n),o},makeEdgesEdgesParallelOverlap:ov});let oy=({vertices_coords:e,edges_vertices:t,edges_vector:r,edges_faces:n,faces_vertices:i},o)=>{r||(r=nC({vertices_coords:e,edges_vertices:t}));let a=iP({vertices_coords:e,faces_vertices:i}),s=t.map(t=>e[t[0]]),c=t.map(()=>Array.from(Array(i.length)));n.forEach((e,t)=>e.forEach(e=>{c[t][e]=!1}));let l=od({vertices_coords:e,edges_vertices:t}),u=t.map(t=>t.map(t=>e[t])),f=i.map(t=>t.map(t=>e[t]));for(let e=0;e<a.length;e+=1)a[e]||f[e].reverse();let p=nL({edges_coords:u}),h=f.map(e=>rj.core.boundingBox(e));for(let e=0;e<c.length;e+=1)for(let t=0;t<c[e].length;t+=1)if(!1!==c[e][t]&&!rj.core.overlapBoundingBoxes(h[t],p[e])){c[e][t]=!1;continue}let d={};for(let e=0;e<c.length;e+=1)if(!d[e]){for(let t=0;t<c[e].length;t+=1)if(void 0===c[e][t]){if(u[e].map(e=>rj.core.overlapConvexPolygonPoint(f[t],e,rj.core.exclude,o)).reduce((e,t)=>e||t,!1)||rj.core.intersectConvexPolygonLine(f[t],r[e],s[e],rj.core.excludeS,rj.core.excludeS,o)){c[e][t]=!0;continue}c[e][t]=!1}l[e].forEach(t=>{c[t]=c[e].slice(),d[t]=!0})}return c},ob=({vertices_coords:e,faces_vertices:t},r=rj.core.EPSILON)=>{let n=Array.from(Array(t.length)).map(()=>Array.from(Array(t.length))),i=t.map(t=>t.map(t=>e[t])),o=i.map(e=>rj.core.boundingBox(e));for(let e=0;e<o.length-1;e+=1)for(let t=e+1;t<o.length;t+=1)rj.core.overlapBoundingBoxes(o[e],o[t])||(n[e][t]=!1,n[t][e]=!1);let a=i.map(e=>rj.core.makePolygonNonCollinear(e,r));for(let e=0;e<t.length-1;e+=1)for(let i=e+1;i<t.length;i+=1){if(!1===n[e][i])continue;let t=rj.core.overlapConvexPolygons(a[e],a[i],r);n[e][i]=t,n[i][e]=t}return n};var oE=Object.freeze({__proto__:null,makeEdgesFacesOverlap:oy,makeFacesFacesOverlap:ob}),ox=Object.assign(Object.create(null),{count:r2,countImplied:nc,validate:n0,clean:nQ,populate:n1,remove:ne,replace:nt,removePlanarVertex:iQ,removePlanarEdge:iK,addVertices:iB,addEdges:iY,splitEdge:iq,splitFace:iR,flatFold:ol,addPlanarSegment:iX,subgraph:(e,t)=>{let r={},n={};[l,c,s].forEach(i=>{r[i]=Array.from(Array(r2[i](e))).map((e,t)=>t),n[i]=r8(t[i]||[]).reverse()}),Object.keys(n).forEach(e=>n[e].forEach(t=>r[e].splice(t,1)));let i=JSON.parse(JSON.stringify(e));return Object.keys(r).forEach(e=>ne(i,e,r[e])),i},clip:iH,fragment:ia,getVerticesClusters:r0,clone:iV},nT,iu,np,iI,rK,nm,n8,nK,oh,ir,oE,ih,na,nW,n6,o_,iA,ig,iO,iw,iC,r7);let oO={},ok=(e,t)=>[[0,0],[e,0],[e,t],[0,t]],oM=e=>n1({vertices_coords:e,edges_vertices:e.map((e,t,r)=>[t,(t+1)%r.length]),edges_assignment:Array(e.length).fill("B")});oO.square=(e=1)=>oM(ok(e,e)),oO.rectangle=(e=1,t=1)=>oM(ok(e,t)),oO.polygon=(e=3,t=1)=>oM(rj.core.makePolygonCircumradius(e,t)),oO.kite=()=>n1({vertices_coords:[[0,0],[Math.sqrt(2)-1,0],[1,0],[1,1-(Math.sqrt(2)-1)],[1,1],[0,1]],edges_vertices:[[0,1],[1,2],[2,3],[3,4],[4,5],[5,0],[5,1],[3,5],[5,2]],edges_assignment:Array.from("BBBBBBVVF")});let oA=Object.create(null),oj={graph:iJ,cp:on,origami:of},oP={graph:()=>{},cp:oO.square,origami:oO.square},ow={graph:()=>({file_spec:1.1,file_creator:rL}),cp:()=>({file_spec:1.1,file_creator:rL,frame_classes:["creasePattern"]}),origami:()=>({file_spec:1.1,file_creator:rL,frame_classes:["foldedForm"]})};Object.keys(oj).forEach(e=>{oA[e]=function(){let t=Array.from(arguments).filter(e=>rX(e)).map(e=>JSON.parse(JSON.stringify(e)));return n1(Object.assign(Object.create(oj[e]),t.length?{}:oP[e](),...t,ow[e]()))},oA[e].prototype=oj[e],oA[e].prototype.constructor=oA[e],Object.keys(oO).forEach(t=>{oA[e][t]=function(){return oA[e](oO[t](...arguments))}})}),Object.assign(oA.graph,ox);let oS=e=>e<0?-Math.pow(-e,1/3):Math.pow(e,1/3),o$=(e,t,r,n)=>{if(.02>Math.abs(1-rj.core.dot2(e.normal,r)/e.distance))return[];let i=rj.core.rotate90(e.normal),o=rj.core.subtract2(rj.core.add2(r,rj.core.scale2(e.normal,e.distance)),rj.core.scale2(n,2)),a=rj.core.subtract2(rj.core.scale2(e.normal,e.distance),r),s=rj.core.dot2(n,t.normal)-t.distance,c=2*rj.core.dot2(a,i),l=rj.core.dot2(a,a),u=rj.core.dot2(rj.core.add2(o,a),i),f=rj.core.dot2(o,a),p=rj.core.dot2(i,t.normal),h=rj.core.dot2(a,t.normal),d=s+u*p+h,m=s*c+f*p+u*h,g=0;return Math.abs(m)>rj.core.EPSILON&&(g=1),Math.abs(d)>rj.core.EPSILON&&(g=2),Math.abs(p)>rj.core.EPSILON&&(g=3),((e,t,r,n,i)=>{switch(e){case 1:return[-i/n];case 2:{let e=Math.pow(n,2)-4*r*i;if(e<-rj.core.EPSILON)return[];let t=-n/(2*r);if(e<rj.core.EPSILON)return[t];let o=Math.sqrt(e)/(2*r);return[t+o,t-o]}case 3:{let e=r/t,o=n/t,a=(3*o-Math.pow(e,2))/9,s=(9*e*o-i/t*27-2*Math.pow(e,3))/54,c=Math.pow(a,3)+Math.pow(s,2),l=-e/3;if(c>0){let e=Math.sqrt(c);return[l+oS(s+e)+oS(s-e)]}if(Math.abs(c)<rj.core.EPSILON){let e=Math.pow(s,1/3);if(s<0)return[];return[l+2*e,l-e]}let u=Math.atan2(Math.sqrt(-c),s)/3,f=Math.pow(Math.pow(s,2)-c,1/6),p=f*Math.cos(u),h=f*Math.sin(u);return[l+2*p,l-p-Math.sqrt(3)*h,l-p+Math.sqrt(3)*h]}default:return[]}})(g,p,d,m,s*l+f*h).map(t=>rj.core.add2(rj.core.scale2(e.normal,e.distance),rj.core.scale2(i,t))).map(e=>({p:e,normal:rj.core.normalize2(rj.core.subtract2(e,r))})).map(e=>({normal:e.normal,distance:rj.core.dot2(e.normal,rj.core.midpoint2(e.p,r))}))};var oC=Object.freeze({__proto__:null,normalAxiom1:(e,t)=>{let r=rj.core.normalize2(rj.core.rotate90(rj.core.subtract2(t,e)));return{normal:r,distance:rj.core.dot2(rj.core.add2(e,t),r)/2}},normalAxiom2:(e,t)=>{let r=rj.core.normalize2(rj.core.subtract2(t,e));return{normal:r,distance:rj.core.dot2(rj.core.add2(e,t),r)/2}},normalAxiom3:(e,t)=>{let r=((e,t)=>{let r=rj.core.cross2(e.normal,t.normal);if(!(Math.abs(r)<rj.core.EPSILON))return[(e.distance*t.normal[1]-t.distance*e.normal[1])/r,(t.distance*e.normal[0]-e.distance*t.normal[0])/r]})(e,t);return void 0===r?[{normal:e.normal,distance:(e.distance+t.distance*rj.core.dot2(e.normal,t.normal))/2}]:[rj.core.add2,rj.core.subtract2].map(r=>rj.core.normalize2(r(e.normal,t.normal))).map(e=>({normal:e,distance:rj.core.dot2(r,e)}))},normalAxiom4:(e,t)=>{let r=rj.core.rotate90(e.normal),n=rj.core.dot2(t,r);return{normal:r,distance:n}},normalAxiom5:(e,t,r)=>{let n=rj.core.dot2(t,e.normal),i=e.distance-n,o=rj.core.distance2(t,r);if(i>o)return[];let a=Math.sqrt(o*o-i*i),s=rj.core.scale2(e.normal,i),c=rj.core.add2(t,s),l=rj.core.scale2(rj.core.rotate90(e.normal),a);return(a<rj.core.EPSILON?[c]:[rj.core.add2(c,l),rj.core.subtract2(c,l)]).map(e=>rj.core.normalize2(rj.core.subtract2(r,e))).map(e=>({normal:e,distance:rj.core.dot2(t,e)}))},normalAxiom6:o$,normalAxiom7:(e,t,r)=>{let n=rj.core.rotate90(e.normal),i=rj.core.dot2(n,t.normal);if(Math.abs(i)<rj.core.EPSILON)return;let o=rj.core.dot2(r,n),a=rj.core.dot2(r,t.normal);return{normal:n,distance:(t.distance+2*o*i-a)/(2*i)}}}),oL=Object.freeze({__proto__:null,axiom1:(e,t)=>({vector:rj.core.normalize2(rj.core.subtract2(...rj.core.resizeUp(t,e))),origin:e}),axiom2:(e,t)=>({vector:rj.core.normalize2(rj.core.rotate90(rj.core.subtract2(...rj.core.resizeUp(t,e)))),origin:rj.core.midpoint2(e,t)}),axiom3:(e,t)=>rj.core.bisectLines2(e.vector,e.origin,t.vector,t.origin),axiom4:(e,t)=>({vector:rj.core.rotate90(rj.core.normalize2(e.vector)),origin:t}),axiom5:(e,t,r)=>(rj.core.intersectCircleLine(rj.core.distance2(t,r),t,e.vector,e.origin,rj.core.include_l)||[]).map(e=>({vector:rj.core.normalize2(rj.core.rotate90(rj.core.subtract2(...rj.core.resizeUp(e,r)))),origin:rj.core.midpoint2(r,e)})),axiom6:(e,t,r,n)=>o$(rj.core.rayLineToUniqueLine(e),rj.core.rayLineToUniqueLine(t),r,n).map(rj.core.uniqueLineToRayLine),axiom7:(e,t,r)=>{let n=rj.core.intersectLineLine(e.vector,e.origin,t.vector,r,rj.core.include_l,rj.core.include_l);return void 0===n?void 0:{vector:rj.core.normalize2(rj.core.rotate90(rj.core.subtract2(...rj.core.resizeUp(n,r)))),origin:rj.core.midpoint2(r,n)}}});let oN=(e,t)=>{switch(e){case 3:case"3":case 5:case"5":case 6:case"6":return t;case 7:case"7":return void 0===t?[]:[t];default:return[t]}},oz=(e,t)=>{let r=rj.core.makeMatrix2Reflect(e.vector,e.origin);return rj.core.multiplyMatrix2Vector2(r,t)},oF=(e,t)=>e.points.map(e=>rj.core.overlapConvexPolygonPoint(t,e,rj.core.include)).reduce((e,t)=>e&&t,!0),oI=(e,t,r)=>{let n=e.lines.map(e=>rj.core.clipLineConvexPolygon(t,e.vector,e.origin,rj.core.include,rj.core.includeL));if(void 0===n[0]||void 0===n[1])return[!1,!1];let i=r.map(e=>void 0===e?void 0:rj.core.clipLineConvexPolygon(t,e.vector,e.origin,rj.core.include,rj.core.includeL)),o=[0,1].map(e=>void 0!==i[e]),a=r.map(e=>void 0===e?void 0:[oz(e,n[0][0]),oz(e,n[0][1])]).map(e=>void 0!==e&&(rj.core.overlapLinePoint(rj.core.subtract(n[1][1],n[1][0]),n[1][0],e[0],rj.core.includeS)||rj.core.overlapLinePoint(rj.core.subtract(n[1][1],n[1][0]),n[1][0],e[1],rj.core.includeS)||rj.core.overlapLinePoint(rj.core.subtract(e[1],e[0]),e[0],n[1][0],rj.core.includeS)||rj.core.overlapLinePoint(rj.core.subtract(e[1],e[0]),e[0],n[1][1],rj.core.includeS)));return[0,1].map(e=>!0===a[e]&&!0===o[e])},oV=(e,t)=>{let r=rj.core.intersectLineLine(e.lines[0].vector,e.lines[0].origin,rj.core.rotate90(e.lines[0].vector),e.points[0],rj.core.includeL,rj.core.includeL);return[e.points[0],r].filter(e=>void 0!==e).map(e=>rj.core.overlapConvexPolygonPoint(t,e,rj.core.include)).reduce((e,t)=>e&&t,!0)},oB=(e,t,r)=>{if(0===r.length)return[];let n=e.points.map(e=>rj.core.overlapConvexPolygonPoint(t,e,rj.core.include)).reduce((e,t)=>e&&t,!0);return r.map(t=>oz(t,e.points[1])).map(e=>rj.core.overlapConvexPolygonPoint(t,e,rj.core.include)).map(e=>e&&n)},oq=function(e,t,r){if(0===r.length)return[];if(!e.points.map(e=>rj.core.overlapConvexPolygonPoint(t,e,rj.core.include)).reduce((e,t)=>e&&t,!0))return r.map(()=>!1);let n=r.map(t=>oz(t,e.points[0])).map(e=>rj.core.overlapConvexPolygonPoint(t,e,rj.core.include)),i=r.map(t=>oz(t,e.points[1])).map(e=>rj.core.overlapConvexPolygonPoint(t,e,rj.core.include));return r.map((e,t)=>n[t]&&i[t])},oT=(e,t,r)=>{let n=rj.core.overlapConvexPolygonPoint(t,e.points[0],rj.core.include);if(void 0===r)return[!1];let i=oz(r,e.points[0]),o=rj.core.overlapConvexPolygonPoint(t,i,rj.core.include),a=void 0!==rj.core.intersectConvexPolygonLine(t,e.lines[1].vector,e.lines[1].origin,rj.core.includeS,rj.core.includeL),s=rj.core.intersectLineLine(e.lines[1].vector,e.lines[1].origin,r.vector,r.origin,rj.core.includeL,rj.core.includeL),c=!!s&&rj.core.overlapConvexPolygonPoint(t,s,rj.core.include);return n&&o&&a&&c};var oR=Object.freeze({__proto__:null,validateAxiom1:oF,validateAxiom2:oF,validateAxiom3:oI,validateAxiom4:oV,validateAxiom5:oB,validateAxiom6:oq,validateAxiom7:oT,validate:(e,t,r,n)=>oN(e,[null,oF,oF,oI,oV,oB,oq,oT][e](t,r,((e,t)=>{switch(e){case 3:case"3":case 5:case"5":case 6:case"6":return t;default:return t?t[0]:void 0}})(e,n)))});let oU=e=>[...e.lines?e.lines:[],...e.points?e.points:[]],oD=(e,t={},r)=>{let n=oN(e,oL[`axiom${e}`](...oU(t))).map(e=>rj.line(e));return r&&oN(e,oR[`validateAxiom${e}`](t,r,n)).forEach((e,t)=>e?t:void 0).filter(e=>void 0!==e).forEach(e=>delete n[e]),n};var oG=Object.freeze({__proto__:null,axiomInBoundary:oD,normalAxiomInBoundary:(e,t={},r)=>{let n=oN(e,oC[`normalAxiom${e}`](...oU(t))).map(e=>rj.line.fromNormalDistance(e));return r&&oN(e,oR[`validateAxiom${e}`]({points:t.points,lines:t.lines.map(rj.core.uniqueLineToRayLine)},r,n)).forEach((e,t)=>e?t:void 0).filter(e=>void 0!==e).forEach(e=>delete n[e]),n}});let oW=(e,t={},r)=>oD(e,t,r);Object.keys(oL).forEach(e=>{oW[e]=oL[e]}),Object.keys(oC).forEach(e=>{oW[e]=oC[e]}),Object.keys(oG).forEach(e=>{oW[e]=oG[e]}),Object.keys(oR).forEach(e=>{oW[e]=oR[e]});let oZ=(e,t)=>rj.core.intersectLineLine(e.vector,e.origin,t.vector,t.origin,rj.core.includeL,rj.core.includeL),oJ=(e,t)=>{let r=rj.core.makeMatrix2Reflect(e.vector,e.origin);return rj.core.multiplyMatrix2Vector2(r,t)},oH=(e,t,r)=>{let n=(({vertices_coords:e})=>rj.core.convexHull(e))(e);if(void 0===r){let e=rj.core.clipLineConvexPolygon(n,t.vector,t.origin,rj.core.exclude,rj.core.includeL);r=rj.core.midpoint(...e)}let i=rj.core.rotate270(t.vector),o=rj.core.clipLineConvexPolygon(n,i,r,rj.core.exclude,rj.core.includeL).map(e=>rj.core.distance(r,e)).sort((e,t)=>e-t).shift(),a=rj.core.scale(rj.core.normalize(i),o);return rj.segment(rj.core.add(r,rj.core.flip(a)),rj.core.add(r,a))},oY=[null,(e,t)=>oW(1,e).map(e=>[oH(t,e)]),e=>[[rj.segment(e.points)]],(e,t)=>{var r;let n,i,o,a,s=(({vertices_coords:e})=>rj.core.convexHull(e))(t),c=e.lines.map(e=>rj.core.clipLineConvexPolygon(s,e.vector,e.origin,rj.core.exclude,rj.core.includeL)),l=c.map(e=>rj.core.subtract(e[1],e[0])),u=rj.core.intersectLineLine(l[0],c[0][0],l[1],c[1][0],rj.core.excludeS,rj.core.excludeS);return u?oW(3,e).map(t=>{let r,n,i,o,a,c,l,f,p,h,d,m,g;return n=(r=e.lines.map(e=>e.vector)).map(rj.core.flip),o=(i=r.concat(n).map(e=>rj.ray(e,u))).filter(e=>rj.core.dot(e.vector,t.vector)>0&&rj.core.cross2(e.vector,t.vector)>0).shift(),a=i.filter(e=>rj.core.dot(e.vector,t.vector)>0&&0>rj.core.cross2(e.vector,t.vector)).shift(),c=i.filter(e=>0>rj.core.dot(e.vector,t.vector)&&rj.core.cross2(e.vector,t.vector)>0).shift(),h=(p=(f=[o,a,c,l=i.filter(e=>0>rj.core.dot(e.vector,t.vector)&&0>rj.core.cross2(e.vector,t.vector)).shift()].map(e=>rj.core.intersectConvexPolygonLine(s,e.vector,e.origin,rj.core.excludeS,rj.core.excludeR).shift().shift())).map(e=>rj.core.distance(e,u)))[0]<p[1]?f[0]:f[1],d=p[0]<p[1]?rj.core.add(a.origin,a.vector.normalize().scale(p[0])):rj.core.add(o.origin,o.vector.normalize().scale(p[1])),m=p[2]<p[3]?f[2]:f[3],g=p[2]<p[3]?rj.core.add(l.origin,l.vector.normalize().scale(p[2])):rj.core.add(c.origin,c.vector.normalize().scale(p[3])),[rj.segment(h,d),rj.segment(m,g)]}):[(r=oW(3,e).filter(e=>void 0!==e).shift(),n=c.map(e=>rj.core.midpoint(e[0],e[1])),i=rj.line.fromPoints(...n),o=rj.intersect(r,i),a=rj.line(r.vector.rotate90(),o),rj.segment(e.lines.map(e=>rj.intersect(e,a))))]},(e,t)=>oW(4,e).map(r=>[oH(t,r,oZ(r,e.lines[0]))]),e=>oW(5,e).map(t=>[rj.segment(e.points[1],oJ(t,e.points[1]))]),e=>oW(6,e).map(t=>e.points.map(e=>rj.segment(e,oJ(t,e)))),(e,t)=>oW(7,e).map(r=>[rj.segment(e.points[0],oJ(r,e.points[0])),oH(t,r,oZ(r,e.lines[1]))])];delete oY[0];let oX=(e,t={},...r)=>{let n=t.points?t.points.map(e=>rj.core.getVector(e)):void 0,i=t.lines?t.lines.map(e=>rj.core.getLine(e)):void 0;return oY[e]({points:n,lines:i},...r)};Object.keys(oY).forEach(e=>{oX[e]=(...t)=>oX(e,...t)});var oK=Object.assign(Object.create(null),{axiom_arrows:oX,simple_arrow:(e,t)=>{let r=(({vertices_coords:e})=>rj.core.convexHull(e))(e),n=rj.core.boundingBox(r),i=((e,t,r)=>{if(void 0===r){let n=rj.core.clipLineConvexPolygon(e,t.vector,t.origin,rj.core.exclude,rj.core.includeL);if(void 0===n)return;r=rj.core.midpoint(...n)}let n=rj.core.rotate90(t.vector),i=rj.core.clipLineConvexPolygon(e,n,r,rj.core.exclude,rj.core.includeL).map(e=>rj.core.distance(r,e)).sort((e,t)=>e-t).shift(),o=rj.core.scale(rj.core.normalize(n),i);return rj.segment(rj.core.add(r,rj.core.flip(o)),rj.core.add(r,o))})(r,t);if(void 0===i)return;let o=rj.core.subtract(i[1],i[0]),a=rj.core.magnitude(o),s=rj.core.dot(o,[1,0]),c=n.span[0]<n.span[1]?n.span[0]:n.span[1];return i.head={width:.1*c,height:.15*c},i.bend=s>0?.3:-.3,i.padding=.05*a,i}}),oQ=Object.freeze({__proto__:null,flipFacesLayer:e=>nY(nY(e).reverse()),facesLayerToEdgesAssignments:(e,t)=>{let r=[],n=iP(e);return(e.edges_faces?e.edges_faces:nj(e)).forEach((e,i)=>{if(1===e.length&&(r[i]="B"),2===e.length){let o=e.map(e=>n[e]);if(o[0]===o[1]){r[i]="F";return}let a=e.map(e=>t[e]),s=a[0]<a[1],c=o[0]?s:!s;r[i]=c?"V":"M"}}),r},ordersToMatrix:e=>{let t=Object.keys(e).map(e=>e.split(" ").map(e=>parseInt(e,10))),r=[];t.reduce((e,t)=>e.concat(t),[]).forEach(e=>{r[e]=void 0});let n=r.map(()=>[]);return t.forEach(([t,r])=>{n[t][r]=e[`${t} ${r}`],n[r][t]=-e[`${t} ${r}`]}),n}});let o0=(e,t,r)=>{let n=e.map(e=>e?(e[0]+e[1])/2:void 0),i=[];return e.forEach((o,a)=>{if(!o||!t&&a===e.length-1)return;let s=o[1],c=[a,(a+1)%e.length],l=c.map(e=>n[e]).map(e=>e>s),u=+(!l[0]&&!l[1])+2*(l[0]&&l[1]),f=i.filter(e=>e.min<s&&e.max>s).shift(),p={faces:c,taco_type:u};f?f.pairs.push(p):i.push({min:s-2*r,max:s+2*r,pairs:[p]})}),i.map(e=>e.pairs).filter(e=>e.length>1).map(e=>({both:e.filter(e=>0===e.taco_type).map(e=>e.faces),left:e.filter(e=>1===e.taco_type).map(e=>e.faces),right:e.filter(e=>2===e.taco_type).map(e=>e.faces)}))},o1=(e,t,r)=>t<r?e.slice(t+1,r):e.slice(r+1,t),o2=(e,t,r=!0,n=rj.core.EPSILON)=>{let i=nY(t),o=e.map(e=>e?e[1]:void 0),a=e.map(e=>e?Math.min(...e):void 0).map(e=>e+n),s=e.map(e=>e?Math.max(...e):void 0).map(e=>e-n),c=i.length+(r?0:-1);for(let e=0;e<c;e+=1){let r=(e+1)%i.length;if(i[e]===i[r])continue;let n=o1(t,i[e],i[r]).flat(),c=n.map(t=>o[e]<a[t]).reduce((e,t)=>e&&t,!0),l=n.map(t=>o[e]>s[t]).reduce((e,t)=>e&&t,!0);if(!c&&!l)return!1}return!0},o3=e=>{let t=r5(e),r={},n=0;for(let e=0;e<t.length;e+=1)if(void 0===r[t[e]])n+=1,r[t[e]]=n;else if(void 0!==r[t[e]]){if(r[t[e]]!==n)return!1;n-=1,r[t[e]]=void 0}return!0},o8=(e,t)=>e.map(e=>t[e]).filter(e=>void 0!==e),o4=(e,t,r,n,i)=>{let o=rj.core.flattenArrays(t);if(!o2(e,t,n,i))return!1;for(let e=0;e<r.length;e+=1)if(!o3(o8(o,r[e])))return!1;return!0},o5={V:!0,v:!0,M:!0,m:!0},o6={V:1,v:1,M:-1,m:-1},o9=(e,t)=>{let r,n=(r=0,[!1].concat(t.slice(1).map(e=>o5[e]?++r:r).map(e=>e%2==1))).map((t,r)=>e[r]*(t?-1:1)),i=e.map(()=>void 0);i[0]=[0,n[0]];for(let r=1;r<e.length&&"B"!==t[r]&&"b"!==t[r];r+=1){let t=i[(r-1+e.length)%e.length][1];i[r]=[t,t+n[r]]}return i},o7={B:!0,b:!0},ae=(e,t,r=rj.core.EPSILON)=>{let n,i=o9(e,t),o=(n=0,t.slice(1).concat([t[0]]).map(e=>{let t=n%2==0?o6[e]||0:-(o6[e]||0);return n+=+(void 0!==o6[e]),t})),a=t.map(e=>!o7[e]).reduce((e,t)=>e&&t,!0);if(a&&Math.abs(i[0][0]-i[i.length-1][1])>r)return[];let s=o0(i,a,r).map(e=>[e.left,e.right].map(nY).filter(e=>e.length>1)).reduce((e,t)=>e.concat(t),[]),c=(t=[0],n=0,l=0)=>{let u=n+1,f=o[n],p=n>=e.length-1,h=a&&p;if(!o4(i,t,s,h,r))return[];if(h){let e=nY(t),r=e[0],i=e[n];if(f>0&&i>r||f<0&&i<r)return[]}if(p)return[t];if(0===f)return t[l]=[u].concat(t[l]),c(t,u,l);let d=1===f?Array.from(Array(t.length-l)).map((e,t)=>l+t+1):Array.from(Array(l+1)).map((e,t)=>t),m=d.map(()=>iV(t));return m.forEach((e,t)=>e.splice(d[t],0,u)),m.map((e,t)=>c(e,u,d[t])).reduce((e,t)=>e.concat(t),[])};return c().map(nY)},at=e=>{let t=e.map((e,t)=>t).filter(t=>"U"===e[t]||"u"===e[t]),r=Array.from(Array(2**t.length)).map((e,t)=>t.toString(2)).map(e=>Array(t.length-e.length+1).join("0")+e).map(e=>Array.from(e).map(e=>"0"===e?"V":"M")).map(r=>{let n=e.slice();return t.forEach((e,t)=>{n[e]=r[t]}),n});if(e.includes("B")||e.includes("b"))return r;let n=r.map(e=>e.filter(e=>"M"===e||"m"===e).length),i=r.map(e=>e.filter(e=>"V"===e||"v"===e).length);return r.filter((e,t)=>2===Math.abs(n[t]-i[t]))},ar=e=>{let t=e[0].length,r=Array.from(Array(t+1)).map(()=>({}));Array.from(Array(Math.pow(2,t))).map((e,t)=>t.toString(2)).map(e=>Array.from(e).map(e=>parseInt(e,10)+1).join("")).map(e=>`11111${e}`.slice(-t)).forEach(e=>{r[0][e]=!1}),e.forEach(e=>{r[0][e]=!0}),Array.from(Array(t)).map((e,t)=>t+1).map(e=>Array.from(Array(Math.pow(3,t))).map((e,t)=>t.toString(3)).map(e=>`000000${e}`.slice(-t)).forEach(t=>((e,t,r)=>{let n=Array.from(r).map(e=>parseInt(e,10));if(n.filter(e=>0===e).length!==t)return;e[t][r]=!1;let i=!1;for(let r=0;r<n.length;r+=1){let o=[];if(0===n[r]){for(let i=1;i<=2;i+=1)n[r]=i,!1!==e[t-1][n.join("")]&&o.push([r,i]);n[r]=0,o.length>0&&!1===i&&(i=[]),1===o.length&&i.push(o[0])}}!1!==i&&0===i.length&&(i=!0),e[t][r]=i})(r,e,t)));let n=[];Array.from(Array(t+1)).map((e,r)=>t-r).forEach(e=>{let t=[];Object.keys(r[e]).forEach(n=>{let i=r[e][n];i.constructor===Array&&(i=i[0]),t.push([n,i])}),n=n.concat(t)}),n.sort((e,t)=>parseInt(e[0],10)-parseInt(t[0],10));let i={};return n.forEach(e=>{i[e[0]]=Object.freeze(e[1])}),Object.freeze(i)},an={taco_taco:ar(["111112","111121","111222","112111","121112","121222","122111","122212","211121","211222","212111","212221","221222","222111","222212","222221"]),taco_tortilla:ar(["112","121","212","221"]),tortilla_tortilla:ar(["11","22"]),transitivity:ar(["112","121","122","211","212","221"])},ai={taco_taco:e=>[[e[0],e[2]],[e[1],e[3]],[e[1],e[2]],[e[0],e[3]],[e[0],e[1]],[e[2],e[3]]],taco_tortilla:e=>[[e[0],e[2]],[e[0],e[1]],[e[1],e[2]]],tortilla_tortilla:e=>[[e[0],e[2]],[e[1],e[3]]],transitivity:e=>[[e[0],e[1]],[e[1],e[2]],[e[2],e[0]]]},ao=e=>e[0]<e[1]?`${e[0]} ${e[1]}`:`${e[1]} ${e[0]}`,aa={taco_taco:e=>[ao([e[0],e[2]]),ao([e[1],e[3]]),ao([e[1],e[2]]),ao([e[0],e[3]]),ao([e[0],e[1]]),ao([e[2],e[3]])],taco_tortilla:e=>[ao([e[0],e[2]]),ao([e[0],e[1]]),ao([e[1],e[2]])],tortilla_tortilla:e=>[ao([e[0],e[2]]),ao([e[1],e[3]])],transitivity:e=>[ao([e[0],e[1]]),ao([e[1],e[2]]),ao([e[2],e[0]])]},as={0:0,1:1,2:-1},ac=e=>(Object.keys(e).forEach(t=>{e[t]=as[e[t]]}),e),al=Object.freeze(Object.keys(an)),au={0:0,1:2,2:1},af=(e,t,...r)=>{let n=ai[e](t),i=n.map(e=>e[1]<e[0]),o=n.map((e,t)=>i[t]?`${e[1]} ${e[0]}`:`${e[0]} ${e[1]}`),a=o.map((e,t)=>{for(let n=0;n<r.length;n+=1)if(r[n][e])return i[t]?au[r[n][e]]:r[n][e];return 0}).join("");if(!0===an[e][a])return!0;if(!1===an[e][a])return!1;let s=an[e][a];return[o[s[0]],i[s[0]]?au[s[1]]:s[1]]},ap=(e,t,r)=>{let n={};return al.forEach(i=>{let o=r.flatMap(e=>t[i][e]);n[i]=r3(o).filter(t=>e[i][t])}),n},ah=(e,t,r,...n)=>{let i=r,o={};do{let r=ap(e,t,i),a={};for(let t=0;t<al.length;t+=1){let i=al[t],s=r[i];for(let t=0;t<s.length;t+=1){let r=af(i,e[i][s[t]],...n,o);if(!0!==r){if(!1===r)return console.warn("invalid state found",i,e[i][s[t]]),!1;if(o[r[0]]){if(o[r[0]]!==r[1])return console.warn("order conflict",i,e[i][s[t]]),!1}else{let[e,t]=r;a[e]=!0,o[r[0]]=t}}}}i=Object.keys(a)}while(i.length);return o},ad=e=>1===e[0]&&-1===e[1]||-1===e[0]&&1===e[1]?"both":1===e[0]&&1===e[1]?"right":-1===e[0]&&-1===e[1]?"left":void 0,am=(e,t=rj.core.EPSILON)=>{let r,n,i,o,a,s=nB(e),c=(r=e.edges_vertices.map(t=>e.vertices_coords[t[0]]),n=e.edges_vertices.map(t=>rj.core.subtract2(e.vertices_coords[t[1]],e.vertices_coords[t[0]])),e.edges_faces.map((e,t)=>e.map(e=>rj.core.cross2(rj.core.subtract2(s[e],r[t]),n[t])).map(e=>Math.sign(e)))),l=r9(ov(e,t)).filter(t=>t.map(t=>e.edges_faces[t].length>1).reduce((e,t)=>e&&t,!0)),u=l.map(t=>t.map(t=>e.edges_faces[t])),f=(o=(i=l.map(t=>e.edges_vertices[t[0]].map(t=>e.vertices_coords[t]))).map(e=>e[0]),a=i.map(e=>rj.core.subtract2(e[1],e[0])),u.map(e=>e.map(e=>e.map(e=>s[e]))).map((e,t)=>e.map(e=>e.map(e=>rj.core.cross2(rj.core.subtract2(e,o[t]),a[t])).map(e=>Math.sign(e))))),p=f.map(e=>e.map(ad)),h=p.map((e,t)=>e[0]===e[1]&&"both"!==e[0]?u[t]:void 0).filter(e=>void 0!==e),d=p.map((e,t)=>e[0]===e[1]&&"both"===e[0]?u[t]:void 0).map((e,t)=>((e,t)=>{if(void 0!==e)return t[0][0]===t[1][0]?e:[e[0],[e[1][1],e[1][0]]]})(e,f[t])).filter(e=>void 0!==e),m=((e,t,r)=>{let n=iP(e),i=nV(e,r);for(let e=0;e<i.length;e+=1)n[e]||i[e].reverse();let o=t.map(e=>2===e.length&&e[0]!==e[1]).map((e,t)=>e?t:void 0).filter(e=>void 0!==e),a=o.map(t=>e.edges_vertices[t]).map(t=>t.map(t=>e.vertices_coords[t])),s=a.map(e=>rj.core.subtract2(e[1],e[0])),c=[];return o.forEach(e=>{c[e]=[]}),o.map((e,t)=>i.map(e=>rj.core.clipLineConvexPolygon(e,s[t],a[t][0],rj.core.exclude,rj.core.excludeS,r)).map(e=>void 0!==e)).forEach((e,t)=>e.forEach((e,r)=>{e&&c[o[t]].push(r)})),c})(e,c,t).map((t,r)=>t.map(t=>[e.edges_faces[r],[t,t]])).reduce((e,t)=>e.concat(t),[]),g=d.concat(m),v=p.map((e,t)=>{var r,n,i;let o,a,s;return e[0]!==e[1]&&("both"===e[0]||"both"===e[1])?(r=u[t],n=p[t],i=f[t],o="left"===n[0]||"left"===n[1]?-1:1,a="both"===n[0]?[...r[1]]:[...r[0]],{taco:a,tortilla:i[s=+("both"!==n[0])][0]===o?r[s][0]:r[s][1]}):void 0}).filter(e=>void 0!==e),_=r6(oy(e,t)).map((e,t)=>c[t].length>1&&c[t][0]===c[t][1]?e:[]).map((t,r)=>({taco:e.edges_faces[r],tortillas:t})).filter(e=>e.tortillas.length).flatMap(e=>e.tortillas.map(t=>({taco:[...e.taco],tortilla:t})));return{taco_taco:h,tortilla_tortilla:g,taco_tortilla:v.concat(_)}},ag=(e,t,r,n=rj.core.EPSILON)=>{t||(t=ob(e,n)),r||(r=iP(e));let i=e.faces_vertices.map(t=>t.map(t=>e.vertices_coords[t]));i.forEach((e,t)=>{r[t]||e.reverse()});let o=e.faces_vertices.map(()=>[]);for(let e=0;e<o.length-1;e+=1)for(let r=e+1;r<o.length;r+=1){if(!t[e][r])continue;let a=rj.core.clipPolygonPolygon(i[e],i[r],n);a&&(o[e][r]=a)}let a=[];for(let e=0;e<o.length-1;e+=1)for(let r=e+1;r<o.length;r+=1)if(o[e][r])for(let s=r+1;s<o.length;s+=1)e!==s&&r!==s&&t[e][s]&&t[r][s]&&rj.core.clipPolygonPolygon(o[e][r],i[s],n)&&a.push([e,r,s].sort((e,t)=>e-t));return a},av={0:0,1:2,2:1},a_={M:1,m:1,V:2,v:2},ay=(e,t)=>(t||(t=ob(e)),r9(t).map(e=>e.join(" "))),ab=(e,t,r)=>{r||(r=iP(e));let n={};t.forEach(e=>{n[e]=!0});let i={};return e.edges_faces.forEach((t,o)=>{let a=a_[e.edges_assignment[o]];if(t.length<2||void 0===a)return;let s=r[t[0]]?a:av[a],c=`${t[0]} ${t[1]}`,l=`${t[1]} ${t[0]}`;c in n&&(i[c]=s),l in n&&(i[l]=av[s])}),i};var aE=Object.freeze({__proto__:null,makeFacePairs:ay,solveEdgeAdjacentFacePairs:ab});let ax=(e,t)=>{if(!e)return[];let r=[];Object.keys(e).forEach(t=>{let n=t.split(" ").map(e=>parseInt(e,10));-1===e[t]&&n.reverse(),void 0===r[n[0]]&&(r[n[0]]=[]),r[n[0]].push(n[1])}),t&&t.faces_vertices&&t.faces_vertices.forEach((e,t)=>{void 0===r[t]&&(r[t]=[])});let n=[],i=[],o=0;for(let e=0;e<r.length;e+=1){if(i[e])continue;let t=[e];for(;t.length&&o<2*r.length;){let e=t[t.length-1];if(r[e]&&r[e].length){let n=r[e].pop();i[n]||t.push(n);continue}n.push(e),i[e]=!0,t.pop(),o+=1}}return o>=2*r.length&&console.warn("fix protection in topological order"),n},aO=e=>{let t=e.reduce((e,t)=>e*t,1),r=e.slice();for(let e=r.length-2;e>=0;e-=1)r[e]*=r[e+1];return r.push(1),r.shift(),Array.from(Array(t)).map((t,n)=>e.map((e,t)=>Math.floor(n/r[t])%e))},ak={count:function(){return this.branches.map(e=>e.length)},solution:function(...e){let t=Array(this.branches.length).fill(0).map((t,r)=>null!=e[r]?e[r]:t),r=this.branches?this.branches.map((e,r)=>e[t[r]]):[];return Object.assign({},this.root,...r)},allSolutions:function(){return aO(this.count()).map(e=>this.solution(...e))},facesLayer:function(...e){return nY(ax(this.solution(...e)))},allFacesLayers:function(){return aO(this.count()).map(e=>this.facesLayer(...e))},faceOrders:function(...e){var t;let r,n;return(n=(r=Object.keys(t=this.solution(...e))).map(e=>e.split(" ").map(e=>parseInt(e,10)))).map((e,n)=>e.push(t[r[n]])),n},allFaceOrders:function(){return aO(this.count()).map(e=>this.faceOrders(...e))}},aM=(e,t,r,...n)=>{if(!r.length)return[];let i=r[0],o=[],a=[];[1,2].forEach(s=>{let c=ah(e,t,[i],...n,{[i]:s});!1!==c&&(c[i]=s,Object.keys(c).length===r.length?o.push(c):a.push(c))});let s=a.map(i=>aM(e,t,r.filter(e=>!(e in i)),...n,i));return o.map(e=>[...n,e]).concat(...s)};var aA=Object.assign(Object.create(null),{solver:(e,t=1e-6)=>{let r=new Date,{constraints:n,constraintsLookup:i,facePairs:o,edgeAdjacentOrders:a}=((e,t=1e-6)=>{var r;let n,i,o,a=ob(e,t),s=iP(e),c=am(e,t),l=(r=ag(e,a,s,t),n={},c.taco_taco.map(e=>[e[0][0],e[0][1],e[1][0],e[1][1]].sort((e,t)=>e-t)).forEach(e=>[`${e[0]} ${e[1]} ${e[2]}`,`${e[0]} ${e[1]} ${e[3]}`,`${e[0]} ${e[2]} ${e[3]}`,`${e[1]} ${e[2]} ${e[3]}`].forEach(e=>{n[e]=!0})),c.taco_tortilla.map(e=>[e.taco[0],e.taco[1],e.tortilla].sort((e,t)=>e-t).join(" ")).forEach(e=>{n[e]=!0}),r.filter(e=>void 0===n[e.join(" ")])),u=((i={}).taco_taco=c.taco_taco.map(e=>[e[0][0],e[1][0],e[0][1],e[1][1]]),i.taco_tortilla=c.taco_tortilla.map(e=>[e.taco[0],e.tortilla,e.taco[1]]),i.tortilla_tortilla=c.tortilla_tortilla.map(e=>[e[0][0],e[0][1],e[1][0],e[1][1]]),i.transitivity=l.map(e=>[e[0],e[1],e[2]]),i),f=(o={},Object.keys(u).forEach(e=>{o[e]={}}),Object.keys(u).forEach(e=>{u[e].forEach((t,r)=>aa[e](t).forEach(t=>{void 0===o[e][t]&&(o[e][t]=[]),o[e][t].push(r)}))}),o),p=ay(e,a),h=ab(e,p,s);return{constraints:u,constraintsLookup:f,facePairs:p,edgeAdjacentOrders:h}})(e,t),s=Date.now()-r,c=new Date,l=ah(n,i,Object.keys(a),a);if(!l)return;let u=((e,t,r)=>{let n=Object.keys(t),i={};e.forEach(e=>{i[e]=!0});let o=0,a=[];for(;o<e.length;){if(!i[e[o]]){o+=1;continue}let s=[],c=[e[o]],l={[e[o]]:!0};do{let e=c.shift();delete i[e],s.push(e);let o={};n.forEach(n=>{let i=r[n][e];i&&i.map(e=>t[n][e]).map(e=>aa[n](e).forEach(e=>{o[e]=!0}))});let a=Object.keys(o).filter(e=>i[e]).filter(e=>!l[e]);c.push(...a),a.forEach(e=>{l[e]=!0})}while(c.length);o+=1,a.push(s)}return a})(o.filter(e=>!(e in a)).filter(e=>!(e in l)),n,i).map(e=>aM(n,i,e,a,l)).map(e=>e.map(e=>Object.assign({},...e))),f={...a,...l};ac(f),u.forEach(e=>e.forEach(e=>ac(e)));let p=Date.now()-c;return p>50&&console.log(`prep ${s}ms solver ${p}ms`),Object.assign(Object.create(ak),{root:f,branches:u})},table:an,topologicalOrder:ax,makeTacosTortillas:am,makeFoldedStripTacos:o0,makeTransitivityTrios:ag,singleVertexSolver:ae,singleVertexAssignmentSolver:(e,t,r)=>{null==t&&(t=e.map(()=>"U"));let n=at(t),i=n.map(t=>ae(e,t,r));return n.map((e,t)=>t).filter(e=>i[e].length>0).map(e=>({assignment:n[e],layer:i[e]}))},validateLayerSolver:o4,validateTacoTacoFacePairs:o3,validateTacoTortillaStrip:o2,foldStripWithAssignments:o9},oQ,aE),aj=Object.freeze({__proto__:null,kawasakiSolutions:({vertices_coords:e,vertices_edges:t,edges_vertices:r,edges_vectors:n},i)=>{n||(n=nC({vertices_coords:e,edges_vertices:r})),t||(t=ng({edges_vertices:r}));let o=t[i].map(e=>n[e]);return i2(rj.core.counterClockwiseOrder2(o).map(e=>o[e]))}}),aP=Object.assign(Object.create(null),{maekawaAssignments:at,foldAngles4:(e,t,r=0)=>{let n=(e=>{let t=0,r=0;for(let n=0;n<e.length;n+=1)("M"===e[n]||"m"===e[n])&&(t+=1),("V"===e[n]||"v"===e[n])&&(r+=1);for(let n=0;n<e.length;n+=1)if(t>r&&("V"===e[n]||"v"===e[n])||r>t&&("M"===e[n]||"m"===e[n]))return n})(t);if(void 0===n)return;let i=e[(n+1)%e.length],o=e[(n+2)%e.length],a=Math.PI*r,s=-Math.cos(i)*Math.cos(o)+Math.sin(i)*Math.sin(o)*Math.cos(Math.PI-a),c=-Math.acos(Math.cos(Math.PI-a)-Math.sin(Math.PI-a)**2*Math.sin(i)*Math.sin(o)/(1-s))+Math.PI;return n%2==0?[c,a,c,a].map((e,t)=>n===t?-e:e):[a,c,a,c].map((e,t)=>n===t?-e:e)}},i3,aj,oe);let aw=(e,...t)=>{if(!e)return;let r={},n=e.getAttribute("class"),i=n?n.split(" "):[];i.push(...t),i.forEach(e=>{r[e]=!0});let o=Object.keys(r).join(" ");e.setAttribute("class",o)},aS={},a$={stroke:E},aC={},aL={M:{stroke:"red"},m:{stroke:"red"},V:{stroke:"blue"},v:{stroke:"blue"},F:{stroke:"lightgray"},f:{stroke:"lightgray"}},aN=e=>(({vertices_coords:e,edges_vertices:t})=>e&&t?t.map(t=>t.map(t=>e[t])):[])(e).map(e=>`M${e[0][0]} ${e[0][1]}L${e[1][0]} ${e[1][1]}`).join(""),az=(e,t={})=>Object.keys(t).forEach(r=>e.setAttributeNS(null,r,t[r])),aF={back:{fill:x},front:{fill:"#ddd"}},aI={back:{opacity:.1},front:{opacity:.1}},aV={},aB={stroke:E,"stroke-linejoin":"bevel"},aq={stroke:O,fill:E,"stroke-linejoin":"bevel"},aT={fill:O},aR=(e,t={})=>Object.keys(t).forEach(r=>e.setAttributeNS(null,r,t[r])),aU=(e,t,r,n)=>{var i;let o=op(e),a=null!=e[g],s=[[_],[y]],c=iP(e);return c.map(e=>e?s[0]:s[1]).forEach((e,r)=>{aw(t[r],e),aR(t[r],o?a?aF[e]:aI[e]:aV[e]),aR(t[r],n[e])}),(a?(i=e[g],Array.from(Array(e.faces_vertices.length||e.faces_edges.length)).map((e,t)=>t).filter(e=>null==i[e]).concat(nY(i))).map(e=>t[e]):t).forEach(e=>r.appendChild(e)),Object.defineProperty(r,_,{get:()=>t.filter((e,t)=>c[t])}),Object.defineProperty(r,y,{get:()=>t.filter((e,t)=>!c[t])}),aR(r,o?a?aB:aq:aT),r},aD=function(e,t={}){let r=w.svg.g();if(!e||h in e==!1||p in e==!1||f in e==!1)return r;let n=e[h].map(t=>t.map(t=>e[p][t]).map((e,t,r)=>{let n=r[(t+1)%r.length];return e[1]===n[0]||e[1]===n[1]?e[0]:e[1]}).map(t=>[0,1].map(r=>e[f][t][r]))).map(e=>w.svg.polygon(e));return n.forEach((e,t)=>e.setAttributeNS(null,a,t)),r.setAttributeNS(null,"fill","white"),aU(e,n,r,t)},aG={fill:O},aW={stroke:E,fill:x},aZ={vertices:(e,t={})=>{let r=w.svg.g();return e&&e.vertices_coords&&(e.vertices_coords.map(e=>w.svg.circle(e[0],e[1],.01)).forEach(e=>r.appendChild(e)),r.setAttributeNS(null,"fill",O),Object.keys(t).forEach(e=>r.setAttributeNS(null,e,t[e]))),r},edges:(e,t)=>rG(e)?((e,t={})=>{let r=w.svg.g();if(!e)return r;let n=op(e),i=(({vertices_coords:e,edges_vertices:t,edges_assignment:r})=>{let n=(({vertices_coords:e,edges_vertices:t,edges_assignment:r})=>{var n;let i,o;if(!e||!t)return{};if(!r)return{u:aN({vertices_coords:e,edges_vertices:t})};let a=(i={u:[],f:[],v:[],m:[],b:[]},o=(n={vertices_coords:e,edges_vertices:t,edges_assignment:r})[d].map(e=>e.toLowerCase()),n[p].map((e,t)=>o[t]||"u").forEach((e,t)=>i[e].push(t)),i);return Object.keys(a).forEach(r=>{a[r]=aN({vertices_coords:e,edges_vertices:a[r].map(e=>t[e])})}),Object.keys(a).forEach(e=>{""===a[e]&&delete a[e]}),a})({vertices_coords:e,edges_vertices:t,edges_assignment:r});return Object.keys(n).forEach(e=>{let t=w.svg.path(n[e]);aw(t,rq[e]),n[e]=t}),n})(e);return Object.keys(i).forEach(e=>{aw(i[e],rq[e]),az(i[e],n?aC[e]:aL[e]),az(i[e],t[e]),az(i[e],t[rq[e]]),r.appendChild(i[e]),Object.defineProperty(r,rq[e],{get:()=>i[e]})}),az(r,n?aS:a$),az(r,t.stroke?{stroke:t.stroke}:{}),r})(e,t):((e,t={})=>{let r=w.svg.g();if(!e)return r;let n=op(e),i=(e.edges_assignment?e.edges_assignment:nS(e)).map(e=>e.toLowerCase()),o={};["b","m","v","f","u"].forEach(e=>{let i=w.svg.g();r.appendChild(i),aw(i,rq[e]),az(i,n?aC[e]:aL[e]),az(i,t[rq[e]]),Object.defineProperty(r,rq[e],{get:()=>i}),o[e]=i});let a=e.edges_vertices.map(t=>t.map(t=>e.vertices_coords[t])).map(e=>w.svg.line(e[0][0],e[0][1],e[1][0],e[1][1]));return e.edges_foldAngle&&a.forEach((t,r)=>{let n=e.edges_foldAngle[r];0!==n&&180!==n&&-180!==n&&t.setAttributeNS(null,"opacity",Math.abs(n)/180)}),a.forEach((e,t)=>o[i[t]].appendChild(e)),az(r,n?aS:a$),az(r,t.stroke?{stroke:t.stroke}:{}),r})(e,t),faces:(e,t)=>null!=e&&null!=e.faces_vertices?((e,t={})=>{let r=w.svg.g();if(!e||!e.vertices_coords||!e.faces_vertices)return r;let n=e.faces_vertices.map(t=>t.map(t=>[0,1].map(r=>e.vertices_coords[t][r]))).map(e=>w.svg.polygon(e));return n.forEach((e,t)=>e.setAttributeNS(null,a,t)),r.setAttributeNS(null,"fill",x),aU(e,n,r,t)})(e,t):aD(e,t),boundaries:(e,t={})=>{let r=w.svg.g();if(!e||!e.vertices_coords||!e.edges_vertices||!e.edges_assignment)return r;let n=il(e).vertices.map(t=>[0,1].map(r=>e.vertices_coords[t][r]));if(0===n.length)return r;let i=w.svg.polygon(n);return aw(i,v),r.appendChild(i),((e,t={})=>Object.keys(t).forEach(r=>e.setAttributeNS(null,r,t[r])))(r,op(e)?aG:aW),Object.keys(t).forEach(e=>r.setAttributeNS(null,e,t[e])),r}},aJ=(e,t,r)=>{let n=!1===r?w.svg.g():aZ[e](t,r);return aw(n,e),n},aH=(e,t={})=>[u,l,c,s].map(r=>aJ(r,e,t[r]));[u,l,c,s].forEach(e=>{aH[e]=function(t,r={}){return aJ(e,t,r[e])}});let aY=({vertices_coords:e})=>{if(null==e||0===e.length)return;let t=[,,].fill(1/0),r=[,,].fill(-1/0);return e.forEach(e=>{e[0]<t[0]&&(t[0]=e[0]),e[0]>r[0]&&(r[0]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>r[1]&&(r[1]=e[1])}),Number.isNaN(t[0])||Number.isNaN(t[1])||Number.isNaN(r[0])||Number.isNaN(r[1])?void 0:[t[0],t[1],r[0]-t[0],r[1]-t[1]]},aX=e=>"SVG"===(e.nodeName||"").toUpperCase()?e:e.parentNode?aX(e.parentNode):void 0,aK=(e,t,r={})=>{let n,i=aH(t,r);return i.filter(e=>e.childNodes.length>0).forEach(t=>e.appendChild(t)),((e,t,r,n)=>{let i=t[3]&&t[3].childNodes.length;if(!(n.strokeWidth||n.viewBox||i))return;let o=aY(r),a=o?Math.max(o[2],o[3]):1,s=aX(e);if(s&&n.viewBox){let e=o?o.join(" "):"0 0 1 1";s.setAttributeNS(null,"viewBox",e)}if(n.strokeWidth||n["stroke-width"]){let t=n.strokeWidth?n.strokeWidth:n["stroke-width"];e.setAttributeNS(null,"stroke-width","number"==typeof t?a*t:.01*a)}if(i){let e=n.vertices&&null!=n.vertices.radius?n.vertices.radius:n.radius,r="string"==typeof e?parseFloat(e):e,i="number"!=typeof r||Number.isNaN(r)?.02*a:a*r;var c=t[3];for(let e=0;e<c.childNodes.length;e+=1)c.childNodes[e].setAttributeNS(null,"r",i)}})(e,i,t,r),(n=[t.file_classes||[],t.frame_classes||[]].flat()).length&&aw(e,...n),Object.keys(aH).filter(t=>null==e[t]).forEach((t,r)=>Object.defineProperty(e,t,{get:()=>i[r]})),e},aQ=(e,t)=>aK(w.svg(),e,t);Object.keys(aH).forEach(e=>{aQ[e]=aH[e]}),aQ.drawInto=aK,aQ.getViewBox=e=>{let t=aY(e);return void 0===t?"":t.join(" ")},Object.defineProperty(aQ,"linker",{enumerable:!1,value:(function(e){e.graph.svg=this;let t={svg:this};Object.keys(t).forEach(r=>{e.graph.prototype[r]=function(){return t[r](this,...arguments)}})}).bind(aQ)});let a0={init:()=>{}};function a1(){return a0.init(...arguments)}let a2="class",a3="function",a8="undefined",a4="number",a5="string",a6="object",a9="path",a7="style",se="viewBox",st="transform",sr="points",sn="stroke",si="none",so="arrow",sa="head",ss="tail",sc=typeof window!==a8&&typeof window.document!==a8,sl=typeof process!==a8&&null!=process.versions&&null!=process.versions.node,su=[];su[10]='"error 010: window" not set. if using node/deno, include package @xmldom/xmldom, set to the main export ( ear.window = xmldom; )';let sf={window:void 0};sc&&(sf.window=window);let sp=()=>{if(void 0===sf.window)throw su[10];return sf.window};var sh="http://www.w3.org/2000/svg",sd={s:["svg"],d:["defs"],h:["desc","filter","metadata","style","script","title","view"],c:["cdata"],g:["g"],v:["circle","ellipse","line","path","polygon","polyline","rect"],t:["text"],i:["marker","symbol","clipPath","mask"],p:["linearGradient","radialGradient","pattern"],cT:["textPath","tspan"],cG:["stop"],cF:["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]};let sm=(e,t)=>[e[0]+t[0],e[1]+t[1]],sg=(e,t)=>[e[0]-t[0],e[1]-t[1]],sv=(e,t)=>[e[0]*t,e[1]*t],s_=e=>e[0]**2+e[1]**2,sy=e=>Math.sqrt(s_(e)),sb=(e,t)=>s_(sg(e,t)),sE=(e,t)=>Math.sqrt(sb(e,t)),sx=(e,t)=>[Math.cos(e)*t,Math.sin(e)*t];var sO=Object.freeze({__proto__:null,svg_add2:sm,svg_sub2:sg,svg_scale2:sv,svg_magnitudeSq2:s_,svg_magnitude2:sy,svg_distanceSq2:sb,svg_distance2:sE,svg_polar_to_cart:sx});let sk=(e,t,r,n,i,o=!1)=>{if(null==i)return"";let a=sx(n,r),s=sx(i,r),c=[s[0]-a[0],s[1]-a[1]],l=Math.atan2(a[0]*s[1]-a[1]*s[0],a[0]*s[0]+a[1]*s[1])>0?0:1,u=o?`M ${e},${t} l ${a[0]},${a[1]} `:`M ${e+a[0]},${t+a[1]} `;return u+=["a ",r,r,0,l,1,c[0],c[1]].join(" "),o&&(u+=" Z"),u},sM=(e,t,r,n,i)=>[sk(e,t,r,n,i,!1)],sA=(e,t,r,n,i)=>[sk(e,t,r,n,i,!0)];var sj={roundRect:{nodeName:a9,attributes:["d"],args:(e,t,r,n,i=0)=>{i>r/2&&(i=r/2),i>n/2&&(i=n/2);let o=r-2*i,a=n-2*i,s=`A${i} ${i} 0 0 1`;return[[`M${e+(r-o)/2},${t}`,`h${o}`,s,`${e+r},${t+(n-a)/2}`,`v${a}`,s,`${e+r-i},${t+n}`,`h${-o}`,s,`${e},${t+n-i}`,`v${-a}`,s,`${e+i},${t}`].join(" ")]}}},sP={toCamel:e=>e.replace(/([-_][a-z])/ig,e=>e.toUpperCase().replace("-","").replace("_","")),toKebab:e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").replace(/([A-Z])([A-Z])(?=[a-z])/g,"$1-$2").toLowerCase(),capitalized:e=>e.charAt(0).toUpperCase()+e.slice(1)};let sw=e=>null!=e&&typeof e[Symbol.iterator]===a3,sS=function(){switch(arguments.length){case void 0:case 0:return Array.from(arguments);case 1:return sw(arguments[0])&&typeof arguments[0]!==a5?sS(...arguments[0]):[arguments[0]];default:return Array.from(arguments).map(e=>sw(e)?[...sS(e)]:e)}};var s$=(...e)=>e.filter(e=>typeof e===a4).concat(e.filter(e=>typeof e===a6&&null!==e).map(e=>typeof e.x===a4?[e.x,e.y]:typeof e[0]===a4?[e[0],e[1]]:void 0).filter(e=>void 0!==e).reduce((e,t)=>e.concat(t),[]));let sC=[ss,sa],sL=e=>"M"+e.map(e=>e.join(",")).join("L")+"Z",sN=function(e){let t=[[0,1],[2,3]].map(t=>t.map(t=>e.points[t]||0)),r=sg(t[1],t[0]),n=sm(t[0],sv(r,.5)),i=sy(r),o=sC.map(t=>e[t].visible?(1+e[t].padding)*e[t].height*2.5:0).reduce((e,t)=>e+t,0);if(i<o){let e=0===i?[o,0]:sv(r,o/i);t=[sg,sm].map(t=>t(n,sv(e,.5))),r=sg(t[1],t[0])}let a=[r[1],-r[0]],s=sm(n,sv(a,e.bend)),c=t.map(e=>sg(s,e)),l=c.map(e=>sy(e)),u=c.map((e,t)=>0===l[t]?e:sv(e,1/l[t])),f=u.map(e=>sv(e,-1)),p=f.map(e=>[e[1],-e[0]]),h=sC.map((t,r)=>e[t].padding?e[t].padding:e.padding?e.padding:0),d=sC.map((t,r)=>!!e[t].visible*e[t].height).map((e,t)=>e+h[t]),m=t.map((e,t)=>sm(e,sv(u[t],d[t])));a=[(r=sg(m[1],m[0]))[1],-r[0]],n=sm(m[0],sv(r,.5)),s=sm(n,sv(a,e.bend));let g=m.map((t,r)=>sm(t,sv(sg(s,t),e.pinch))),v=sC.map((t,r)=>[sm(m[r],sv(f[r],e[t].height)),sm(m[r],sv(p[r],e[t].width/2)),sm(m[r],sv(p[r],-e[t].width/2))]);return{line:`M${m[0].join(",")}C${g[0].join(",")},${g[1].join(",")},${m[1].join(",")}`,tail:sL(v[0]),head:sL(v[1])}},sz=(e,t,r)=>{"boolean"==typeof t?e.options[r].visible=t:typeof t===a6?(Object.assign(e.options[r],t),null==t.visible&&(e.options[r].visible=!0)):null==t&&(e.options[r].visible=!0)},sF=(e,t={},r=sa)=>{let n=e.getElementsByClassName(`${so}-${r}`)[0];Object.keys(t).map(e=>({key:e,fn:n[sP.toCamel(e)]})).filter(e=>typeof e.fn===a3&&"class"!==e.key).forEach(e=>e.fn(t[e.key])),Object.keys(t).filter(e=>"class"===e).forEach(e=>n.classList.add(t[e]))},sI=e=>{let t=sN(e.options);return Object.keys(t).map(t=>({path:t,element:e.getElementsByClassName(`${so}-${t}`)[0]})).filter(e=>e.element).map(e=>(e.element.setAttribute("d",t[e.path]),e)).filter(t=>e.options[t.path]).forEach(t=>t.element.setAttribute("visibility",e.options[t.path].visible?"visible":"hidden")),e},sV=(e,...t)=>(e.options.points=s$(...sS(...t)).slice(0,4),sI(e));var sB={setPoints:sV,points:sV,bend:(e,t)=>(e.options.bend=t,sI(e)),pinch:(e,t)=>(e.options.pinch=t,sI(e)),padding:(e,t)=>(e.options.padding=t,sI(e)),head:(e,t)=>(sz(e,t,sa),sF(e,t,sa),sI(e)),tail:(e,t)=>(sz(e,t,ss),sF(e,t,ss),sI(e)),getLine:e=>e.getElementsByClassName(`${so}-line`)[0],getHead:e=>e.getElementsByClassName(`${so}-${sa}`)[0],getTail:e=>e.getElementsByClassName(`${so}-${ss}`)[0]};let sq=()=>({visible:!1,width:8,height:10,padding:0}),sT=()=>({head:sq(),tail:sq(),bend:0,padding:0,pinch:.618,points:[]}),sR=Object.keys(sT()),sU=function(){return sS(arguments).reduce((e,t)=>e.concat(t),[])},sD=(e=[],t=0,r=.5)=>{let n=[e[0]||0,e[1]||0],i=[e[2]||0,e[3]||0],o=sg(i,n),a=sm(n,sv(o,.5)),s=sm(a,sv([o[1],-o[0]],t)),c=sm(n,sv(sg(s,n),r)),l=sm(i,sv(sg(s,i),r));return`M${n[0]},${n[1]}C${c[0]},${c[1]} ${l[0]},${l[1]} ${i[0]},${i[1]}`},sG=e=>e.slice(1).split(/[, ]+/).map(e=>parseFloat(e)),sW=e=>{let t=e.match(/[Mm][(0-9), .-]+/).map(e=>sG(e)).shift(),r=e.match(/[Cc][(0-9), .-]+/).map(e=>sG(e)).shift();return[...t?[t[t.length-2],t[t.length-1]]:[0,0],...r?[r[r.length-2],r[r.length-1]]:[0,0]]},sZ=(e,...t)=>{let r=s$(...sU(...t)).slice(0,4);return e.setAttribute("d",sD(r,e._bend,e._pinch)),e},sJ={};Object.assign(sJ,{arc:{nodeName:a9,attributes:["d"],args:sM,methods:{setArc:(e,...t)=>e.setAttribute("d",sM(...t))}}},{wedge:{nodeName:a9,args:sA,attributes:["d"],methods:{setArc:(e,...t)=>e.setAttribute("d",sA(...t))}}},{parabola:{nodeName:"polyline",attributes:[sr],args:(e,t,r,n)=>[((e=-1,t=0,r=2,n=1)=>Array.from(Array(129)).map((e,t)=>(t-128)/128*2+1).map(i=>[e+(i+1)*r*.5,t+i**2*n]))(e,t,r,n).map(e=>`${e[0]},${e[1]}`).join(" ")]}},{regularPolygon:{nodeName:"polygon",attributes:[sr],args:(e,t=0,r=0,n=1)=>{let i;return[(i=[t,r],Array.from(Array(e)).map((t,r)=>2*Math.PI*(r/e)).map(e=>[Math.cos(e),Math.sin(e)]).map(e=>i.map((t,r)=>t+n*e[r]))).map(e=>`${e[0]},${e[1]}`).join(" ")]}}},sj,{arrow:{nodeName:"g",attributes:[],args:()=>[],methods:sB,init:function(e,...t){e.classList.add(so);let r=["line",ss,sa].map(t=>a1.path().addClass(`${so}-${t}`).appendTo(e));r[0].setAttribute(a7,"fill:none;"),r[1].setAttribute(sn,si),r[2].setAttribute(sn,si),e.options=sT(),sB.setPoints(e,...t);let n=((...e)=>{for(let t=0;t<e.length;t+=1){if(typeof e[t]!==a6)continue;let r=Object.keys(e[t]);for(let n=0;n<r.length;n+=1)if(sR.includes(r[n]))return e[t]}})(...t);return n&&Object.keys(n).filter(e=>sB[e]).forEach(t=>sB[t](e,n[t])),e}}},{curve:{nodeName:a9,attributes:["d"],args:(...e)=>[sD(s$(...sU(...e)))],methods:{setPoints:sZ,bend:(e,t)=>(e._bend=t,sZ(e,...sW(e.getAttribute("d")))),pinch:(e,t)=>(e._pinch=t,sZ(e,...sW(e.getAttribute("d"))))}}});let sH=Object.keys(sJ),sY=[sd.h,sd.p,sd.i],sX=[sd.g,sd.v,sd.t,sH],sK={svg:[sd.s,sd.d].concat(sY).concat(sX),g:sX,text:[sd.cT],linearGradient:[sd.cG],radialGradient:[sd.cG],defs:sY,filter:[sd.cF],marker:sX,symbol:sX,clipPath:sX,mask:sX},sQ=Object.create(null);Object.keys(sK).forEach(e=>{sQ[e]=sK[e].reduce((e,t)=>e.concat(t),[])});let s0=function(e,t,r,n,i=0){let o=r/1-r;return[e-o-i,t-o-i,r+2*o+2*i,n+2*o+2*i].join(" ")};function s1(){let e=s$(...sU(arguments));return 2===e.length&&e.unshift(0,0),4===e.length?s0(...e):void 0}let s2=e=>new(sp()).DOMParser().parseFromString("<root></root>","text/xml").createCDATASection(`${e}`),s3=e=>{for(;e.lastChild;)e.removeChild(e.lastChild);return e},s8=(e,t)=>{for(;t.childNodes.length>0;){let r=t.childNodes[0];t.removeChild(r),e.appendChild(r)}return e},s4=(e,t)=>(Array.from(t.attributes).forEach(t=>e.setAttribute(t.name,t.value)),s8(e,t));var s5={removeChildren:s3,appendTo:(e,t)=>(null!=t&&t.appendChild(e),e),setAttributes:(e,t)=>Object.keys(t).forEach(r=>e.setAttribute(sP.toKebab(r),t[r]))};let s6=e=>{if(null===e)return e;for(let t=e.childNodes.length-1;t>=0;t-=1){let r=e.childNodes[t];3===r.nodeType&&r.data.match(/^\s*$/)&&e.removeChild(r),1===r.nodeType&&s6(r)}return e},s9=e=>new(sp()).DOMParser().parseFromString(e,"text/xml"),s7=e=>{let t=e.getElementsByTagName("parsererror");if(t.length>0)throw Error(t[0]);return s6(e.documentElement)},ce=function(e){if(typeof e===a5||e instanceof String)try{return s7(s9(e))}catch(e){return e}if(null!=e.childNodes)return e},ct=e=>typeof e===a5&&/^[\w,\s-]+\.[A-Za-z]{3}$/.test(e)&&e.length<1e4&&sc&&typeof sp().fetch===a3?new Promise((t,r)=>{if(typeof e===a5||e instanceof String)fetch(e).then(e=>e.text()).then(e=>s7(s9(e))).then(e=>"svg"===e.nodeName?e:e.getElementsByTagName("svg")[0]).then(e=>null==e?r(Error("valid XML found, but no SVG element")):t(e)).catch(e=>r(e));else if(e instanceof sp().Document)return asyncDone(e)}):ce(e),cr=function(){let e=[];if(sp().document.styleSheets)for(let t=0;t<sp().document.styleSheets.length;t+=1){let r=sp().document.styleSheets[t];try{let t="cssRules"in r?r.cssRules:r.rules;for(let r=0;r<t.length;r+=1){let n=t[r];"cssText"in n?e.push(n.cssText):e.push(`${n.selectorText} {
${n.style.cssText}
}
`)}}catch(e){console.warn(e)}}return e.join("\n")},cn=function(e,t){let r=new(sp()).Blob([t],{type:"text/plain"}),n=sp().document.createElement("a");n.setAttribute("href",sp().URL.createObjectURL(r)),n.setAttribute("download",e),sp().document.body.appendChild(n),n.click(),sp().document.body.removeChild(n)},ci=function(e,t){if((t=Object.assign({download:!1,output:a5,windowStyle:!1,filename:"image.svg"},t)).windowStyle){let t=sp().document.createElementNS(sh,a7);t.setAttribute("type","text/css"),t.innerHTML=cr(),e.appendChild(t)}let r=function(e,t){let r=e.replace(/>\s{0,}</g,"><").replace(/</g,"~::~<").replace(/\s*xmlns\:/g,"~::~xmlns:").split("~::~"),n=r.length,i=!1,o=0,a="",s=["\n"];for(let e=0;e<100;e+=1)s.push(s[e]+"	");for(let e=0;e<n;e+=1)r[e].search(/<!/)>-1?(a+=s[o]+r[e],i=!0,(r[e].search(/-->/)>-1||r[e].search(/\]>/)>-1||r[e].search(/!DOCTYPE/)>-1)&&(i=!1)):r[e].search(/-->/)>-1||r[e].search(/\]>/)>-1?(a+=r[e],i=!1):/^<\w/.exec(r[e-1])&&/^<\/\w/.exec(r[e])&&/^<[\w:\-\.\,]+/.exec(r[e-1])==/^<\/[\w:\-\.\,]+/.exec(r[e])[0].replace("/","")?(a+=r[e],i||(o-=1)):r[e].search(/<\w/)>-1&&-1===r[e].search(/<\//)&&-1===r[e].search(/\/>/)?a=i?a+=r[e]:a+=s[o++]+r[e]:r[e].search(/<\w/)>-1&&r[e].search(/<\//)>-1?a=i?a+=r[e]:a+=s[o]+r[e]:r[e].search(/<\//)>-1?a=i?a+=r[e]:a+=s[--o]+r[e]:r[e].search(/\/>/)>-1?a=i?a+=r[e]:a+=s[o]+r[e]:r[e].search(/<\?/)>-1||r[e].search(/xmlns\:/)>-1||r[e].search(/xmlns\=/)>-1?a+=s[o]+r[e]:a+=r[e];return"\n"===a[0]?a.slice(1):a}(new(sp()).XMLSerializer().serializeToString(e));return t.download&&sc&&!sl&&cn(t.filename,r),"svg"===t.output?e:r},co=(e,...t)=>{let r=1===t.length&&typeof t[0]===a5?t[0]:s1(...t);return r&&e.setAttribute(se,r),e},ca=function(e){let t=e.getAttribute(se);return null==t?void 0:t.split(" ").map(e=>parseFloat(e))},cs=function(e,t,r){let n=e.createSVGPoint();n.x=t,n.y=r;let i=n.matrixTransform(e.getScreenCTM().inverse());return[i.x,i.y]};var cc=Object.freeze({__proto__:null,setViewBox:co,getViewBox:ca,convertToViewBox:cs});let cl=(e,t)=>{let r=ct(t);if(null!=r)return typeof r.then===a3?r.then(t=>s4(e,t)):s4(e,r)},cu=function(e){let t=ca(e);if(void 0!==t)return t;if(typeof e.getBoundingClientRect===a3){let t=e.getBoundingClientRect();return[t.x,t.y,t.width,t.height]}return[]},cf="svg-background-rectangle",cp=function(e){let t=e.getElementsByTagName(a7);return 0===t.length?void 0:t[0]},ch=function(e,t){let r=cp(e);return null==r&&(r=this.Constructor(a7),e.insertBefore(r,e.firstChild)),r.textContent="",r.appendChild(s2(t)),r},cd={vector:(...e)=>[...e]},cm={move:["mousemove","touchmove"],press:["mousedown","touchstart"],release:["mouseup","touchend"],leave:["mouseleave","touchcancel"]},cg=Object.values(cm).reduce((e,t)=>e.concat(t),[]),cv=(e,t,r)=>Object.defineProperty(e,t,{get:()=>r,enumerable:!0,configurable:!0}),c_=(e,t)=>{["pressX","pressY"].filter(t=>!Object.prototype.hasOwnProperty.call(e,t)).forEach((r,n)=>cv(e,r,t[n])),Object.prototype.hasOwnProperty.call(e,"press")||cv(e,"press",cd.vector(...t))},cy=function(e){let t=[],r=[];Object.keys(cm).forEach(e=>{cm[e].forEach(e=>{r[e]=[]})});let n={press:(e,r)=>{c_(e,t=r)},release:()=>{},leave:()=>{},move:(e,r)=>{e.buttons>0&&void 0===t[0]?t=r:0===e.buttons&&void 0!==t[0]&&(t=[]),c_(e,t)}};Object.keys(cm).forEach(t=>{Object.defineProperty(e,`on${sP.capitalized(t)}`,{set:i=>{null==i?cm[t].forEach(t=>r[t].forEach(r=>e.removeEventListener(t,r))):cm[t].forEach(o=>{let a=r=>{let o=null!=r.touches?r.touches[0]:r;if(void 0!==o){let i=cs(e,o.clientX,o.clientY).map(e=>Number.isNaN(e)?void 0:e);["x","y"].filter(e=>!Object.prototype.hasOwnProperty.call(r,e)).forEach((e,t)=>cv(r,e,i[t])),Object.prototype.hasOwnProperty.call(r,"position")||cv(r,"position",cd.vector(...i)),n[t](r,i)}i(r)};e.addEventListener&&(r[o].push(a),e.addEventListener(o,a))})},enumerable:!0})}),Object.defineProperty(e,"off",{value:()=>cg.forEach(t=>{r[t].forEach(r=>e.removeEventListener(t,r)),r[t]=[]})})};var cb=()=>Math.random().toString(36).replace(/[^a-z]+/g,"").concat("aaaaa").substr(0,5);let cE=function(e){let t,r,n={},i=0,o=()=>{sp().cancelAnimationFrame&&sp().cancelAnimationFrame(r),Object.keys(n).forEach(e=>delete n[e]),t=void 0,i=0};Object.defineProperty(e,"play",{set:e=>{if(o(),null==e)return;let a=cb();n[a]=o=>{t||(t=o,i=0),e({time:(o-t)*.001,frame:i}),i+=1,n[a]&&(r=sp().requestAnimationFrame(n[a]))},sp().requestAnimationFrame&&(r=sp().requestAnimationFrame(n[a]))},enumerable:!0}),Object.defineProperty(e,"stop",{value:o,enumerable:!0})},cx=[["cx","cy"],["x","y"]],cO=function(e,t={}){let r=[0,0],n={selected:!1,svg:void 0,updatePosition:e=>e},i=()=>{n.svg&&(n.svg.parentNode||e.appendChild(n.svg),cx.filter(e=>null!=n.svg[e[0]]).forEach(e=>e.forEach((e,t)=>{n.svg.setAttribute(e,r[t])})))},o=new Proxy(r,{set:(e,t,r)=>(e[t]=r,i(),!0)}),a=function(...e){s$(...sU(...e)).forEach((e,t)=>{r[t]=e}),i(),typeof r.delegate===a3&&r.delegate.apply(r.pointsContainer,[o,r.pointsContainer])};return r.delegate=void 0,r.setPosition=a,r.onMouseMove=e=>n.selected?a(n.updatePosition(e)):void 0,r.onMouseUp=()=>{n.selected=!1},r.distance=e=>Math.sqrt(sb(e,r)),["x","y"].forEach((e,t)=>Object.defineProperty(r,e,{get:()=>r[t],set:e=>{r[t]=e}})),["svg","updatePosition","selected"].forEach(e=>Object.defineProperty(r,e,{get:()=>n[e],set:t=>{n[e]=t}})),Object.defineProperty(r,"remove",{value:()=>{let e;(e=n.svg)&&e.parentNode&&e.parentNode.removeChild(e),r.delegate=void 0}}),o},ck=function(e,t,r){let n,i,o=Array.from(Array(t)).map(()=>cO(e,r)),a=e=>typeof i===a3?i.call(o,e,n,o):void 0;o.forEach(e=>{e.delegate=a,e.pointsContainer=o}),e.onPress=function(e){o.length>0&&(n=o.map((t,r)=>({i:r,d:sb(t,[e.x,e.y])})).sort((e,t)=>e.d-t.d).shift().i,o[n].selected=!0)},e.onMove=function(e){o.forEach(t=>t.onMouseMove(e))},e.onRelease=function(){o.forEach(e=>e.onMouseUp()),n=void 0},Object.defineProperty(o,"selectedIndex",{get:()=>n}),Object.defineProperty(o,"selected",{get:()=>o[n]}),Object.defineProperty(o,"add",{value:t=>{o.push(cO(e,t))}}),o.removeAll=()=>{for(;o.length>0;)o.pop().remove()};let s={onChange:(e,t)=>{if(i=e,!0===t){let t=o.length-1;e.call(o,o[t],t,o)}},position:e=>o.forEach((t,r)=>t.setPosition(e.call(o,t,r,o))),svg:e=>o.forEach((t,r)=>{t.svg=e.call(o,t,r,o)})};return Object.keys(s).forEach(e=>{o[e]=function(){return typeof arguments[0]===a3&&s[e](...arguments),o}}),o.parent=function(e){return null!=e&&null!=e.appendChild&&o.forEach(t=>{e.appendChild(t.svg)}),o},o},cM=(e,...t)=>{let r=t.map(e=>ce(e)).filter(e=>void 0!==e);return r.filter(e=>"svg"===e.tagName).forEach(t=>s8(e,t)),r.filter(e=>"svg"!==e.tagName).forEach(t=>e.appendChild(t)),e};var cA=Object.assign(Object.create(null),{svg:[se],line:["x1","y1","x2","y2"],rect:["x","y","width","height"],circle:["cx","cy","r"],ellipse:["cx","cy","rx","ry"],polygon:[sr],polyline:[sr],path:["d"],text:["x","y"],mask:["id"],symbol:["id"],clipPath:["id","clip-rule"],marker:["id","markerHeight","markerUnits","markerWidth","orient","refX","refY"],linearGradient:["x1","x2","y1","y2"],radialGradient:["cx","cy","r","fr","fx","fy"],stop:["offset","stop-color","stop-opacity"],pattern:["patternContentUnits","patternTransform","patternUnits"]});let cj=(e,t)=>(e.setAttribute(cA.circle[2],t),e),cP=(e,t,r)=>([...s$(...sU(t,r)).slice(0,2)].forEach((t,r)=>e.setAttribute(cA.circle[r],t)),e),cw=(e,t,r)=>([,,t,r].forEach((t,r)=>e.setAttribute(cA.ellipse[r],t)),e),cS=(e,t,r)=>([...s$(...sU(t,r)).slice(0,2)].forEach((t,r)=>e.setAttribute(cA.ellipse[r],t)),e),c$=(...e)=>s$(...sS(...e)).slice(0,4),cC=/[MmLlSsQqLlHhVvCcSsQqTtAaZz]/g,cL=/-?[0-9]*\.?\d+/g,cN={m:"move",l:"line",v:"vertical",h:"horizontal",a:"ellipse",c:"curve",s:"smoothCurve",q:"quadCurve",t:"smoothQuadCurve",z:"close"};Object.keys(cN).forEach(e=>{let t=cN[e];cN[e.toUpperCase()]=t.charAt(0).toUpperCase()+t.slice(1)});let cz=function(e){let t,r=[];for(;null!==(t=cC.exec(e));)r.push(t);return r.map(t=>({command:e[t.index],index:t.index})).reduceRight((t,r)=>{let n=e.substring(r.index,t.length?t[t.length-1].index:e.length);return t.concat([{command:r.command,index:r.index,chunk:n.length>0?n.substr(1,n.length-1):n}])},[]).reverse().map(e=>{let t=e.chunk.match(cL);return e.en=cN[e.command],e.values=t?t.map(parseFloat):[],delete e.chunk,e})},cF=e=>{let t=e.getAttribute("d");return null==t?"":t},cI=(e,t,...r)=>(e.setAttribute("d",`${cF(e)}${t}${sU(...r).join(" ")}`),e),cV=e=>cz(cF(e)),cB={addCommand:cI,appendCommand:cI,clear:e=>(e.removeAttribute("d"),e),getCommands:cV,get:cV,getD:e=>e.getAttribute("d")};Object.keys(cN).forEach(e=>{cB[cN[e]]=(t,...r)=>cI(t,e,...r)});let cq=(e,t,r)=>([,,t,r].forEach((t,r)=>e.setAttribute(cA.rect[r],t)),e),cT=(e,t,r)=>([...s$(...sU(t,r)).slice(0,2)].forEach((t,r)=>e.setAttribute(cA.rect[r],t)),e),cR=function(e){return[0,1].forEach(t=>{e[2+t]<0&&(void 0===e[0+t]&&(e[0+t]=0),e[0+t]+=e[2+t],e[2+t]=-e[2+t])}),e},cU=(...e)=>[function(){return Array.from(arguments).filter(e=>typeof e===a5||e instanceof String).shift()||cb()}(...e)],cD=(...e)=>[function(){return Array.from(Array(Math.floor(arguments.length/2))).map((e,t)=>`${arguments[2*t+0]},${arguments[2*t+1]}`).join(" ")}(...s$(...sS(...e)))],cG=(e,...t)=>(e.setAttribute(sr,cD(...t)[0]),e),cW=(e,...t)=>{let r;return e.setAttribute(sr,[null==(r=e.getAttribute(sr))?"":r,cD(...t)[0]].filter(e=>""!==e).join(" ")),e},cZ=function(...e){return 1===e.length&&typeof e[0]===a5?[e[0]]:cD(...e)};var cJ=Object.assign({},{svg:{args:(...e)=>[s1(s$(...e))].filter(e=>null!=e),methods:{clear:e=>(Array.from(e.attributes).filter(e=>"xmlns"!==e).forEach(t=>e.removeAttribute(t.name)),s3(e)),size:co,setViewBox:co,getViewBox:ca,padding:function(e,t){let r=ca(e);return void 0!==r&&co(e,...[-t,-t,2*t,2*t].map((e,t)=>r[t]+e)),e},background:function(e,t){let r=Array.from(e.childNodes).filter(e=>e.getAttribute(a2)===cf).shift();return null==r&&((r=this.Constructor("rect",null,...cu(e))).setAttribute(a2,cf),r.setAttribute(sn,si),e.insertBefore(r,e.firstChild)),r.setAttribute("fill",t),e},getWidth:e=>cu(e)[2],getHeight:e=>cu(e)[3],stylesheet:function(e,t){return ch.call(this,e,t)},load:cl,save:ci},init:(e,...t)=>{t.filter(e=>typeof e===a5).forEach(t=>cl(e,t)),t.filter(e=>null!=e).filter(e=>typeof e.appendChild===a3).forEach(t=>t.appendChild(e)),cy(e),cE(e),e.controls=(...t)=>ck.call(e,e,...t)}}},{g:{init:cM,methods:{load:cM}}},{circle:{args:(e,t,r,n)=>{let i=s$(...sU(e,t,r,n));switch(i.length){case 0:case 1:return[,,...i];case 2:case 3:return i;default:return((e,t,r,n)=>[e,t,sE([e,t],[r,n])])(...i)}},methods:{radius:cj,setRadius:cj,origin:cP,setOrigin:cP,center:cP,setCenter:cP,position:cP,setPosition:cP}}},{ellipse:{args:(e,t,r,n)=>{let i=s$(...sU(e,t,r,n)).slice(0,4);switch(i.length){case 0:case 1:case 2:return[,,...i];default:return i}},methods:{radius:cw,setRadius:cw,origin:cS,setOrigin:cS,center:cS,setCenter:cS,position:cS,setPosition:cS}}},{line:{args:c$,methods:{setPoints:(e,...t)=>(c$(...t).forEach((t,r)=>e.setAttribute(cA.line[r],t)),e)}}},{path:{methods:cB}},{rect:{args:(e,t,r,n)=>{let i=s$(...sU(e,t,r,n)).slice(0,4);switch(i.length){case 0:case 1:case 2:case 3:return cR([,,...i]);default:return cR(i)}},methods:{origin:cT,setOrigin:cT,center:cT,setCenter:cT,size:cq,setSize:cq}}},{style:{init:(e,t)=>{e.textContent="",e.appendChild(s2(t))},methods:{setTextContent:(e,t)=>(e.textContent="",e.appendChild(s2(t)),e)}}},{text:{args:(e,t,r)=>s$(...sU(e,t,r)).slice(0,2),init:(e,t,r,n,i)=>{let o=[t,r,n,i].filter(e=>typeof e===a5).shift();o&&e.appendChild(sp().document.createTextNode(o))}}},{mask:{args:cU},clipPath:{args:cU},symbol:{args:cU},marker:{args:cU,methods:{size:co,setViewBox:co}}},{polyline:{args:cZ,methods:{setPoints:cG,addPoint:cW}},polygon:{args:cZ,methods:{setPoints:cG,addPoint:cW}}}),cH=["color","color-interpolation","cursor","direction","display","fill","fill-opacity","fill-rule","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","image-rendering","letter-spacing","opacity","overflow","paint-order","pointer-events","preserveAspectRatio","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tabindex","transform-origin","user-select","vector-effect","visibility"],cY=["azimuth","baseFrequency","bias","color-interpolation-filters","diffuseConstant","divisor","edgeMode","elevation","exponent","filter","filterRes","filterUnits","flood-color","flood-opacity","in","in2","intercept","k1","k2","k3","k4","kernelMatrix","lighting-color","limitingConeAngle","mode","numOctaves","operator","order","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","primitiveUnits","radius","result","seed","specularConstant","specularExponent","stdDeviation","stitchTiles","surfaceScale","targetX","targetY","type","xChannelSelector","yChannelSelector"];Object.values(sd).reduce((e,t)=>e.concat(t),[]).filter(e=>void 0===cA[e]).forEach(e=>{cA[e]=[]}),[[["svg","defs","g"].concat(sd.v,sd.t),cH],[["filter"],cY],[sd.cT.concat("text"),["dx","dy","alignment-baseline","baseline-shift","dominant-baseline","lengthAdjust","method","overline-position","overline-thickness","rotate","spacing","startOffset","strikethrough-position","strikethrough-thickness","text-anchor","text-decoration","text-rendering","textLength","underline-position","underline-thickness","word-spacing","writing-mode"]],[sd.cF,cY],[sd.cG,["gradientTransform","gradientUnits","spreadMethod"]]].forEach(e=>e[0].forEach(t=>{cA[t]=cA[t].concat(e[1])}));let cX=e=>{if(null==e)return[];let t=e.getAttribute(a2);return null==t?[]:t.split(" ").filter(e=>""!==e)};var cK={addClass:(e,t)=>{let r=cX(e).filter(e=>e!==t);r.push(t),e.setAttributeNS(null,a2,r.join(" "))},removeClass:(e,t)=>{let r=cX(e).filter(e=>e!==t);e.setAttributeNS(null,a2,r.join(" "))},setClass:(e,t)=>{e.setAttributeNS(null,a2,t)},setId:(e,t)=>{e.setAttributeNS(null,"id",t)}};let cQ={clearTransform:e=>(e.removeAttribute(st),e)};["translate","rotate","scale","matrix"].forEach(e=>{cQ[e]=(t,...r)=>{let n;return t.setAttribute(st,[null==(n=t.getAttribute(st))||""===n?void 0:n,`${e}(${r.join(" ")})`].filter(e=>void 0!==e).join(" "))}});let c0=function(e){if(null==e)return"";if(typeof e===a5)return"url"===e.slice(0,3)?e:`url(#${e})`;if(null!=e.getAttribute){let t=e.getAttribute("id");return`url(#${t})`}return""},c1={};["clip-path","mask","symbol","marker-end","marker-mid","marker-start"].forEach(e=>{c1[sP.toCamel(e)]=(t,r)=>t.setAttribute(e,c0(r))});let c2={};sd.v.push(...Object.keys(sJ)),Object.keys(sJ).forEach(e=>{sJ[e].attributes=void 0===sJ[e].attributes?[...cH]:sJ[e].attributes.concat(cH)}),Object.assign(c2,cJ,sJ),Object.keys(sd).forEach(e=>sd[e].filter(e=>void 0===c2[e]).forEach(e=>{c2[e]={}}));let c3=function(){return Array.from(arguments)};Object.keys(c2).forEach(e=>{c2[e].nodeName||(c2[e].nodeName=e),c2[e].init||(c2[e].init=c3),c2[e].args||(c2[e].args=c3),c2[e].methods||(c2[e].methods={}),c2[e].attributes||(c2[e].attributes=cA[e]||[])});let c8=(e,t)=>{e.forEach(e=>Object.keys(t).forEach(r=>{c2[e].methods[r]=function(){return t[r](...arguments),arguments[0]}}))};c8(sU(sd.t,sd.v,sd.g,sd.s,sd.p,sd.i,sd.h,sd.d),cK),c8(sU(sd.t,sd.v,sd.g,sd.s,sd.p,sd.i,sd.h,sd.d),s5),c8(sU(sd.v,sd.g,sd.s),cQ),c8(sU(sd.t,sd.v,sd.g),c1);let c4={svg:{version:"1.1",xmlns:sh},style:{type:"text/css"}},c5={},c6=(e,t,...r)=>{let n=sp().document.createElementNS(sh,c2[e].nodeName);return t&&t.appendChild(n),c4[e]&&Object.keys(c4[e]).forEach(t=>n.setAttribute(t,c4[e][t])),c2[e].init(n,...r),c2[e].args(...r).forEach((t,r)=>{null!=c2[e].attributes[r]&&n.setAttribute(c2[e].attributes[r],t)}),c2[e].attributes.forEach(e=>{Object.defineProperty(n,sP.toCamel(e),{value:function(){return n.setAttribute(e,...arguments),n}})}),Object.keys(c2[e].methods).forEach(t=>Object.defineProperty(n,t,{value:function(){return c2[e].methods[t].call(c5,n,...arguments)}})),sQ[e]&&sQ[e].forEach(e=>{let t=function(){return c6(e,n,...arguments)};c2[e].static&&Object.keys(c2[e].static).forEach(r=>{t[r]=function(){return c2[e].static[r](n,...arguments)}}),Object.defineProperty(n,e,{value:t})}),n};c5.Constructor=c6;let c9={};Object.keys(sd).forEach(e=>sd[e].forEach(e=>{c9[e]=(...t)=>c6(e,null,...t)}));let c7=function(e,...t){t.filter(e=>typeof e===a3).forEach(t=>t.call(e,e))};a0.init=function(){let e=c6("svg",null,...arguments);return"loading"===sp().document.readyState?sp().document.addEventListener("DOMContentLoaded",()=>c7(e,...arguments)):c7(e,...arguments),e},a1.NS=sh,a1.linker=(function(e){if(e.graph&&e.origami){var t,r;let n;e.svg=this,t=this,["segment","circle","ellipse","rect","polygon"].filter(t=>e[t]&&e[t].prototype).forEach(r=>{e[r].prototype.svg=function(){return t.path(this.svgPath())}}),cd.vector=e.vector,r=this,c2[n="origami"]={nodeName:"g",init:function(t,...r){return e.graph.svg.drawInto(t,...r)},args:()=>[],methods:c2.g.methods,attributes:c2.g.attributes,static:{}},Object.keys(e.graph.svg).forEach(t=>{c2[n].static[t]=(r,...n)=>{let i=e.graph.svg[t](...n);return r.appendChild(i),i}}),sQ[n]=[...sQ.g],sQ.svg.push(n),sQ.g.push(n),r[n]=(...e)=>c6(n,null,...e),Object.keys(e.graph.svg).forEach(t=>{r[n][t]=e.graph.svg[t]})}}).bind(a1),Object.assign(a1,c9),a1.core=Object.assign(Object.create(null),{load:ct,save:ci,coordinates:s$,flatten:sU,attributes:cA,children:sQ,cdata:s2},sP,cK,s5,sO,cQ,cc),Object.defineProperty(a1,"window",{enumerable:!1,set:e=>{let t;(t=e).document||(t.document=new t.DOMParser().parseFromString("<!DOCTYPE html><title>.</title>","text/html")),sf.window=t,sf.window}});var le=Object.freeze({__proto__:null,make_faces_geometry:e=>{let{THREE:t}=P(),r=e.vertices_coords.map(e=>[e[0],e[1],e[2]||0]).flat(),n=e.vertices_coords.map(()=>[0,0,1]).flat(),i=e.vertices_coords.map(()=>[1,1,1]).flat(),o=e.faces_vertices.map(e=>e.map((e,t,r)=>[r[0],r[t+1],r[t+2]]).slice(0,e.length-2)).flat(2),a=new t.BufferGeometry;return a.setAttribute("position",new t.Float32BufferAttribute(r,3)),a.setAttribute("normal",new t.Float32BufferAttribute(n,3)),a.setAttribute("color",new t.Float32BufferAttribute(i,3)),a.setIndex(o),a},make_edges_geometry:function({vertices_coords:e,edges_vertices:t,edges_assignment:r,edges_coords:n,edges_vector:i},o=.002,a=0){let{THREE:s}=P();n||(n=t.map(t=>t.map(t=>e[t]))),i||(i=n.map(e=>rj.core.subtract(e[1],e[0]))),n=n.map(e=>e.map(e=>rj.core.resize(3,e))),i=i.map(e=>rj.core.resize(3,e));let c={B:[0,0,0],M:[0,0,0],F:[0,0,0],V:[0,0,0]},l=r.map(e=>[c[e],c[e],c[e],c[e],c[e],c[e],c[e],c[e]]).flat(3),u=n.map((e,t)=>((e,t,r,n=0)=>{if(rj.core.magSquared(t)<rj.core.EPSILON)return[];let i=rj.core.normalize(t),o=[[1,0,0],[0,1,0],[0,0,1]].map(e=>rj.core.cross3(e,i)).sort((e,t)=>rj.core.magnitude(t)-rj.core.magnitude(e)).shift(),a=[rj.core.normalize(o)];for(let e=1;e<4;e+=1)a.push(rj.core.cross3(a[e-1],i));let s=a.map(e=>rj.core.scale(e,r)),c=[-n,n].map(e=>rj.core.scale(i,e));return(0===n?e:e.map((e,t)=>rj.core.add(e,c[t]))).map(e=>s.map(t=>rj.core.add(e,t))).flat()})(e,i[t],o,a)).flat(2),f=i.map(e=>{if(rj.core.magSquared(e)<rj.core.EPSILON)throw Error("degenerate edge");rj.core.normalize(e);let t=rj.core.scale(rj.core.normalize(rj.core.cross3(e,[0,0,-1])),o),r=rj.core.scale(rj.core.normalize(rj.core.cross3(e,[0,0,1])),o);return[t,[-t[2],t[1],t[0]],r,[-r[2],r[1],r[0]],t,[-t[2],t[1],t[0]],r,[-r[2],r[1],r[0]]]}).flat(2),p=n.map((e,t)=>[8*t+0,8*t+4,8*t+1,8*t+1,8*t+4,8*t+5,8*t+1,8*t+5,8*t+2,8*t+2,8*t+5,8*t+6,8*t+2,8*t+6,8*t+3,8*t+3,8*t+6,8*t+7,8*t+3,8*t+7,8*t+0,8*t+0,8*t+7,8*t+4,8*t+0,8*t+1,8*t+3,8*t+1,8*t+2,8*t+3,8*t+5,8*t+4,8*t+7,8*t+7,8*t+6,8*t+5]).flat(),h=new s.BufferGeometry;return h.setAttribute("position",new s.Float32BufferAttribute(u,3)),h.setAttribute("normal",new s.Float32BufferAttribute(f,3)),h.setAttribute("color",new s.Float32BufferAttribute(l,3)),h.setIndex(p),h.computeVertexNormals(),h}});let lt=Object.assign(w,oA,{math:rj.core,axiom:oW,diagram:oK,layer:aA,singleVertex:aP,text:{axioms:{ar:[null,"اصنع خطاً يمر بنقطتين","اصنع خطاً عن طريق طي نقطة واحدة إلى أخرى","اصنع خطاً عن طريق طي خط واحد على آخر","اصنع خطاً يمر عبر نقطة واحدة ويجعل خطاً واحداً فوق نفسه","اصنع خطاً يمر بالنقطة الأولى ويجعل النقطة الثانية على الخط","اصنع خطاً يجلب النقطة الأولى إلى الخط الأول والنقطة الثانية إلى الخط الثاني","اصنع خطاً يجلب نقطة إلى خط ويجعل خط ثاني فوق نفسه"],de:[null,"Falte eine Linie durch zwei Punkte","Falte zwei Punkte aufeinander","Falte zwei Linien aufeinander","Falte eine Linie auf sich selbst, falte dabei durch einen Punkt","Falte einen Punkt auf eine Linie, falte dabei durch einen anderen Punkt","Falte einen Punkt auf eine Linie und einen weiteren Punkt auf eine weitere Linie","Falte einen Punkt auf eine Linie und eine weitere Linie in sich selbst zusammen"],en:[null,"fold a line through two points","fold two points together","fold two lines together","fold a line on top of itself, creasing through a point","fold a point to a line, creasing through another point","fold a point to a line and another point to another line","fold a point to a line and another line onto itself"],es:[null,"dobla una l\xednea entre dos puntos","dobla dos puntos juntos","dobla y une dos l\xedneas","dobla una l\xednea sobre s\xed misma, dobl\xe1ndola hacia un punto","dobla un punto hasta una l\xednea, dobl\xe1ndola a trav\xe9s de otro punto","dobla un punto hacia una l\xednea y otro punto hacia otra l\xednea","dobla un punto hacia una l\xednea y otra l\xednea sobre s\xed misma"],fr:[null,"cr\xe9ez un pli passant par deux points","pliez pour superposer deux points","pliez pour superposer deux lignes","rabattez une ligne sur elle-m\xeame \xe0 l'aide d'un pli qui passe par un point","rabattez un point sur une ligne \xe0 l'aide d'un pli qui passe par un autre point","rabattez un point sur une ligne et un autre point sur une autre ligne","rabattez un point sur une ligne et une autre ligne sur elle-m\xeame"],hi:[null,"एक क्रीज़ बनाएँ जो दो स्थानों से गुजरता है","एक स्थान को दूसरे स्थान पर मोड़कर एक क्रीज़ बनाएँ","एक रेखा पर दूसरी रेखा को मोड़कर क्रीज़ बनाएँ","एक क्रीज़ बनाएँ जो एक स्थान से गुजरता है और एक रेखा को स्वयं के ऊपर ले आता है","एक क्रीज़ बनाएँ जो पहले स्थान से गुजरता है और दूसरे स्थान को रेखा पर ले आता है","एक क्रीज़ बनाएँ जो पहले स्थान को पहली रेखा पर और दूसरे स्थान को दूसरी रेखा पर ले आता है","एक क्रीज़ बनाएँ जो एक स्थान को एक रेखा पर ले आता है और दूसरी रेखा को स्वयं के ऊपर ले आता है"],jp:[null,"2点に沿って折り目を付けます","2点を合わせて折ります","2つの線を合わせて折ります","点を通過させ、既にある線に沿って折ります","点を線沿いに合わせ別の点を通過させ折ります","線に向かって点を折り、同時にもう一方の線に向かってもう一方の点を折ります","線に向かって点を折り、同時に別の線をその上に折ります"],ko:[null,"두 점을 통과하는 선으로 접으세요","두 점을 함께 접으세요","두 선을 함께 접으세요","그 위에 선을 접으면서 점을 통과하게 접으세요","점을 선으로 접으면서, 다른 점을 지나게 접으세요","점을 선으로 접고 다른 점을 다른 선으로 접으세요","점을 선으로 접고 다른 선을 그 위에 접으세요"],ms:[null,"lipat garisan melalui dua titik","lipat dua titik bersama","lipat dua garisan bersama","lipat satu garisan di atasnya sendiri, melipat melalui satu titik","lipat satu titik ke garisan, melipat melalui titik lain","lipat satu titik ke garisan dan satu lagi titik ke garisan lain","lipat satu titik ke garisan dan satu lagi garisan di atasnya sendiri"],pt:[null,"dobre uma linha entre dois pontos","dobre os dois pontos para uni-los","dobre as duas linhas para uni-las","dobre uma linha sobre si mesma, criando uma dobra ao longo de um ponto","dobre um ponto at\xe9 uma linha, criando uma dobra ao longo de outro ponto","dobre um ponto at\xe9 uma linha e outro ponto at\xe9 outra linha","dobre um ponto at\xe9 uma linha e outra linha sobre si mesma"],ru:[null,"сложите линию через две точки","сложите две точки вместе","сложите две линии вместе","сверните линию сверху себя, сгибая через точку","сложите точку в линию, сгибая через другую точку","сложите точку в линию и другую точку в другую линию","сложите точку в линию и другую линию на себя"],tr:[null,"iki noktadan ge\xe7en bir \xe7izgi boyunca katla","iki noktayı birbirine katla","iki \xe7izgiyi birbirine katla","bir noktadan kıvırarak kendi \xfczerindeki bir \xe7izgi boyunca katla","başka bir noktadan kıvırarak bir noktayı bir \xe7izgiye katla","bir noktayı bir \xe7izgiye ve başka bir noktayı başka bir \xe7izgiye katla","bir noktayı bir \xe7izgiye ve başka bir \xe7izgiyi kendi \xfczerine katla"],vi:[null,"tạo một nếp gấp đi qua hai điểm","tạo nếp gấp bằng c\xe1ch gấp một điểm n\xe0y sang điểm kh\xe1c","tạo nếp gấp bằng c\xe1ch gấp một đường l\xean một đường kh\xe1c","tạo một nếp gấp đi qua một điểm v\xe0 đưa một đường l\xean tr\xean ch\xednh n\xf3","tạo một nếp gấp đi qua điểm đầu ti\xean v\xe0 đưa điểm thứ hai l\xean đường thẳng","tạo một nếp gấp mang điểm đầu ti\xean đến đường đầu ti\xean v\xe0 điểm thứ hai cho đường thứ hai","tạo một nếp gấp mang lại một điểm cho một đường v\xe0 đưa một đường thứ hai l\xean tr\xean ch\xednh n\xf3"],zh:[null,"通過兩點折一條線","將兩點折疊起來","將兩條線折疊在一起","通過一個點折疊一條線在自身上面","將一個點，通過另一個點折疊成一條線，","將一個點折疊為一條線，再將另一個點折疊到另一條線","將一個點折疊成一條線，另一條線折疊到它自身上"]},instructions:{fold:{es:"doblez"},"valley fold":{es:"doblez de valle",zh:"谷摺"},"mountain fold":{es:"doblez de monta\xf1a",zh:"山摺"},"inside reverse fold":{zh:"內中割摺"},"outside reverse fold":{zh:"外中割摺"},sink:{},"open sink":{zh:"開放式沉壓摺"},"closed sink":{zh:"封閉式沉壓摺"},"rabbit ear":{zh:"兔耳摺"},"double rabbit ear":{zh:"雙兔耳摺"},"petal fold":{zh:"花瓣摺"},blintz:{zh:"坐墊基"},squash:{zh:"壓摺"},"flip over":{es:"dale la vuelta a tu papel"}}},webgl:le});Object.keys(rj).filter(e=>"core"!==e).forEach(e=>{lt[e]=rj[e]}),Object.defineProperty(lt,"use",{enumerable:!1,value:(function(e){null!=e&&"function"==typeof e.linker&&e.linker(this)}).bind(lt)}),M||(lt.use(aQ),lt.use(a1)),Object.defineProperty(lt,"window",{enumerable:!1,set:e=>{let t;(t=e).document||(t.document=new t.DOMParser().parseFromString("<!DOCTYPE html><title>.</title>","text/html")),j.window=t,j.window,a1.window=e}})}}]);